var e=require("child_process"),t=require("electron"),n=require("fs"),r=require("atom"),i=require("path"),o=require("url"),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){(0,Eo.migrateConfig)()&&atom.notifications.addInfo("Markdown-Preivew-Plus has updated your config to a new format. Please check if everything is in order. This message will not be shown again.",{dismissable:!0});atom.packages.isPackageActive("markdown-preview")&&Oo.handlePromise(atom.packages.deactivatePackage("markdown-preview"));atom.packages.isPackageDisabled("markdown-preview")||(atom.packages.disablePackage("markdown-preview"),atom.notifications.addInfo("Markdown-preview-plus has disabled markdown-preview package.",{dismissable:!0}));Ua=new xo.CompositeDisposable,Ua.add(atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle":qa}),atom.commands.add("atom-workspace",{"markdown-preview-plus:open-configuration":()=>{Oo.handlePromise(atom.workspace.open("atom://config/packages/markdown-preview-plus"))},"markdown-preview-plus:edit-macros":()=>{Oo.handlePromise(atom.workspace.open((0,ge.getUserMacrosPath)(atom.getConfigDirPath())))},"markdown-preview-plus:select-syntax-theme":async()=>{try{const e=atom.themes.getLoadedThemeNames();if(void 0===e)return;const t=await(0,To.selectListView)(e.filter(e=>e.match(/-syntax$/)));if(void 0===t)return;atom.config.set("markdown-preview-plus.syntaxThemeName",t)}catch(e){const t=e;atom.notifications.addFatalError(t.name,{detail:t.message,stack:t.stack})}}}),atom.commands.add("atom-text-editor",{"markdown-preview-plus:toggle-render-latex":e=>{const t=e.currentTarget.getModel(),n=(0,d.viewForEditor)(t);n&&n.toggleRenderLatex()}}),atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle-render-latex":e=>{const t=d.MarkdownPreviewView.viewForElement(e.currentTarget);t&&t.toggleRenderLatex()}}),atom.commands.add(".tree-view",{"markdown-preview-plus:preview-file":Ja,"markdown-preview-plus:make-pdf":Qa}),atom.workspace.addOpener(Za),atom.config.observe("markdown-preview-plus.grammars",Ka(Xa)),atom.config.observe("markdown-preview-plus.extensions",Ka(Ga)))};exports.activate=s;var u=function(){ii.MarkdownItWorker.destroy(),Ua&&Ua.dispose(),Ua=void 0,zi.BrowserWindowHandler.clean()};exports.deactivate=u;var c=function(e){if(void 0!==e.editorId)return new Co.PlaceholderView(e.editorId);if(e.filePath&&Oo.isFileSync(e.filePath))return(0,d.createFileView)(e.filePath);if(e.text)return(0,d.createTextView)(e.text);return};exports.createMarkdownPreviewView=c;var l=function(e){if(!Ua)return;if(atom.config.get("markdown-preview-plus.disableToolBarIntegration"))return;const t=e("markdown-preview-plus");t.addButton({icon:"markdown",callback:"markdown-preview-plus:toggle",tooltip:"Markdown Preview"}),Ua.add(new xo.Disposable((function(){t.removeItems()})))};exports.consumeToolBar=l,Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return Ba.config}});var f=$a(o),d={};Object.defineProperty(d,"__esModule",{value:!0});var h={MarkdownPreviewView:!0};Object.defineProperty(d,"MarkdownPreviewView",{enumerable:!0,get:function(){return p.MarkdownPreviewView}});var p={};Object.defineProperty(p,"__esModule",{value:!0});var v=void 0;p.MarkdownPreviewView=v;var m=_o(i),g=r,y=function(){var e=this,t={exports:this};return function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=16,u=32,c=64,l=128,f=256,d=1/0,h=9007199254740991,p=NaN,v=4294967295,m=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",c],["rearg",f]],g="[object Arguments]",y="[object Array]",w="[object Boolean]",b="[object Date]",k="[object Error]",_="[object Function]",S="[object GeneratorFunction]",x="[object Map]",P="[object Number]",O="[object Object]",C="[object Promise]",M="[object RegExp]",E="[object Set]",I="[object String]",A="[object Symbol]",L="[object WeakMap]",T="[object ArrayBuffer]",j="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",D="[object Int16Array]",B="[object Int32Array]",W="[object Uint8Array]",z="[object Uint8ClampedArray]",$="[object Uint16Array]",U="[object Uint32Array]",q=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(J.source),G=RegExp(Y.source),X=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+|\s+$/g,ae=/^\s+/,se=/\s+$/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="['’]",Ie="[\\ud800-\\udfff]",Ae="["+Me+"]",Le="["+Se+"]",Te="\\d+",je="[\\u2700-\\u27bf]",Ne="["+Pe+"]",Re="[^\\ud800-\\udfff"+Me+Te+xe+Pe+Oe+"]",Fe="\\ud83c[\\udffb-\\udfff]",De="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Oe+"]",$e="(?:"+Ne+"|"+Re+")",Ue="(?:"+ze+"|"+Re+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Le+"|"+Fe+")"+"?",Je="[\\ufe0e\\ufe0f]?",Ye=Je+Ve+("(?:\\u200d(?:"+[De,Be,We].join("|")+")"+Je+Ve+")*"),Ke="(?:"+[je,Be,We].join("|")+")"+Ye,Ge="(?:"+[De+Le+"?",Le,Be,We,Ie].join("|")+")",Xe=RegExp(Ee,"g"),Qe=RegExp(Le,"g"),Ze=RegExp(Fe+"(?="+Fe+")|"+Ge+Ye,"g"),et=RegExp([ze+"?"+Ne+"+"+qe+"(?="+[Ae,ze,"$"].join("|")+")",Ue+"+"+He+"(?="+[Ae,ze+$e,"$"].join("|")+")",ze+"?"+$e+"+"+qe,ze+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Te,Ke].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Se+Ce+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[N]=ot[R]=ot[F]=ot[D]=ot[B]=ot[W]=ot[z]=ot[$]=ot[U]=!0,ot[g]=ot[y]=ot[T]=ot[w]=ot[j]=ot[b]=ot[k]=ot[_]=ot[x]=ot[P]=ot[O]=ot[M]=ot[E]=ot[I]=ot[L]=!1;var at={};at[g]=at[y]=at[T]=at[j]=at[w]=at[b]=at[N]=at[R]=at[F]=at[D]=at[B]=at[x]=at[P]=at[O]=at[M]=at[E]=at[I]=at[A]=at[W]=at[z]=at[$]=at[U]=!0,at[k]=at[_]=at[L]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ct=parseInt,lt="object"==typeof a&&a&&a.Object===Object&&a,ft="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ft||Function("return this")(),ht="object"==typeof e&&e&&!e.nodeType&&e,pt=ht&&"object"==typeof t&&t&&!t.nodeType&&t,vt=pt&&pt.exports===ht,mt=vt&&lt.process,gt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,wt=gt&&gt.isDate,bt=gt&&gt.isMap,kt=gt&&gt.isRegExp,_t=gt&&gt.isSet,St=gt&&gt.isTypedArray;function xt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Et(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function It(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function At(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Tt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Nt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Dt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,$t,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function $t(e){return e!=e}function Ut(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:p}function qt(e){return function(t){return null==t?n:t[e]}}function Ht(e){return function(t){return null==e?n:e[t]}}function Vt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Jt(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return function(t){return e(t)}}function Gt(e,t){return Lt(t,(function(t){return e[t]}))}function Xt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Wt(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length;n--&&Wt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var tn=Ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(e){return"\\"+st[e]}function on(e){return tt.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[i++]=n)}return a}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return on(e)?function(e){var t=Ze.lastIndex=0;for(;Ze.test(e);)++t;return t}(e):Ft(e)}function dn(e){return on(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}var hn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pn=function e(t){var a,Se=(t=null==t?dt:pn.defaults(dt.Object(),t,pn.pick(dt,rt))).Array,xe=t.Date,Pe=t.Error,Oe=t.Function,Ce=t.Math,Me=t.Object,Ee=t.RegExp,Ie=t.String,Ae=t.TypeError,Le=Se.prototype,Te=Oe.prototype,je=Me.prototype,Ne=t["__core-js_shared__"],Re=Te.toString,Fe=je.hasOwnProperty,De=0,Be=(a=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",We=je.toString,ze=Re.call(Me),$e=dt._,Ue=Ee("^"+Re.call(Fe).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=vt?t.Buffer:n,He=t.Symbol,Ve=t.Uint8Array,Je=qe?qe.allocUnsafe:n,Ye=sn(Me.getPrototypeOf,Me),Ke=Me.create,Ge=je.propertyIsEnumerable,Ze=Le.splice,tt=He?He.isConcatSpreadable:n,st=He?He.iterator:n,lt=He?He.toStringTag:n,ft=function(){try{var e=ho(Me,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,pt=xe&&xe.now!==dt.Date.now&&xe.now,mt=t.setTimeout!==dt.setTimeout&&t.setTimeout,gt=Ce.ceil,Ft=Ce.floor,Ht=Me.getOwnPropertySymbols,vn=qe?qe.isBuffer:n,mn=t.isFinite,gn=Le.join,yn=sn(Me.keys,Me),wn=Ce.max,bn=Ce.min,kn=xe.now,_n=t.parseInt,Sn=Ce.random,xn=Le.reverse,Pn=ho(t,"DataView"),On=ho(t,"Map"),Cn=ho(t,"Promise"),Mn=ho(t,"Set"),En=ho(t,"WeakMap"),In=ho(Me,"create"),An=En&&new En,Ln={},Tn=Wo(Pn),jn=Wo(On),Nn=Wo(Cn),Rn=Wo(Mn),Fn=Wo(En),Dn=He?He.prototype:n,Bn=Dn?Dn.valueOf:n,Wn=Dn?Dn.toString:n;function zn(e){if(rs(e)&&!Va(e)&&!(e instanceof Hn)){if(e instanceof qn)return e;if(Fe.call(e,"__wrapped__"))return zo(e)}return new qn(e)}var $n=function(){function e(){}return function(t){if(!ns(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Un(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Jn(e);this.size=t.size}function Xn(e,t){var n=Va(e),r=!n&&Ha(e),i=!n&&!r&&Ga(e),o=!n&&!r&&!i&&fs(e),a=n||r||i||o,s=a?Yt(e.length,Ie):[],u=s.length;for(var c in e)!t&&!Fe.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bo(c,u))||s.push(c);return s}function Qn(e){var t=e.length;return t?e[Kr(0,t-1)]:n}function Zn(e,t){return Fo(Ii(e),ur(t,0,e.length))}function er(e){return Fo(Ii(e))}function tr(e,t,r){(r!==n&&!$a(e[t],r)||r===n&&!(t in e))&&ar(e,t,r)}function nr(e,t,r){var i=e[t];Fe.call(e,t)&&$a(i,r)&&(r!==n||t in e)||ar(e,t,r)}function rr(e,t){for(var n=e.length;n--;)if($a(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ai(t,Ts(t),e)}function ar(e,t,n){"__proto__"==t&&ft?ft(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,o=Se(i),a=null==e;++r<i;)o[r]=a?n:Ms(e,t[r]);return o}function ur(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function cr(e,t,r,i,o,a){var s,u=1&t,c=2&t,l=4&t;if(r&&(s=o?r(e,i,o,a):r(e)),s!==n)return s;if(!ns(e))return e;var f=Va(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ii(e,s)}else{var d=mo(e),h=d==_||d==S;if(Ga(e))return xi(e,u);if(d==O||d==g||h&&!o){if(s=c||h?{}:yo(e),!u)return c?function(e,t){return Ai(e,vo(e),t)}(e,function(e,t){return e&&Ai(t,js(t),e)}(s,e)):function(e,t){return Ai(e,po(e),t)}(e,or(s,e))}else{if(!at[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case T:return Pi(e);case w:case b:return new r(+e);case j:return function(e,t){var n=t?Pi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case D:case B:case W:case z:case $:case U:return Oi(e,n);case x:return new r;case P:case I:return new r(e);case M:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new r;case A:return i=e,Bn?Me(Bn.call(i)):{}}var i}(e,d,u)}}a||(a=new Gn);var p=a.get(e);if(p)return p;a.set(e,s),us(e)?e.forEach((function(n){s.add(cr(n,t,r,n,e,a))})):is(e)&&e.forEach((function(n,i){s.set(i,cr(n,t,r,i,e,a))}));var v=f?n:(l?c?oo:io:c?js:Ts)(e);return Ot(v||e,(function(n,i){v&&(n=e[i=n]),nr(s,i,cr(n,t,r,i,e,a))})),s}function lr(e,t,r){var i=r.length;if(null==e)return!i;for(e=Me(e);i--;){var o=r[i],a=t[o],s=e[o];if(s===n&&!(o in e)||!a(s))return!1}return!0}function fr(e,t,i){if("function"!=typeof e)throw new Ae(r);return To((function(){e.apply(n,i)}),t)}function dr(e,t,n,r){var i=-1,o=It,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Lt(t,Kt(n))),r?(o=At,a=!1):t.length>=200&&(o=Xt,a=!1,t=new Kn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}zn.templateSettings={escape:X,evaluate:Q,interpolate:Z,variable:"",imports:{_:zn}},zn.prototype=Un.prototype,zn.prototype.constructor=zn,qn.prototype=$n(Un.prototype),qn.prototype.constructor=qn,Hn.prototype=$n(Un.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Vn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vn.prototype.get=function(e){var t=this.__data__;if(In){var r=t[e];return r===i?n:r}return Fe.call(t,e)?t[e]:n},Vn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==n:Fe.call(t,e)},Vn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=In&&t===n?i:t,this},Jn.prototype.clear=function(){this.__data__=[],this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Jn.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?n:t[r][1]},Jn.prototype.has=function(e){return rr(this.__data__,e)>-1},Jn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(On||Jn),string:new Vn}},Yn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return lo(this,e).get(e)},Yn.prototype.has=function(e){return lo(this,e).has(e)},Yn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,i),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Jn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Jn){var r=n.__data__;if(!On||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var hr=ji(kr),pr=ji(_r,!0);function vr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(u===n?s==s&&!ls(s):r(s,u)))var u=s,c=a}return c}function gr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=wo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Tt(i,s):r||(i[i.length]=s)}return i}var wr=Ni(),br=Ni(!0);function kr(e,t){return e&&wr(e,t,Ts)}function _r(e,t){return e&&br(e,t,Ts)}function Sr(e,t){return Et(t,(function(t){return Za(e[t])}))}function xr(e,t){for(var r=0,i=(t=bi(t,e)).length;null!=e&&r<i;)e=e[Bo(t[r++])];return r&&r==i?e:n}function Pr(e,t,n){var r=t(e);return Va(e)?r:Tt(r,n(e))}function Or(e){return null==e?e===n?"[object Undefined]":"[object Null]":lt&&lt in Me(e)?function(e){var t=Fe.call(e,lt),r=e[lt];try{e[lt]=n;var i=!0}catch(e){}var o=We.call(e);i&&(t?e[lt]=r:delete e[lt]);return o}(e):function(e){return We.call(e)}(e)}function Cr(e,t){return e>t}function Mr(e,t){return null!=e&&Fe.call(e,t)}function Er(e,t){return null!=e&&t in Me(e)}function Ir(e,t,r){for(var i=r?At:It,o=e[0].length,a=e.length,s=a,u=Se(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=Lt(f,Kt(t))),c=bn(f.length,c),u[s]=!r&&(t||o>=120&&f.length>=120)?new Kn(s&&f):n}f=e[0];var d=-1,h=u[0];e:for(;++d<o&&l.length<c;){var p=f[d],v=t?t(p):p;if(p=r||0!==p?p:0,!(h?Xt(h,v):i(l,v,r))){for(s=a;--s;){var m=u[s];if(!(m?Xt(m,v):i(e[s],v,r)))continue e}h&&h.push(v),l.push(p)}}return l}function Ar(e,t,r){var i=null==(e=Eo(e,t=bi(t,e)))?e:e[Bo(Qo(t))];return null==i?n:xt(i,e,r)}function Lr(e){return rs(e)&&Or(e)==g}function Tr(e,t,r,i,o){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var s=Va(e),u=Va(t),c=s?y:mo(e),l=u?y:mo(t),f=(c=c==g?O:c)==O,d=(l=l==g?O:l)==O,h=c==l;if(h&&Ga(e)){if(!Ga(t))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Gn),s||fs(e)?no(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case w:case b:case P:return $a(+e,+t);case k:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case x:var s=an;case E:var u=1&r;if(s||(s=cn),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=no(s(e),s(t),r,i,o,a);return a.delete(e),l;case A:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,c,r,i,o,a);if(!(1&r)){var p=f&&Fe.call(e,"__wrapped__"),v=d&&Fe.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,_=v?t.value():t;return a||(a=new Gn),o(m,_,r,i,a)}}if(!h)return!1;return a||(a=new Gn),function(e,t,r,i,o,a){var s=1&r,u=io(e),c=u.length,l=io(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var d=u[f];if(!(s?d in t:Fe.call(t,d)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);var m=s;for(;++f<c;){var g=e[d=u[f]],y=t[d];if(i)var w=s?i(y,g,d,t,e,a):i(g,y,d,e,t,a);if(!(w===n?g===y||o(g,y,r,i,a):w)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var b=e.constructor,k=t.constructor;b==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof k&&k instanceof k||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,r,i,o,a)}(e,t,r,i,Tr,o))}function jr(e,t,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=Me(e);o--;){var u=r[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=r[o])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===n&&!(c in e))return!1}else{var d=new Gn;if(i)var h=i(l,f,c,e,t,d);if(!(h===n?Tr(f,l,3,i,d):h))return!1}}return!0}function Nr(e){return!(!ns(e)||(t=e,Be&&Be in t))&&(Za(e)?Ue:ge).test(Wo(e));var t}function Rr(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?Va(e)?$r(e[0],e[1]):zr(e):pu(e)}function Fr(e){if(!Po(e))return yn(e);var t=[];for(var n in Me(e))Fe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=Po(e),n=[];for(var r in e)("constructor"!=r||!t&&Fe.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function Wr(e,t){var n=-1,r=Ya(e)?Se(e.length):[];return hr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function zr(e){var t=fo(e);return 1==t.length&&t[0][2]?Co(t[0][0],t[0][1]):function(n){return n===e||jr(n,e,t)}}function $r(e,t){return _o(e)&&Oo(t)?Co(Bo(e),t):function(r){var i=Ms(r,e);return i===n&&i===t?Es(r,e):Tr(t,i,3)}}function Ur(e,t,r,i,o){e!==t&&wr(t,(function(a,s){if(o||(o=new Gn),ns(a))!function(e,t,r,i,o,a,s){var u=Ao(e,r),c=Ao(t,r),l=s.get(c);if(l)return void tr(e,r,l);var f=a?a(u,c,r+"",e,t,s):n,d=f===n;if(d){var h=Va(c),p=!h&&Ga(c),v=!h&&!p&&fs(c);f=c,h||p||v?Va(u)?f=u:Ka(u)?f=Ii(u):p?(d=!1,f=xi(c,!0)):v?(d=!1,f=Oi(c,!0)):f=[]:as(c)||Ha(c)?(f=u,Ha(u)?f=ws(u):ns(u)&&!Za(u)||(f=yo(c))):d=!1}d&&(s.set(c,f),o(f,c,i,a,s),s.delete(c));tr(e,r,f)}(e,t,s,r,Ur,i,o);else{var u=i?i(Ao(e,s),a,s+"",e,t,o):n;u===n&&(u=a),tr(e,s,u)}}),js)}function qr(e,t){var r=e.length;if(r)return bo(t+=t<0?r:0,r)?e[t]:n}function Hr(e,t,n){t=t.length?Lt(t,(function(e){return Va(e)?function(t){return xr(t,1===e.length?e[0]:e)}:e})):[ou];var r=-1;return t=Lt(t,Kt(co())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Wr(e,(function(e,n,i){return{criteria:Lt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Ci(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Vr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=xr(e,a);n(s,a)&&ei(o,bi(a,e),s)}return o}function Jr(e,t,n,r){var i=r?zt:Wt,o=-1,a=t.length,s=e;for(e===t&&(t=Ii(t)),n&&(s=Lt(e,Kt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ze.call(s,u,1),Ze.call(e,u,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bo(i)?Ze.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+Ft(Sn()*(t-e+1))}function Gr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=Ft(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return jo(Mo(e,t,ou),e+"")}function Qr(e){return Qn($s(e))}function Zr(e,t){var n=$s(e);return Fo(n,ur(t,0,n.length))}function ei(e,t,r,i){if(!ns(e))return e;for(var o=-1,a=(t=bi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=Bo(t[o]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var f=u[c];(l=i?i(f,c,u):n)===n&&(l=ns(f)?f:bo(t[o+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ti=An?function(e,t){return An.set(e,t),e}:ou,ni=ft?function(e,t){return ft(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:ou;function ri(e){return Fo($s(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Se(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ou,n)}function si(e,t,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,u=null===t,c=ls(t),l=t===n;o<a;){var f=Ft((o+a)/2),d=r(e[f]),h=d!==n,p=null===d,v=d==d,m=ls(d);if(s)var g=i||v;else g=l?v&&(i||h):u?v&&h&&(i||!p):c?v&&h&&!p&&(i||!m):!p&&!m&&(i?d<=t:d<t);g?o=f+1:a=f}return bn(a,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!$a(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ci(e){return"number"==typeof e?e:ls(e)?p:+e}function li(e){if("string"==typeof e)return e;if(Va(e))return Lt(e,li)+"";if(ls(e))return Wn?Wn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=It,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=At;else if(o>=200){var c=t?null:Gi(e);if(c)return cn(c);a=!1,i=Xt,u=new Kn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function di(e,t){return null==(e=Eo(e,t=bi(t,e)))||delete e[Bo(Qo(t))]}function hi(e,t,n,r){return ei(e,t,n(xr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function vi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Tt([e],t.args))}),n)}function mi(e,t,n){var r=e.length;if(r<2)return r?fi(e[0]):[];for(var i=-1,o=Se(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=dr(o[i]||a,e[s],t,n));return fi(yr(o,1),t,n)}function gi(e,t,r){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var u=i<a?t[i]:n;r(s,e[i],u)}return s}function yi(e){return Ka(e)?e:[]}function wi(e){return"function"==typeof e?e:ou}function bi(e,t){return Va(e)?e:_o(e,t)?[e]:Do(bs(e))}var ki=Xr;function _i(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ii(e,t,r)}var Si=ht||function(e){return dt.clearTimeout(e)};function xi(e,t){if(t)return e.slice();var n=e.length,r=Je?Je(n):new e.constructor(n);return e.copy(r),r}function Pi(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Oi(e,t){var n=t?Pi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=ls(e),s=t!==n,u=null===t,c=t==t,l=ls(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||i&&s&&c||!r&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&r&&o&&!i&&!a||u&&r&&o||!s&&o||!c)return-1}return 0}function Mi(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=wn(o-a,0),l=Se(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function Ei(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=wn(o-s,0),f=Se(l+c),d=!r;++i<l;)f[i]=e[i];for(var h=i;++u<c;)f[h+u]=t[u];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=e[i++]);return f}function Ii(e,t){var n=-1,r=e.length;for(t||(t=Se(r));++n<r;)t[n]=e[n];return t}function Ai(e,t,r,i){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=i?i(r[u],e[u],u,r,e):n;c===n&&(c=e[u]),o?ar(r,u,c):nr(r,u,c)}return r}function Li(e,t){return function(n,r){var i=Va(n)?Pt:ir,o=t?t():{};return i(n,e,co(r,2),o)}}function Ti(e){return Xr((function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,s&&ko(r[0],r[1],s)&&(a=o<3?n:a,o=1),t=Me(t);++i<o;){var u=r[i];u&&e(t,u,i,a)}return t}))}function ji(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Me(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=Me(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Ri(e){return function(t){var r=on(t=bs(t))?dn(t):n,i=r?r[0]:t.charAt(0),o=r?_i(r,1).join(""):t.slice(1);return i[e]()+o}}function Fi(e){return function(t){return jt(Zs(Hs(t).replace(Xe,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Bi(e){return function(t,r,i){var o=Me(t);if(!Ya(t)){var a=co(r,3);t=Ts(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,i);return s>-1?o[a?t[s]:s]:n}}function Wi(e){return ro((function(t){var i=t.length,o=i,a=qn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Ae(r);if(a&&!u&&"wrapper"==so(s))var u=new qn([],!0)}for(o=u?o:i;++o<i;){var c=so(s=t[o]),l="wrapper"==c?ao(s):n;u=l&&So(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[so(l[0])].apply(u,l[3]):1==s.length&&So(s)?u[c]():u.thru(s)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Va(n))return u.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function zi(e,t,r,i,o,a,s,u,c,f){var d=t&l,h=1&t,p=2&t,v=24&t,m=512&t,g=p?n:Di(e);return function n(){for(var l=arguments.length,y=Se(l),w=l;w--;)y[w]=arguments[w];if(v)var b=uo(n),k=en(y,b);if(i&&(y=Mi(y,i,o,v)),a&&(y=Ei(y,a,s,v)),l-=k,v&&l<f){var _=un(y,b);return Yi(e,t,zi,n.placeholder,r,y,_,u,c,f-l)}var S=h?r:this,x=p?S[e]:e;return l=y.length,u?y=Io(y,u):m&&l>1&&y.reverse(),d&&c<l&&(y.length=c),this&&this!==dt&&this instanceof n&&(x=g||Di(x)),x.apply(S,y)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return kr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ui(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=li(r),i=li(i)):(r=ci(r),i=ci(i)),o=e(r,i)}return o}}function qi(e){return ro((function(t){return t=Lt(t,Kt(co())),Xr((function(n){var r=this;return e(t,(function(e){return xt(e,r,n)}))}))}))}function Hi(e,t){var r=(t=t===n?" ":li(t)).length;if(r<2)return r?Gr(t,e):t;var i=Gr(t,gt(e/fn(t)));return on(t)?_i(dn(i),0,e).join(""):i.slice(0,e)}function Vi(e){return function(t,r,i){return i&&"number"!=typeof i&&ko(t,r,i)&&(r=i=n),t=vs(t),r===n?(r=t,t=0):r=vs(r),function(e,t,n,r){for(var i=-1,o=wn(gt((t-e)/(n||1)),0),a=Se(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:vs(i),e)}}function Ji(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Yi(e,t,r,i,o,a,s,l,f,d){var h=8&t;t|=h?u:c,4&(t&=~(h?c:u))||(t&=-4);var p=[e,t,o,h?a:n,h?s:n,h?n:a,h?n:s,l,f,d],v=r.apply(n,p);return So(e)&&Lo(v,p),v.placeholder=i,No(v,e,t)}function Ki(e){var t=Ce[e];return function(e,n){if(e=ys(e),(n=null==n?0:bn(ms(n),292))&&mn(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Gi=Mn&&1/cn(new Mn([,-0]))[1]==d?function(e){return new Mn(e)}:lu;function Xi(e){return function(t){var n=mo(t);return n==x?an(t):n==E?ln(t):function(e,t){return Lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,i,a,d,h,p,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Ae(r);var g=a?a.length:0;if(g||(t&=-97,a=d=n),p=p===n?p:wn(ms(p),0),v=v===n?v:ms(v),g-=d?d.length:0,t&c){var y=a,w=d;a=d=n}var b=m?n:ao(e),k=[e,t,i,a,d,y,w,h,p,v];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,s=r==l&&8==n||r==l&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Mi(c,u,t[4]):u,e[4]=c?un(e[3],o):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?un(e[5],o):t[6]);(u=t[7])&&(e[7]=u);r&l&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(k,b),e=k[0],t=k[1],i=k[2],a=k[3],d=k[4],!(v=k[9]=k[9]===n?m?0:e.length:wn(k[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||t==s?function(e,t,r){var i=Di(e);return function o(){for(var a=arguments.length,s=Se(a),u=a,c=uo(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:un(s,c);return(a-=l.length)<r?Yi(e,t,zi,o.placeholder,n,s,l,n,n,r-a):xt(this&&this!==dt&&this instanceof o?i:e,this,s)}}(e,t,v):t!=u&&33!=t||d.length?zi.apply(n,k):function(e,t,n,r){var i=1&t,o=Di(e);return function t(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=Se(c+s),f=this&&this!==dt&&this instanceof t?o:e;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return xt(f,i?n:this,l)}}(e,t,i,a);else var _=function(e,t,n){var r=1&t,i=Di(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return No((b?ti:Lo)(_,k),e,t)}function Zi(e,t,r,i){return e===n||$a(e,je[r])&&!Fe.call(i,r)?t:e}function eo(e,t,r,i,o,a){return ns(e)&&ns(t)&&(a.set(t,e),Ur(e,t,n,eo,a),a.delete(t)),e}function to(e){return as(e)?n:e}function no(e,t,r,i,o,a){var s=1&r,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var d=-1,h=!0,p=2&r?new Kn:n;for(a.set(e,t),a.set(t,e);++d<u;){var v=e[d],m=t[d];if(i)var g=s?i(m,v,d,t,e,a):i(v,m,d,e,t,a);if(g!==n){if(g)continue;h=!1;break}if(p){if(!Rt(t,(function(e,t){if(!Xt(p,t)&&(v===e||o(v,e,r,i,a)))return p.push(t)}))){h=!1;break}}else if(v!==m&&!o(v,m,r,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function ro(e){return jo(Mo(e,n,Jo),e+"")}function io(e){return Pr(e,Ts,po)}function oo(e){return Pr(e,js,vo)}var ao=An?function(e){return An.get(e)}:lu;function so(e){for(var t=e.name+"",n=Ln[t],r=Fe.call(Ln,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function uo(e){return(Fe.call(zn,"placeholder")?zn:e).placeholder}function co(){var e=zn.iteratee||au;return e=e===au?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ts(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Oo(i)]}return t}function ho(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Nr(r)?r:n}var po=Ht?function(e){return null==e?[]:(e=Me(e),Et(Ht(e),(function(t){return Ge.call(e,t)})))}:gu,vo=Ht?function(e){for(var t=[];e;)Tt(t,po(e)),e=Ye(e);return t}:gu,mo=Or;function go(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,o=!1;++r<i;){var a=Bo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&bo(a,i)&&(Va(e)||Ha(e))}function yo(e){return"function"!=typeof e.constructor||Po(e)?{}:$n(Ye(e))}function wo(e){return Va(e)||Ha(e)||!!(tt&&e&&e[tt])}function bo(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function ko(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&bo(t,n.length):"string"==r&&t in n)&&$a(n[t],e)}function _o(e,t){if(Va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Me(t))}function So(e){var t=so(e),n=zn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Pn&&mo(new Pn(new ArrayBuffer(1)))!=j||On&&mo(new On)!=x||Cn&&mo(Cn.resolve())!=C||Mn&&mo(new Mn)!=E||En&&mo(new En)!=L)&&(mo=function(e){var t=Or(e),r=t==O?e.constructor:n,i=r?Wo(r):"";if(i)switch(i){case Tn:return j;case jn:return x;case Nn:return C;case Rn:return E;case Fn:return L}return t});var xo=Ne?Za:yu;function Po(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)}function Oo(e){return e==e&&!ns(e)}function Co(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==n||e in Me(r)))}}function Mo(e,t,r){return t=wn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=wn(n.length-t,0),a=Se(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Se(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),xt(e,this,s)}}function Eo(e,t){return t.length<2?e:xr(e,ii(t,0,-1))}function Io(e,t){for(var r=e.length,i=bn(t.length,r),o=Ii(e);i--;){var a=t[i];e[i]=bo(a,r)?o[a]:n}return e}function Ao(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Lo=Ro(ti),To=mt||function(e,t){return dt.setTimeout(e,t)},jo=Ro(ni);function No(e,t,n){var r=t+"";return jo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ot(m,(function(n){var r="_."+n[0];t&n[1]&&!It(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function Ro(e){var t=0,r=0;return function(){var i=kn(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Fo(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=Kr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var Do=function(e){var t=Ra(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Bo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Wo(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function zo(e){if(e instanceof Hn)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $o=Xr((function(e,t){return Ka(e)?dr(e,yr(t,1,Ka,!0)):[]})),Uo=Xr((function(e,t){var r=Qo(t);return Ka(r)&&(r=n),Ka(e)?dr(e,yr(t,1,Ka,!0),co(r,2)):[]})),qo=Xr((function(e,t){var r=Qo(t);return Ka(r)&&(r=n),Ka(e)?dr(e,yr(t,1,Ka,!0),n,r):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=wn(r+i,0)),Bt(e,co(t,3),i)}function Vo(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=ms(r),o=r<0?wn(i+o,0):bn(o,i-1)),Bt(e,co(t,3),o,!0)}function Jo(e){return(null==e?0:e.length)?yr(e,1):[]}function Yo(e){return e&&e.length?e[0]:n}var Ko=Xr((function(e){var t=Lt(e,yi);return t.length&&t[0]===e[0]?Ir(t):[]})),Go=Xr((function(e){var t=Qo(e),r=Lt(e,yi);return t===Qo(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Ir(r,co(t,2)):[]})),Xo=Xr((function(e){var t=Qo(e),r=Lt(e,yi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Ir(r,n,t):[]}));function Qo(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Zo=Xr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Jr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,Lt(t,(function(e){return bo(e,n)?+e:e})).sort(Ci)),r}));function na(e){return null==e?e:xn.call(e)}var ra=Xr((function(e){return fi(yr(e,1,Ka,!0))})),ia=Xr((function(e){var t=Qo(e);return Ka(t)&&(t=n),fi(yr(e,1,Ka,!0),co(t,2))})),oa=Xr((function(e){var t=Qo(e);return t="function"==typeof t?t:n,fi(yr(e,1,Ka,!0),n,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Et(e,(function(e){if(Ka(e))return t=wn(e.length,t),!0})),Yt(t,(function(t){return Lt(e,qt(t))}))}function sa(e,t){if(!e||!e.length)return[];var r=aa(e);return null==t?r:Lt(r,(function(e){return xt(t,n,e)}))}var ua=Xr((function(e,t){return Ka(e)?dr(e,t):[]})),ca=Xr((function(e){return mi(Et(e,Ka))})),la=Xr((function(e){var t=Qo(e);return Ka(t)&&(t=n),mi(Et(e,Ka),co(t,2))})),fa=Xr((function(e){var t=Qo(e);return t="function"==typeof t?t:n,mi(Et(e,Ka),n,t)})),da=Xr(aa);var ha=Xr((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,sa(e,r)}));function pa(e){var t=zn(e);return t.__chain__=!0,t}function va(e,t){return t(e)}var ma=ro((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Hn&&bo(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:va,args:[o],thisArg:n}),new qn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(o)}));var ga=Li((function(e,t,n){Fe.call(e,n)?++e[n]:ar(e,n,1)}));var ya=Bi(Ho),wa=Bi(Vo);function ba(e,t){return(Va(e)?Ot:hr)(e,co(t,3))}function ka(e,t){return(Va(e)?Ct:pr)(e,co(t,3))}var _a=Li((function(e,t,n){Fe.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Sa=Xr((function(e,t,n){var r=-1,i="function"==typeof t,o=Ya(e)?Se(e.length):[];return hr(e,(function(e){o[++r]=i?xt(t,e,n):Ar(e,t,n)})),o})),xa=Li((function(e,t,n){ar(e,n,t)}));function Pa(e,t){return(Va(e)?Lt:Wr)(e,co(t,3))}var Oa=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ca=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ko(e,t[0],t[1])?t=[]:n>2&&ko(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),Ma=pt||function(){return dt.Date.now()};function Ea(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Qi(e,l,n,n,n,n,t)}function Ia(e,t){var i;if("function"!=typeof t)throw new Ae(r);return e=ms(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Aa=Xr((function(e,t,n){var r=1;if(n.length){var i=un(n,uo(Aa));r|=u}return Qi(e,r,t,n,i)})),La=Xr((function(e,t,n){var r=3;if(n.length){var i=un(n,uo(La));r|=u}return Qi(t,r,e,n,i)}));function Ta(e,t,i){var o,a,s,u,c,l,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Ae(r);function v(t){var r=o,i=a;return o=a=n,f=t,u=e.apply(i,r)}function m(e){return f=e,c=To(y,t),d?v(e):u}function g(e){var r=e-l;return l===n||r>=t||r<0||h&&e-f>=s}function y(){var e=Ma();if(g(e))return w(e);c=To(y,function(e){var n=t-(e-l);return h?bn(n,s-(e-f)):n}(e))}function w(e){return c=n,p&&o?v(e):(o=a=n,u)}function b(){var e=Ma(),r=g(e);if(o=arguments,a=this,l=e,r){if(c===n)return m(l);if(h)return Si(c),c=To(y,t),v(l)}return c===n&&(c=To(y,t)),u}return t=ys(t)||0,ns(i)&&(d=!!i.leading,s=(h="maxWait"in i)?wn(ys(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),b.cancel=function(){c!==n&&Si(c),f=0,o=l=a=c=n},b.flush=function(){return c===n?u:w(Ma())},b}var ja=Xr((function(e,t){return fr(e,1,t)})),Na=Xr((function(e,t,n){return fr(e,ys(t)||0,n)}));function Ra(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ra.Cache||Yn),n}function Fa(e){if("function"!=typeof e)throw new Ae(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ra.Cache=Yn;var Da=ki((function(e,t){var n=(t=1==t.length&&Va(t[0])?Lt(t[0],Kt(co())):Lt(yr(t,1),Kt(co()))).length;return Xr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return xt(e,this,r)}))})),Ba=Xr((function(e,t){var r=un(t,uo(Ba));return Qi(e,u,n,t,r)})),Wa=Xr((function(e,t){var r=un(t,uo(Wa));return Qi(e,c,n,t,r)})),za=ro((function(e,t){return Qi(e,f,n,n,n,t)}));function $a(e,t){return e===t||e!=e&&t!=t}var Ua=Ji(Cr),qa=Ji((function(e,t){return e>=t})),Ha=Lr(function(){return arguments}())?Lr:function(e){return rs(e)&&Fe.call(e,"callee")&&!Ge.call(e,"callee")},Va=Se.isArray,Ja=yt?Kt(yt):function(e){return rs(e)&&Or(e)==T};function Ya(e){return null!=e&&ts(e.length)&&!Za(e)}function Ka(e){return rs(e)&&Ya(e)}var Ga=vn||yu,Xa=wt?Kt(wt):function(e){return rs(e)&&Or(e)==b};function Qa(e){if(!rs(e))return!1;var t=Or(e);return t==k||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Za(e){if(!ns(e))return!1;var t=Or(e);return t==_||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=bt?Kt(bt):function(e){return rs(e)&&mo(e)==x};function os(e){return"number"==typeof e||rs(e)&&Or(e)==P}function as(e){if(!rs(e)||Or(e)!=O)return!1;var t=Ye(e);if(null===t)return!0;var n=Fe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==ze}var ss=kt?Kt(kt):function(e){return rs(e)&&Or(e)==M};var us=_t?Kt(_t):function(e){return rs(e)&&mo(e)==E};function cs(e){return"string"==typeof e||!Va(e)&&rs(e)&&Or(e)==I}function ls(e){return"symbol"==typeof e||rs(e)&&Or(e)==A}var fs=St?Kt(St):function(e){return rs(e)&&ts(e.length)&&!!ot[Or(e)]};var ds=Ji(Br),hs=Ji((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ya(e))return cs(e)?dn(e):Ii(e);if(st&&e[st])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[st]());var t=mo(e);return(t==x?an:t==E?cn:$s)(e)}function vs(e){return e?(e=ys(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?ur(ms(e),0,v):0}function ys(e){if("number"==typeof e)return e;if(ls(e))return p;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(oe,"");var n=me.test(e);return n||ye.test(e)?ct(e.slice(2),n?2:8):ve.test(e)?p:+e}function ws(e){return Ai(e,js(e))}function bs(e){return null==e?"":li(e)}var ks=Ti((function(e,t){if(Po(t)||Ya(t))Ai(t,Ts(t),e);else for(var n in t)Fe.call(t,n)&&nr(e,n,t[n])})),_s=Ti((function(e,t){Ai(t,js(t),e)})),Ss=Ti((function(e,t,n,r){Ai(t,js(t),e,r)})),xs=Ti((function(e,t,n,r){Ai(t,Ts(t),e,r)})),Ps=ro(sr);var Os=Xr((function(e,t){e=Me(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&ko(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],s=js(a),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===n||$a(f,je[l])&&!Fe.call(e,l))&&(e[l]=a[l])}return e})),Cs=Xr((function(e){return e.push(n,eo),xt(Rs,n,e)}));function Ms(e,t,r){var i=null==e?n:xr(e,t);return i===n?r:i}function Es(e,t){return null!=e&&go(e,t,Er)}var Is=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=We.call(t)),e[t]=n}),nu(ou)),As=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=We.call(t)),Fe.call(e,t)?e[t].push(n):e[t]=[n]}),co),Ls=Xr(Ar);function Ts(e){return Ya(e)?Xn(e):Fr(e)}function js(e){return Ya(e)?Xn(e,!0):Dr(e)}var Ns=Ti((function(e,t,n){Ur(e,t,n)})),Rs=Ti((function(e,t,n,r){Ur(e,t,n,r)})),Fs=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Lt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Ai(e,oo(e),n),r&&(n=cr(n,7,to));for(var i=t.length;i--;)di(n,t[i]);return n}));var Ds=ro((function(e,t){return null==e?{}:function(e,t){return Vr(e,t,(function(t,n){return Es(e,n)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var n=Lt(oo(e),(function(e){return[e]}));return t=co(t),Vr(e,n,(function(e,n){return t(e,n[0])}))}var Ws=Xi(Ts),zs=Xi(js);function $s(e){return null==e?[]:Gt(e,Ts(e))}var Us=Fi((function(e,t,n){return t=t.toLowerCase(),e+(n?qs(t):t)}));function qs(e){return Qs(bs(e).toLowerCase())}function Hs(e){return(e=bs(e))&&e.replace(be,tn).replace(Qe,"")}var Vs=Fi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Js=Fi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Ri("toLowerCase");var Ks=Fi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Gs=Fi((function(e,t,n){return e+(n?" ":"")+Qs(t)}));var Xs=Fi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qs=Ri("toUpperCase");function Zs(e,t,r){return e=bs(e),(t=r?n:t)===n?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Xr((function(e,t){try{return xt(e,n,t)}catch(e){return Qa(e)?e:new Pe(e)}})),tu=ro((function(e,t){return Ot(t,(function(t){t=Bo(t),ar(e,t,Aa(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Wi(),iu=Wi(!0);function ou(e){return e}function au(e){return Rr("function"==typeof e?e:cr(e,1))}var su=Xr((function(e,t){return function(n){return Ar(n,e,t)}})),uu=Xr((function(e,t){return function(n){return Ar(e,n,t)}}));function cu(e,t,n){var r=Ts(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Ts(t)));var o=!(ns(n)&&"chain"in n&&!n.chain),a=Za(e);return Ot(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ii(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Tt([this.value()],arguments))})})),e}function lu(){}var fu=qi(Lt),du=qi(Mt),hu=qi(Rt);function pu(e){return _o(e)?qt(Bo(e)):function(e){return function(t){return xr(t,e)}}(e)}var vu=Vi(),mu=Vi(!0);function gu(){return[]}function yu(){return!1}var wu=Ui((function(e,t){return e+t}),0),bu=Ki("ceil"),ku=Ui((function(e,t){return e/t}),1),_u=Ki("floor");var Su,xu=Ui((function(e,t){return e*t}),1),Pu=Ki("round"),Ou=Ui((function(e,t){return e-t}),0);return zn.after=function(e,t){if("function"!=typeof t)throw new Ae(r);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},zn.ary=Ea,zn.assign=ks,zn.assignIn=_s,zn.assignInWith=Ss,zn.assignWith=xs,zn.at=Ps,zn.before=Ia,zn.bind=Aa,zn.bindAll=tu,zn.bindKey=La,zn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Va(e)?e:[e]},zn.chain=pa,zn.chunk=function(e,t,r){t=(r?ko(e,t,r):t===n)?1:wn(ms(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=Se(gt(i/t));o<i;)s[a++]=ii(e,o,o+=t);return s},zn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},zn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Se(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Tt(Va(n)?Ii(n):[n],yr(t,1))},zn.cond=function(e){var t=null==e?0:e.length,n=co();return e=t?Lt(e,(function(e){if("function"!=typeof e[1])throw new Ae(r);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(xt(i[0],this,n))return xt(i[1],this,n)}}))},zn.conforms=function(e){return function(e){var t=Ts(e);return function(n){return lr(n,e,t)}}(cr(e,1))},zn.constant=nu,zn.countBy=ga,zn.create=function(e,t){var n=$n(e);return null==t?n:or(n,t)},zn.curry=function e(t,r,i){var o=Qi(t,8,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},zn.curryRight=function e(t,r,i){var o=Qi(t,s,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},zn.debounce=Ta,zn.defaults=Os,zn.defaultsDeep=Cs,zn.defer=ja,zn.delay=Na,zn.difference=$o,zn.differenceBy=Uo,zn.differenceWith=qo,zn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=r||t===n?1:ms(t))<0?0:t,i):[]},zn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=r||t===n?1:ms(t)))<0?0:t):[]},zn.dropRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0,!0):[]},zn.dropWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0):[]},zn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&ko(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=ms(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:ms(i))<0&&(i+=o),i=r>i?0:gs(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},zn.filter=function(e,t){return(Va(e)?Et:gr)(e,co(t,3))},zn.flatMap=function(e,t){return yr(Pa(e,t),1)},zn.flatMapDeep=function(e,t){return yr(Pa(e,t),d)},zn.flatMapDepth=function(e,t,r){return r=r===n?1:ms(r),yr(Pa(e,t),r)},zn.flatten=Jo,zn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,d):[]},zn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===n?1:ms(t)):[]},zn.flip=function(e){return Qi(e,512)},zn.flow=ru,zn.flowRight=iu,zn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},zn.functions=function(e){return null==e?[]:Sr(e,Ts(e))},zn.functionsIn=function(e){return null==e?[]:Sr(e,js(e))},zn.groupBy=_a,zn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},zn.intersection=Ko,zn.intersectionBy=Go,zn.intersectionWith=Xo,zn.invert=Is,zn.invertBy=As,zn.invokeMap=Sa,zn.iteratee=au,zn.keyBy=xa,zn.keys=Ts,zn.keysIn=js,zn.map=Pa,zn.mapKeys=function(e,t){var n={};return t=co(t,3),kr(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},zn.mapValues=function(e,t){var n={};return t=co(t,3),kr(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},zn.matches=function(e){return zr(cr(e,1))},zn.matchesProperty=function(e,t){return $r(e,cr(t,1))},zn.memoize=Ra,zn.merge=Ns,zn.mergeWith=Rs,zn.method=su,zn.methodOf=uu,zn.mixin=cu,zn.negate=Fa,zn.nthArg=function(e){return e=ms(e),Xr((function(t){return qr(t,e)}))},zn.omit=Fs,zn.omitBy=function(e,t){return Bs(e,Fa(co(t)))},zn.once=function(e){return Ia(2,e)},zn.orderBy=function(e,t,r,i){return null==e?[]:(Va(t)||(t=null==t?[]:[t]),Va(r=i?n:r)||(r=null==r?[]:[r]),Hr(e,t,r))},zn.over=fu,zn.overArgs=Da,zn.overEvery=du,zn.overSome=hu,zn.partial=Ba,zn.partialRight=Wa,zn.partition=Oa,zn.pick=Ds,zn.pickBy=Bs,zn.property=pu,zn.propertyOf=function(e){return function(t){return null==e?n:xr(e,t)}},zn.pull=Zo,zn.pullAll=ea,zn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,co(n,2)):e},zn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Jr(e,t,n,r):e},zn.pullAt=ta,zn.range=vu,zn.rangeRight=mu,zn.rearg=za,zn.reject=function(e,t){return(Va(e)?Et:gr)(e,Fa(co(t,3)))},zn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=co(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Yr(e,i),n},zn.rest=function(e,t){if("function"!=typeof e)throw new Ae(r);return Xr(e,t=t===n?t:ms(t))},zn.reverse=na,zn.sampleSize=function(e,t,r){return t=(r?ko(e,t,r):t===n)?1:ms(t),(Va(e)?Zn:Zr)(e,t)},zn.set=function(e,t,n){return null==e?e:ei(e,t,n)},zn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ei(e,t,r,i)},zn.shuffle=function(e){return(Va(e)?er:ri)(e)},zn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ko(e,t,r)?(t=0,r=i):(t=null==t?0:ms(t),r=r===n?i:ms(r)),ii(e,t,r)):[]},zn.sortBy=Ca,zn.sortedUniq=function(e){return e&&e.length?ui(e):[]},zn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,co(t,2)):[]},zn.split=function(e,t,r){return r&&"number"!=typeof r&&ko(e,t,r)&&(t=r=n),(r=r===n?v:r>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=li(t))&&on(e)?_i(dn(e),0,r):e.split(t,r):[]},zn.spread=function(e,t){if("function"!=typeof e)throw new Ae(r);return t=null==t?0:wn(ms(t),0),Xr((function(n){var r=n[t],i=_i(n,0,t);return r&&Tt(i,r),xt(e,this,i)}))},zn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},zn.take=function(e,t,r){return e&&e.length?ii(e,0,(t=r||t===n?1:ms(t))<0?0:t):[]},zn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=r||t===n?1:ms(t)))<0?0:t,i):[]},zn.takeRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!1,!0):[]},zn.takeWhile=function(e,t){return e&&e.length?pi(e,co(t,3)):[]},zn.tap=function(e,t){return t(e),e},zn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new Ae(r);return ns(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ta(e,t,{leading:i,maxWait:t,trailing:o})},zn.thru=va,zn.toArray=ps,zn.toPairs=Ws,zn.toPairsIn=zs,zn.toPath=function(e){return Va(e)?Lt(e,Bo):ls(e)?[e]:Ii(Do(bs(e)))},zn.toPlainObject=ws,zn.transform=function(e,t,n){var r=Va(e),i=r||Ga(e)||fs(e);if(t=co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Za(o)?$n(Ye(e)):{}}return(i?Ot:kr)(e,(function(e,r,i){return t(n,e,r,i)})),n},zn.unary=function(e){return Ea(e,1)},zn.union=ra,zn.unionBy=ia,zn.unionWith=oa,zn.uniq=function(e){return e&&e.length?fi(e):[]},zn.uniqBy=function(e,t){return e&&e.length?fi(e,co(t,2)):[]},zn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?fi(e,n,t):[]},zn.unset=function(e,t){return null==e||di(e,t)},zn.unzip=aa,zn.unzipWith=sa,zn.update=function(e,t,n){return null==e?e:hi(e,t,wi(n))},zn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:hi(e,t,wi(r),i)},zn.values=$s,zn.valuesIn=function(e){return null==e?[]:Gt(e,js(e))},zn.without=ua,zn.words=Zs,zn.wrap=function(e,t){return Ba(wi(t),e)},zn.xor=ca,zn.xorBy=la,zn.xorWith=fa,zn.zip=da,zn.zipObject=function(e,t){return gi(e||[],t||[],nr)},zn.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},zn.zipWith=ha,zn.entries=Ws,zn.entriesIn=zs,zn.extend=_s,zn.extendWith=Ss,cu(zn,zn),zn.add=wu,zn.attempt=eu,zn.camelCase=Us,zn.capitalize=qs,zn.ceil=bu,zn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=ys(r))==r?r:0),t!==n&&(t=(t=ys(t))==t?t:0),ur(ys(e),t,r)},zn.clone=function(e){return cr(e,4)},zn.cloneDeep=function(e){return cr(e,5)},zn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:n)},zn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:n)},zn.conformsTo=function(e,t){return null==t||lr(e,t,Ts(t))},zn.deburr=Hs,zn.defaultTo=function(e,t){return null==e||e!=e?t:e},zn.divide=ku,zn.endsWith=function(e,t,r){e=bs(e),t=li(t);var i=e.length,o=r=r===n?i:ur(ms(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},zn.eq=$a,zn.escape=function(e){return(e=bs(e))&&G.test(e)?e.replace(Y,nn):e},zn.escapeRegExp=function(e){return(e=bs(e))&&ie.test(e)?e.replace(re,"\\$&"):e},zn.every=function(e,t,r){var i=Va(e)?Mt:vr;return r&&ko(e,t,r)&&(t=n),i(e,co(t,3))},zn.find=ya,zn.findIndex=Ho,zn.findKey=function(e,t){return Dt(e,co(t,3),kr)},zn.findLast=wa,zn.findLastIndex=Vo,zn.findLastKey=function(e,t){return Dt(e,co(t,3),_r)},zn.floor=_u,zn.forEach=ba,zn.forEachRight=ka,zn.forIn=function(e,t){return null==e?e:wr(e,co(t,3),js)},zn.forInRight=function(e,t){return null==e?e:br(e,co(t,3),js)},zn.forOwn=function(e,t){return e&&kr(e,co(t,3))},zn.forOwnRight=function(e,t){return e&&_r(e,co(t,3))},zn.get=Ms,zn.gt=Ua,zn.gte=qa,zn.has=function(e,t){return null!=e&&go(e,t,Mr)},zn.hasIn=Es,zn.head=Yo,zn.identity=ou,zn.includes=function(e,t,n,r){e=Ya(e)?e:$s(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=wn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wt(e,t,n)>-1},zn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=wn(r+i,0)),Wt(e,t,i)},zn.inRange=function(e,t,r){return t=vs(t),r===n?(r=t,t=0):r=vs(r),function(e,t,n){return e>=bn(t,n)&&e<wn(t,n)}(e=ys(e),t,r)},zn.invoke=Ls,zn.isArguments=Ha,zn.isArray=Va,zn.isArrayBuffer=Ja,zn.isArrayLike=Ya,zn.isArrayLikeObject=Ka,zn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Or(e)==w},zn.isBuffer=Ga,zn.isDate=Xa,zn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},zn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Va(e)||"string"==typeof e||"function"==typeof e.splice||Ga(e)||fs(e)||Ha(e)))return!e.length;var t=mo(e);if(t==x||t==E)return!e.size;if(Po(e))return!Fr(e).length;for(var n in e)if(Fe.call(e,n))return!1;return!0},zn.isEqual=function(e,t){return Tr(e,t)},zn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Tr(e,t,n,r):!!i},zn.isError=Qa,zn.isFinite=function(e){return"number"==typeof e&&mn(e)},zn.isFunction=Za,zn.isInteger=es,zn.isLength=ts,zn.isMap=is,zn.isMatch=function(e,t){return e===t||jr(e,t,fo(t))},zn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,jr(e,t,fo(t),r)},zn.isNaN=function(e){return os(e)&&e!=+e},zn.isNative=function(e){if(xo(e))throw new Pe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},zn.isNil=function(e){return null==e},zn.isNull=function(e){return null===e},zn.isNumber=os,zn.isObject=ns,zn.isObjectLike=rs,zn.isPlainObject=as,zn.isRegExp=ss,zn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=h},zn.isSet=us,zn.isString=cs,zn.isSymbol=ls,zn.isTypedArray=fs,zn.isUndefined=function(e){return e===n},zn.isWeakMap=function(e){return rs(e)&&mo(e)==L},zn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Or(e)},zn.join=function(e,t){return null==e?"":gn.call(e,t)},zn.kebabCase=Vs,zn.last=Qo,zn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=ms(r))<0?wn(i+o,0):bn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Bt(e,$t,o,!0)},zn.lowerCase=Js,zn.lowerFirst=Ys,zn.lt=ds,zn.lte=hs,zn.max=function(e){return e&&e.length?mr(e,ou,Cr):n},zn.maxBy=function(e,t){return e&&e.length?mr(e,co(t,2),Cr):n},zn.mean=function(e){return Ut(e,ou)},zn.meanBy=function(e,t){return Ut(e,co(t,2))},zn.min=function(e){return e&&e.length?mr(e,ou,Br):n},zn.minBy=function(e,t){return e&&e.length?mr(e,co(t,2),Br):n},zn.stubArray=gu,zn.stubFalse=yu,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=xu,zn.nth=function(e,t){return e&&e.length?qr(e,ms(t)):n},zn.noConflict=function(){return dt._===this&&(dt._=$e),this},zn.noop=lu,zn.now=Ma,zn.pad=function(e,t,n){e=bs(e);var r=(t=ms(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(Ft(i),n)+e+Hi(gt(i),n)},zn.padEnd=function(e,t,n){e=bs(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?e+Hi(t-r,n):e},zn.padStart=function(e,t,n){e=bs(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?Hi(t-r,n)+e:e},zn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(bs(e).replace(ae,""),t||0)},zn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&ko(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=vs(e),t===n?(t=e,e=0):t=vs(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=Sn();return bn(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return Kr(e,t)},zn.reduce=function(e,t,n){var r=Va(e)?jt:Vt,i=arguments.length<3;return r(e,co(t,4),n,i,hr)},zn.reduceRight=function(e,t,n){var r=Va(e)?Nt:Vt,i=arguments.length<3;return r(e,co(t,4),n,i,pr)},zn.repeat=function(e,t,r){return t=(r?ko(e,t,r):t===n)?1:ms(t),Gr(bs(e),t)},zn.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zn.result=function(e,t,r){var i=-1,o=(t=bi(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[Bo(t[i])];a===n&&(i=o,a=r),e=Za(a)?a.call(e):a}return e},zn.round=Pu,zn.runInContext=e,zn.sample=function(e){return(Va(e)?Qn:Qr)(e)},zn.size=function(e){if(null==e)return 0;if(Ya(e))return cs(e)?fn(e):e.length;var t=mo(e);return t==x||t==E?e.size:Fr(e).length},zn.snakeCase=Ks,zn.some=function(e,t,r){var i=Va(e)?Rt:oi;return r&&ko(e,t,r)&&(t=n),i(e,co(t,3))},zn.sortedIndex=function(e,t){return ai(e,t)},zn.sortedIndexBy=function(e,t,n){return si(e,t,co(n,2))},zn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&$a(e[r],t))return r}return-1},zn.sortedLastIndex=function(e,t){return ai(e,t,!0)},zn.sortedLastIndexBy=function(e,t,n){return si(e,t,co(n,2),!0)},zn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if($a(e[n],t))return n}return-1},zn.startCase=Gs,zn.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:ur(ms(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},zn.subtract=Ou,zn.sum=function(e){return e&&e.length?Jt(e,ou):0},zn.sumBy=function(e,t){return e&&e.length?Jt(e,co(t,2)):0},zn.template=function(e,t,r){var i=zn.templateSettings;r&&ko(e,t,r)&&(t=n),e=bs(e),t=Ss({},t,i,Zi);var o,a,s=Ss({},t.imports,i.imports,Zi),u=Ts(s),c=Gt(s,u),l=0,f=t.interpolate||ke,d="__p += '",h=Ee((t.escape||ke).source+"|"+f.source+"|"+(f===Z?he:ke).source+"|"+(t.evaluate||ke).source+"|$","g"),p="//# sourceURL="+(Fe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(l,u).replace(_e,rn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),d+="';\n";var v=Fe.call(t,"variable")&&t.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(q,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=eu((function(){return Oe(u,p+"return "+d).apply(n,c)}));if(m.source=d,Qa(m))throw m;return m},zn.times=function(e,t){if((e=ms(e))<1||e>h)return[];var n=v,r=bn(e,v);t=co(t),e-=v;for(var i=Yt(r,t);++n<e;)t(n);return i},zn.toFinite=vs,zn.toInteger=ms,zn.toLength=gs,zn.toLower=function(e){return bs(e).toLowerCase()},zn.toNumber=ys,zn.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,h):0===e?e:0},zn.toString=bs,zn.toUpper=function(e){return bs(e).toUpperCase()},zn.trim=function(e,t,r){if((e=bs(e))&&(r||t===n))return e.replace(oe,"");if(!e||!(t=li(t)))return e;var i=dn(e),o=dn(t);return _i(i,Qt(i,o),Zt(i,o)+1).join("")},zn.trimEnd=function(e,t,r){if((e=bs(e))&&(r||t===n))return e.replace(se,"");if(!e||!(t=li(t)))return e;var i=dn(e);return _i(i,0,Zt(i,dn(t))+1).join("")},zn.trimStart=function(e,t,r){if((e=bs(e))&&(r||t===n))return e.replace(ae,"");if(!e||!(t=li(t)))return e;var i=dn(e);return _i(i,Qt(i,dn(t))).join("")},zn.truncate=function(e,t){var r=30,i="...";if(ns(t)){var o="separator"in t?t.separator:o;r="length"in t?ms(t.length):r,i="omission"in t?li(t.omission):i}var a=(e=bs(e)).length;if(on(e)){var s=dn(e);a=s.length}if(r>=a)return e;var u=r-fn(i);if(u<1)return i;var c=s?_i(s,0,u).join(""):e.slice(0,u);if(o===n)return c+i;if(s&&(u+=c.length-u),ss(o)){if(e.slice(u).search(o)){var l,f=c;for(o.global||(o=Ee(o.source,bs(pe.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;c=c.slice(0,d===n?u:d)}}else if(e.indexOf(li(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+i},zn.unescape=function(e){return(e=bs(e))&&K.test(e)?e.replace(J,hn):e},zn.uniqueId=function(e){var t=++De;return bs(e)+t},zn.upperCase=Xs,zn.upperFirst=Qs,zn.each=ba,zn.eachRight=ka,zn.first=Yo,cu(zn,(Su={},kr(zn,(function(e,t){Fe.call(zn.prototype,t)||(Su[t]=e)})),Su),{chain:!1}),zn.VERSION="4.17.20",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zn[e].placeholder=zn})),Ot(["drop","take"],(function(e,t){Hn.prototype[e]=function(r){r=r===n?1:wn(ms(r),0);var i=this.__filtered__&&!t?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,v),type:e+(i.__dir__<0?"Right":"")}),i},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Ar(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Fa(co(e)))},Hn.prototype.slice=function(e,t){e=ms(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Hn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=ms(t))<0?r.dropRight(-t):r.take(t-e)),r)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(v)},kr(Hn.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=zn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(zn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Hn,c=s[0],l=u||Va(t),f=function(e){var t=o.apply(zn,Tt([e],s));return i&&d?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,v=u&&!h;if(!a&&l){t=v?t:new Hn(this);var m=e.apply(t,s);return m.__actions__.push({func:va,args:[f],thisArg:n}),new qn(m,d)}return p&&v?e.apply(this,s):(m=this.thru(f),p?i?m.value()[0]:m.value():m)})})),Ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Le[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);zn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Va(i)?i:[],e)}return this[n]((function(n){return t.apply(Va(n)?n:[],e)}))}})),kr(Hn.prototype,(function(e,t){var n=zn[t];if(n){var r=n.name+"";Fe.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[zi(n,2).name]=[{name:"wrapper",func:n}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Va(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=wn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=bn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var v=-1,m=e[c+=t];++v<f;){var g=l[v],y=g.iteratee,w=g.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue e;break e}}p[d++]=m}return p},zn.prototype.at=ma,zn.prototype.chain=function(){return pa(this)},zn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===n&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var t,r=this;r instanceof Un;){var i=zo(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:va,args:[na],thisArg:n}),new qn(t,this.__chain__)}return this.thru(na)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,st&&(zn.prototype[st]=function(){return this}),zn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(dt._=pn,define((function(){return pn}))):pt?((pt.exports=pn)._=pn,ht._=pn):dt._=pn}.call(this),t.exports}.call({}),w=_o(n),b=t,k={};Object.defineProperty(k,"__esModule",{value:!0});var _=async function(e){const t=e.text.replace(/^\s*<!doctype(\s+.*)?>\s*/i,"");let n,r;if("pandoc"===(0,I.atomConfig)().renderer)try{n=await ri.renderPandoc(t,e.filePath,e.renderLaTeX,e.renderErrors)}catch(e){const t=e;if(void 0===t.html)throw t;r=t.message,n=t.html}else n=await ii.MarkdownItWorker.render(t,e.renderLaTeX);const i=(new DOMParser).parseFromString(n,"text/html");if(function(e){e.querySelectorAll("script:not([type^='math/tex'])").forEach(e=>{e.remove()});const t=["onabort","onblur","onchange","onclick","ondbclick","onerror","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup","onreset","onresize","onscroll","onselect","onsubmit","onunload"];e.querySelectorAll("*").forEach(e=>t.map(t=>{e.removeAttribute(t)}))}(i),"normal"===e.mode)e.imageWatcher&&e.imageWatcher.track(),Ii(i,e.filePath,!1,void 0,e.imageWatcher),e.imageWatcher&&e.imageWatcher.untrack();else switch(e.mode){case"save":Ei({doc:i,filePath:e.filePath,savePath:e.savePath,behaviour:(0,I.atomConfig)().saveConfig.mediaOnSaveAsHTMLBehaviour});break;case"copy":Ei({doc:i,filePath:e.filePath,behaviour:(0,I.atomConfig)().saveConfig.mediaOnCopyAsHTMLBehaviour});break;default:throw o=e,new Error("Invalid render mode "+JSON.stringify(o))}var o;let a="text";"source.litcoffee"===(e.grammar&&e.grammar.scopeName)&&(a="coffee");"pandoc"===(0,I.atomConfig)().renderer&&(0,I.atomConfig)().pandocConfig.useNativePandocCodeStyles||await async function(e,t){const n=atom.config.get("markdown-preview-plus.previewConfig.highlighter");if("none"===n)return e;const r=atom.config.get("editor.fontFamily");if(r)for(const t of Array.from(e.querySelectorAll("code")))t.style.fontFamily=r;const i=(0,I.atomConfig)().codeTabWidth||atom.config.get("editor.tabLength");return await Promise.all(Array.from(e.querySelectorAll("pre")).map(async e=>{const r=null!==e.firstElementChild?e.firstElementChild:e,o=r.className||e.className,a=o?o.replace(/^(lang-|sourceCode )/,""):t;e.style.tabSize=i.toString();const s=await async function(e,t){await new Promise(setImmediate);const n=performance.now();let r=n,i=r;return async function(){if(i=performance.now(),i-r>e&&(await new Promise(setImmediate),r=i),i-n>t){const e=new Error("Max time reached");let t="The highlighter took too long to complete and was terminated.\nSome code blocks may be incomplete.";throw"tree-sitter-compatible"===atom.config.get("markdown-preview-plus.previewConfig.highlighter")&&(t+=" You're currently using tree-view-compatible highlighter, you may try\nswitching to legacy highlighter instead."),atom.notifications.addError("Markdown-Preview-Plus: Highlighter took more than 5 seconds to complete",{dismissable:!0,description:t,stack:e.stack}),e}}}(100,5e3),u=r.textContent.replace(/\r?\n$/,"");if("legacy"===n){const t=(0,mi.hightlightLines)(u.split("\n"),(0,li.scopeForFenceName)(a),"text.plain.null-grammar"),n=[];let r=t.next();for(;!r.done;){n.push(r.value);try{await s()}catch(e){console.error(e);break}r=t.next()}e.innerHTML=n.join("\n")}else if("tree-sitter-compatible"===n){const t=new hi.TextBuffer,n=atom.grammars.grammarForId((0,li.scopeForFenceName)(a)),i=atom.grammars.languageModeForGrammarAndBuffer(n,t);t.setLanguageMode(i),t.setText(u);const o=t.getEndPosition();i.startTokenizing&&i.startTokenizing(),await async function(e){return new Promise(t=>{if(e.fullyTokenized||e.tree)t();else if(e.onDidTokenize){const n=e.onDidTokenize(()=>{n.dispose(),t()})}else t()})}(i);const c=i.buildHighlightIterator();if(c.getOpenScopeIds&&c.getCloseScopeIds){let n={row:0,column:0};c.seek(n);const r=[];for(;n.row<o.row||n.row===o.row&&n.column<=o.column;){const e=c.getOpenScopeIds().map(e=>i.classNameForScopeId(e));r.push(...e.map(e=>`<span class="${e}">`));const o=c.getCloseScopeIds().map(e=>i.classNameForScopeId(e));r.push(...o.map(e=>"</span>")),c.moveToSuccessor();const a=c.getPosition();r.push(Ai(t.getTextInRange([n,a])));try{await s()}catch(e){console.error(e);break}n=a}e.innerHTML=r.join("")}else e.innerHTML=r.innerHTML;t.destroy()}e.classList.add("editor-colors"),a&&e.classList.add("lang-"+a)})),e}(i,a);if(r){const e=i.createElement("div"),t=i.createElement("code");t.innerText=r,e.innerHTML=`<h1>Pandoc Error:</h1>${t.outerHTML}<hr>`,i.body.insertBefore(e,i.body.firstElementChild)}return i};k.render=_;var S=Ci(i),x={};Object.defineProperty(x,"__esModule",{value:!0});var P=async function(e,t,n,r){const{args:i,opts:o}=ei(t,n);let a;try{return await new Promise((t,s)=>{const u=C.execFile((0,I.atomConfig)().pandocConfig.pandocPath,ni(i),o,(function(e,i,o){e&&(atom.notifications.addError(e.toString(),{stack:e.stack,dismissable:!0}),s(e));try{const e=function(e,t,n){return e?function(e,t,n){const r=new Error(e);throw r.html=ti(t,n),r}(e,t,n):ti(t,n)}(r&&o||"",i||"",n);t(e)}catch(e){s(e)}}));if(!u.stdin)throw new Error("No stdin");u.stdin.write(e),u.stdin.end(),a=window.setInterval(()=>{process.activateUvLoop()},100)})}finally{void 0!==a&&clearInterval(a)}};x.renderPandoc=P;var O=void 0;x.testing=O;var C=Qr(e),M=Qr(n),E=Qr(i),I={};Object.defineProperty(I,"__esModule",{value:!0});var A=function(e){if(!e)return;e.catch(e=>{console.error(e),atom.notifications.addFatalError(e.toString(),{detail:e.message,stack:e.stack,dismissable:!0})})};I.handlePromise=A;var L=function(e){return!!(0,R.existsSync)(e)&&(0,R.lstatSync)(e).isFile()};I.isFileSync=L;var T=async function(e,t,n){const r=new F.WebviewHandler(async()=>{await r.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:{...Kr().mathConfig,latexRenderer:"SVG"},context:"copy-html"}),await r.setBasePath(t);const i=await me.render({text:e,filePath:t,renderLaTeX:n,renderErrors:!1,mode:"copy"}),o=await r.update(i.documentElement.outerHTML,n);if(o){const e=o.replace(/"file:\/\/[^"#]*/g,'"');atom.config.get("markdown-preview-plus.richClipboard")?Vr.write({text:e,html:e}):atom.clipboard.write(e)}r.destroy()});r.element.style.pointerEvents="none",r.element.style.position="absolute",r.element.style.width="0px",r.element.style.height="0px";atom.views.getView(atom.workspace).appendChild(r.element)};I.copyHtml=T;var j=Kr;I.atomConfig=j;var N=function(){if(void 0!==Gr)return Gr;const e=atom.packages.getLoadedPackage("markdown-preview-plus");if(!e)throw new Error("markdown-preview-plus is not loaded but is running");return Gr=e.path};I.packagePath=N;var R=n,F={};Object.defineProperty(F,"__esModule",{value:!0});var D=void 0;F.WebviewHandler=D;var B={};Object.defineProperty(B,"__esModule",{value:!0});var W=void 0;B.WebContentsHandler=W;var z=r,$=t;const U=i;var q,H=(q=function(e){if("string"!=typeof e||e.length<=7||"file://"!==e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");const t=decodeURI(e.substring(7)),n=t.indexOf("/");let r=t.substring(0,n),i=t.substring(n+1);return"localhost"===r&&(r=""),r&&(r=U.sep+U.sep+r),i=i.replace(/^(.+)\|/,"$1:"),"\\"===U.sep&&(i=i.replace(/\//g,"\\")),/^.+:/.test(i)||(i=U.sep+i),r+i})&&q.__esModule?q:{default:q},V={};Object.defineProperty(V,"__esModule",{value:!0});var J=function(e){for(const t of atom.workspace.getTextEditors())if(t.id===e)return t;return};V.editorForId=J;var Y=oe;V.getUserStyles=Y;var K=se;V.getPreviewStyles=K;var G=function(e){const t=(new DOMParser).parseFromString(e,"text/html"),n={};for(const e of Array.from(t.querySelectorAll("[data-source-lines]"))){const t=e,[r,i]=t.dataset.sourceLines.split(" ").map(e=>parseInt(e,10));let o=e;const a=[];for(;o&&"BODY"!==o.tagName;){let e=0,t=o;for(;t.previousElementSibling;)t=t.previousElementSibling,t.tagName===o.tagName&&e++;a.unshift({tag:o.tagName.toLowerCase(),index:e}),o=o.parentElement}for(let e=r;e<i;++e)(!n[e]||n[e].length<a.length)&&(n[e]=a)}return n};V.buildLineMap=G;var X=function(e,t,n,r){let i;i=n?function(e){return`<script type="text/x-mathjax-config">\n  MathJax.Hub.Config({\n    jax: ["input/TeX","output/HTML-CSS"],\n    extensions: ["[a11y]/accessibility-menu.js"],\n    'HTML-CSS': {\n      availableFonts: [],\n      webFont: 'TeX',\n      undefinedFamily: ${JSON.stringify((0,I.atomConfig)().mathConfig.undefinedFamily)},\n      mtextFontInherit: true,\n    },\n    TeX: ${JSON.stringify(e,void 0,2)},\n    showMathMenu: true\n  });\n<\/script>\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"><\/script>`}(r):"";return`<!DOCTYPE html>\n<html data-markdown-preview-plus-context="html-export">\n  <head>\n    <meta charset="utf-8" />\n    <title>${e}</title>${i}\n    <style>${function(){const e=/url\(atom:\/\/markdown-preview-plus\/assets\/(.*)\)/;return se(!1).join("\n").replace(e,(function(e,t,n,r){const i=Z.join((0,I.packagePath)(),"assets",t),o=ee.readFileSync(i,"binary");return`url('data:image/jpeg;base64,${Buffer.from(o,"binary").toString("base64")}')`}))}()}</style>\n${t.head.innerHTML}\n  </head>\n  <body>\n    ${t.body.innerHTML}\n  </body>\n</html>\n`};V.mkHtml=X;var Q=function(e){const t=atom.workspace.paneForItem(e);t?(0,I.handlePromise)(t.destroyItem(e)):e.destroy()};V.destroy=Q;var Z=ne(i),ee=ne(n);function te(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return te=function(){return e},e}function ne(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=te();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function*re(e){const t=atom.styles.getStyleElements();for(const n of t)void 0!==e&&n.getAttribute("context")!==e||(yield n.innerText)}function ie(e){return atom.themes.loadStylesheet(Z.join((0,I.packagePath)(),"styles-client",e+".less"))}function oe(){const e=atom.styles.styleElementsBySourcePath[atom.styles.getUserStyleSheetPath()];return e?[e.innerText]:[]}function*ae(e){const t=atom.packages.getActivePackage(e);if(!t)return;const n=t.getStylesheetPaths();for(const e of n){const t=atom.styles.styleElementsBySourcePath[e];t&&(yield t.innerText)}}function se(e){var t,n;if(null===(t=window["markdown-preview-plus-tests"])||void 0===t?void 0:t.getStylesOverride)return null===(n=window["markdown-preview-plus-tests"])||void 0===n?void 0:n.getStylesOverride(e);const r=[];if(e){const e=atom.styles.styleElementsBySourcePath["global-text-editor-styles"];e&&r.push(...function*(e){for(const t of e)yield t.replace(/\batom-workspace\b/g,":root")}([e.innerText])),r.push(ie("editor-global-font"));const t=(0,I.atomConfig)().importPackageStyles;if(t.includes("*"))r.push(...ue(re())),r.push(ie("patch"));else{for(const e of t)r.push(...ue(ae(e)));if(t.includes("fonts")){const e=atom.styles.styleElementsBySourcePath["fonts-package-editorfont"];e&&r.push(...ue([e.innerText]))}}}return r.push(ie("generic")),e&&r.push(ie("display")),(0,I.atomConfig)().useGitHubStyle?r.push(ie("github")):r.push(ie("default")),r.push(...function(e){if(""!==e){const t=atom.themes.getLoadedThemes();if(t){const[n]=t.filter(t=>t.name===e);if(n)return ue(n.getStylesheetPaths().map(e=>atom.themes.loadStylesheet(e)))}atom.notifications.addWarning("Failed to load syntax theme",{detail:`Markdown-preview-plus couldn't find '${e}'`})}return ue(re("atom-text-editor"))}((0,I.atomConfig)().syntaxThemeName)),r.push(...ue(oe())),r}function*ue(e){for(const t of e)yield t.replace(/\batom-text-editor\b/g,"pre.editor-colors")}var ce={};Object.defineProperty(ce,"__esModule",{value:!0});var le=void 0;ce.ImageWatcher=le;var fe=r;le=class{constructor(e){this.callback=e,this.registry=new Map,this.disposed=!1,this.lastImages=new Set,this.tracked=!1}watch(e){this.tracked&&this.lastImages.add(e);const t=this.registry.get(e);if(!t&&(0,I.isFileSync)(e)){const t=Date.now(),n=new fe.CompositeDisposable,r=new fe.File(e);return n.add(r.onDidChange(this.srcClosure(e,"change")),r.onDidDelete(this.srcClosure(e,"delete")),r.onDidRename(this.srcClosure(e,"rename"))),this.registry.set(e,{version:t,watcher:n}),t}return t?t.version:void 0}track(){this.lastImages.clear(),this.tracked=!0}untrack(){this.tracked=!1;const e=Array.from(this.registry.entries());for(const[t,n]of e)this.lastImages.has(t)||(n.watcher.dispose(),this.registry.delete(t));this.lastImages.clear()}dispose(){this.disposed||(this.clear(),this.disposed=!0)}clear(){for(const e of this.registry.values())e.watcher.dispose();this.registry.clear()}srcClosure(e,t){return()=>{const n=this.registry.get(e);n&&("change"===t&&(0,I.isFileSync)(e)?(n.version=Date.now(),this.refreshImages(e,n.version)):(n.watcher.dispose(),this.registry.delete(e),this.refreshImages(e)))}}refreshImages(e,t){this.disposed||this.callback(e,t)}},ce.ImageWatcher=le;var de=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=he();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(i);function he(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return he=function(){return e},e}class pe{constructor(e,t,n){this.initCont=n,this.emitter=new z.Emitter,this.destroyed=!1,this.disposables=new z.CompositeDisposable,this.zoomLevel=0,this.replyCallbackId=0,this.replyCallbacks=new Map,this.id=++pe._id,this.listeners={},this.stylesReady=!1,this.initializeContents=async e=>{e.once("destroyed",()=>this.destroy()),e.on("will-navigate",async(e,t)=>{e.preventDefault();const n=(0,I.atomConfig)().previewConfig.shellOpenFileExtensions.some(e=>t.toLowerCase().endsWith("."+e.toLowerCase()));t.startsWith("file://")&&!n?(0,I.handlePromise)(atom.workspace.open((0,H.default)(t))):(0,I.handlePromise)($.shell.openExternal(t))}),e.getURL().includes("client/template.html")||await e.loadFile(de.join((0,I.packagePath)(),"client","template.html"),{hash:atom.inDevMode()?"dev":void 0});const t=async()=>{this.destroyed||(e.send("set-id",this.id),e.setZoomLevel(this.zoomLevel),this.stylesReady=!0,(0,I.handlePromise)(this.updateStyles().then(this.initCont)))};return await t(),e.on("dom-ready",t),e},this.addListeners({"atom-markdown-preview-plus-ipc-zoom-in":this.zoomIn.bind(this),"atom-markdown-preview-plus-ipc-zoom-out":this.zoomOut.bind(this),"atom-markdown-preview-plus-ipc-did-scroll-preview":e=>{this.emitter.emit("did-scroll-preview",e)},"atom-markdown-preview-plus-ipc-uncaught-error":e=>{const t=new Error;atom.notifications.addFatalError(`Uncaught error ${e.name} in markdown-preview-plus webview client`,{dismissable:!0,stack:t.stack,detail:`${e.message}\n\nstack:\n${e.stack}`})},"atom-markdown-preview-plus-ipc-show-context-menu":()=>{t()},"atom-markdown-preview-plus-ipc-request-reply":({id:e,request:t,result:n})=>{const r=this.replyCallbacks.get(e);if(r&&t===r.request){(0,r.callback)(n)}},"atom-markdown-preview-plus-ipc-key":e=>{const t=new KeyboardEvent(e.type,e);this.element&&this.element.dispatchEvent(t)}}),this.disposables.add(atom.styles.onDidAddStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.styles.onDidRemoveStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.styles.onDidUpdateStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.useGitHubStyle",()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.syntaxThemeName",()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.importPackageStyles",()=>{(0,I.handlePromise)(this.updateStyles())})),this.contents=e.then(this.initializeContents),this.disposables.add(this.imageWatcher=new ce.ImageWatcher(this.updateImages.bind(this)))}async runJS(e){const t=await this.contents;return new Promise(n=>t.executeJavaScript(e,!1,n))}destroy(){if(!this.destroyed){this.destroyed=!0;for(const[e,t]of Object.entries(this.listeners))$.remote.ipcMain.removeListener(e,t),delete this.listeners[e];this.emitter.emit("did-destroy"),this.disposables.dispose(),this.emitter.dispose()}}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async update(e,t,n="none",r,i){if(!this.destroyed)return this.runRequest("update-preview",{html:e,renderLaTeX:t,map:r,diffMethod:n,scrollSyncParams:i})}async fullyReady(){if(!this.destroyed)return this.runRequest("await-fully-ready",{})}async setBasePath(e){return this.send("set-base-path",{path:e})}async setNativeKeys(e){return this.send("set-native-keys",e)}async init(e){return this.send("init",e)}async updateImages(e,t){return this.send("update-images",{oldsrc:e,v:t})}async printToPDF(e){const t=await this.contents;return new Promise((n,r)=>{t.printToPDF(e,(e,t)=>{e?r(e):n(t)})})}async sync(e,t){return this.send("sync",{line:e,flash:t})}async syncSource(){return this.runRequest("sync-source",{})}async scrollSync(e,t){return this.send("scroll-sync",{firstLine:e,lastLine:t})}async zoomIn(){this.zoomLevel+=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async zoomOut(){this.zoomLevel-=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async resetZoom(){this.zoomLevel=0,(await this.contents).setZoomLevel(this.zoomLevel)}async print(){(await this.contents).print()}async openDevTools(){(await this.contents).openDevTools()}async reload(){await this.runRequest("reload",{}),(await this.contents).reload()}async error(e){return this.send("error",{msg:e})}async getTeXConfig(){return this.runRequest("get-tex-config",{})}async getSelection(){return this.runRequest("get-selection",{})}async search(e){(await this.contents).findInPage(e),this.lastSearchText=e}async findNext(){if(!this.lastSearchText)return;(await this.contents).findInPage(this.lastSearchText,{findNext:!0})}hasSearch(){return!!this.lastSearchText}async stopSearch(){const e=await this.contents;this.lastSearchText=void 0,e.stopFindInPage("keepSelection")}async updateStyles(){if(this.stylesReady)return this.send("style",{styles:(0,V.getPreviewStyles)(!0)})}async runRequest(e,t){const n=this.replyCallbackId++,r=new Promise(t=>{this.replyCallbacks.set(n,{request:e,callback:e=>{this.replyCallbacks.delete(n),t(e)}})}),i=Object.assign({id:n},t);return await this.send(e,i),r}async send(e,t){(await this.contents).send(e,t)}addListeners(e){for(const[t,n]of Object.entries(e))this.listeners[t]=(e,t,...r)=>{this.id===t&&n(...r)},$.remote.ipcMain.on(t,this.listeners[t])}}W=pe,B.WebContentsHandler=W,pe._id=0;class ve extends B.WebContentsHandler{constructor(e){const t=document.createElement("webview");super(new Promise(e=>{const n=()=>{t.removeEventListener("dom-ready",n),e(t.getWebContents())};t.addEventListener("dom-ready",n)}),()=>{atom.contextMenu.showForEvent({target:this._element})},e),this._element=document.createElement("div"),this._element.style.width="100%",this._element.style.height="100%",t.style.display="none",this._observer=new ResizeObserver(()=>{requestAnimationFrame(this.updatePosition.bind(this))}),this._observer.observe(this._element),this.dragStart=()=>{t.style.pointerEvents="none"},this.dragEnd=()=>{t.style.pointerEvents="auto"},window.addEventListener("dragstart",this.dragStart),window.addEventListener("dragend",this.dragEnd),t.disablewebsecurity="true",t.nodeintegration="true",t.src="about:blank",t.style.position="absolute",t.style.zIndex="0",this._webview=t,atom.views.getView(atom.workspace).appendChild(t)}registerViewEvents(e){this._webview.addEventListener("focus",()=>{const t=atom.workspace.paneForItem(e);t&&(t.activate(),this._webview.focus())});const t=atom.views.getView(e);this._observer2=new MutationObserver(e=>{for(const n of e)Array.from(n.addedNodes).includes(t)&&this.updatePosition()}),this._observer2.observe(atom.views.getView(atom.workspace).querySelector("atom-workspace-axis"),{childList:!0,subtree:!0})}get element(){return this._element}destroy(){this.destroyed||(super.destroy(),window.removeEventListener("dragstart",this.dragStart),window.removeEventListener("dragend",this.dragEnd),this._observer.disconnect(),this._observer2&&this._observer2.disconnect(),this._element.remove(),this._webview.remove())}updatePosition(){const e=this._element.getBoundingClientRect();this._webview.style.display="",this._webview.style.left=e.left+"px",this._webview.style.top=e.top+"px",this._webview.style.right=e.right+"px",this._webview.style.bottom=e.bottom+"px",this._webview.style.width=e.width+"px",this._webview.style.height=e.height+"px"}}D=ve,F.WebviewHandler=D;var me=Yr(k),ge={};Object.defineProperty(ge,"__esModule",{value:!0});var ye=Dr;ge.getUserMacrosPath=ye;var we=function(e=atom.getConfigDirPath()){return function(e){try{const t=Nr.readFileSync(e).toString("utf-8");return function(e){const t=/^[^a-zA-Z\d\s]$|^[a-zA-Z]*$/,n={};for(const r of Object.keys(e)){const i=e[r];r.match(t)&&Wr(i)?n[r]=i:atom.notifications.addWarning(`Markdown-Preview-Plus failed to load LaTeX macro named '${r}'. Please see the [LaTeX guide](https://github.com/atom-community/markdown-preview-plus/blob/master/docs/math.md#macro-names)`)}return n}(jr.parse(t)||{})}catch(t){const n=t;return console.warn(`Error reading Latex Macros file '${e}': ${void 0!==n.stack?n.stack:n}`),console.error(`Failed to load Latex Macros from '${e}'`,{detail:n.message,dismissable:!0}),{}}}(Dr(e))};ge.loadUserMacros=we;var be=Fr(i);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ie(e,t,n){return(Ie=Ee()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Me(i,n.prototype),i}).apply(null,arguments)}function Ae(e){var t="function"==typeof Map?new Map:void 0;return(Ae=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ie(e,arguments,Ce(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Me(r,e)})(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Le(e):t}function je(e){var t=Ee();return function(){var n,r=Ce(e);if(t){var i=Ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Te(this,n)}}function Ne(e,t,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Re(e,t){return De(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Be(e,t)||ze()}function Fe(e){return De(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Be(e)||ze()}function De(e){if(Array.isArray(e))return e}function Be(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $e(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Be(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}var Ue="&",qe="#",He="!",Ve="-",Je=".",Ye="ALIAS",Ke="BLANK_LINE",Ge="BLOCK_FOLDED",Xe="BLOCK_LITERAL",Qe="COMMENT",Ze="DIRECTIVE",et="DOCUMENT",tt="FLOW_MAP",nt="FLOW_SEQ",rt="MAP",it="MAP_KEY",ot="MAP_VALUE",at="PLAIN",st="QUOTE_DOUBLE",ut="QUOTE_SINGLE",ct="SEQ",lt="SEQ_ITEM",ft={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function dt(e){for(var t=[0],n=e.indexOf("\n");-1!==n;)n+=1,t.push(n),n=e.indexOf("\n",n);return t}function ht(e){var t,n;return"string"==typeof e?(t=dt(e),n=e):(Array.isArray(e)&&(e=e[0]),e&&e.context&&(e.lineStarts||(e.lineStarts=dt(e.context.src)),t=e.lineStarts,n=e.context.src)),{lineStarts:t,src:n}}function pt(e,t){if("number"!=typeof e||e<0)return null;var n=ht(t),r=n.lineStarts,i=n.src;if(!r||!i||e>i.length)return null;for(var o=0;o<r.length;++o){var a=r[o];if(e<a)return{line:o,col:e-r[o-1]+1};if(e===a)return{line:o+1,col:1}}var s=r.length;return{line:s,col:e-r[s-1]+1}}function vt(e,t){var n=ht(t),r=n.lineStarts,i=n.src;if(!r||!(e>=1)||e>r.length)return null;for(var o=r[e-1],a=r[e];a&&a>o&&"\n"===i[a-1];)--a;return i.slice(o,a)}var mt=function(){function e(t,n){_e(this,e),this.start=t,this.end=n||t}return xe(e,null,[{key:"copy",value:function(t){return new e(t.start,t.end)}}]),xe(e,[{key:"isEmpty",value:function(){return"number"!=typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,t){var n=this.start,r=this.end;if(0===e.length||r<=e[0])return this.origStart=n,this.origEnd=r,t;for(var i=t;i<e.length&&!(e[i]>n);)++i;this.origStart=n+i;for(var o=i;i<e.length&&!(e[i]>=r);)++i;return this.origEnd=r+i,o}}]),e}(),gt=function(){function e(t,n,r){_e(this,e),Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=t,this.value=null}return xe(e,null,[{key:"addStringTerminator",value:function(t,n,r){if("\n"===r[r.length-1])return r;var i=e.endOfWhiteSpace(t,n);return i>=t.length||"\n"===t[i]?r+"\n":r}},{key:"atDocumentBoundary",value:function(e,t,n){var r=e[t];if(!r)return!0;var i=e[t-1];if(i&&"\n"!==i)return!1;if(n){if(r!==n)return!1}else if(r!==Ve&&r!==Je)return!1;var o=e[t+1],a=e[t+2];if(o!==r||a!==r)return!1;var s=e[t+3];return!s||"\n"===s||"\t"===s||" "===s}},{key:"endOfIdentifier",value:function(e,t){for(var n=e[t],r="<"===n,i=r?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];n&&-1===i.indexOf(n);)n=e[t+=1];return r&&">"===n&&(t+=1),t}},{key:"endOfIndent",value:function(e,t){for(var n=e[t];" "===n;)n=e[t+=1];return t}},{key:"endOfLine",value:function(e,t){for(var n=e[t];n&&"\n"!==n;)n=e[t+=1];return t}},{key:"endOfWhiteSpace",value:function(e,t){for(var n=e[t];"\t"===n||" "===n;)n=e[t+=1];return t}},{key:"startOfLine",value:function(e,t){var n=e[t-1];if("\n"===n)return t;for(;n&&"\n"!==n;)n=e[t-=1];return t+1}},{key:"endOfBlockIndent",value:function(t,n,r){var i=e.endOfIndent(t,r);if(i>r+n)return i;var o=e.endOfWhiteSpace(t,i),a=t[o];return a&&"\n"!==a?null:o}},{key:"atBlank",value:function(e,t,n){var r=e[t];return"\n"===r||"\t"===r||" "===r||n&&!r}},{key:"nextNodeIsIndented",value:function(e,t,n){return!(!e||t<0)&&(t>0||n&&"-"===e)}},{key:"normalizeOffset",value:function(t,n){var r=t[n];return r?"\n"!==r&&"\n"===t[n-1]?n-1:e.endOfWhiteSpace(t,n):n}},{key:"foldNewline",value:function(t,n,r){for(var i=0,o=!1,a="",s=t[n+1];" "===s||"\t"===s||"\n"===s;){switch(s){case"\n":i=0,n+=1,a+="\n";break;case"\t":i<=r&&(o=!0),n=e.endOfWhiteSpace(t,n+2)-1;break;case" ":i+=1,n+=1}s=t[n+1]}return a||(a=" "),s&&i<=r&&(o=!0),{fold:a,offset:n,error:o}}}]),xe(e,[{key:"getPropValue",value:function(e,t,n){if(!this.context)return null;var r=this.context.src,i=this.props[e];return i&&r[i.start]===t?r.slice(i.start+(n?1:0),i.end):null}},{key:"commentHasRequiredWhitespace",value:function(t){var n=this.context.src;if(this.header&&t===this.header.end)return!1;if(!this.valueRange)return!1;var r=this.valueRange.end;return t!==r||e.atBlank(n,r-1)}},{key:"parseComment",value:function(t){var n=this.context.src;if(n[t]===qe){var r=e.endOfLine(n,t+1),i=new mt(t,r);return this.props.push(i),r}return t}},{key:"setOrigRanges",value:function(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach((function(n){return n.setOrigRange(e,t)})),t}},{key:"toString",value:function(){var t=this.context.src,n=this.range,r=this.value;if(null!=r)return r;var i=t.slice(n.start,n.end);return e.addStringTerminator(t,n.end,i)}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,Ue,!0);if(null!=t)return t}return null}},{key:"comment",get:function(){for(var e=[],t=0;t<this.props.length;++t){var n=this.getPropValue(t,qe,!0);null!=n&&e.push(n)}return e.length>0?e.join("\n"):null}},{key:"hasComment",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]===qe)return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]!==qe)return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[tt,nt,st,ut].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var e=pt(this.range.start,this.context.root);if(e)return{start:e,end:pt(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end;return this.context.src.slice(t,n)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,He,!1);if(null!=t){if("<"===t[1])return{verbatim:t.slice(2,-1)};var n=Re(t.match(/^(.*!)([^!]*)$/),3);n[0];return{handle:n[1],suffix:n[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=t;i<n;++i)if("\n"===r[i])return!0;return!1}}]),e}(),yt=function(e){Oe(n,Ae(Error));var t=je(n);function n(e,r,i){var o;if(_e(this,n),!(i&&r instanceof gt))throw new Error("Invalid arguments for new ".concat(e));return(o=t.call(this)).name=e,o.message=i,o.source=r,o}return xe(n,[{key:"makePretty",value:function(){if(this.source){this.nodeType=this.source.type;var e=this.source.context&&this.source.context.root;if("number"==typeof this.offset){this.range=new mt(this.offset,this.offset+1);var t=e&&pt(this.offset,e);if(t){var n={line:t.line,col:t.col+1};this.linePos={start:t,end:n}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var r=this.linePos.start,i=r.line,o=r.col;this.message+=" at line ".concat(i,", column ").concat(o);var a=e&&function(e,t){var n=e.start,r=e.end,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,o=vt(n.line,t);if(!o)return null;var a=n.col;if(o.length>i)if(a<=i-10)o=o.substr(0,i-1)+"…";else{var s=Math.round(i/2);o.length>a+s&&(o=o.substr(0,a+s-1)+"…"),a-=o.length-i,o="…"+o.substr(1-i)}var u=1,c="";r&&(r.line===n.line&&a+(r.col-n.col)<=i+1?u=r.col-n.col:(u=Math.min(o.length+1,i)-a,c="…"));var l=a>1?" ".repeat(a-1):"",f="^".repeat(u);return"".concat(o,"\n").concat(l).concat(f).concat(c)}(this.linePos,e);a&&(this.message+=":\n\n".concat(a,"\n"))}delete this.source}}}]),n}(),wt=function(e){Oe(n,yt);var t=je(n);function n(e,r){return _e(this,n),t.call(this,"YAMLReferenceError",e,r)}return n}(),bt=function(e){Oe(n,yt);var t=je(n);function n(e,r){return _e(this,n),t.call(this,"YAMLSemanticError",e,r)}return n}(),kt=function(e){Oe(n,yt);var t=je(n);function n(e,r){return _e(this,n),t.call(this,"YAMLSyntaxError",e,r)}return n}(),_t=function(e){Oe(n,yt);var t=je(n);function n(e,r){return _e(this,n),t.call(this,"YAMLWarning",e,r)}return n}(),St=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parseBlockValue",value:function(e){for(var t=this.context,r=t.indent,i=t.inFlow,o=t.src,a=e,s=e,u=o[a];"\n"===u&&!gt.atDocumentBoundary(o,a+1);u=o[a]){var c=gt.endOfBlockIndent(o,r,a+1);if(null===c||"#"===o[c])break;a="\n"===o[c]?c:s=n.endOfLine(o,c,i)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=s,s}},{key:"parse",value:function(e,t){this.context=e;var r=e.inFlow,i=e.src,o=t,a=i[o];return a&&"#"!==a&&"\n"!==a&&(o=n.endOfLine(i,t,r)),this.valueRange=new mt(t,o),o=gt.endOfWhiteSpace(i,o),o=this.parseComment(o),this.hasComment&&!this.valueRange.isEmpty()||(o=this.parseBlockValue(o)),o}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=r[n-1];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[--n-1];for(var o="",a=t;a<n;++a){var s=r[a];if("\n"===s){var u=gt.foldNewline(r,a,-1);o+=u.fold,a=u.offset}else if(" "===s||"\t"===s){for(var c=a,l=r[a+1];a<n&&(" "===l||"\t"===l);)l=r[(a+=1)+1];"\n"!==l&&(o+=a>c?r.slice(c,a+1):s)}else o+=s}var f=r[t];switch(f){case"\t":return{errors:[new bt(this,"Plain value cannot start with a tab character")],str:o};case"@":case"`":var d="Plain value cannot start with reserved character ".concat(f);return{errors:[new bt(this,d)],str:o};default:return o}}}],[{key:"endOfLine",value:function(e,t,n){for(var r=e[t],i=t;r&&"\n"!==r&&(!n||"["!==r&&"]"!==r&&"{"!==r&&"}"!==r&&","!==r);){var o=e[i+1];if(":"===r&&(!o||"\n"===o||"\t"===o||" "===o||n&&","===o))break;if((" "===r||"\t"===r)&&"#"===o)break;i+=1,r=o}return i}}]),n}(),xt=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.call(this,Ke)}return xe(n,[{key:"parse",value:function(e,t){return this.context=e,this.range=new mt(t,t+1),t+1}},{key:"includesTrailingLines",get:function(){return!0}}]),n}(),Pt=function(e){Oe(n,gt);var t=je(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).node=null,i}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.atLineStart,o=e.lineStart;i||this.type!==lt||(this.error=new bt(this,"Sequence items must not have preceding content on the same line"));for(var a=i?t-o:e.indent,s=gt.endOfWhiteSpace(r,t+1),u=r[s],c="#"===u,l=[],f=null;"\n"===u||"#"===u;){if("#"===u){var d=gt.endOfLine(r,s+1);l.push(new mt(s,d)),s=d}else{i=!0,o=s+1,"\n"===r[gt.endOfWhiteSpace(r,o)]&&0===l.length&&(o=(f=new xt).parse({src:r},o)),s=gt.endOfIndent(r,o)}u=r[s]}if(gt.nextNodeIsIndented(u,s-(o+a),this.type!==lt)?this.node=n({atLineStart:i,inCollection:!1,indent:a,lineStart:o,parent:this},s):u&&o>t+1&&(s=o-1),this.node){if(f){var h=e.parent.items||e.parent.contents;h&&h.push(f)}l.length&&Array.prototype.push.apply(this.props,l),s=this.node.range.end}else if(c){var p=l[0];this.props.push(p),s=p.end}else s=gt.endOfLine(r,t+1);var v=this.node?this.node.valueRange.end:s;return this.valueRange=new mt(t,v),s}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.node?this.node.setOrigRanges(e,t):t}},{key:"toString",value:function(){var e=this.context.src,t=this.node,n=this.range,r=this.value;if(null!=r)return r;var i=t?e.slice(n.start,t.range.start)+String(t):e.slice(n.start,n.end);return gt.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}}]),n}(),Ot=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.call(this,Qe)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=this.parseComment(t);return this.range=new mt(t,n),n}}]),n}();function Ct(e){for(var t=e;t instanceof Pt;)t=t.node;if(!(t instanceof Mt))return null;for(var n=t.items.length,r=-1,i=n-1;i>=0;--i){var o=t.items[i];if(o.type===Qe){var a=o.context,s=a.indent,u=a.lineStart;if(s>0&&o.range.start>=u+s)break;r=i}else{if(o.type!==Ke)break;r=i}}if(-1===r)return null;for(var c=t.items.splice(r,n-r),l=c[0].range.start;t.range.end=l,t.valueRange&&t.valueRange.end>l&&(t.valueRange.end=l),t!==e;)t=t.context.parent;return c}var Mt=function(e){Oe(n,gt);var t=je(n);function n(e){var r;_e(this,n),r=t.call(this,e.type===lt?ct:rt);for(var i=e.props.length-1;i>=0;--i)if(e.props[i].start<e.context.lineStart){r.props=e.props.slice(0,i+1),e.props=e.props.slice(i+1);var o=e.props[0]||e.valueRange;e.range.start=o.start;break}r.items=[e];var a=Ct(e);return a&&Array.prototype.push.apply(r.items,a),r}return xe(n,null,[{key:"nextContentHasIndent",value:function(e,t,r){var i=gt.endOfLine(e,t)+1,o=e[t=gt.endOfWhiteSpace(e,i)];return!!o&&(t>=i+r||("#"===o||"\n"===o)&&n.nextContentHasIndent(e,t,r))}}]),xe(n,[{key:"parse",value:function(e,t){this.context=e;var r=e.parseNode,i=e.src,o=gt.startOfLine(i,t),a=this.items[0];a.context.parent=this,this.valueRange=mt.copy(a.valueRange);for(var s=a.range.start-a.context.lineStart,u=t,c=i[u=gt.normalizeOffset(i,u)],l=gt.endOfWhiteSpace(i,o)===u,f=!1;c;){for(;"\n"===c||"#"===c;){if(l&&"\n"===c&&!f){var d=new xt;if(u=d.parse({src:i},u),this.valueRange.end=u,u>=i.length){c=null;break}this.items.push(d),u-=1}else if("#"===c){if(u<o+s&&!n.nextContentHasIndent(i,u,s))return u;var h=new Ot;if(u=h.parse({indent:s,lineStart:o,src:i},u),this.items.push(h),this.valueRange.end=u,u>=i.length){c=null;break}}if(o=u+1,u=gt.endOfIndent(i,o),gt.atBlank(i,u)){var p=gt.endOfWhiteSpace(i,u),v=i[p];v&&"\n"!==v&&"#"!==v||(u=p)}c=i[u],l=!0}if(!c)break;if(u!==o+s&&(l||":"!==c)){if(u<o+s){o>t&&(u=o);break}if(!this.error){this.error=new kt(this,"All collection items must start at the same column")}}if(a.type===lt){if("-"!==c){o>t&&(u=o);break}}else if("-"===c&&!this.error){var m=i[u+1];if(!m||"\n"===m||"\t"===m||" "===m){this.error=new kt(this,"A collection cannot be both a mapping and a sequence")}}var g=r({atLineStart:l,inCollection:!0,indent:s,lineStart:o,parent:this},u);if(!g)return u;if(this.items.push(g),this.valueRange.end=g.valueRange.end,c=i[u=gt.normalizeOffset(i,g.range.end)],l=!1,f=g.includesTrailingLines,c){for(var y=u-1,w=i[y];" "===w||"\t"===w;)w=i[--y];"\n"===w&&(o=y+1,l=!0)}var b=Ct(g);b&&Array.prototype.push.apply(this.items,b)}return u}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){t=n.setOrigRanges(e,t)})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;for(var i=e.slice(n.start,t[0].range.start)+String(t[0]),o=1;o<t.length;++o){var a=t[o],s=a.context,u=s.atLineStart,c=s.indent;if(u)for(var l=0;l<c;++l)i+=" ";i+=String(a)}return gt.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return this.items.length>0}}]),n}(),Et=function(e){Oe(n,gt);var t=je(n);function n(){var e;return _e(this,n),(e=t.call(this,Ze)).name=null,e}return xe(n,[{key:"parseName",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"\t"!==r&&" "!==r;)r=t[n+=1];return this.name=t.slice(e,n),n}},{key:"parseParameters",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"#"!==r;)r=t[n+=1];return this.valueRange=new mt(e,n),n}},{key:"parse",value:function(e,t){this.context=e;var n=this.parseName(t+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new mt(t,n),n}},{key:"parameters",get:function(){var e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}}]),n}(),It=function(e){Oe(n,gt);var t=je(n);function n(){var e;return _e(this,n),(e=t.call(this,et)).directives=null,e.contents=null,e.directivesEndMarker=null,e.documentEndMarker=null,e}return xe(n,null,[{key:"startCommentOrEndBlankLine",value:function(e,t){var n=gt.endOfWhiteSpace(e,t),r=e[n];return"#"===r||"\n"===r?n:t}}]),xe(n,[{key:"parseDirectives",value:function(e){var t=this.context.src;this.directives=[];for(var r=!0,i=!1,o=e;!gt.atDocumentBoundary(t,o,Ve);)switch(t[o=n.startCommentOrEndBlankLine(t,o)]){case"\n":if(r){var a=new xt;(o=a.parse({src:t},o))<t.length&&this.directives.push(a)}else o+=1,r=!0;break;case"#":var s=new Ot;o=s.parse({src:t},o),this.directives.push(s),r=!1;break;case"%":var u=new Et;o=u.parse({parent:this,src:t},o),this.directives.push(u),i=!0,r=!1;break;default:return i?this.error=new bt(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o}return t[o]?(this.directivesEndMarker=new mt(o,o+3),o+3):(i?this.error=new bt(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o)}},{key:"parseContents",value:function(e){var t=this.context,r=t.parseNode,i=t.src;this.contents||(this.contents=[]);for(var o=e;"-"===i[o-1];)o-=1;var a=gt.endOfWhiteSpace(i,e),s=o===e;for(this.valueRange=new mt(a);!gt.atDocumentBoundary(i,a,Je);){switch(i[a]){case"\n":if(s){var u=new xt;(a=u.parse({src:i},a))<i.length&&this.contents.push(u)}else a+=1,s=!0;o=a;break;case"#":var c=new Ot;a=c.parse({src:i},a),this.contents.push(c),s=!1;break;default:var l=gt.endOfIndent(i,a),f=r({atLineStart:s,indent:-1,inFlow:!1,inCollection:!1,lineStart:o,parent:this},l);if(!f)return this.valueRange.end=l;this.contents.push(f),a=f.range.end,s=!1;var d=Ct(f);d&&Array.prototype.push.apply(this.contents,d)}a=n.startCommentOrEndBlankLine(i,a)}if(this.valueRange.end=a,i[a]&&(this.documentEndMarker=new mt(a,a+3),i[a+=3])){if("#"===i[a=gt.endOfWhiteSpace(i,a)]){var h=new Ot;a=h.parse({src:i},a),this.contents.push(h)}switch(i[a]){case"\n":a+=1;break;case void 0:break;default:this.error=new kt(this,"Document end marker line cannot have a non-comment suffix")}}return a}},{key:"parse",value:function(e,t){e.root=this,this.context=e;var n=65279===e.src.charCodeAt(t)?t+1:t;return n=this.parseDirectives(n),n=this.parseContents(n)}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.directives.forEach((function(n){t=n.setOrigRanges(e,t)})),this.directivesEndMarker&&(t=this.directivesEndMarker.setOrigRange(e,t)),this.contents.forEach((function(n){t=n.setOrigRanges(e,t)})),this.documentEndMarker&&(t=this.documentEndMarker.setOrigRange(e,t)),t}},{key:"toString",value:function(){var e=this.contents,t=this.directives,n=this.value;if(null!=n)return n;var r=t.join("");return e.length>0&&((t.length>0||e[0].type===Qe)&&(r+="---\n"),r+=e.join("")),"\n"!==r[r.length-1]&&(r+="\n"),r}}]),n}(),At=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=gt.endOfIdentifier(n,t+1);return this.valueRange=new mt(t+1,r),r=gt.endOfWhiteSpace(n,r),r=this.parseComment(r)}}]),n}(),Lt="CLIP",Tt="KEEP",jt="STRIP",Nt=function(e){Oe(n,gt);var t=je(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).blockIndent=null,i.chomping=Lt,i.header=null,i}return xe(n,[{key:"parseBlockHeader",value:function(e){for(var t=this.context.src,n=e+1,r="";;){var i=t[n];switch(i){case"-":this.chomping=jt;break;case"+":this.chomping=Tt;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=i;break;default:return this.blockIndent=Number(r)||null,this.header=new mt(e,n),n}n+=1}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,n=t.indent,r=t.src,i=!!this.blockIndent,o=e,a=e,s=1,u=r[o];"\n"===u&&(o+=1,!gt.atDocumentBoundary(r,o));u=r[o]){var c=gt.endOfBlockIndent(r,n,o);if(null===c)break;var l=r[c],f=c-(o+n);if(this.blockIndent){if(l&&"\n"!==l&&f<this.blockIndent){if("#"===r[c])break;if(!this.error){var d="Block scalars must not be less indented than their ".concat(i?"explicit indentation indicator":"first line");this.error=new bt(this,d)}}}else if("\n"!==r[c]){if(f<s){this.error=new bt(this,"Block scalars with more-indented leading empty lines must use an explicit indentation indicator")}this.blockIndent=f}else f>s&&(s=f);o="\n"===r[c]?c:a=gt.endOfLine(r,c)}return this.chomping!==Tt&&(o=r[a]?a+1:a),this.valueRange=new mt(e+1,o),o}},{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=this.parseBlockHeader(t);return r=gt.endOfWhiteSpace(n,r),r=this.parseComment(r),r=this.parseBlockValue(r)}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.header?this.header.setOrigRange(e,t):t}},{key:"includesTrailingLines",get:function(){return this.chomping===Tt}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end,r=this.context,i=r.indent,o=r.src;if(this.valueRange.isEmpty())return"";for(var a=null,s=o[n-1];"\n"===s||"\t"===s||" "===s;){if((n-=1)<=t){if(this.chomping===Tt)break;return""}"\n"===s&&(a=n),s=o[n-1]}var u=n+1;a&&(this.chomping===Tt?(u=a,n=this.valueRange.end):n=a);for(var c=i+this.blockIndent,l=this.type===Ge,f=!0,d="",h="",p=!1,v=t;v<n;++v){for(var m=0;m<c&&" "===o[v];++m)v+=1;var g=o[v];if("\n"===g)"\n"===h?d+="\n":h="\n";else{var y=gt.endOfLine(o,v),w=o.slice(v,y);v=y,l&&(" "===g||"\t"===g)&&v<u?(" "===h?h="\n":p||f||"\n"!==h||(h="\n\n"),d+=h+w,h=y<n&&o[y]||"",p=!0):(d+=h+w,h=l&&v<u?" ":"\n",p=!1),f&&""!==w&&(f=!1)}}return this.chomping===jt?d:d+"\n"}}]),n}(),Rt=function(e){Oe(n,gt);var t=je(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).items=null,i}return xe(n,[{key:"prevNodeIsJsonLike",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.items[e-1];return!!t&&(t.jsonLike||t.type===Qe&&this.prevNodeIsJsonLike(e-1))}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.indent,o=e.lineStart,a=r[t];this.items=[{char:a,offset:t}];var s=gt.endOfWhiteSpace(r,t+1);for(a=r[s];a&&"]"!==a&&"}"!==a;){switch(a){case"\n":if(o=s+1,"\n"===r[gt.endOfWhiteSpace(r,o)]){var u=new xt;o=u.parse({src:r},o),this.items.push(u)}if((s=gt.endOfIndent(r,o))<=o+i&&(a=r[s],s<o+i||"]"!==a&&"}"!==a)){this.error=new bt(this,"Insufficient indentation in flow collection")}break;case",":this.items.push({char:a,offset:s}),s+=1;break;case"#":var c=new Ot;s=c.parse({src:r},s),this.items.push(c);break;case"?":case":":var l=r[s+1];if("\n"===l||"\t"===l||" "===l||","===l||":"===a&&this.prevNodeIsJsonLike()){this.items.push({char:a,offset:s}),s+=1;break}default:var f=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:o,parent:this},s);if(!f)return this.valueRange=new mt(t,s),s;this.items.push(f),s=gt.normalizeOffset(r,f.range.end)}a=r[s=gt.endOfWhiteSpace(r,s)]}return this.valueRange=new mt(t,s+1),a&&(this.items.push({char:a,offset:s}),s=gt.endOfWhiteSpace(r,s+1),s=this.parseComment(s)),s}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){if(n instanceof gt)t=n.setOrigRanges(e,t);else if(0===e.length)n.origOffset=n.offset;else{for(var r=t;r<e.length&&!(e[r]>n.offset);)++r;n.origOffset=n.offset+r,t=r}})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;var i=t.filter((function(e){return e instanceof gt})),o="",a=n.start;return i.forEach((function(t){var n=e.slice(a,t.range.start);a=t.range.end,"\n"===(o+=n+String(t))[o.length-1]&&"\n"!==e[a-1]&&"\n"===e[a]&&(a+=1)})),o+=e.slice(a,n.end),gt.addStringTerminator(e,n.end,o)}}]),n}(),Ft=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parseCharCode",value:function(e,t,n){var r=this.context.src,i=r.substr(e,t),o=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;return isNaN(o)?(n.push(new kt(this,"Invalid escape sequence ".concat(r.substr(e-2,t+2)))),r.substr(e-2,t+2)):String.fromCodePoint(o)}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new mt(t,i),i=gt.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;'"'!==a[r-1]&&e.push(new kt(this,'Missing closing "quote'));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){gt.atDocumentBoundary(a,u+1)&&e.push(new bt(this,"Document boundary indicators are not allowed within string values"));var l=gt.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new bt(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===c)switch(a[u+=1]){case"0":s+="\0";break;case"a":s+="";break;case"b":s+="\b";break;case"e":s+="";break;case"f":s+="\f";break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"v":s+="\v";break;case"N":s+="";break;case"_":s+=" ";break;case"L":s+="\u2028";break;case"P":s+="\u2029";break;case" ":s+=" ";break;case'"':s+='"';break;case"/":s+="/";break;case"\\":s+="\\";break;case"\t":s+="\t";break;case"x":s+=this.parseCharCode(u+1,2,e),u+=2;break;case"u":s+=this.parseCharCode(u+1,4,e),u+=4;break;case"U":s+=this.parseCharCode(u+1,8,e),u+=8;break;case"\n":for(;" "===a[u+1]||"\t"===a[u+1];)u+=1;break;default:e.push(new kt(this,"Invalid escape sequence ".concat(a.substr(u-1,2)))),s+="\\"+a[u]}else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n&&'"'!==n;)n=e[t+="\\"===n?2:1];return t+1}}]),n}(),Dt=function(e){Oe(n,gt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new mt(t,i),i=gt.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;"'"!==a[r-1]&&e.push(new kt(this,"Missing closing 'quote"));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){gt.atDocumentBoundary(a,u+1)&&e.push(new bt(this,"Document boundary indicators are not allowed within string values"));var l=gt.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new bt(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===c)s+=c,"'"!==a[u+=1]&&e.push(new kt(this,"Unescaped single quote? This should not happen."));else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n;)if("'"===n){if("'"!==e[t+1])break;n=e[t+=2]}else n=e[t+=1];return t+1}}]),n}();function Bt(e,t){switch(e){case Ye:return new At(e,t);case Ge:case Xe:return new Nt(e,t);case tt:case nt:return new Rt(e,t);case it:case ot:case lt:return new Pt(e,t);case Qe:case at:return new St(e,t);case st:return new Ft(e,t);case ut:return new Dt(e,t);default:return null}}var Wt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.atLineStart,o=r.inCollection,a=r.inFlow,s=r.indent,u=r.lineStart,c=r.parent;_e(this,e),Pe(this,"parseNode",(function(n,r){if(gt.atDocumentBoundary(t.src,r))return null;var i=new e(t,n),o=i.parseProps(r),a=o.props,s=o.type,u=o.valueStart,c=Bt(s,a),l=c.parse(i,u);if(c.range=new mt(r,l),l<=r&&(c.error=new Error("Node#parse consumed no characters"),c.error.parseEnd=l,c.error.source=c,c.range.end=r+1),i.nodeStartsCollection(c)){c.error||i.atLineStart||i.parent.type!==et||(c.error=new kt(c,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var f=new Mt(c);return l=f.parse(new e(i),l),f.range=new mt(r,l),f}return c})),this.atLineStart=null!=i?i:n.atLineStart||!1,this.inCollection=null!=o?o:n.inCollection||!1,this.inFlow=null!=a?a:n.inFlow||!1,this.indent=null!=s?s:n.indent,this.lineStart=null!=u?u:n.lineStart,this.parent=null!=c?c:n.parent||{},this.root=n.root,this.src=n.src}return xe(e,null,[{key:"parseType",value:function(e,t,n){switch(e[t]){case"*":return Ye;case">":return Ge;case"|":return Xe;case"{":return tt;case"[":return nt;case"?":return!n&&gt.atBlank(e,t+1,!0)?it:at;case":":return!n&&gt.atBlank(e,t+1,!0)?ot:at;case"-":return!n&&gt.atBlank(e,t+1,!0)?lt:at;case'"':return st;case"'":return ut;default:return at}}}]),xe(e,[{key:"nodeStartsCollection",value:function(e){var t=this.inCollection,n=this.inFlow,r=this.src;if(t||n)return!1;if(e instanceof Pt)return!0;var i=e.range.end;return"\n"!==r[i]&&"\n"!==r[i-1]&&":"===r[i=gt.endOfWhiteSpace(r,i)]}},{key:"parseProps",value:function(t){for(var n=this.inFlow,r=this.parent,i=this.src,o=[],a=!1,s=i[t=this.atLineStart?gt.endOfIndent(i,t):gt.endOfWhiteSpace(i,t)];s===Ue||s===qe||s===He||"\n"===s;){if("\n"===s){var u=t+1,c=gt.endOfIndent(i,u),l=c-(u+this.indent),f=r.type===lt&&r.context.atLineStart;if(!gt.nextNodeIsIndented(i[c],l,!f))break;this.atLineStart=!0,this.lineStart=u,a=!1,t=c}else if(s===qe){var d=gt.endOfLine(i,t+1);o.push(new mt(t,d)),t=d}else{var h=gt.endOfIdentifier(i,t+1);s===He&&","===i[h]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(t+1,h+13))&&(h=gt.endOfIdentifier(i,h+5)),o.push(new mt(t,h)),a=!0,t=gt.endOfWhiteSpace(i,h)}s=i[t]}return a&&":"===s&&gt.atBlank(i,t+1,!0)&&(t-=1),{props:o,type:e.parseType(i,t,n),valueStart:t}}}]),e}();function zt(e){var t=[];-1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,(function(e,n){return e.length>1&&t.push(n),"\n"})));var n=[],r=0;do{var i=new It,o=new Wt({src:e});r=i.parse(o,r),n.push(i)}while(r<e.length);return n.setOrigRanges=function(){if(0===t.length)return!1;for(var e=1;e<t.length;++e)t[e]-=e;for(var r=0,i=0;i<n.length;++i)r=n[i].setOrigRanges(t,r);return t.splice(0,t.length),!0},n.toString=function(){return n.join("...\n")},n}function $t(e,t,n){return n?-1===n.indexOf("\n")?"".concat(e," #").concat(n):"".concat(e,"\n")+n.replace(/^/gm,"".concat(t||"","#")):e}var Ut=function e(){_e(this,e)};function qt(e,t,n){if(Array.isArray(e))return e.map((function(e,t){return qt(e,String(t),n)}));if(e&&"function"==typeof e.toJSON){var r=n&&n.anchors&&n.anchors.get(e);r&&(n.onCreate=function(e){r.res=e,delete n.onCreate});var i=e.toJSON(t,n);return r&&n.onCreate&&n.onCreate(i),i}return n&&n.keep||"bigint"!=typeof e?e:Number(e)}var Ht=function(e){Oe(n,Ut);var t=je(n);function n(e){var r;return _e(this,n),(r=t.call(this)).value=e,r}return xe(n,[{key:"toJSON",value:function(e,t){return t&&t.keep?this.value:qt(this.value,e,t)}},{key:"toString",value:function(){return String(this.value)}}]),n}();function Vt(e,t,n){for(var r=n,i=t.length-1;i>=0;--i){var o=t[i],a=Number.isInteger(o)&&o>=0?[]:{};a[o]=r,r=a}return e.createNode(r,!1)}var Jt=function(e){return null==e||"object"===ke(e)&&e[Symbol.iterator]().next().done},Yt=function(e){Oe(n,Ut);var t=je(n);function n(e){var r;return _e(this,n),Pe(Le(r=t.call(this)),"items",[]),r.schema=e,r}return xe(n,[{key:"addIn",value:function(e,t){if(Jt(e))this.add(t);else{var r=Fe(e),i=r[0],o=r.slice(1),a=this.get(i,!0);if(a instanceof n)a.addIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,Vt(this.schema,o,t))}}}},{key:"deleteIn",value:function(e){var t=Fe(e),r=t[0],i=t.slice(1);if(0===i.length)return this.delete(r);var o=this.get(r,!0);if(o instanceof n)return o.deleteIn(i);throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(i))}},{key:"getIn",value:function(e,t){var r=Fe(e),i=r[0],o=r.slice(1),a=this.get(i,!0);return 0===o.length?!t&&a instanceof Ht?a.value:a:a instanceof n?a.getIn(o,t):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every((function(e){if(!e||"PAIR"!==e.type)return!1;var t=e.value;return null==t||t instanceof Ht&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag}))}},{key:"hasIn",value:function(e){var t=Fe(e),r=t[0],i=t.slice(1);if(0===i.length)return this.has(r);var o=this.get(r,!0);return o instanceof n&&o.hasIn(i)}},{key:"setIn",value:function(e,t){var r=Fe(e),i=r[0],o=r.slice(1);if(0===o.length)this.set(i,t);else{var a=this.get(i,!0);if(a instanceof n)a.setIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,Vt(this.schema,o,t))}}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(e,t,r,i){var o=this,a=t.blockItem,s=t.flowChars,u=t.isMap,c=t.itemIndent,l=e,f=l.indent,d=l.indentStep,h=l.stringify,p=this.type===tt||this.type===nt||e.inFlow;p&&(c+=d);var v=u&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:v,indent:c,inFlow:p,type:null});var m,g=!1,y=!1,w=this.items.reduce((function(t,n,r){var i;n&&(!g&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore&&n.commentBefore.match(/^.*$/gm).forEach((function(e){t.push({type:"comment",str:"#".concat(e)})})),n.comment&&(i=n.comment),p&&(!g&&n.spaceBefore||n.commentBefore||n.comment||n.key&&(n.key.commentBefore||n.key.comment)||n.value&&(n.value.commentBefore||n.value.comment))&&(y=!0)),g=!1;var a=h(n,e,(function(){return i=null}),(function(){return g=!0}));return p&&!y&&a.includes("\n")&&(y=!0),p&&r<o.items.length-1&&(a+=","),a=$t(a,c,i),g&&(i||p)&&(g=!1),t.push({type:"item",str:a}),t}),[]);if(0===w.length)m=s.start+s.end;else if(p){var b=s.start,k=s.end,_=w.map((function(e){return e.str}));if(y||_.reduce((function(e,t){return e+t.length+2}),2)>n.maxFlowStringSingleLineLength){m=b;var S,x=$e(_);try{for(x.s();!(S=x.n()).done;){var P=S.value;m+=P?"\n".concat(d).concat(f).concat(P):"\n"}}catch(e){x.e(e)}finally{x.f()}m+="\n".concat(f).concat(k)}else m="".concat(b," ").concat(_.join(" ")," ").concat(k)}else{var O=w.map(a);m=O.shift();var C,M=$e(O);try{for(M.s();!(C=M.n()).done;){var E=C.value;m+=E?"\n".concat(f).concat(E):"\n"}}catch(e){M.e(e)}finally{M.f()}}return this.comment?(m+="\n"+this.comment.replace(/^/gm,"".concat(f,"#")),r&&r()):g&&i&&i(),m}}]),n}();function Kt(e){var t=e instanceof Ht?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),Number.isInteger(t)&&t>=0?t:null}Pe(Yt,"maxFlowStringSingleLineLength",60);var Gt=function(e){Oe(n,Yt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"add",value:function(e){this.items.push(e)}},{key:"delete",value:function(e){var t=Kt(e);return"number"==typeof t&&this.items.splice(t,1).length>0}},{key:"get",value:function(e,t){var n=Kt(e);if("number"==typeof n){var r=this.items[n];return!t&&r instanceof Ht?r.value:r}}},{key:"has",value:function(e){var t=Kt(e);return"number"==typeof t&&t<this.items.length}},{key:"set",value:function(e,t){var n=Kt(e);if("number"!=typeof n)throw new Error("Expected a valid index, not ".concat(e,"."));this.items[n]=t}},{key:"toJSON",value:function(e,t){var n=[];t&&t.onCreate&&t.onCreate(n);var r,i=0,o=$e(this.items);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.push(qt(a,String(i++),t))}}catch(e){o.e(e)}finally{o.f()}return n}},{key:"toString",value:function(e,t,r){return e?Ne(Ce(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return"comment"===e.type?e.str:"- ".concat(e.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},t,r):JSON.stringify(this)}}]),n}(),Xt=function(e){Oe(n,Ut);var t=je(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _e(this,n),(r=t.call(this)).key=e,r.value=i,r.type=n.Type.PAIR,r}return xe(n,[{key:"addToJSMap",value:function(e,t){var n=qt(this.key,"",e);if(t instanceof Map){var r=qt(this.value,n,e);t.set(n,r)}else if(t instanceof Set)t.add(n);else{var i=function(e,t,n){return null===t?"":"object"!==ke(t)?String(t):e instanceof Ut&&n&&n.doc?e.toString({anchors:{},doc:n.doc,indent:"",indentStep:n.indentStep,inFlow:!0,inStringifyKey:!0,stringify:n.stringify}):JSON.stringify(t)}(this.key,n,e);t[i]=qt(this.value,i,e)}return t}},{key:"toJSON",value:function(e,t){var n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}},{key:"toString",value:function(e,t,n){if(!e||!e.doc)return JSON.stringify(this);var r=e.doc.options,i=r.indent,o=r.indentSeq,a=r.simpleKeys,s=this.key,u=this.value,c=s instanceof Ut&&s.comment;if(a){if(c)throw new Error("With simple keys, key nodes cannot have comments");if(s instanceof Yt){throw new Error("With simple keys, collection cannot be used as a key value")}}var l=!a&&(!s||c||s instanceof Yt||s.type===Ge||s.type===Xe),f=e,d=f.doc,h=f.indent,p=f.indentStep,v=f.stringify;e=Object.assign({},e,{implicitKey:!l,indent:h+p});var m=!1,g=v(s,e,(function(){return c=null}),(function(){return m=!0}));if(g=$t(g,e.indent,c),e.allNullValues&&!a)return this.comment?(g=$t(g,e.indent,this.comment),t&&t()):m&&!c&&n&&n(),e.inFlow?g:"? ".concat(g);g=l?"? ".concat(g,"\n").concat(h,":"):"".concat(g,":"),this.comment&&(g=$t(g,e.indent,this.comment),t&&t());var y="",w=null;if(u instanceof Ut){if(u.spaceBefore&&(y="\n"),u.commentBefore){var b=u.commentBefore.replace(/^/gm,"".concat(e.indent,"#"));y+="\n".concat(b)}w=u.comment}else u&&"object"===ke(u)&&(u=d.schema.createNode(u,!0));e.implicitKey=!1,!l&&!this.comment&&u instanceof Ht&&(e.indentAtStart=g.length+1),m=!1,!o&&i>=2&&!e.inFlow&&!l&&u instanceof Gt&&u.type!==nt&&!u.tag&&!d.anchors.getName(u)&&(e.indent=e.indent.substr(2));var k=v(u,e,(function(){return w=null}),(function(){return m=!0})),_=" ";if(y||this.comment)_="".concat(y,"\n").concat(e.indent);else if(!l&&u instanceof Yt){("["===k[0]||"{"===k[0])&&!k.includes("\n")||(_="\n".concat(e.indent))}return m&&!w&&n&&n(),$t(g+_+k,e.indent,w)}},{key:"commentBefore",get:function(){return this.key instanceof Ut?this.key.commentBefore:void 0},set:function(e){if(null==this.key&&(this.key=new Ht(null)),!(this.key instanceof Ut)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}}]),n}();Pe(Xt,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Qt=function(e){Oe(n,Ut);var t=je(n);function n(e){var r;return _e(this,n),(r=t.call(this)).source=e,r.type=Ye,r}return xe(n,null,[{key:"stringify",value:function(e,t){var n=e.range,r=e.source,i=t.anchors,o=t.doc,a=t.implicitKey,s=t.inStringifyKey,u=Object.keys(i).find((function(e){return i[e]===r}));if(!u&&s&&(u=o.anchors.getName(r)||o.anchors.newName()),u)return"*".concat(u).concat(a?" ":"");var c=o.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(c," [").concat(n,"]"))}}]),xe(n,[{key:"toJSON",value:function(e,t){if(!t)return qt(this.source,e,t);var n=t.anchors,r=t.maxAliasCount,i=n.get(this.source);if(!i||void 0===i.res){var o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new wt(this.cstNode,o):new ReferenceError(o)}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=function e(t,n){if(t instanceof Qt){var r=n.get(t.source);return r.count*r.aliasCount}if(t instanceof Yt){var i,o=0,a=$e(t.items);try{for(a.s();!(i=a.n()).done;){var s=e(i.value,n);s>o&&(o=s)}}catch(e){a.e(e)}finally{a.f()}return o}if(t instanceof Xt){var u=e(t.key,n),c=e(t.value,n);return Math.max(u,c)}return 1}(this.source,n)),i.count*i.aliasCount>r)){var a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new wt(this.cstNode,a):new ReferenceError(a)}return i.res}},{key:"toString",value:function(e){return n.stringify(this,e)}},{key:"tag",set:function(e){throw new Error("Alias nodes cannot have tags")}}]),n}();function Zt(e,t){var n,r=t instanceof Ht?t.value:t,i=$e(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof Xt){if(o.key===t||o.key===r)return o;if(o.key&&o.key.value===r)return o}}}catch(e){i.e(e)}finally{i.f()}}Pe(Qt,"default",!0);var en=function(e){Oe(n,Yt);var t=je(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"add",value:function(e,t){e?e instanceof Xt||(e=new Xt(e.key||e,e.value)):e=new Xt(e);var n=Zt(this.items,e.key),r=this.schema&&this.schema.sortMapEntries;if(n){if(!t)throw new Error("Key ".concat(e.key," already set"));n.value=e.value}else if(r){var i=this.items.findIndex((function(t){return r(e,t)<0}));-1===i?this.items.push(e):this.items.splice(i,0,e)}else this.items.push(e)}},{key:"delete",value:function(e){var t=Zt(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}},{key:"get",value:function(e,t){var n=Zt(this.items,e),r=n&&n.value;return!t&&r instanceof Ht?r.value:r}},{key:"has",value:function(e){return!!Zt(this.items,e)}},{key:"set",value:function(e,t){this.add(new Xt(e,t),!0)}},{key:"toJSON",value:function(e,t,n){var r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);var i,o=$e(this.items);try{for(o.s();!(i=o.n()).done;){i.value.addToJSMap(t,r)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);var i,o=$e(this.items);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!(a instanceof Xt))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(a)," instead"))}}catch(e){o.e(e)}finally{o.f()}return Ne(Ce(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},t,r)}}]),n}(),tn=function(e){Oe(n,Xt);var t=je(n);function n(e){var r;if(_e(this,n),e instanceof Xt){var i=e.value;i instanceof Gt||((i=new Gt).items.push(e.value),i.range=e.value.range),(r=t.call(this,e.key,i)).range=e.range}else r=t.call(this,new Ht("<<"),new Gt);return r.type=Xt.Type.MERGE_PAIR,Te(r)}return xe(n,[{key:"addToJSMap",value:function(e,t){var n,r=$e(this.value.items);try{for(r.s();!(n=r.n()).done;){var i=n.value.source;if(!(i instanceof en))throw new Error("Merge sources must be maps");var o,a=$e(i.toJSON(null,e,Map));try{for(a.s();!(o=a.n()).done;){var s=Re(o.value,2),u=s[0],c=s[1];t instanceof Map?t.has(u)||t.set(u,c):t instanceof Set?t.add(u):Object.prototype.hasOwnProperty.call(t,u)||(t[u]=c)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"toString",value:function(e,t){var r=this.value;if(r.items.length>1)return Ne(Ce(n.prototype),"toString",this).call(this,e,t);this.value=r.items[0];var i=Ne(Ce(n.prototype),"toString",this).call(this,e,t);return this.value=r,i}}]),n}(),nn={defaultType:Xe,lineWidth:76},rn={trueStr:"true",falseStr:"false"},on={asBigInt:!1},an={nullStr:"null"},sn={defaultType:at,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function un(e,t,n){var r,i=$e(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.format,s=o.test,u=o.resolve;if(s){var c=e.match(s);if(c){var l=u.apply(null,c);return l instanceof Ht||(l=new Ht(l)),a&&(l.format=a),l}}}}catch(e){i.e(e)}finally{i.f()}return n&&(e=n(e)),new Ht(e)}var cn=function(e,t){for(var n=e[t+1];" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t};function ln(e,t,n,r){var i=r.indentAtStart,o=r.lineWidth,a=void 0===o?80:o,s=r.minContentWidth,u=void 0===s?20:s,c=r.onFold,l=r.onOverflow;if(!a||a<0)return e;var f=Math.max(1+u,1+a-t.length);if(e.length<=f)return e;var d,h=[],p={},v=a-("number"==typeof i?i:t.length),m=void 0,g=void 0,y=!1,w=-1;for("block"===n&&-1!==(w=cn(e,w))&&(v=w+f);d=e[w+=1];){if("quoted"===n&&"\\"===d)switch(e[w+1]){case"x":w+=3;break;case"u":w+=5;break;case"U":w+=9;break;default:w+=1}if("\n"===d)"block"===n&&(w=cn(e,w)),v=w+f,m=void 0;else{if(" "===d&&g&&" "!==g&&"\n"!==g&&"\t"!==g){var b=e[w+1];b&&" "!==b&&"\n"!==b&&"\t"!==b&&(m=w)}if(w>=v)if(m)h.push(m),v=m+f,m=void 0;else if("quoted"===n){for(;" "===g||"\t"===g;)g=d,d=e[w+=1],y=!0;h.push(w-2),p[w-2]=!0,v=w-2+f,m=void 0}else y=!0}g=d}if(y&&l&&l(),0===h.length)return e;c&&c();for(var k=e.slice(0,h[0]),_=0;_<h.length;++_){var S=h[_],x=h[_+1]||e.length;"quoted"===n&&p[S]&&(k+="".concat(e[S],"\\")),k+="\n".concat(t).concat(e.slice(S+1,x))}return k}var fn=function(e){var t=e.indentAtStart;return t?Object.assign({indentAtStart:t},sn.fold):sn.fold},dn=function(e){return/^(%|---|\.\.\.)/m.test(e)};function hn(e,t){var n=t.implicitKey,r=sn.doubleQuoted,i=r.jsonEncoding,o=r.minMultiLineLength,a=JSON.stringify(e);if(i)return a;for(var s=t.indent||(dn(e)?"  ":""),u="",c=0,l=0,f=a[l];f;f=a[++l])if(" "===f&&"\\"===a[l+1]&&"n"===a[l+2]&&(u+=a.slice(c,l)+"\\ ",c=l+=1,f="\\"),"\\"===f)switch(a[l+1]){case"u":u+=a.slice(c,l);var d=a.substr(l+2,4);switch(d){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:"00"===d.substr(0,2)?u+="\\x"+d.substr(2):u+=a.substr(l,6)}c=(l+=5)+1;break;case"n":if(n||'"'===a[l+2]||a.length<o)l+=1;else{for(u+=a.slice(c,l)+"\n\n";"\\"===a[l+2]&&"n"===a[l+3]&&'"'!==a[l+4];)u+="\n",l+=2;u+=s," "===a[l+2]&&(u+="\\"),c=(l+=1)+1}break;default:l+=1}return u=c?u+a.slice(c):a,n?u:ln(u,s,"quoted",fn(t))}function pn(e,t){if(t.implicitKey){if(/\n/.test(e))return hn(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return hn(e,t);var n=t.indent||(dn(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(n))+"'";return t.implicitKey?r:ln(r,n,"flow",fn(t))}function vn(e,t,n,r){var i=e.comment,o=e.type,a=e.value;if(/\n[\t ]+$/.test(a)||/^\s*$/.test(a))return hn(a,t);var s=t.indent||(t.forceBlockIndent||dn(a)?"  ":""),u=s?"2":"1",c=o!==Ge&&(o===Xe||!function(e,t){var n=e.length;if(n<=t)return!1;for(var r=0,i=0;r<n;++r)if("\n"===e[r]){if(r-i>t)return!0;if(n-(i=r+1)<=t)return!1}return!0}(a,sn.fold.lineWidth-s.length)),l=c?"|":">";if(!a)return l+"\n";var f="",d="";if(a=a.replace(/[\n\t ]*$/,(function(e){var t=e.indexOf("\n");return-1===t?l+="-":a!==e&&t===e.length-1||(l+="+",r&&r()),d=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(function(e){-1!==e.indexOf(" ")&&(l+=u);var t=e.match(/ +$/);return t?(f=e.slice(0,-t[0].length),t[0]):(f=e,"")})),d&&(d=d.replace(/\n+(?!\n|$)/g,"$&".concat(s))),f&&(f=f.replace(/\n+/g,"$&".concat(s))),i&&(l+=" #"+i.replace(/ ?[\r\n]+/g," "),n&&n()),!a)return"".concat(l).concat(u,"\n").concat(s).concat(d);if(c)return a=a.replace(/\n+/g,"$&".concat(s)),"".concat(l,"\n").concat(s).concat(f).concat(a).concat(d);a=a.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(s));var h=ln("".concat(f).concat(a).concat(d),s,"block",sn.fold);return"".concat(l,"\n").concat(s).concat(h)}function mn(e,t,n,r){var i=sn.defaultType,o=t.implicitKey,a=t.inFlow,s=e,u=s.type,c=s.value;"string"!=typeof c&&(c=String(c),e=Object.assign({},e,{value:c}));var l=function(i){switch(i){case Ge:case Xe:return vn(e,t,n,r);case st:return hn(c,t);case ut:return pn(c,t);case at:return function(e,t,n,r){var i=e.comment,o=e.type,a=e.value,s=t.actualString,u=t.implicitKey,c=t.indent,l=t.inFlow;if(u&&/[\n[\]{},]/.test(a)||l&&/[[\]{},]/.test(a))return hn(a,t);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return u||l||-1===a.indexOf("\n")?-1!==a.indexOf('"')&&-1===a.indexOf("'")?pn(a,t):hn(a,t):vn(e,t,n,r);if(!u&&!l&&o!==at&&-1!==a.indexOf("\n"))return vn(e,t,n,r);if(""===c&&dn(a))return t.forceBlockIndent=!0,vn(e,t,n,r);var f=a.replace(/\n+/g,"$&\n".concat(c));if(s){var d=t.doc.schema.tags;if("string"!=typeof un(f,d,d.scalarFallback).value)return hn(a,t)}var h=u?f:ln(f,c,"flow",fn(t));return!i||l||-1===h.indexOf("\n")&&-1===i.indexOf("\n")?h:(n&&n(),function(e,t,n){if(!n)return e;var r=n.replace(/[\s\S]^/gm,"$&".concat(t,"#"));return"#".concat(r,"\n").concat(t).concat(e)}(h,c,i))}(e,t,n,r);default:return null}};u!==st&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(c)?u=st:!o&&!a||u!==Ge&&u!==Xe||(u=st);var f=l(u);if(null===f&&null===(f=l(i)))throw new Error("Unsupported default string type ".concat(i));return f}function gn(e){var t=e.format,n=e.minFractionDigits,r=e.tag,i=e.value;if("bigint"==typeof i)return String(i);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";var o=JSON.stringify(i);if(!t&&n&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(o)){var a=o.indexOf(".");a<0&&(a=o.length,o+=".");for(var s=n-(o.length-a-1);s-- >0;)o+="0"}return o}function yn(e,t){var n,r,i;switch(t.type){case tt:n="}",r="flow map";break;case nt:n="]",r="flow sequence";break;default:return void e.push(new bt(t,"Not a flow collection!?"))}for(var o=t.items.length-1;o>=0;--o){var a=t.items[o];if(!a||a.type!==Qe){i=a;break}}if(i&&i.char!==n){var s,u="Expected ".concat(r," to end with ").concat(n);"number"==typeof i.offset?(s=new bt(t,u)).offset=i.offset+1:(s=new bt(i,u),i.range&&i.range.end&&(s.offset=i.range.end-i.range.start)),e.push(s)}}function wn(e,t){var n=t.context.src[t.range.start-1];if("\n"!==n&&"\t"!==n&&" "!==n){e.push(new bt(t,"Comments must be separated from other tokens by white space characters"))}}function bn(e,t){var n=String(t),r=n.substr(0,8)+"..."+n.substr(-8);return new bt(e,'The "'.concat(r,'" key is too long'))}function kn(e,t){var n,r=$e(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.afterKey,a=i.before,s=i.comment,u=e.items[a];u?(o&&u.value&&(u=u.value),void 0===s?!o&&u.commentBefore||(u.spaceBefore=!0):u.commentBefore?u.commentBefore+="\n"+s:u.commentBefore=s):void 0!==s&&(e.comment?e.comment+="\n"+s:e.comment=s)}}catch(e){r.e(e)}finally{r.f()}}function _n(e,t){var n=t.strValue;return n?"string"==typeof n?n:(n.errors.forEach((function(n){n.source||(n.source=t),e.errors.push(n)})),n.str):""}function Sn(e,t){var n=t.tag,r=t.type,i=!1;if(n){var o=n.handle,a=n.suffix,s=n.verbatim;if(s){if("!"!==s&&"!!"!==s)return s;var u="Verbatim tags aren't resolved, so ".concat(s," is invalid.");e.errors.push(new bt(t,u))}else if("!"!==o||a)try{return function(e,t){var n=t.tag,r=n.handle,i=n.suffix,o=e.tagPrefixes.find((function(e){return e.handle===r}));if(!o){var a=e.getDefaults().tagPrefixes;if(a&&(o=a.find((function(e){return e.handle===r}))),!o)throw new bt(t,"The ".concat(r," tag handle is non-default and was not declared."))}if(!i)throw new bt(t,"The ".concat(r," tag has no suffix."));if("!"===r&&"1.0"===(e.version||e.options.version)){if("^"===i[0])return e.warnings.push(new _t(t,"YAML 1.0 ^ tag expansion is not supported")),i;if(/[:/]/.test(i)){var s=i.match(/^([a-z0-9-]+)\/(.*)/i);return s?"tag:".concat(s[1],".yaml.org,2002:").concat(s[2]):"tag:".concat(i)}}return o.prefix+decodeURIComponent(i)}(e,t)}catch(t){e.errors.push(t)}else i=!0}switch(r){case Ge:case Xe:case st:case ut:return ft.STR;case tt:case rt:return ft.MAP;case nt:case ct:return ft.SEQ;case at:return i?ft.STR:null;default:return null}}function xn(e,t,n){var r,i=e.schema.tags,o=[],a=$e(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.tag===n){if(!s.test){var u=s.resolve(e,t);return u instanceof Yt?u:new Ht(u)}o.push(s)}}}catch(e){a.e(e)}finally{a.f()}var c=_n(e,t);return"string"==typeof c&&o.length>0?un(c,o,i.scalarFallback):null}function Pn(e,t,n){try{var r=xn(e,t,n);if(r)return n&&t.tag&&(r.tag=n),r}catch(n){return n.source||(n.source=t),e.errors.push(n),null}try{var i=function(e){switch(e.type){case tt:case rt:return ft.MAP;case nt:case ct:return ft.SEQ;default:return ft.STR}}(t);if(!i)throw new Error("The tag ".concat(n," is unavailable"));var o="The tag ".concat(n," is unavailable, falling back to ").concat(i);e.warnings.push(new _t(t,o));var a=xn(e,t,i);return a.tag=n,a}catch(n){var s=new wt(t,n.message);return s.stack=n.stack,e.errors.push(s),null}}function On(e,t){var n,r={before:[],after:[]},i=!1,o=!1,a=$e(function(e){if(!e)return!1;var t=e.type;return t===it||t===ot||t===lt}(t.context.parent)?t.context.parent.props.concat(t.props):t.props);try{for(a.s();!(n=a.n()).done;){var s=n.value,u=s.start,c=s.end;switch(t.context.src[u]){case qe:if(!t.commentHasRequiredWhitespace(u)){e.push(new bt(t,"Comments must be separated from other tokens by white space characters"))}var l=t.header,f=t.valueRange;(f&&(u>f.start||l&&u>l.start)?r.after:r.before).push(t.context.src.slice(u+1,c));break;case Ue:if(i){e.push(new bt(t,"A node can have at most one anchor"))}i=!0;break;case He:if(o){e.push(new bt(t,"A node can have at most one tag"))}o=!0}}}catch(e){a.e(e)}finally{a.f()}return{comments:r,hasAnchor:i,hasTag:o}}function Cn(e,t){if(!t)return null;t.error&&e.errors.push(t.error);var n=On(e.errors,t),r=n.comments,i=n.hasAnchor,o=n.hasTag;if(i){var a=e.anchors,s=t.anchor,u=a.getNode(s);u&&(a.map[a.newName(s)]=u),a.map[s]=t}if(t.type===Ye&&(i||o)){e.errors.push(new bt(t,"An alias node must not specify any properties"))}var c=function(e,t){var n=e.anchors,r=e.errors,i=e.schema;if(t.type===Ye){var o=t.rawValue,a=n.getNode(o);if(!a){var s="Aliased anchor not found: ".concat(o);return r.push(new wt(t,s)),null}var u=new Qt(a);return n._cstAliases.push(u),u}var c=Sn(e,t);if(c)return Pn(e,t,c);if(t.type!==at){var l="Failed to resolve ".concat(t.type," node here");return r.push(new kt(t,l)),null}try{return un(_n(e,t),i.tags,i.tags.scalarFallback)}catch(e){return e.source||(e.source=t),r.push(e),null}}(e,t);if(c){c.range=[t.range.start,t.range.end],e.options.keepCstNodes&&(c.cstNode=t),e.options.keepNodeTypes&&(c.type=t.type);var l=r.before.join("\n");l&&(c.commentBefore=c.commentBefore?"".concat(c.commentBefore,"\n").concat(l):l);var f=r.after.join("\n");f&&(c.comment=c.comment?"".concat(c.comment,"\n").concat(f):f)}return t.resolved=c}function Mn(e,t){if(t.type!==rt&&t.type!==tt){var n="A ".concat(t.type," node cannot be resolved as a mapping");return e.errors.push(new kt(t,n)),null}var r=t.type===tt?function(e,t){for(var n=[],r=[],i=void 0,o=!1,a="{",s=0;s<t.items.length;++s){var u=t.items[s];if("string"==typeof u.char){var c=u.char,l=u.offset;if("?"===c&&void 0===i&&!o){o=!0,a=":";continue}if(":"===c){if(void 0===i&&(i=null),":"===a){a=",";continue}}else if(o&&(void 0===i&&","!==c&&(i=null),o=!1),void 0!==i&&(r.push(new Xt(i)),i=void 0,","===c)){a=":";continue}if("}"===c){if(s===t.items.length-1)continue}else if(c===a){a=":";continue}var f="Flow map contains an unexpected ".concat(c),d=new kt(t,f);d.offset=l,e.errors.push(d)}else u.type===Ke?n.push({afterKey:!!i,before:r.length}):u.type===Qe?(wn(e.errors,u),n.push({afterKey:!!i,before:r.length,comment:u.comment})):void 0===i?(","===a&&e.errors.push(new bt(u,"Separator , missing in flow map")),i=Cn(e,u)):(","!==a&&e.errors.push(new bt(u,"Indicator : missing in flow map entry")),r.push(new Xt(i,Cn(e,u))),i=void 0,o=!1)}yn(e.errors,t),void 0!==i&&r.push(new Xt(i));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=void 0,o=null,a=0;a<t.items.length;++a){var s=t.items[a];switch(s.type){case Ke:n.push({afterKey:!!i,before:r.length});break;case Qe:n.push({afterKey:!!i,before:r.length,comment:s.comment});break;case it:void 0!==i&&r.push(new Xt(i)),s.error&&e.errors.push(s.error),i=Cn(e,s.node),o=null;break;case ot:if(void 0===i&&(i=null),s.error&&e.errors.push(s.error),!s.context.atLineStart&&s.node&&s.node.type===rt&&!s.node.context.atLineStart){var u="Nested mappings are not allowed in compact mappings";e.errors.push(new bt(s.node,u))}var c=s.node;if(!c&&s.props.length>0){(c=new St(at,[])).context={parent:s,src:s.context.src};var l=s.range.start+1;if(c.range={start:l,end:l},c.valueRange={start:l,end:l},"number"==typeof s.range.origStart){var f=s.range.origStart+1;c.range.origStart=c.range.origEnd=f,c.valueRange.origStart=c.valueRange.origEnd=f}}var d=new Xt(i,Cn(e,c));En(s,d),r.push(d),i&&"number"==typeof o&&s.range.start>o+1024&&e.errors.push(bn(t,i)),i=void 0,o=null;break;default:void 0!==i&&r.push(new Xt(i)),i=Cn(e,s),o=s.range.start,s.error&&e.errors.push(s.error);e:for(var h=a+1;;++h){var p=t.items[h];switch(p&&p.type){case Ke:case Qe:continue e;case ot:break e;default:var v="Implicit map keys need to be followed by map values";e.errors.push(new bt(s,v));break e}}if(s.valueRangeContainsNewline){var m="Implicit map keys need to be on a single line";e.errors.push(new bt(s,m))}}}void 0!==i&&r.push(new Xt(i));return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new en;a.items=o,kn(a,i);for(var s=!1,u=0;u<o.length;++u){var c=o[u].key;if(c instanceof Yt&&(s=!0),e.schema.merge&&c&&"<<"===c.value){o[u]=new tn(o[u]);var l=o[u].value.items,f=null;l.some((function(e){if(e instanceof Qt){var t=e.source.type;return t!==rt&&t!==tt&&(f="Merge nodes aliases can only point to maps")}return f="Merge nodes can only have Alias nodes as values"})),f&&e.errors.push(new bt(t,f))}else for(var d=u+1;d<o.length;++d){var h=o[d].key;if(c===h||c&&h&&Object.prototype.hasOwnProperty.call(c,"value")&&c.value===h.value){var p='Map keys must be unique; "'.concat(c,'" is repeated');e.errors.push(new bt(t,p));break}}}if(s&&!e.options.mapAsMap){e.warnings.push(new _t(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}function En(e,t){if(function(e){var t=e.context,n=t.lineStart,r=t.node,i=t.src,o=e.props;if(0===o.length)return!1;var a=o[0].start;if(r&&a>r.valueRange.start)return!1;if(i[a]!==qe)return!1;for(var s=n;s<a;++s)if("\n"===i[s])return!1;return!0}(e)){var n=e.getPropValue(0,qe,!0),r=!1,i=t.value.commentBefore;if(i&&i.startsWith(n))t.value.commentBefore=i.substr(n.length+1),r=!0;else{var o=t.value.comment;!e.node&&o&&o.startsWith(n)&&(t.value.comment=o.substr(n.length+1),r=!0)}r&&(t.comment=n)}}function In(e,t){if(t.type!==ct&&t.type!==nt){var n="A ".concat(t.type," node cannot be resolved as a sequence");return e.errors.push(new kt(t,n)),null}var r=t.type===nt?function(e,t){for(var n=[],r=[],i=!1,o=void 0,a=null,s="[",u=null,c=0;c<t.items.length;++c){var l=t.items[c];if("string"==typeof l.char){var f=l.char,d=l.offset;if(":"===f||!i&&void 0===o||(i&&void 0===o&&(o=s?r.pop():null),r.push(new Xt(o)),i=!1,o=void 0,a=null),f===s)s=null;else if(s||"?"!==f){if("["!==s&&":"===f&&void 0===o){if(","===s){if((o=r.pop())instanceof Xt){var h=new bt(t,"Chaining flow sequence pairs is invalid");h.offset=d,e.errors.push(h)}if(!i&&"number"==typeof a){var p=l.range?l.range.start:l.offset;p>a+1024&&e.errors.push(bn(t,o));for(var v=u.context.src,m=a;m<p;++m)if("\n"===v[m]){var g="Implicit keys of flow sequence pairs need to be on a single line";e.errors.push(new bt(u,g));break}}}else o=null;a=null,i=!1,s=null}else if("["===s||"]"!==f||c<t.items.length-1){var y="Flow sequence contains an unexpected ".concat(f),w=new kt(t,y);w.offset=d,e.errors.push(w)}}else i=!0}else if(l.type===Ke)n.push({before:r.length});else if(l.type===Qe)wn(e.errors,l),n.push({comment:l.comment,before:r.length});else{if(s){var b="Expected a ".concat(s," in flow sequence");e.errors.push(new bt(l,b))}var k=Cn(e,l);void 0===o?(r.push(k),u=l):(r.push(new Xt(o,k)),o=void 0),a=l.range.start,s=","}}yn(e.errors,t),void 0!==o&&r.push(new Xt(o));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=0;i<t.items.length;++i){var o=t.items[i];switch(o.type){case Ke:n.push({before:r.length});break;case Qe:n.push({comment:o.comment,before:r.length});break;case lt:if(o.error&&e.errors.push(o.error),r.push(Cn(e,o.node)),o.hasProps){var a="Sequence items cannot have tags or anchors before the - indicator";e.errors.push(new bt(o,a))}break;default:o.error&&e.errors.push(o.error),e.errors.push(new kt(o,"Unexpected ".concat(o.type," node in sequence")))}}return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new Gt;if(a.items=o,kn(a,i),!e.options.mapAsMap&&o.some((function(e){return e instanceof Xt&&e.key instanceof Yt}))){e.warnings.push(new _t(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}var An={identify:function(e){return e instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(e,t){var n=_n(e,t);if("function"==typeof Buffer)return Buffer.from(n,"base64");if("function"==typeof atob){for(var r=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}return e.errors.push(new wt(t,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:nn,stringify:function(e,t,n,r){var i,o=e.comment,a=e.type,s=e.value;if("function"==typeof Buffer)i=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var u="",c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);i=btoa(u)}if(a||(a=nn.defaultType),a===st)s=i;else{for(var l=nn.lineWidth,f=Math.ceil(i.length/l),d=new Array(f),h=0,p=0;h<f;++h,p+=l)d[h]=i.substr(p,l);s=d.join(a===Xe?"\n":" ")}return mn({comment:o,type:a,value:s},t,n,r)}};function Ln(e,t){for(var n=In(e,t),r=0;r<n.items.length;++r){var i=n.items[r];if(!(i instanceof Xt)){if(i instanceof en){if(i.items.length>1){throw new bt(t,"Each pair must have its own sequence indicator")}var o=i.items[0]||new Xt;i.commentBefore&&(o.commentBefore=o.commentBefore?"".concat(i.commentBefore,"\n").concat(o.commentBefore):i.commentBefore),i.comment&&(o.comment=o.comment?"".concat(i.comment,"\n").concat(o.comment):i.comment),i=o}n.items[r]=i instanceof Xt?i:new Xt(i)}}return n}function Tn(e,t,n){var r=new Gt(e);r.tag="tag:yaml.org,2002:pairs";var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=void 0,u=void 0;if(Array.isArray(a)){if(2!==a.length)throw new TypeError("Expected [key, value] tuple: ".concat(a));s=a[0],u=a[1]}else if(a&&a instanceof Object){var c=Object.keys(a);if(1!==c.length)throw new TypeError("Expected { key: value } tuple: ".concat(a));u=a[s=c[0]]}else s=a;var l=e.createPair(s,u,n);r.items.push(l)}}catch(e){o.e(e)}finally{o.f()}return r}var jn={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ln,createNode:Tn},Nn=function(e){Oe(n,Gt);var t=je(n);function n(){var e;return _e(this,n),Pe(Le(e=t.call(this)),"add",en.prototype.add.bind(Le(e))),Pe(Le(e),"delete",en.prototype.delete.bind(Le(e))),Pe(Le(e),"get",en.prototype.get.bind(Le(e))),Pe(Le(e),"has",en.prototype.has.bind(Le(e))),Pe(Le(e),"set",en.prototype.set.bind(Le(e))),e.tag=n.tag,e}return xe(n,[{key:"toJSON",value:function(e,t){var n=new Map;t&&t.onCreate&&t.onCreate(n);var r,i=$e(this.items);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=void 0,s=void 0;if(o instanceof Xt?(a=qt(o.key,"",t),s=qt(o.value,a,t)):a=qt(o,"",t),n.has(a))throw new Error("Ordered maps must not include duplicate keys");n.set(a,s)}}catch(e){i.e(e)}finally{i.f()}return n}}]),n}();Pe(Nn,"tag","tag:yaml.org,2002:omap");var Rn={identify:function(e){return e instanceof Map},nodeClass:Nn,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function(e,t){var n,r=Ln(e,t),i=[],o=$e(r.items);try{for(o.s();!(n=o.n()).done;){var a=n.value.key;if(a instanceof Ht){if(i.includes(a.value)){throw new bt(t,"Ordered maps must not include duplicate keys")}i.push(a.value)}}}catch(e){o.e(e)}finally{o.f()}return Object.assign(new Nn,r)},createNode:function(e,t,n){var r=Tn(e,t,n),i=new Nn;return i.items=r.items,i}},Fn=function(e){Oe(n,en);var t=je(n);function n(){var e;return _e(this,n),(e=t.call(this)).tag=n.tag,e}return xe(n,[{key:"add",value:function(e){var t=e instanceof Xt?e:new Xt(e);Zt(this.items,t.key)||this.items.push(t)}},{key:"get",value:function(e,t){var n=Zt(this.items,e);return!t&&n instanceof Xt?n.key instanceof Ht?n.key.value:n.key:n}},{key:"set",value:function(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(ke(t)));var n=Zt(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Xt(e))}},{key:"toJSON",value:function(e,t){return Ne(Ce(n.prototype),"toJSON",this).call(this,e,t,Set)}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return Ne(Ce(n.prototype),"toString",this).call(this,e,t,r);throw new Error("Set items must all have null values")}}]),n}();Pe(Fn,"tag","tag:yaml.org,2002:set");var Dn={identify:function(e){return e instanceof Set},nodeClass:Fn,default:!1,tag:"tag:yaml.org,2002:set",resolve:function(e,t){var n=Mn(e,t);if(!n.hasAllNullValues())throw new bt(t,"Set items must all have null values");return Object.assign(new Fn,n)},createNode:function(e,t,n){var r,i=new Fn,o=$e(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.items.push(e.createPair(a,null,n))}}catch(e){o.e(e)}finally{o.f()}return i}},Bn=function(e,t){var n=t.split(":").reduce((function(e,t){return 60*e+Number(t)}),0);return"-"===e?-n:n},Wn=function(e){var t=e.value;if(isNaN(t)||!isFinite(t))return gn(t);var n="";t<0&&(n="-",t=Math.abs(t));var r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),n+r.map((function(e){return e<10?"0"+String(e):String(e)})).join(":").replace(/000000\d*$/,"")},zn={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(e,t,n){return Bn(t,n.replace(/_/g,""))},stringify:Wn},$n={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(e,t,n){return Bn(t,n.replace(/_/g,""))},stringify:Wn},Un={identify:function(e){return e instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(e,t,n,r,i,o,a,s,u){s&&(s=(s+"00").substr(1,3));var c=Date.UTC(t,n-1,r,i||0,o||0,a||0,s||0);if(u&&"Z"!==u){var l=Bn(u[0],u.slice(1));Math.abs(l)<30&&(l*=60),c-=6e4*l}return new Date(c)},stringify:function(e){return e.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function qn(e){var t="undefined"!=typeof process&&process.env||{};return e?"undefined"!=typeof YAML_SILENCE_DEPRECATION_WARNINGS?!YAML_SILENCE_DEPRECATION_WARNINGS:!t.YAML_SILENCE_DEPRECATION_WARNINGS:"undefined"!=typeof YAML_SILENCE_WARNINGS?!YAML_SILENCE_WARNINGS:!t.YAML_SILENCE_WARNINGS}function Hn(e,t){if(qn(!1)){var n="undefined"!=typeof process&&process.emitWarning;n?n(e,t):console.warn(t?"".concat(t,": ").concat(e):e)}}var Vn={};var Jn={createNode:function(e,t,n){var r=new en(e);if(t instanceof Map){var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=Re(i.value,2),s=a[0],u=a[1];r.items.push(e.createPair(s,u,n))}}catch(e){o.e(e)}finally{o.f()}}else if(t&&"object"===ke(t))for(var c=0,l=Object.keys(t);c<l.length;c++){var f=l[c];r.items.push(e.createPair(f,t[f],n))}return"function"==typeof e.sortMapEntries&&r.items.sort(e.sortMapEntries),r},default:!0,nodeClass:en,tag:"tag:yaml.org,2002:map",resolve:Mn};var Yn={createNode:function(e,t,n){var r=new Gt(e);if(t&&t[Symbol.iterator]){var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=e.createNode(a,n.wrapScalars,null,n);r.items.push(s)}}catch(e){o.e(e)}finally{o.f()}}return r},default:!0,nodeClass:Gt,tag:"tag:yaml.org,2002:seq",resolve:In},Kn=[Jn,Yn,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:_n,stringify:function(e,t,n,r){return mn(e,t=Object.assign({actualString:!0},t),n,r)},options:sn}],Gn=function(e){return"bigint"==typeof e||Number.isInteger(e)},Xn=function(e,t,n){return on.asBigInt?BigInt(e):parseInt(t,n)};function Qn(e,t,n){var r=e.value;return Gn(r)&&r>=0?n+r.toString(t):gn(e)}var Zn={identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:an,stringify:function(){return an.nullStr}},er={identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(e){return"t"===e[0]||"T"===e[0]},options:rn,stringify:function(e){return e.value?rn.trueStr:rn.falseStr}},tr={identify:function(e){return Gn(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(e,t){return Xn(e,t,8)},options:on,stringify:function(e){return Qn(e,8,"0o")}},nr={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(e){return Xn(e,e,10)},options:on,stringify:gn},rr={identify:function(e){return Gn(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(e,t){return Xn(e,t,16)},options:on,stringify:function(e){return Qn(e,16,"0x")}},ir={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:gn},or={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e)},stringify:function(e){var t=e.value;return Number(t).toExponential()}},ar={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(e,t,n){var r=t||n,i=new Ht(parseFloat(e));return r&&"0"===r[r.length-1]&&(i.minFractionDigits=r.length),i},stringify:gn},sr=Kn.concat([Zn,er,tr,nr,rr,ir,or,ar]),ur=function(e){return"bigint"==typeof e||Number.isInteger(e)},cr=function(e){var t=e.value;return JSON.stringify(t)},lr=[Jn,Yn,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:_n,stringify:cr},{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:cr},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(e){return"true"===e},stringify:cr},{identify:ur,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(e){return on.asBigInt?BigInt(e):parseInt(e,10)},stringify:function(e){var t=e.value;return ur(t)?t.toString():JSON.stringify(t)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(e){return parseFloat(e)},stringify:cr}];lr.scalarFallback=function(e){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(e)))};var fr=function(e){return e.value?rn.trueStr:rn.falseStr},dr=function(e){return"bigint"==typeof e||Number.isInteger(e)};function hr(e,t,n){var r=t.replace(/_/g,"");if(on.asBigInt){switch(n){case 2:r="0b".concat(r);break;case 8:r="0o".concat(r);break;case 16:r="0x".concat(r)}var i=BigInt(r);return"-"===e?BigInt(-1)*i:i}var o=parseInt(r,n);return"-"===e?-1*o:o}function pr(e,t,n){var r=e.value;if(dr(r)){var i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return gn(e)}var vr=Kn.concat([{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:an,stringify:function(){return an.nullStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:rn,stringify:fr},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:rn,stringify:fr},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(e,t,n){return hr(t,n,2)},stringify:function(e){return pr(e,2,"0b")}},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(e,t,n){return hr(t,n,8)},stringify:function(e){return pr(e,8,"0")}},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(e,t,n){return hr(t,n,10)},stringify:gn},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(e,t,n){return hr(t,n,16)},stringify:function(e){return pr(e,16,"0x")}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:gn},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e.replace(/_/g,""))},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(e,t){var n=new Ht(parseFloat(e.replace(/_/g,"")));if(t){var r=t.replace(/_/g,"");"0"===r[r.length-1]&&(n.minFractionDigits=r.length)}return n},stringify:gn}],An,Rn,jn,Dn,zn,$n,Un),mr={core:sr,failsafe:Kn,json:lr,yaml11:vr},gr={binary:An,bool:er,float:ar,floatExp:or,floatNaN:ir,floatTime:$n,int:nr,intHex:rr,intOct:tr,intTime:zn,map:Jn,null:Zn,omap:Rn,pairs:jn,seq:Yn,set:Dn,timestamp:Un};function yr(e,t,n){if(e instanceof Ut)return e;var r=n.defaultPrefix,i=n.onTagObj,o=n.prevObjects,a=n.schema,s=n.wrapScalars;t&&t.startsWith("!!")&&(t=r+t.slice(2));var u=function(e,t,n){if(t){var r=n.filter((function(e){return e.tag===t})),i=r.find((function(e){return!e.format}))||r[0];if(!i)throw new Error("Tag ".concat(t," not found"));return i}return n.find((function(t){return(t.identify&&t.identify(e)||t.class&&e instanceof t.class)&&!t.format}))}(e,t,a.tags);if(!u){if("function"==typeof e.toJSON&&(e=e.toJSON()),"object"!==ke(e))return s?new Ht(e):e;u=e instanceof Map?Jn:e[Symbol.iterator]?Yn:Jn}i&&(i(u),delete n.onTagObj);var c={};if(e&&"object"===ke(e)&&o){var l=o.get(e);if(l){var f=new Qt(l);return n.aliasNodes.push(f),f}c.value=e,o.set(e,c)}return c.node=u.createNode?u.createNode(n.schema,e,n):s?new Ht(e):e,t&&c.node instanceof Ut&&(c.node.tag=t),c.node}var wr=function(e,t){return e.key<t.key?-1:e.key>t.key?1:0},br=function(){function e(t){var n=t.customTags,r=t.merge,i=t.schema,o=t.sortMapEntries,a=t.tags;_e(this,e),this.merge=!!r,this.name=i,this.sortMapEntries=!0===o?wr:o||null,!n&&a&&function(e,t){if(!Vn[e]&&qn(!0)){Vn[e]=!0;var n="The option '".concat(e,"' will be removed in a future release");Hn(n+=t?", use '".concat(t,"' instead."):".","DeprecationWarning")}}("tags","customTags"),this.tags=function(e,t,n,r){var i=e[r.replace(/\W/g,"")];if(!i){var o=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown schema "'.concat(r,'"; use one of ').concat(o))}if(Array.isArray(n)){var a,s=$e(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;i=i.concat(u)}}catch(e){s.e(e)}finally{s.f()}}else"function"==typeof n&&(i=n(i.slice()));for(var c=0;c<i.length;++c){var l=i[c];if("string"==typeof l){var f=t[l];if(!f){var d=Object.keys(t).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown custom tag "'.concat(l,'"; use one of ').concat(d))}i[c]=f}}return i}(mr,gr,n||a,i)}return xe(e,[{key:"createNode",value:function(t,n,r,i){var o={defaultPrefix:e.defaultPrefix,schema:this,wrapScalars:n};return yr(t,r,i?Object.assign(i,o):o)}},{key:"createPair",value:function(e,t,n){n||(n={wrapScalars:!0});var r=this.createNode(e,n.wrapScalars,null,n),i=this.createNode(t,n.wrapScalars,null,n);return new Xt(r,i)}}]),e}();Pe(br,"defaultPrefix","tag:yaml.org,2002:"),Pe(br,"defaultTags",ft);var kr={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},_r={get binary(){return nn},set binary(e){Object.assign(nn,e)},get bool(){return rn},set bool(e){Object.assign(rn,e)},get int(){return on},set int(e){Object.assign(on,e)},get null(){return an},set null(e){Object.assign(an,e)},get str(){return sn},set str(e){Object.assign(sn,e)}},Sr={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"tag:yaml.org,2002:"},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]}};function xr(e,t){if("1.0"===(e.version||e.options.version)){var n=t.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(n)return"!"+n[1];var r=t.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return r?"!".concat(r[1],"/").concat(r[2]):"!".concat(t.replace(/^tag:/,""))}var i=e.tagPrefixes.find((function(e){return 0===t.indexOf(e.prefix)}));if(!i){var o=e.getDefaults().tagPrefixes;i=o&&o.find((function(e){return 0===t.indexOf(e.prefix)}))}if(!i)return"!"===t[0]?t:"!<".concat(t,">");var a=t.substr(i.prefix.length).replace(/[!,[\]{}]/g,(function(e){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[e]}));return i.handle+a}function Pr(e,t,n,r){var i,o=t.doc,a=o.anchors,s=o.schema;if(!(e instanceof Ut)){var u={aliasNodes:[],onTagObj:function(e){return i=e},prevObjects:new Map};e=s.createNode(e,!0,null,u);var c,l=$e(u.aliasNodes);try{for(l.s();!(c=l.n()).done;){var f=c.value;f.source=f.source.node;var d=a.getName(f.source);d||(d=a.newName(),a.map[d]=f.source)}}catch(e){l.e(e)}finally{l.f()}}if(e instanceof Xt)return e.toString(t,n,r);i||(i=function(e,t){if(t instanceof Qt)return Qt;if(t.tag){var n=e.filter((function(e){return e.tag===t.tag}));if(n.length>0)return n.find((function(e){return e.format===t.format}))||n[0]}var r,i;if(t instanceof Ht){i=t.value;var o=e.filter((function(e){return e.identify&&e.identify(i)||e.class&&i instanceof e.class}));r=o.find((function(e){return e.format===t.format}))||o.find((function(e){return!e.format}))}else i=t,r=e.find((function(e){return e.nodeClass&&i instanceof e.nodeClass}));if(!r){var a=i&&i.constructor?i.constructor.name:ke(i);throw new Error("Tag not resolved for ".concat(a," value"))}return r}(s.tags,e));var h=function(e,t,n){var r=n.anchors,i=n.doc,o=[],a=i.anchors.getName(e);return a&&(r[a]=e,o.push("&".concat(a))),e.tag?o.push(xr(i,e.tag)):t.default||o.push(xr(i,t.tag)),o.join(" ")}(e,i,t);h.length>0&&(t.indentAtStart=(t.indentAtStart||0)+h.length+1);var p="function"==typeof i.stringify?i.stringify(e,t,n,r):e instanceof Ht?mn(e,t,n,r):e.toString(t,n,r);return h?e instanceof Ht||"{"===p[0]||"["===p[0]?"".concat(h," ").concat(p):"".concat(h,"\n").concat(t.indent).concat(p):p}var Or=function(){function e(t){_e(this,e),Pe(this,"map",{}),this.prefix=t}return xe(e,null,[{key:"validAnchorNode",value:function(e){return e instanceof Ht||e instanceof Gt||e instanceof en}}]),xe(e,[{key:"createAlias",value:function(e,t){return this.setAnchor(e,t),new Qt(e)}},{key:"createMergePair",value:function(){for(var e=this,t=new tn,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.value.items=r.map((function(t){if(t instanceof Qt){if(t.source instanceof en)return t}else if(t instanceof en)return e.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")})),t}},{key:"getName",value:function(e){var t=this.map;return Object.keys(t).find((function(n){return t[n]===e}))}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var t=Object.keys(this.map),n=1;;++n){var r="".concat(e).concat(n);if(!t.includes(r))return r}}},{key:"resolveNodes",value:function(){var e=this.map,t=this._cstAliases;Object.keys(e).forEach((function(t){e[t]=e[t].resolved})),t.forEach((function(e){e.source=e.source.resolved})),delete this._cstAliases}},{key:"setAnchor",value:function(t,n){if(null!=t&&!e.validAnchorNode(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");var r=this.map,i=t&&Object.keys(r).find((function(e){return r[e]===t}));if(i){if(!n)return i;i!==n&&(delete r[i],r[n]=t)}else{if(!n){if(!t)return null;n=this.newName()}r[n]=t}return n}}]),e}(),Cr=function(e){return Object.keys(function e(t,n){if(t&&"object"===ke(t)){var r=t.tag;t instanceof Yt?(r&&(n[r]=!0),t.items.forEach((function(t){return e(t,n)}))):t instanceof Xt?(e(t.key,n),e(t.value,n)):t instanceof Ht&&r&&(n[r]=!0)}return n}(e,{}))};function Mr(e,t){var n=e.tagPrefixes,r=Re(t.parameters,2),i=r[0],o=r[1];if(!i||!o){throw new bt(t,"Insufficient parameters given for %TAG directive")}if(n.some((function(e){return e.handle===i}))){throw new bt(t,"The %TAG directive must only be given at most once per handle in the same document.")}return{handle:i,prefix:o}}function Er(e,t){var n=Re(t.parameters,1)[0];if("YAML:1.0"===t.name&&(n="1.0"),!n){throw new bt(t,"Insufficient parameters given for %YAML directive")}if(!Sr[n]){var r=e.version||e.options.version,i="Document will be parsed as YAML ".concat(r," rather than YAML ").concat(n);e.warnings.push(new _t(t,i))}return n}function Ir(e){if(e instanceof Yt)return!0;throw new Error("Expected a YAML collection as document contents")}var Ar=function(){function e(t){_e(this,e),this.anchors=new Or(t.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=t,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return xe(e,[{key:"add",value:function(e){return Ir(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,t){Ir(this.contents),this.contents.addIn(e,t)}},{key:"delete",value:function(e){return Ir(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return Jt(e)?null!=this.contents&&(this.contents=null,!0):(Ir(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return e.defaults[this.version]||e.defaults[this.options.version]||{}}},{key:"get",value:function(e,t){return this.contents instanceof Yt?this.contents.get(e,t):void 0}},{key:"getIn",value:function(e,t){return Jt(e)?!t&&this.contents instanceof Ht?this.contents.value:this.contents:this.contents instanceof Yt?this.contents.getIn(e,t):void 0}},{key:"has",value:function(e){return this.contents instanceof Yt&&this.contents.has(e)}},{key:"hasIn",value:function(e){return Jt(e)?void 0!==this.contents:this.contents instanceof Yt&&this.contents.hasIn(e)}},{key:"set",value:function(e,t){Ir(this.contents),this.contents.set(e,t)}},{key:"setIn",value:function(e,t){Jt(e)?this.contents=t:(Ir(this.contents),this.contents.setIn(e,t))}},{key:"setSchema",value:function(e,t){if(e||t||!this.schema){"number"==typeof e&&(e=e.toFixed(1)),"1.0"===e||"1.1"===e||"1.2"===e?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&"string"==typeof e&&(this.options.schema=e),Array.isArray(t)&&(this.options.customTags=t);var n=Object.assign({},this.getDefaults(),this.options);this.schema=new br(n)}}},{key:"parse",value:function(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var n=e.directives,r=void 0===n?[]:n,i=e.contents,o=void 0===i?[]:i,a=e.directivesEndMarker,s=e.error,u=e.valueRange;if(s&&(s.source||(s.source=this),this.errors.push(s)),function(e,t,n){var r,i=[],o=!1,a=$e(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.comment,c=s.name;switch(c){case"TAG":try{e.tagPrefixes.push(Mr(e,s))}catch(t){e.errors.push(t)}o=!0;break;case"YAML":case"YAML:1.0":e.version&&e.errors.push(new bt(s,"The %YAML directive must only be given at most once per document."));try{e.version=Er(e,s)}catch(t){e.errors.push(t)}o=!0;break;default:if(c){var l="YAML only supports %TAG and %YAML directives, and not %".concat(c);e.warnings.push(new _t(s,l))}}u&&i.push(u)}}catch(e){a.e(e)}finally{a.f()}n&&!o&&"1.1"===(e.version||n.version||e.options.version)&&(e.tagPrefixes=n.tagPrefixes.map((function(e){return{handle:e.handle,prefix:e.prefix}})),e.version=n.version);e.commentBefore=i.join("\n")||null}(this,r,t),a&&(this.directivesEndMarker=!0),this.range=u?[u.start,u.end]:null,this.setSchema(),this.anchors._cstAliases=[],function(e,t){var n,r={before:[],after:[]},i=void 0,o=!1,a=$e(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.valueRange){if(void 0!==i){e.errors.push(new kt(s,"Document contains trailing content not separated by a ... or --- line"));break}var u=Cn(e,s);o&&(u.spaceBefore=!0,o=!1),i=u}else null!==s.comment?(void 0===i?r.before:r.after).push(s.comment):s.type===Ke&&(o=!0,void 0===i&&r.before.length>0&&!e.commentBefore&&(e.commentBefore=r.before.join("\n"),r.before=[]))}}catch(e){a.e(e)}finally{a.f()}if(e.contents=i||null,i){var c=r.before.join("\n");if(c){var l=i instanceof Yt&&i.items[0]?i.items[0]:i;l.commentBefore=l.commentBefore?"".concat(c,"\n").concat(l.commentBefore):c}e.comment=r.after.join("\n")||null}else e.comment=r.before.concat(r.after).join("\n")||null}(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var c,l=$e(this.errors);try{for(l.s();!(c=l.n()).done;){var f=c.value;f instanceof yt&&f.makePretty()}}catch(e){l.e(e)}finally{l.f()}var d,h=$e(this.warnings);try{for(h.s();!(d=h.n()).done;){var p=d.value;p instanceof yt&&p.makePretty()}}catch(e){h.e(e)}finally{h.f()}}return this}},{key:"listNonDefaultTags",value:function(){return Cr(this.contents).filter((function(e){return 0!==e.indexOf(br.defaultPrefix)}))}},{key:"setTagPrefix",value:function(e,t){if("!"!==e[0]||"!"!==e[e.length-1])throw new Error("Handle must start and end with !");if(t){var n=this.tagPrefixes.find((function(t){return t.handle===e}));n?n.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter((function(t){return t.handle!==e}))}},{key:"toJSON",value:function(e,t){var n=this,r=this.options,i=r.keepBlobsInJSON,o=r.mapAsMap,a=r.maxAliasCount,s=i&&("string"!=typeof e||!(this.contents instanceof Ht)),u={doc:this,indentStep:"  ",keep:s,mapAsMap:s&&!!o,maxAliasCount:a,stringify:Pr},c=Object.keys(this.anchors.map);c.length>0&&(u.anchors=new Map(c.map((function(e){return[n.anchors.map[e],{alias:[],aliasCount:0,count:1}]}))));var l=qt(this.contents,e,u);if("function"==typeof t&&u.anchors){var f,d=$e(u.anchors.values());try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.count;t(h.res,p)}}catch(e){d.e(e)}finally{d.f()}}return l}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var t=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(t))}this.setSchema();var n=[],r=!1;if(this.version){var i="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?i="%YAML:1.0":"1.1"===this.version&&(i="%YAML 1.1")),n.push(i),r=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach((function(e){var t=e.handle,i=e.prefix;o.some((function(e){return 0===e.indexOf(i)}))&&(n.push("%TAG ".concat(t," ").concat(i)),r=!0)})),(r||this.directivesEndMarker)&&n.push("---"),this.commentBefore&&(!r&&this.directivesEndMarker||n.unshift(""),n.unshift(this.commentBefore.replace(/^/gm,"#")));var a={anchors:{},doc:this,indent:"",indentStep:" ".repeat(e),stringify:Pr},s=!1,u=null;if(this.contents){this.contents instanceof Ut&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&n.push(""),this.contents.commentBefore&&n.push(this.contents.commentBefore.replace(/^/gm,"#")),a.forceBlockIndent=!!this.comment,u=this.contents.comment);var c=u?null:function(){return s=!0},l=Pr(this.contents,a,(function(){return u=null}),c);n.push($t(l,"",u))}else void 0!==this.contents&&n.push(Pr(this.contents,a));return this.comment&&(s&&!u||""===n[n.length-1]||n.push(""),n.push(this.comment.replace(/^/gm,"#"))),n.join("\n")+"\n"}}]),e}();Pe(Ar,"defaults",Sr);var Lr=function(e){Oe(n,Ar);var t=je(n);function n(e){return _e(this,n),t.call(this,Object.assign({},kr,e))}return n}();function Tr(e,t){var n=zt(e),r=new Lr(t).parse(n[0]);if(n.length>1){r.errors.unshift(new bt(n[1],"Source contains multiple documents; please use YAML.parseAllDocuments()"))}return r}var jr=Fr({createNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;void 0===n&&"string"==typeof t&&(n=t,t=!0);var r=Object.assign({},Ar.defaults[kr.version],kr),i=new br(r);return i.createNode(e,t,n)},defaultOptions:kr,Document:Lr,parse:function(e,t){var n=Tr(e,t);if(n.warnings.forEach((function(e){return Hn(e)})),n.errors.length>0)throw n.errors[0];return n.toJSON()},parseAllDocuments:function(e,t){var n,r,i=[],o=$e(zt(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=new Lr(t);s.parse(a,n),i.push(s),n=s}}catch(e){o.e(e)}finally{o.f()}return i},parseCST:zt,parseDocument:Tr,scalarOptions:_r,stringify:function(e,t){var n=new Lr(t);return n.contents=e,String(n)}}),Nr=Fr(n);function Rr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Rr=function(){return e},e}function Fr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Rr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Dr(e){const t=be.join(e,"markdown-preview-plus.yaml");if(!(0,I.isFileSync)(t)){const n=be.join(e,"markdown-preview-plus.cson");if((0,I.isFileSync)(n)){const e=[{text:"Edit new YAML",onDidClick(){(0,I.handlePromise)(atom.workspace.open(t))}},{text:"Show old CSON",onDidClick(){(0,I.handlePromise)(atom.workspace.open(n))}}];try{const r=jr.parseDocument(Nr.readFileSync(n).toString("utf-8"),{keepCstNodes:!0});Nr.writeFileSync(t,r.toString(),{encoding:"utf-8"}),Object.keys(r.toJSON()).length>0&&atom.notifications.addInfo(`${n} converted to YAML and re-saved as ${t}`,{detail:"markdown-preview-plus.cson was converted to YAML. The backup is kept as "+n,dismissable:!0,buttons:e})}catch(n){Br(t),atom.notifications.addWarning("Error converting markdown-preview-plus.cson",{dismissable:!0,detail:n.toString(),description:"Failed to convert markdown-preview-plus.cson to YAML; please make the conversion manually",buttons:e})}}else console.debug("Creating markdown-preview-plus.yaml, this is a one-time operation."),Br(t)}return t}function Br(e){const t=be.join((0,I.packagePath)(),"assets","macros-template.yaml"),n=Nr.readFileSync(t,"utf8");Nr.writeFileSync(e,n)}function Wr(e){if(Array.isArray(e)){const t=e[0],n=e[1];return"number"==typeof n&&(n%1==0&&"string"==typeof t)}return"string"==typeof e}var zr={};Object.defineProperty(zr,"__esModule",{value:!0});var $r=function(e){var t;return(null===(t=window["markdown-preview-plus-tests"])||void 0===t?void 0:t.clipboardWrite)?window["markdown-preview-plus-tests"].clipboardWrite(e):Hr.write(e)};zr.write=$r;var Ur=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=qr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(t);function qr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return qr=function(){return e},e}const Hr="linux"===process.platform&&"renderer"===process.type?Ur.remote.clipboard:Ur.clipboard;var Vr=Yr(zr);function Jr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Jr=function(){return e},e}function Yr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Jr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Kr(){return atom.config.get("markdown-preview-plus")}let Gr;function Xr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Xr=function(){return e},e}function Qr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Xr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Zr(e,t){const n=E.join(e,"../",t);if(M.existsSync(n))return n;{const r=E.join(n,"..");return r!==e&&!atom.project.getPaths().includes(r)&&Zr(r,t)}}function ei(e,t){const n={maxBuffer:1/0};void 0!==e&&(n.cwd=E.dirname(e));const r=(0,I.atomConfig)().pandocConfig,i={from:r.pandocMarkdownFlavor,to:"html",mathjax:t?"atom://markdown-preview-plus/node_modules/mathjax/MathJax.js":void 0,filter:r.pandocFilters};if(r.pandocBibliography){i.filter.push("pandoc-citeproc");let t=e&&Zr(e,r.pandocBIBFile);t||(t=r.pandocBIBFileFallback),i.bibliography=t||void 0;let n=e&&Zr(e,r.pandocCSLFile);n||(n=r.pandocCSLFileFallback),i.csl=n||void 0}return{args:i,opts:n}}function ti(e,t){return t&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".math").forEach((function(e){let t=e.innerText;const n=t.indexOf("\\[")>-1?"; mode=display":"";return t=t.replace(/\\[[()\]]/g,""),e.outerHTML=`<span class="math"><script type='math/tex${n}'>${t}<\/script></span>`})),t.innerHTML}(e)),(0,I.atomConfig)().pandocConfig.pandocRemoveReferences&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".references").forEach(e=>{e.remove()}),t.innerHTML}(e)),e}function ni(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?t.push(...r.map(e=>`--${n}=${e}`)):r&&t.push(`--${n}=${r}`);const n=[];for(const e of[...t,...(0,I.atomConfig)().pandocConfig.pandocArguments]){const t=e.replace(/^(--[\w\-]+)\s(.+)$/i,"$1=$2");"-"===t.substr(0,1)&&n.push(t)}return n}O={setPandocOptions:ei,getArguments:ni,findFileRecursive:Zr},x.testing=O;var ri=Ci(x),ii={};Object.defineProperty(ii,"__esModule",{value:!0});var oi=void 0;ii.MarkdownItWorker=oi;var ai=function(e){return e&&e.__esModule?e:{default:e}}(i),si=r;const ui={useLazyHeaders:!0,useCheckBoxes:!0,useToc:!1,useEmoji:!1,breakOnSingleNewline:!1,typographicReplacements:!0,useCriticMarkup:!1,useFootnote:!0,useImsize:!1,inlineMathSeparators:["$","$"],blockMathSeparators:["$$","$$"],forceFullToc:!1,tocDepth:0,useAttributes:!0,useSpans:!0,useDivs:!0,useDeflist:!0,useFontmatter:!0,useImplicitFigures:!0,useSubscript:!0,useSuperscript:!0,parseDisplayMathInline:!0,tableCaptions:!0};class ci{constructor(){if(this.requestId=0,this.replyCallbacks=new Map,this.disposables=new si.CompositeDisposable,this.workerPath=ai.default.join((0,I.packagePath)(),"dist","worker","main.js"),this.worker=this.initWorker(),atom.inDevMode()){const e=new si.File(this.workerPath);this.disposables.add(e.onDidChange(()=>{this.teardownWorker(),this.worker=this.initWorker(),this.configure(atom.config.get("markdown-preview-plus.markdownItConfig"))}))}this.disposables.add(atom.config.onDidChange("markdown-preview-plus.renderer",({newValue:e})=>{"pandoc"===e?this.configure(ui):this.configure((0,I.atomConfig)().markdownItConfig)}),atom.config.observe("markdown-preview-plus.markdownItConfig",e=>{"markdown-it"===(0,I.atomConfig)().renderer&&this.configure(e)}))}static destroy(){ci._instance&&(ci._instance.teardownWorker(),ci._instance.disposables.dispose(),ci._instance=void 0)}static async render(e,t){return ci.instance().request({cmd:"render",text:e,rL:t})}static async getTokens(e,t){return ci.instance().request({cmd:"getTokens",text:e,rL:t})}static instance(){return ci._instance||(ci._instance=new ci),ci._instance}initWorker(){const e=new Worker(this.workerPath);return e.onmessage=e=>{if("id"in e.data){const t=this.replyCallbacks.get(e.data.id);t&&t.resolve(e.data.result)}else if("evt"in e.data)switch(e.data.evt){case"odd-separators":t=e.data.arr,n=e.data.option,atom.notifications.addWarning("Invalid math delimiter configuration"+(n?"in "+n:""),{detail:`Expected even number of elements, but got "${t.join(", ")}"`,dismissable:!0})}var t,n},e}teardownWorker(){this.worker.onmessage=null,this.worker.terminate();for(const{reject:e}of Array.from(this.replyCallbacks.values()))e(new Error("Worker terminated"))}configure(e){this.worker.postMessage({cmd:"config",arg:e})}async request(e){const t=this.requestId++,n=new Promise((e,n)=>{this.replyCallbacks.set(t,{resolve:n=>{this.replyCallbacks.delete(t),e(n)},reject:e=>{this.replyCallbacks.delete(t),n(e)}})}),r=Object.assign({id:t},e);return this.worker.postMessage(r),n}}oi=ci,ii.MarkdownItWorker=oi;var li={};Object.defineProperty(li,"__esModule",{value:!0});var fi=function(e){const t=e.toLowerCase();return di[t]||"source."+t};li.scopeForFenceName=fi;const di={sh:"source.shell",bash:"source.shell",c:"source.c","c++":"source.cpp",cpp:"source.cpp",coffee:"source.coffee",coffeescript:"source.coffee","coffee-script":"source.coffee",cs:"source.cs",csharp:"source.cs",css:"source.css",scss:"source.css.scss",sass:"source.sass",erlang:"source.erl",go:"source.go",html:"text.html.basic",java:"source.java",js:"source.js",javascript:"source.js",json:"source.json",less:"source.less",mustache:"text.html.mustache",objc:"source.objc","objective-c":"source.objc",php:"text.html.php",py:"source.python",python:"source.python",rb:"source.ruby",ruby:"source.ruby",text:"text.plain",toml:"source.toml",xml:"text.xml",yaml:"source.yaml",yml:"source.yaml"};var hi=r,pi={};Object.defineProperty(pi,"__esModule",{value:!0});var vi=function(e){return e.querySelectorAll("img[src],audio[src],video[src],link[href]")};pi.getMedia=vi;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});var gi=(wi=void 0,mi.isEqualArray=wi);function yi(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}mi.hightlightLines=gi;var wi=yi;function bi(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;";default:return e}}function ki(e){return e.replace(/[&"'<>]/g,bi)}function _i(e){return e.replace(/[&"'<> ]/g,bi)}function Si(e,t,n){e.push(t),n.push(`<span class="${t.replace(/\.+/g," ")}">`)}function xi(e,t){e.pop(),t.push("</span>")}function Pi(e,t,n){let r=e.length-t.length;if(r>0)for(;r--;)xi(e,n);let i=0;for(let r=e.length;r>=0;--r){if(yi(e.slice(0,r),t.slice(0,r))){i=r;break}xi(e,n)}for(let r=i;r<t.length;++r)Si(e,t[r],n)}function Oi(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Oi=function(){return e},e}function Ci(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Oi();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}mi.isEqualArray=wi,gi=function*(e,t,n,r){const i=atom.grammars.textmateRegistry||atom.grammars;if(!i)throw new Error("No Atom grammar registry found");const o=i.grammarForScopeName(t)||(n?i.grammarForScopeName(n):void 0);if(!o)throw new Error(`Grammar ${t} not found, and no ${n} grammar`);const a=r?_i:ki,s=e[Symbol.iterator]();let u=s.next(),c=null;const l=[];for(;!u.done;){const e=o.tokenizeLine(u.value,c);c=e.ruleStack;const t=[];for(const{value:n,scopes:r}of e.tokens){Pi(l,r.map(e=>"syntax--"+e.replace(/\./g,".syntax--")),t),t.push(a(n))}for(;l.length>0;)xi(l,t);yield t.join(""),u=s.next()}},mi.hightlightLines=gi;const{resourcePath:Mi}=atom.getLoadSettings();function Ei(e){const t="relativized"===e.behaviour;switch(e.behaviour){case"relativized":case"absolutized":Ii(e.doc,e.filePath,t,e.savePath)}}function Ii(e,t,n,r,i){const[o]=atom.project.relativizePath(t||""),a=(0,pi.getMedia)(e);Array.from(a).map((function(e){let a;a="LINK"===e.tagName?"href":"src";let s=e.getAttribute(a);if(s){if("pandoc"!==(0,I.atomConfig)().renderer&&(s=decodeURI(s)),s.match(/^(https?|atom|data):/))return;if(process.resourcesPath&&s.startsWith(process.resourcesPath))return;if(s.startsWith(Mi))return;if(s.startsWith((0,I.packagePath)()))return;if("/"===s[0]){if(!(0,I.isFileSync)(s))try{null!==o&&(s=S.join(o,s.substring(1)))}catch(e){}}else t&&(s=S.resolve(S.dirname(t),s));if(n&&(void 0!==t||void 0!==r)){const e=void 0!==r?r:t;s=S.relative(S.dirname(e),s)}if(i){const e=i.watch(s);void 0!==e&&(s=`${s}?v=${e}`)}e[a]=s}}))}function Ai(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Li=_o(k),Ti=_o(V),ji={};Object.defineProperty(ji,"__esModule",{value:!0});var Ni=async function(e,t,n,r,i){return new Promise(o=>{const a=new F.WebviewHandler(async()=>{const s=(0,I.atomConfig)().saveConfig.saveToPDFOptions,u="Custom"===s.pageSize?function(e){if(!e)return;const t=/^([\d.,]+)(cm|mm|in)?x([\d.,]+)(cm|mm|in)?$/i,n=e.replace(/\s*/g,"").match(t);if(n){const e=parseFloat(n[1]),t=n[2],r=parseFloat(n[3]),i=n[4];return{width:Fi(e,t),height:Fi(r,i)}}return}(s.customPageSize):s.pageSize;if(void 0===u)throw new Error("Failed to parse custom page size: "+s.customPageSize);const c=!!await a.getSelection()&&s.printSelectionOnly,l={...s,pageSize:u,printSelectionOnly:c},[f,d]=function(e){switch(e){case"A3":return[297,420];case"A4":return[210,297];case"A5":return[148,210];case"Legal":return[216,356];case"Letter":return[216,279];case"Tabloid":return[279,432];default:return[e.width/1e3,e.height/1e3]}}(l.pageSize),h=(0,I.atomConfig)().mathConfig,p=(0,I.atomConfig)().saveConfig.saveToPDFOptions.latexRenderer,v="Same as live preview"===p?h.latexRenderer:p;await a.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:{...h,latexRenderer:v},context:"pdf-export",pdfExportOptions:{width:l.landscape?d:f}}),await a.setBasePath(t);const m=await(0,k.render)({text:e,filePath:t,grammar:n,renderLaTeX:r,renderErrors:!1,mode:"normal"});await a.update(m.documentElement.outerHTML,r),await a.fullyReady();try{const e=await a.printToPDF(l);await new Promise((t,n)=>{(0,Ri.writeFile)(i,e,e=>{e?n(e):t()})})}catch(e){const t=e;atom.notifications.addError("Failed saving to PDF",{description:t.toString(),dismissable:!0,stack:t.stack})}a.destroy(),o()});a.element.style.pointerEvents="none",a.element.style.position="absolute",a.element.style.width="0px",a.element.style.height="0px";atom.views.getView(atom.workspace).appendChild(a.element)})};ji.saveAsPDF=Ni;var Ri=n;function Fi(e,t){return e*function(e="mm"){switch(e){case"mm":return 1e3;case"cm":return 1e4;case"in":return 25400}}(t)}var Di={};Object.defineProperty(Di,"__esModule",{value:!0});var Bi=async function(e=""){let t;const n=document.activeElement,r=new Wi.CompositeDisposable;try{return await new Promise(n=>{const i=atom.workspace.buildTextEditor({mini:!0,placeholderText:e}),o=atom.views.getView(i);let a=!0;setTimeout(()=>{a=!1},100),o.onblur=()=>{a?o.focus():atom.commands.dispatch(o,"core:cancel")},r.add(atom.commands.add(o,{"core:confirm":()=>{n(i.getText())},"core:cancel":()=>{o.onblur=null,n()}})),t=atom.workspace.addModalPanel({item:i,visible:!0}),o.focus()})}finally{r.dispose(),t&&t.destroy(),n&&n.focus()}};Di.modalTextEditorView=Bi;var Wi=r;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});var $i=void 0;zi.BrowserWindowHandler=$i;var Ui=t;const qi=[{label:"Sync Source",command:"markdown-preview-plus:sync-source"},{label:"Search Selection in Source",command:"markdown-preview-plus:search-selection-in-source"},{label:"Find in Preview...",command:"markdown-preview-plus:find-in-preview"},{label:"Find Next",command:"markdown-preview-plus:find-next"},{label:"Copy As HTML",command:"core:copy"},{label:"Save As…",command:"core:save-as"},{label:"Open in main window",command:"markdown-preview-plus:main-window"},{label:"Open Dev Tools",command:"markdown-preview-plus:open-dev-tools"},{label:"Toggle math rendering",command:"markdown-preview-plus:toggle-render-latex"}];class Hi extends B.WebContentsHandler{constructor(e){const t=new Ui.remote.BrowserWindow({webPreferences:{webSecurity:!1,nodeIntegration:!0}});Hi.windows.add(t),t.on("close",()=>this.destroy()),t.setMenuBarVisibility(!1),super(Promise.resolve(t.webContents),()=>{this.menu&&this.menu.popup({window:t})},e),this.window=t,this._element=document.createElement("div")}get element(){return this._element}static clean(){const e=Array.from(Hi.windows);for(const t of e)t.close();const t=Array.from(Hi.views.keys());for(const e of t)e.destroy()}static viewForURI(e){return Array.from(Hi.views.keys()).find(t=>t.getURI()===e)}static windowForView(e){return Hi.views.get(e)}registerViewEvents(e){Hi.views.set(e,this.window);const t=e.onDidDestroy(()=>{Hi.views.delete(e),t.dispose()}),n=atom.views.getView(e);this.disposables.add(atom.commands.add(n,{"core:save-as":()=>{const t=atom.applicationDelegate.showSaveDialog(e.getSaveDialogOptions());t&&e.saveAs(t)},"markdown-preview-plus:main-window":()=>{e.openMainWindow()}})),this.menu=Ui.remote.Menu.buildFromTemplate(qi.map(({label:e,command:t})=>({label:e,click:()=>atom.commands.dispatch(n,t)})))}destroy(){this.destroyed||(super.destroy(),this.window.destroy(),Hi.windows.delete(this.window))}}$i=Hi,zi.BrowserWindowHandler=$i,Hi.windows=new Set,Hi.views=new Map;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Object.defineProperty(Vi,"MarkdownPreviewControllerEditor",{enumerable:!0,get:function(){return Ji.MarkdownPreviewControllerEditor}}),Object.defineProperty(Vi,"MarkdownPreviewControllerFile",{enumerable:!0,get:function(){return fo.MarkdownPreviewControllerFile}}),Object.defineProperty(Vi,"MarkdownPreviewControllerText",{enumerable:!0,get:function(){return yo.MarkdownPreviewControllerText}}),Object.defineProperty(Vi,"MarkdownPreviewController",{enumerable:!0,get:function(){return Gi.MarkdownPreviewController}});var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});var Yi=void 0;Ji.MarkdownPreviewControllerEditor=Yi;var Ki=r,Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});var Xi=void 0;Gi.MarkdownPreviewController=Xi;var Qi=r;Xi=class{constructor(){this.disposables=new Qi.CompositeDisposable,this.emitter=new Qi.Emitter,this.disposables.add(this.emitter)}destroy(){this.emitter.emit("did-destroy"),this.disposables.dispose()}didScrollPreview(e,t){}getScrollSyncParams(){}onDidChange(e){return this.emitter.on("did-change",e)}onDidChangePath(e){return this.emitter.on("did-change-path",e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}onScrollSync(e){return this.emitter.on("scroll-sync",e)}onSearch(e){return this.emitter.on("search",e)}onSync(e){return this.emitter.on("sync",e)}onActivate(e){return this.emitter.on("activate",e)}},Gi.MarkdownPreviewController=Xi;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var eo=function(e){const t=ao(e);return t||new p.MarkdownPreviewView(new Vi.MarkdownPreviewControllerEditor(e))};Zi.createEditorView=eo;var to=ao;Zi.viewForEditor=to;var no=so;Zi.viewForFile=no;var ro=function(e){const t=so(e);return t||new p.MarkdownPreviewView(new Vi.MarkdownPreviewControllerFile(e))};Zi.createFileView=ro;var io=function(e){return new p.MarkdownPreviewView(new Vi.MarkdownPreviewControllerText(Promise.resolve(e)))};Zi.createTextView=io;var oo=async function(e){const t=atom.workspace.getActivePane(),n={searchAllPanes:!0},r=(0,I.atomConfig)().previewConfig.previewSplitPaneDir;"none"!==r&&(n.split=r);const i=await atom.workspace.open(e,n);t.isDestroyed()||t.activate();return i};function ao(e){return uo("markdown-preview-plus://editor/"+e.id)}function so(e){return uo("markdown-preview-plus://file/"+e)}function uo(e){const t=atom.workspace.paneForURI(e);if(t){const n=t.itemForURI(e);if(n)return n}return zi.BrowserWindowHandler.viewForURI(e)}Zi.openPreviewPane=oo;var co=t;class lo extends Gi.MarkdownPreviewController{constructor(e){super(),this.editor=e,this.type="editor",this.text="",this.text=e.getText(),(0,I.handlePromise)(this.handleEditorEvents())}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",editorId:this.editor&&this.editor.id}}getTitle(){return this.editor.getTitle()+" Preview"}getURI(){return"markdown-preview-plus://editor/"+this.editor.id}getPath(){return this.editor.getPath()}async getMarkdownSource(){return this.text}getGrammar(){return this.editor.getGrammar()}onDidChange(e){return this.emitter.on("did-change",e)}didScrollPreview(e,t){if(this.shouldScrollSync("preview"))if(0===e)this.editor.scrollToBufferPosition([e,0]);else if(t>=this.editor.getLastBufferRow()-1)this.editor.scrollToBufferPosition([t,0]);else{const n=Ki.Range.fromObject([[e,0],[t,0]]);this.editor.scrollToScreenRange(this.editor.screenRangeForBufferRange(n),{center:!1})}}getScrollSyncParams(){try{const[e,t]=this.editor.getVisibleRowRange();return{firstLine:this.editor.bufferRowForScreenRow(e),lastLine:this.editor.bufferRowForScreenRow(t)}}catch(e){return void console.error(e)}}openSource(e){void 0!==e&&this.editor.setCursorBufferPosition([e,0]);const t=atom.workspace.paneForItem(this.editor);t&&(t.activateItem(this.editor),t.activate())}async handleEditorEvents(){this.disposables.add(atom.workspace.onDidChangeActiveTextEditor(e=>{(0,I.atomConfig)().previewConfig.activatePreviewWithEditor&&e===this.editor&&this.emitter.emit("activate",atom.workspace.paneForItem(e))}),this.editor.getBuffer().onDidStopChanging(()=>{(0,I.atomConfig)().previewConfig.liveUpdate&&this.changeHandler(),(0,I.atomConfig)().syncConfig.syncPreviewOnChange&&this.syncPreviewHelper(!1)}),this.editor.onDidChangePath(()=>{this.emitter.emit("did-change-path",this.getPath())}),this.editor.onDidDestroy(()=>{this.destroy()}),this.editor.getBuffer().onDidSave(()=>{(0,I.atomConfig)().previewConfig.liveUpdate||this.changeHandler()}),this.editor.getBuffer().onDidReload(()=>{(0,I.atomConfig)().previewConfig.liveUpdate||this.changeHandler()}),atom.views.getView(this.editor).onDidChangeScrollTop(()=>{if(!this.shouldScrollSync("editor"))return;const e=this.getScrollSyncParams();void 0!==e&&this.emitter.emit("scroll-sync",e)}),atom.commands.add(atom.views.getView(this.editor),{"markdown-preview-plus:sync-preview":()=>{this.syncPreviewHelper(!0)},"markdown-preview-plus:search-selection-in-preview":()=>{const e=this.editor.getSelectedText();this.emitter.emit("search",e)}}))}changeHandler(){this.text=this.editor.getText(),this.emitter.emit("did-change")}syncPreviewHelper(e){const t=this.editor.getCursorBufferPosition().row;this.emitter.emit("sync",[t,e])}shouldScrollSync(e){const t=(0,I.atomConfig)().syncConfig;if(!t.syncEditorOnPreviewScroll||!t.syncPreviewOnEditorScroll)return t.syncEditorOnPreviewScroll&&"preview"===e||t.syncPreviewOnEditorScroll&&"editor"===e;if("editor"===e){const e=this.editor;if(!e)return!1;if(!co.remote.getCurrentWindow().isFocused())return!1;const t=atom.workspace.paneForItem(e);return!!t&&t.isActive()}if("preview"===e){const e=(0,Zi.viewForEditor)(this.editor);if(!e)return!1;const t=atom.workspace.paneForItem(e);if(t)return t.isActive();const n=zi.BrowserWindowHandler.windowForView(e);return!!n&&n.isFocused()}return!1}}Yi=lo,Ji.MarkdownPreviewControllerEditor=Yi;var fo={};Object.defineProperty(fo,"__esModule",{value:!0});var ho=void 0;fo.MarkdownPreviewControllerFile=ho;var po=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=mo();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(i),vo=r;function mo(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return mo=function(){return e},e}class go extends Gi.MarkdownPreviewController{constructor(e){super(),this.type="file",this.file=new vo.File(e),this.disposables.add(this.file.onDidChange(()=>{this.emitter.emit("did-change")}))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",filePath:this.file.getPath()}}getTitle(){const e=this.getPath();return(e?po.basename(e):"Markdown File")+" Preview"}getURI(){return"markdown-preview-plus://file/"+this.getPath()}getPath(){return this.file.getPath()}getGrammar(){}async getMarkdownSource(){const e=await this.file.read();return null!==e?e:""}}ho=go,fo.MarkdownPreviewControllerFile=ho;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});var wo=void 0;yo.MarkdownPreviewControllerText=wo;class bo extends Gi.MarkdownPreviewController{constructor(e){super(),this.textPromise=e,this.type="text",this.text="",(0,I.handlePromise)(e.then(e=>{this.text=e}))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",text:this.text}}getTitle(){return"Markdown Preview"}getURI(){return"markdown-preview-plus://text/"}getPath(){}getGrammar(){}async getMarkdownSource(){return this.textPromise}}function ko(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return ko=function(){return e},e}function _o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=ko();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}wo=bo,yo.MarkdownPreviewControllerText=wo;class So{constructor(e,t=(0,I.atomConfig)().mathConfig.enableLatexRenderingByDefault,n=F.WebviewHandler){this.controller=e,this.renderLaTeX=t,this.emitter=new g.Emitter,this.disposables=new g.CompositeDisposable,this.destroyed=!1,this.loading=!0,this.changeHandler=()=>{(0,I.handlePromise)(this.renderMarkdown());const e=atom.workspace.paneForItem(this);void 0!==e&&e!==atom.workspace.getActivePane()&&e.activateItem(this)},this.handler=new n(async()=>{const e=(0,I.atomConfig)();await this.handler.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:e.mathConfig,context:"live-preview"}),await this.handler.setBasePath(this.getPath()),await this.handler.setNativeKeys(e.previewConfig.nativePageScrollKeys),this.emitter.emit("did-change-title"),this.emitter.emit("did-init")}),this.element=document.createElement("div"),this.element.tabIndex=-1,this.element.classList.add("markdown-preview-plus"),So.elementMap.set(this.element,this),this.subscribeController(),this._initialRenderPromsie=new Promise(e=>{this.disposables.add(this.emitter.on("did-init",()=>{(0,I.handlePromise)(this.renderMarkdown().then(()=>{this.loading=!1,e()}))}))}),this.handler.element&&this.element.appendChild(this.handler.element),this.handler.registerViewEvents(this),this.disposables.add(this.handler.onDidDestroy(()=>this.destroy())),this.handleEvents()}get type(){return this.controller.type}static viewForElement(e){return So.elementMap.get(e)}serialize(){return this.controller.serialize()}destroy(){this.destroyed||(this.destroyed=!0,this.emitter.emit("did-destroy"),this.disposables.dispose(),this.controller.destroy(),this.handler.destroy(),So.elementMap.delete(this.element),this.element.remove())}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async runJS(e){return this.handler.runJS(e)}async initialRenderPromise(){await this._initialRenderPromsie}onDidChangeTitle(e){return this.emitter.on("did-change-title",e)}onDidChangeMarkdown(e){return this.emitter.on("did-change-markdown",e)}toggleRenderLatex(){this.renderLaTeX=!this.renderLaTeX,this.changeHandler()}getTitle(){return this.controller.getTitle()}getDefaultLocation(){return(0,I.atomConfig)().previewConfig.previewDock}getIconName(){return"markdown"}getURI(){return this.controller.getURI()}getPath(){return this.controller.getPath()}getSaveDialogOptions(){let e=this.getPath();if(void 0===e){const t=atom.project.getPaths()[0];e="untitled.md",t&&(e=m.join(t,e))}return e+="."+(0,I.atomConfig)().saveConfig.defaultSaveFormat,{defaultPath:e}}saveAs(e){if(void 0===e)return;if(this.loading)throw new Error("Preview is still loading");const{name:t,ext:n}=m.parse(e);".pdf"===n?(0,I.handlePromise)(this.getMarkdownSource().then(async t=>(await(0,ji.saveAsPDF)(t,this.getPath(),this.getGrammar(),this.renderLaTeX,e),(0,I.atomConfig)().saveConfig.openOnSave.pdf?atom.workspace.open(e):void 0))):(0,I.handlePromise)(this.getHTMLToSave(e).then(async n=>{const r=Ti.mkHtml(t,n,this.renderLaTeX,await this.handler.getTeXConfig());return w.writeFileSync(e,r),(0,I.atomConfig)().saveConfig.openOnSave.html?atom.workspace.open(e):void 0}))}openMainWindow(){const e=this.createNewFromThis(F.WebviewHandler);(0,I.handlePromise)((0,Zi.openPreviewPane)(e)),Ti.destroy(this)}openNewWindow(){const e=this.createNewFromThis(zi.BrowserWindowHandler);atom.views.getView(atom.workspace).appendChild(e.element),Ti.destroy(this)}createNewFromThis(e){const t=this.controller;return this.controller=new Vi.MarkdownPreviewControllerText(this.getMarkdownSource()),this.subscribeController(),new So(t,this.renderLaTeX,e)}async getMarkdownSource(){return this.controller.getMarkdownSource()}getGrammar(){return this.controller.getGrammar()}async openSource(e){const t=this.getPath();if(void 0===t)return;const n=await atom.workspace.open(t,{initialLine:e,searchAllPanes:!0});return atom.workspace.isTextEditor(n)?("editor"!==this.controller.type&&(this.controller.destroy(),this.controller=new Vi.MarkdownPreviewControllerEditor(n),this.subscribeController()),n):void 0}async syncPreview(e,t){return this.handler.sync(e,t)}handleEvents(){this.disposables.add(atom.grammars.onDidAddGrammar(()=>(0,y.debounce)(()=>{(0,I.handlePromise)(this.renderMarkdown())},250)),atom.grammars.onDidUpdateGrammar((0,y.debounce)(()=>{(0,I.handlePromise)(this.renderMarkdown())},250)),atom.commands.add(this.element,{"core:move-up":()=>this.handler.runJS('window.scrollBy({top:-30, behavior: "auto"})'),"core:move-down":()=>this.handler.runJS('window.scrollBy({top:30, behavior: "auto"})'),"core:move-left":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:move-right":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:page-up":()=>this.handler.runJS('window.scrollBy({top:-0.9*window.innerHeight, behavior: "auto"})'),"core:page-down":()=>this.handler.runJS('window.scrollBy({top:0.9*window.innerHeight, behavior: "auto"})'),"core:move-to-top":()=>this.handler.runJS('window.scrollBy({top:-document.body.scrollHeight, behavior: "smooth"})'),"core:move-to-bottom":()=>this.handler.runJS('window.scrollBy({top:document.body.scrollHeight, behavior: "smooth"})'),"core:cancel":e=>{this.handler.hasSearch()?(0,I.handlePromise)(this.handler.stopSearch()):e.abortKeyBinding()},"core:copy":()=>{(0,I.handlePromise)(this.copyToClipboard())},"markdown-preview-plus:open-dev-tools":()=>{(0,I.handlePromise)(this.handler.openDevTools())},"markdown-preview-plus:new-window":()=>{this.openNewWindow()},"markdown-preview-plus:print":()=>{(0,I.handlePromise)(this.handler.print())},"markdown-preview-plus:zoom-in":()=>{(0,I.handlePromise)(this.handler.zoomIn())},"markdown-preview-plus:zoom-out":()=>{(0,I.handlePromise)(this.handler.zoomOut())},"markdown-preview-plus:reset-zoom":()=>{(0,I.handlePromise)(this.handler.resetZoom())},"markdown-preview-plus:sync-source":e=>{(0,I.handlePromise)(this.handler.syncSource().then(e=>this.openSource(e)))},"markdown-preview-plus:search-selection-in-source":()=>{(0,I.handlePromise)(this.searchSelectionInSource())},"markdown-preview-plus:find-next":()=>{(0,I.handlePromise)(this.handler.findNext())},"markdown-preview-plus:find-in-preview":()=>{const e=b.remote.getCurrentWindow(),t=b.remote.BrowserWindow.getFocusedWindow();t!==e&&e.focus(),(0,I.handlePromise)((0,Di.modalTextEditorView)("Find in preview").then(n=>{if(t&&t!==e&&t.focus(),n)return this.handler.search(n)}))}}),atom.config.onDidChange("markdown-preview-plus.markdownItConfig",()=>{"markdown-it"===(0,I.atomConfig)().renderer&&this.changeHandler()}),atom.config.onDidChange("markdown-preview-plus.pandocConfig",()=>{"pandoc"===(0,I.atomConfig)().renderer&&this.changeHandler()}),atom.config.onDidChange("markdown-preview-plus.mathConfig.latexRenderer",()=>(0,I.handlePromise)(this.handler.reload())),atom.config.onDidChange("markdown-preview-plus.mathConfig.numberEquations",()=>(0,I.handlePromise)(this.handler.reload())),atom.config.onDidChange("markdown-preview-plus.previewConfig.nativePageScrollKeys",({newValue:e})=>(0,I.handlePromise)(this.handler.setNativeKeys(e))),atom.config.onDidChange("markdown-preview-plus.renderer",this.changeHandler),atom.config.onDidChange("markdown-preview-plus.previewConfig.highlighter",this.changeHandler),this.handler.emitter.on("did-scroll-preview",({min:e,max:t})=>{this.controller.didScrollPreview(e,t)}))}async renderMarkdown(){return this.renderMarkdownText(await this.getMarkdownSource())}async getHTMLToSave(e){const t=await this.getMarkdownSource();return Li.render({text:t,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!1,mode:"save",savePath:e})}async renderMarkdownText(e){try{const t=await Li.render({text:e,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!0,mode:"normal",imageWatcher:this.handler.imageWatcher});if(this.destroyed)return;await this.handler.update(t.documentElement.outerHTML,this.renderLaTeX,(0,I.atomConfig)().previewConfig.diffMethod,Ti.buildLineMap(await ii.MarkdownItWorker.getTokens(e,this.renderLaTeX)),(0,I.atomConfig)().syncConfig.syncPreviewOnEditorScroll?this.controller.getScrollSyncParams():void 0),this.emitter.emit("did-change-markdown")}catch(e){await this.showError(e)}}async showError(e){return this.destroyed?void atom.notifications.addFatalError("Error reported on a destroyed Markdown Preview Plus view",{dismissable:!0,stack:e.stack,detail:e.message}):this.loading?void atom.notifications.addFatalError("Error reported when Markdown Preview Plus view is loading",{dismissable:!0,stack:e.stack,detail:e.message}):this.handler.error(e.message)}async copyToClipboard(){const e=await this.handler.getSelection();if(void 0!==e)atom.config.get("markdown-preview-plus.richClipboard")?await this.handler.runJS('document.execCommand("copy")'):atom.clipboard.write(e);else{const e=await this.getMarkdownSource();await(0,I.copyHtml)(e,this.getPath(),this.renderLaTeX)}}async searchSelectionInSource(){const e=await this.handler.getSelection();if(!e)return;const t=await this.openSource();if(!t)return;const n=e.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/\n+$/,"").replace(/\s+/g,"\\s+"),r=new RegExp(n);let i=!1;t.scanInBufferRange(r,new g.Range(t.getCursors()[0].getBufferPosition(),t.getBuffer().getRange().end),e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),i=!0,e.stop()}),i||t.scan(r,e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),e.stop()})}subscribeController(){this.controllerDisposables&&(this.disposables.remove(this.controllerDisposables),this.controllerDisposables.dispose()),this.controllerDisposables=new g.CompositeDisposable,this.disposables.add(this.controllerDisposables),this.controllerDisposables.add(this.controller.onDidChange(this.changeHandler),this.controller.onDidChangePath(e=>{(0,I.handlePromise)(this.handler.setBasePath(e)),this.emitter.emit("did-change-title")}),this.controller.onDidDestroy(()=>{if((0,I.atomConfig)().previewConfig.closePreviewWithEditor)Ti.destroy(this);else{const e=this.controller.getPath();this.controller=e?new Vi.MarkdownPreviewControllerFile(e):new Vi.MarkdownPreviewControllerText(this.controller.getMarkdownSource()),this.subscribeController()}}),this.controller.onActivate(e=>{const t=atom.workspace.paneForItem(this);t&&t!==e&&t.activateItem(this)}),this.controller.onScrollSync(({firstLine:e,lastLine:t})=>{(0,I.handlePromise)(this.handler.scrollSync(e,t))}),this.controller.onSearch(e=>{(0,I.handlePromise)(this.handler.search(e))}),this.controller.onSync(([e,t])=>{(0,I.handlePromise)(this.syncPreview(e,t))}))}}v=So,p.MarkdownPreviewView=v,So.elementMap=new WeakMap,Object.keys(Zi).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(h,e)||Object.defineProperty(d,e,{enumerable:!0,get:function(){return Zi[e]}}))}));var xo=r,Po=$a(i),Oo=$a(I),Co={};Object.defineProperty(Co,"__esModule",{value:!0});var Mo=void 0;Co.PlaceholderView=Mo;Mo=class{constructor(e){this.editorId=e,this.element=document.createElement("div"),this.initialize=()=>{const e=(0,V.editorForId)(this.editorId);if(!e)return;const t=atom.workspace.paneForItem(this);this._view=(0,d.createEditorView)(e),t&&(t.addItem(this._view),(0,I.handlePromise)(t.destroyItem(this)))},this.element.classList.add("markdown-spinner"),setImmediate(this.initialize)}getView(){return this._view}getTitle(){return"Placeholder Markdown Preview Plus View"}getURI(){return"markdown-preview-plus://placeholder"}},Co.PlaceholderView=Mo;var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});var Io=function(){const e=atom.config.get("markdown-preview-plus"),t=[];void 0!==e.enablePandoc&&(atom.config.set("markdown-preview-plus.renderer",e.enablePandoc?"pandoc":"markdown-it"),Ao("enablePandoc"),t.push(!0));return t.push(Lo(e,"markdown-preview-plus.markdownItConfig.breakOnSingleNewline","breakOnSingleNewline"),Lo(e,"markdown-preview-plus.previewConfig.liveUpdate","liveUpdate"),Lo(e,"markdown-preview-plus.previewConfig.previewSplitPaneDir","previewSplitPaneDir"),Lo(e,"markdown-preview-plus.previewConfig.previewDock","previewDock"),Lo(e,"markdown-preview-plus.previewConfig.closePreviewWithEditor","closePreviewWithEditor"),Lo(e,"markdown-preview-plus.previewConfig.activatePreviewWithEditor","activatePreviewWithEditor"),Lo(e,"markdown-preview-plus.syncConfig.syncPreviewOnChange","syncPreviewOnChange"),Lo(e,"markdown-preview-plus.syncConfig.syncPreviewOnEditorScroll","syncPreviewOnEditorScroll"),Lo(e,"markdown-preview-plus.syncConfig.syncEditorOnPreviewScroll","syncEditorOnPreviewScroll"),Lo(e,"markdown-preview-plus.mathConfig.enableLatexRenderingByDefault","enableLatexRenderingByDefault"),Lo(e,"markdown-preview-plus.mathConfig.latexRenderer","latexRenderer"),Lo(e,"markdown-preview-plus.mathConfig.numberEquations","numberEquations"),Lo(e,"markdown-preview-plus.markdownItConfig.useLazyHeaders","useLazyHeaders"),Lo(e,"markdown-preview-plus.markdownItConfig.useCheckBoxes","useCheckBoxes"),Lo(e,"markdown-preview-plus.markdownItConfig.useEmoji","useEmoji"),Lo(e,"markdown-preview-plus.markdownItConfig.useToc","useToc"),Lo(e,"markdown-preview-plus.markdownItConfig.inlineMathSeparators","inlineMathSeparators"),Lo(e,"markdown-preview-plus.markdownItConfig.blockMathSeparators","blockMathSeparators"),Lo(e,"markdown-preview-plus.pandocConfig.useNativePandocCodeStyles","useNativePandocCodeStyles"),Lo(e,"markdown-preview-plus.pandocConfig.pandocPath","pandocPath"),Lo(e,"markdown-preview-plus.pandocConfig.pandocFilters","pandocFilters"),Lo(e,"markdown-preview-plus.pandocConfig.pandocArguments","pandocArguments"),Lo(e,"markdown-preview-plus.pandocConfig.pandocMarkdownFlavor","pandocMarkdownFlavor"),Lo(e,"markdown-preview-plus.pandocConfig.pandocBibliography","pandocBibliography"),Lo(e,"markdown-preview-plus.pandocConfig.pandocRemoveReferences","pandocRemoveReferences"),Lo(e,"markdown-preview-plus.pandocConfig.pandocBIBFile","pandocBIBFile"),Lo(e,"markdown-preview-plus.pandocConfig.pandocBIBFileFallback","pandocBIBFileFallback"),Lo(e,"markdown-preview-plus.pandocConfig.pandocCSLFile","pandocCSLFile"),Lo(e,"markdown-preview-plus.pandocConfig.pandocCSLFileFallback","pandocCSLFileFallback")),t.some(e=>!0===e)};function Ao(e){atom.config.unset("markdown-preview-plus."+e)}function Lo(e,t,n){return null!=e[n]&&(atom.config.set(t,e[n]),Ao(n),!0)}Eo.migrateConfig=Io;var To={};Object.defineProperty(To,"__esModule",{value:!0});var jo=async function(e){let t;const n=document.activeElement;try{return await new Promise(n=>{const r=new Fa.default({items:e,elementForItem:e=>{const t=document.createElement("li");return t.innerText=e,t},didCancelSelection:()=>{n()},didConfirmSelection:e=>{n(e)},itemsClassList:["atom-typescript"]});t=atom.workspace.addModalPanel({item:r,visible:!0}),r.focus()})}finally{t&&t.destroy(),n&&n.focus()}};To.selectListView=jo;var No;const{Disposable:Ro,CompositeDisposable:Fo,TextEditor:Do}=r;var Bo,Wo,zo={};Wo={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var $o={};function Uo(e,t,...n){for(let e=0;e<n.length;){const t=n[e];switch(typeof t){case"string":case"number":n[e]={text:t},e++;break;case"object":Array.isArray(t)?n.splice(e,1,...t):t?e++:n.splice(e,1);break;default:throw new Error("Invalid child node: "+t)}}if(t){for(const e in t){const n=Wo[e];n&&(t.on||(t.on={}),t.on[n]=t[e])}t.class&&(t.className=t.class)}return{tag:e,props:t,children:n}}$o=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);const qo=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const e of qo)Uo[e]=(t,...n)=>Uo(e,t,...n);for(const e of $o)Uo[e]=(t,...n)=>Uo(e,t,...n);Bo=Uo;var Ho,Vo={},Jo={};Jo=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);function Yo(e,t,n,r){if(t)for(var i in t)n&&i in n||(r?e[i]="":delete e[i]);if(n)for(var i in n){const r=t&&t[i],o=n[i];o!==r&&(e[i]=o)}}function Ko(e,t,n){if(t)for(var r in t)n&&r in n||e.removeAttribute(r);if(n)for(var r in n){const i=t&&t[r],o=n[r];o!==i&&e.setAttribute(r,o)}}function Go(e,t){let n;if(null!=e.text)n=document.createTextNode(e.text);else{const{tag:r,children:i}=e;let{props:o}=e;if("function"==typeof r){let a;o&&o.ref&&(a=o.ref);const s=new r(o||{},i);e.component=s,n=s.element,t&&t.refs&&a&&(t.refs[a]=s)}else $o.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&Xo(n,i,t),o&&Ho(n,null,e,t)):(n=document.createElement(r),i&&Xo(n,i,t),o&&Ho(n,null,e,t))}return e.domNode=n,n}function Xo(e,t,n){for(let r=0;r<t.length;r++)e.appendChild(Go(t[r],n))}Ho=function(e,t,n,r){const i=t&&t.props,o=n.props;let a,s;r&&(a=r.refs,s=r.listenerContext),function e(t,n,r,i,o){if(r)for(var a in r)"ref"!==a&&"on"!==a&&(a in Wo||o&&a in o||("dataset"===a?e(t.dataset,null,r&&r.dataset,null,null):"innerHTML"!==a&&n&&$o.has(n.tag)?t.removeAttribute(Jo.get(a)||a):(t[a]="",delete t[a])));if(o)for(var a in o)if("ref"!==a&&"on"!==a&&!(a in Wo)){var s=r&&r[a],u=o[a];"dataset"===a?Yo(t.dataset,s,u,!1):"style"===a&&"string"!=typeof u?("string"==typeof s&&(t.style="",s=null),Yo(t.style,s,u,!0)):"attributes"===a?Ko(t,s,u):u!==s&&("innerHTML"!==a&&i&&$o.has(i.tag)?t.setAttribute(Jo.get(a)||a,u):i&&"input"===i.tag&&"value"===a&&t[a]===u||(t[a]=u))}}(e,t,i,n,o),a&&function(e,t,n,r){n!==t&&(t&&r[t]===e&&delete r[t],n&&(r[n]=e))}(e,i&&i.ref,o&&o.ref,a),function(e,t,n,r){const i=t&&t.props&&t.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=t&&t.boundListeners&&t.boundListeners[n]?t.boundListeners[n]:i[n],e.removeEventListener(n,r)}for(const a in o){const s=i&&i[a],u=o[a];if(u!==s){if(s){let n;n=t&&t.boundListeners&&t.boundListeners[a]?t.boundListeners[a]:s,e.removeEventListener(a,n)}if(u){let t;r?(t=u.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[a]=t):t=u,e.addEventListener(a,t)}}}}(e,t,n,s)},Vo=Go;var Qo,Zo={};function ea(e,t,n){const r=e.domNode;if(t===e)return r;if(ra(e,t)){let i;return null!=t.text?(r.nodeValue=t.text,i=r):"function"==typeof t.tag?i=function(e,t,n){const{component:r,props:i}=e;let{props:o,children:a}=t;if(t.component=r,n&&n.refs){const e=n.refs,t=i&&i.ref,a=o&&o.ref;a!==t&&(t&&e[t]===r&&delete e[t],a&&(e[a]=r))}return r.update(o||{},a),r.element}(e,t,n):(!function(e,t,n,r){var i,o=0,a=t.length-1,s=t[0],u=t[a],c=0,l=n.length-1,f=n[0],d=n[l];for(;o<=a&&c<=l;)if(s)if(u)if(ra(s,f))ea(s,f,r),s=t[++o],f=n[++c];else if(ra(u,d))ea(u,d,r),u=t[--a],d=n[--l];else if(ra(s,d))ea(s,d,r),e.insertBefore(s.domNode,u.domNode.nextSibling),s=t[++o],d=n[--l];else if(ra(u,f))ea(u,f,r),e.insertBefore(u.domNode,s.domNode),u=t[--a],f=n[++c];else{i||(ta.length>0?(i=ta.pop()).clear():i=new Map,oa(i,t,o,a));var h=ia(f),p=h?i.get(h):null;if(null==p)e.insertBefore(Vo(f,r),s.domNode),f=n[++c];else{var v=t[p];ea(v,f,r),t[p]=void 0,e.insertBefore(v.domNode,s.domNode),f=n[++c]}}else u=t[--a];else s=t[++o];if(o>a){var m=n[l+1]?n[l+1].domNode:null;for(let t=c;t<=l;t++)e.insertBefore(Vo(n[t],r),m)}else if(c>l)for(let e=o;e<=a;e++){var g=t[e];g&&na(g,r&&r.refs)}i&&ta.push(i)}(r,e.children,t.children,n),Ho(r,e,t,n),i=r),t.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;na(e,n&&n.refs);const a=Vo(t,n);return i&&i.insertBefore(a,o),t.domNode=a,a}}let ta=[new Map,new Map,new Map,new Map];function na(e,t,n=!0){const{domNode:r,props:i,children:o,component:a}=e,s=i&&i.ref;if(a)t&&s&&t[s]===a&&delete t[s],a.destroy&&a.destroy();else if(t&&s&&t[s]===r&&delete t[s],o)for(let e=0;e<o.length;e++)na(o[e],t,!1);n&&r.remove()}function ra(e,t){return ia(e)===ia(t)&&e.tag===t.tag}function ia(e){return e.props?e.props.key:void 0}function oa(e,t,n,r){for(let i=n;i<=r;i++){const n=ia(t[i]);n&&e.set(n,i)}return e}Zo=ea;var aa;aa=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(e){this.updateRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(e){this.readRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise(e=>{this.resolveNextUpdatePromise=e})),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let e=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,e()}}};let sa=null;var ua=function(){return sa||(sa=new aa),sa};const ca=new WeakSet;let la=0,fa=0;function da(e){return null!=e&&!1!==e}function ha(e,t=!0){if(!da(e.virtualNode))throw new Error((e.constructor?e.constructor.name+" instance":e)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==e.element)throw new Error((e.constructor?e.constructor.name+" instance":e)+" is not associated with a DOM element. Perhaps this component was never initialized?");let n=e.render();if(!da(n)){const t=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+t)}la++;let r=e.virtualNode,i=e.element,o=Zo(r,n,{refs:e.refs,listenerContext:e});if(e.virtualNode=n,o!==i&&!t)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");e.element=o,"function"==typeof e.writeAfterUpdate&&e.writeAfterUpdate(),"function"==typeof e.readAfterUpdate&&ua().readDocument((function(){e.readAfterUpdate()})),la--}function pa(e,t=!0){fa++,va(e.virtualNode),1===fa&&t&&e.element.remove(),fa--}function va(e){e.component&&"function"==typeof e.component.destroy?e.component.destroy():e.children&&e.children.forEach(va)}Qo={initialize:function(e){if("function"!=typeof e.update)throw new Error("Etch components must implement `update(props, children)`.");let t=e.render();if(!da(t)){let n=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+t+" returned from render()"+n)}e.refs={},e.virtualNode=t,e.element=Vo(e.virtualNode,{refs:e.refs,listenerContext:e})},update:function(e,t=!0){if(la>0)return ha(e,t),Promise.resolve();let n=ua();return ca.has(e)||(ca.add(e),n.updateDocument((function(){ca.delete(e),ha(e,t)}))),n.getNextUpdatePromise()},updateSync:ha,destroy:function(e,t=!0){if(la>0||fa>0)return pa(e,t),Promise.resolve();let n=ua();return n.updateDocument((function(){pa(e,t)})),n.getNextUpdatePromise()},destroySync:pa};const{initialize:ma,update:ga,updateSync:ya,destroy:wa,destroySync:ba}=Qo,ka=(zo={dom:Bo,render:Vo,initialize:ma,update:ga,updateSync:ya,destroy:wa,destroySync:ba,setScheduler:function(e){sa=e},getScheduler:ua}).dom;var _a,Sa,xa,Pa={},Oa=!1;function Ca(){return Oa||(Oa=!0,function(){var e,t;e=i.sep,_a=function(t,n,r){var i,o,a,s,u;for(o=t.length-1;t[o]===e;)o--;for(u=0,a=o,i=null;o>=0;)t[o]===e?(u++,null==i&&(i=t.substring(o+1,a+1))):0===o&&(a<t.length-1?null==i&&(i=t.substring(0,a+1)):null==i&&(i=t)),o--;return i===t?r*=2:i&&(r+=Sa(i,n)),s=u+1,r*(.01*Math.max(1,10-s))},xa.basenameScore=_a,Sa=function(n,r){var i,o,a,s,u,c,l,f,d,h,p,v;if(n===r)return 1;if(t(n,r))return 1;for(h=0,l=r.length,d=n.length,a=0,s=0;a<l;){if(i=r[a++],u=n.indexOf(i.toLowerCase()),p=n.indexOf(i.toUpperCase()),-1===(c=Math.min(u,p))&&(c=Math.max(u,p)),-1===(s=c))return 0;o=.1,n[s]===i&&(o+=.1),0===s||n[s-1]===e?o+=.8:"-"!==(v=n[s-1])&&"_"!==v&&" "!==v||(o+=.7),n=n.substring(s+1,d),h+=o}return((f=h/l)*(l/d)+f)/2},xa.score=Sa,t=function(t,n){if(t[t.length-n.length-1]===e)return t.lastIndexOf(n)===t.length-n.length}}.call(xa={})),xa}var Ma,Ea=!1;function Ia(){return Ea||(Ea=!0,function(){var e,t,n;t=Ca(),e=function(e){return e.candidate},n=function(e,t){return t.score-e.score},Ma=function(r,i,o,a){var s,u,c,l,f,d,h,p,v;if(u=(v=null!=a?a:{}).key,c=v.maxResults,i){for(f=[],h=0,p=r.length;h<p;h++)s=r[h],(d=null!=u?s[u]:s)&&(l=t.score(d,i,o),o||(l=t.basenameScore(d,i,l)),l>0&&f.push({candidate:s,score:l}));f.sort(n),r=f.map(e)}return null!=c&&(r=r.slice(0,c)),r}}.call(Ma={})),Ma}var Aa,La,Ta,ja=!1;function Na(){return ja||(ja=!0,function(){var e;e=i.sep,Aa=function(t,n){var r,i,o;for(i=t.length-1;t[i]===e;)i--;for(o=i,r=null;i>=0;)t[i]===e?null==r&&(r=t.substring(i+1,o+1)):0===i&&(o<t.length-1?null==r&&(r=t.substring(0,o+1)):null==r&&(r=t)),i--;return La(r,n,t.length-r.length)},Ta.basenameMatch=Aa,La=function(e,t,n){var r,i,o,a,s,u,c,l,f,d;if(null==n&&(n=0),e===t)return function(){d=[];for(var t=n,r=n+e.length;n<=r?t<r:t>r;n<=r?t++:t--)d.push(t);return d}.apply(this);for(c=t.length,l=e.length,i=0,o=0,s=[];i<c;){if(r=t[i++],a=e.indexOf(r.toLowerCase()),f=e.indexOf(r.toUpperCase()),-1===(u=Math.min(a,f))&&(u=Math.max(a,f)),-1===(o=u))return[];s.push(n+o),n+=o+1,e=e.substring(o+1,l)}return s},Ta.match=La}.call(Ta={})),Ta}(function(){var e,t,n,r,o;o=Ca(),n=Ia(),r=Na(),e=i.sep,t=/\ /g,Pa={filter:function(r,i,o){var a;return i&&(a=-1!==i.indexOf(e),i=i.replace(t,"")),n(r,i,a,o)},score:function(n,r){var i,a;return n&&r?n===r?2:(i=-1!==r.indexOf(e),r=r.replace(t,""),a=o.score(n,r),i||(a=o.basenameScore(n,r,a)),a):0},match:function(n,i){var o,a,s,u,c,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var e=0,t=n.length;0<=t?e<t:e>t;0<=t?e++:e--)l.push(e);return l}.apply(this);if(u=-1!==i.indexOf(e),i=i.replace(t,""),s=r.match(n,i),!u)for(o=r.basenameMatch(n,i),s=s.concat(o).sort((function(e,t){return e-t})),c=null,a=0;a<s.length;)a&&c===s[a]?s.splice(a,1):(c=s[a],a++);return s}}}).call(Pa),No=class{static setScheduler(e){zo.setScheduler(e)}static getScheduler(e){return zo.getScheduler()}constructor(e){this.props=e,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),e.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new Fo,zo.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),e.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const t=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);t.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",e=>{e.target===this.refs.items&&(this.didClickItemsList=!0)}),this.disposables.add(new Ro(()=>{t.removeEventListener("blur",n)}))}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{for(const t of e)if(t.intersectionRatio>0){const e=t.target;this.visibilityObserver.unobserve(e);const n=Array.from(this.refs.items.children).indexOf(e);n>=0&&this.renderItemAtIndex(n)}})}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(e){this.didClickItemsList||this.element.contains(e.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),zo.destroy(this)}registerAtomCommands(){return a.atom.commands.add(this.element,{"core:move-up":e=>{this.selectPrevious(),e.stopPropagation()},"core:move-down":e=>{this.selectNext(),e.stopPropagation()},"core:move-to-top":e=>{this.selectFirst(),e.stopPropagation()},"core:move-to-bottom":e=>{this.selectLast(),e.stopPropagation()},"core:confirm":e=>{this.confirmSelection(),e.stopPropagation()},"core:cancel":e=>{this.cancelSelection(),e.stopPropagation()}})}update(e={}){let t=!1;return e.hasOwnProperty("items")&&(this.props.items=e.items,t=!0),e.hasOwnProperty("maxResults")&&(this.props.maxResults=e.maxResults,t=!0),e.hasOwnProperty("filter")&&(this.props.filter=e.filter,t=!0),e.hasOwnProperty("filterQuery")&&(this.props.filterQuery=e.filterQuery,t=!0),e.hasOwnProperty("query")&&(this.refs.queryEditor.setText(e.query),t=!1),e.hasOwnProperty("selectQuery")&&(e.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),e.hasOwnProperty("order")&&(this.props.order=e.order),e.hasOwnProperty("emptyMessage")&&(this.props.emptyMessage=e.emptyMessage),e.hasOwnProperty("errorMessage")&&(this.props.errorMessage=e.errorMessage),e.hasOwnProperty("infoMessage")&&(this.props.infoMessage=e.infoMessage),e.hasOwnProperty("loadingMessage")&&(this.props.loadingMessage=e.loadingMessage),e.hasOwnProperty("loadingBadge")&&(this.props.loadingBadge=e.loadingBadge),e.hasOwnProperty("itemsClassList")&&(this.props.itemsClassList=e.itemsClassList),e.hasOwnProperty("initialSelectionIndex")&&(this.props.initialSelectionIndex=e.initialSelectionIndex),t&&this.computeItems(),zo.update(this)}render(){return ka.div({},ka(Do,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const e=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&zo.getScheduler().updateDocument(()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach(e=>{this.visibilityObserver.observe(e)})}),this.listItems=this.items.map((e,t)=>{const n=this.getSelectedItem()===e,r=!this.props.initiallyVisibleItemCount||t<this.props.initiallyVisibleItemCount;return ka(Ra,{element:this.props.elementForItem(e,{selected:n,index:t,visible:r}),selected:n,onclick:()=>this.didClickItem(t)})}),ka.ol({className:e,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?ka.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?ka.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?ka.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?ka.div({className:"loading"},ka.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?ka.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(e){this.selectIndex(e),this.confirmSelection()}computeItems(e){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const t=this.props.filter||this.fuzzyFilter.bind(this);this.items=t(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,e)}fuzzyFilter(e,t){if(0===t.length)return e;{const n=[];for(const r of e){const e=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r;let i=Pa.score(e,t);i>0&&n.push({item:r,score:i})}return n.sort((e,t)=>t.score-e.score),n.map(e=>e.item)}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(e){const t=this.items[e],n=this.getSelectedItem()===t,r=this.listItems[e].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(t,{selected:n,index:e,visible:!0}),selected:n,onclick:()=>this.didClickItem(e)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(e,t=!0){e>=this.items.length?e=0:e<0&&(e=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=e,void 0!==e&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),t?this.listItems?(n>=0&&this.renderItemAtIndex(n),e>=0&&this.renderItemAtIndex(e),zo.getScheduler().getNextUpdatePromise()):zo.update(this):Promise.resolve()}selectItem(e){const t=this.items.indexOf(e);if(-1===t)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(t)}confirmSelection(){const e=this.getSelectedItem();null!=e?this.props.didConfirmSelection&&this.props.didConfirmSelection(e):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class Ra{constructor(e){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=e.selected,this.onclick=e.onclick,this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new Ro(()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)}),zo.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(e){e.preventDefault()}mouseUp(e){e.preventDefault()}didClick(e){e.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(e){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(e.element,this.element),this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),e.selected&&this.element.classList.add("selected"),this.selected=e.selected,this.onclick=e.onclick,zo.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var Fa=function(e){return e&&e.__esModule?e:{default:e}}(No);var Da=$a(ji),Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});var Wa=void 0;Ba.config=Wa;function za(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return za=function(){return e},e}function $a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=za();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}let Ua;async function qa(e){const t=d.MarkdownPreviewView.viewForElement(e.currentTarget);if(!t)return;const n=atom.workspace.paneForItem(t);n?await n.destroyItem(t):t.destroy()}async function Ha(e){return function(e){const t=(0,d.viewForEditor)(e);if(!t)return!1;const n=atom.workspace.paneForItem(t);if(n){if(t!==n.getActiveItem())return n.activateItem(t),!0;Oo.handlePromise(n.destroyItem(t))}else{const e=zi.BrowserWindowHandler.windowForView(t);if(e&&!e.isFocused())return e.focus(),!0;t.destroy()}return!0}(e)?void 0:Va(e)}async function Va(e){return(0,d.openPreviewPane)((0,d.createEditorView)(e))}async function Ja(e){const{currentTarget:t}=e,n=t.querySelector(".entry.file.selected .name").dataset.path;if(!n)return void e.abortKeyBinding();const r=Po.extname(n).substr(1);if(Oo.atomConfig().extensions.includes(r)){for(const e of atom.workspace.getTextEditors())if(e.getPath()===n)return void await Va(e);await atom.workspace.open("markdown-preview-plus://file/"+encodeURI(n),{searchAllPanes:!0})}else e.abortKeyBinding()}async function Ya(e){const t=Oo.atomConfig().mathConfig.enableLatexRenderingByDefault,n=e.getSelectedText()||e.getText();await Oo.copyHtml(n,e.getPath(),t)}function Ka(e){let t;return function(n){if(!Ua)return;t&&(t.dispose(),Ua.remove(t)),t=new xo.CompositeDisposable;const r={};e(n,t,r),t.add(atom.contextMenu.add(r)),Ua.add(t)}}function Ga(e,t,n){for(const t of e){n[`.tree-view .file .name[data-name$=".${t}"]`]=[{label:"Markdown Preview",command:"markdown-preview-plus:preview-file"},{label:"Make PDF",command:"markdown-preview-plus:make-pdf"}]}}function Xa(e,t,n){for(const r of e){const e=`atom-text-editor[data-grammar="${r.replace(/\./g," ")}"]`;t.add(atom.commands.add(e,{"markdown-preview-plus:toggle":e=>{Oo.handlePromise(Ha(e.currentTarget.getModel()))},"markdown-preview-plus:copy-html":e=>{Oo.handlePromise(Ya(e.currentTarget.getModel()))}})),n[e]=[{label:"Sync Preview",command:"markdown-preview-plus:sync-preview"},{label:"Copy Markdown as HTML",command:"markdown-preview-plus:copy-html"}]}}async function Qa(e){const{currentTarget:t}=e,n=t.querySelectorAll(".entry.file.selected .name");const r=Oo.atomConfig().extensions,i=Array.from(n).map(e=>e.dataset.path).filter(e=>void 0!==e&&r.includes(Po.extname(e).substr(1))).map((async function(e){if(void 0===e)return;const t=new xo.File(e),n=await t.read();if(null===n)return;const r=e+".pdf",i=new xo.File(r);!await i.exists()||Oo.atomConfig().saveConfig.makePDFOverwrite?await Da.saveAsPDF(n,e,void 0,Oo.atomConfig().mathConfig.enableLatexRenderingByDefault,r):atom.notifications.addInfo(i.getBaseName()+" exists, will not overwrite")}));0!==i.length?await Promise.all(i):e.abortKeyBinding()}function Za(e){try{var t=f.parse(e)}catch(t){return void console.error(t,e)}if("markdown-preview-plus:"===t.protocol&&t.pathname){try{var n=decodeURI(t.pathname)}catch(e){return void console.error(e)}if("file"===t.hostname)return(0,d.createFileView)(n.slice(1));if("editor"===t.hostname){const e=parseInt(n.slice(1),10),t=atom.workspace.getTextEditors().find(t=>t.id===e);return void 0===t?void atom.notifications.addWarning(`Markdown-preview-plus: Tried to open preview for editor with id ${e}, which does not exist`):(0,d.createEditorView)(t)}throw new Error(`Tried to open markdown-preview-plus with uri ${e}. This is not supported. Please report this error.`)}}Wa={grammars:{title:"Markdown Grammars",description:"Editors using what grammars are considered Markdown",type:"array",default:["source.gfm","source.litcoffee","text.html.basic","text.md","text.plain","text.plain.null-grammar"],order:0,items:{type:"string"}},extensions:{type:"array",title:"Markdown file extensions",description:"Which files are considered Markdown",default:["markdown","md","mdown","mkd","mkdown","ron","txt"],order:1,items:{type:"string"}},disableToolBarIntegration:{title:"Disable Tool Bar integration",description:"Do not add the preview button to tool bar (only relevant if [tool-bar](https://atom.io/packages/tool-bar) package is installed)",type:"boolean",default:!1,order:.5},useGitHubStyle:{title:"Use GitHub.com style",type:"boolean",default:!1,order:2},syntaxThemeName:{title:"Syntax theme for code blocks",description:"If not empty, will try to use the given syntax theme for code blocks in preview",type:"string",default:"",order:2.5},importPackageStyles:{title:"Packages that can affect preview rendering",description:"A list of Atom package names that can affect preview style, comma-separated. A special value of `*` (star) will import all Atom styles into the preview, use with care. This does not affect exported HTML",type:"array",items:{type:"string"},default:["fonts"],order:2.6},codeTabWidth:{title:"Tab width for code blocks",description:"How to render tab character in code blocks; 0 means use Atom global setting",type:"integer",default:0,minimum:0,order:2.7},renderer:{type:"string",default:"markdown-it",title:"Renderer backend",enum:["markdown-it","pandoc"],order:3},richClipboard:{type:"boolean",default:!0,title:"Use rich clipboard",description:"Copy rich text to clipboard in addition to raw HTML when using copy html commands",order:4},previewConfig:{title:"Preview Behaviour",order:10,type:"object",properties:{liveUpdate:{title:"Live Update",type:"boolean",default:!0,order:10},diffMethod:{title:"Diff Method",description:"Advanced diffing method selection when updating the preview. None is obviously fastest, but inaccurate; heuristic is reasonably fast and should work most of the time; myers uses classic min-diff algoritm, but can be slow on large documents",type:"string",enum:["none","heuristic","myers"],default:"heuristic",order:15},highlighter:{title:"Code Highlighter",description:"What is used for highlighting code in code blocks. `none` is no highlighting, `legacy` is fast, but only supports legacy textmate grammars. `tree-sitter-compatible` uses Atom's internal highlighting API, and hence is compatible with tree-sitter grammars,  but it can be slower than `legacy` and is not as well-tested",type:"string",enum:["none","legacy","tree-sitter-compatible"],default:"tree-sitter-compatible",order:15},previewSplitPaneDir:{title:"Direction to load the preview in split pane",type:"string",default:"right",enum:["down","right","none"],order:20},previewDock:{title:"Open preview in dock",type:"string",default:"center",enum:["left","right","bottom","center"],order:25},closePreviewWithEditor:{title:"Close preview when editor closes",type:"boolean",default:!0,order:26},activatePreviewWithEditor:{title:"Bring up preview when editor activates",type:"boolean",default:!1,order:27},nativePageScrollKeys:{title:"Use native scroll keys in preview",description:"Will use arrow keys, page up, page down, home, end and space for native navigation in preview. The upside is smoother scroll behaviour. The downside is that when this option is enabled, these keys will be invisible to Atom when preview is focused, so those can not be used in keymap with preview-focused commands. Also unlike non-native commands, these are non-rebindable.",type:"boolean",default:!0,order:27.5},shellOpenFileExtensions:{title:"Always open links to these file types externally",description:"This is a comma-separated list of file name extensions that should always be opened with an external program. For example, if you want to always open PDF files (presumably named `something.pdf`) in system PDF viewer, add `pdf` here.",type:"array",default:["odt","doc","docx","ods","xls","xlsx","odp","ppt","pptx","zip","rar","7z","gz","xz","bz2","tar","tgz","txz","tbz2"],order:28,items:{type:"string"}}}},saveConfig:{type:"object",title:"Export Behaviour",order:15,properties:{mediaOnSaveAsHTMLBehaviour:{title:"When saving as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"relativized",enum:["relativized","absolutized","untouched"],order:10},mediaOnCopyAsHTMLBehaviour:{title:"When copying as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"untouched",enum:["relativized","absolutized","untouched"],order:15},defaultSaveFormat:{title:"Default format to save as",type:"string",order:20,enum:["html","pdf"],default:"html"},openOnSave:{type:"object",title:"Open after saving",order:21,properties:{html:{title:"HTML",type:"boolean",default:!0,order:10},pdf:{title:"PDF",type:"boolean",default:!1,order:20}}},makePDFOverwrite:{type:"boolean",title:"`Make PDF` on Tree View will overwrite files without prompt",order:22,default:!1},saveToPDFOptions:{title:"Save to PDF options",type:"object",order:25,properties:{latexRenderer:{title:"Math Renderer",description:"LaTeX Math renderer for PDF export; HTML-CSS usually looks better",type:"string",enum:["Same as live preview","HTML-CSS","SVG"],default:"Same as live preview",order:5},marginsType:{title:"Margins Type",type:"integer",enum:[{value:0,description:"Default margins"},{value:1,description:"No margins"},{value:2,description:"Minimum margins"}],default:0,order:10},pageSize:{title:"Page Size",enum:["A3","A4","A5","Legal","Letter","Tabloid","Custom"],type:"string",default:"A4",order:20},customPageSize:{title:"Custom Page Size",description:"Takes effect when Page Size is set to `Custom`. Specified as `<width>x<height>`, where `<height>` and `<width>` are floating-point numbers with `.` (dot) as decimal separator, no thousands separator, and with optional `cm`, `mm` or `in` suffix to indicate units, default is `mm`. For example, A4 is `8.3in x 11.7in` or `210mm x 297mm` or `210 x 297`. Whitespace is ignored.",type:"string",default:"",order:25},landscape:{title:"Page orientation",type:"boolean",enum:[{value:!1,description:"Portrait"},{value:!0,description:"Landscape"}],default:!1,order:26},printBackground:{title:"Render background",description:"Whether to render CSS backgrounds in PDF",type:"boolean",default:!1,order:30},printSelectionOnly:{title:"Render only selection",description:"Only render selected document fragment. Experimental",type:"boolean",default:!1,order:40}}}}},syncConfig:{title:"Preview position synchronization behaviour",type:"object",order:20,properties:{syncPreviewOnChange:{title:"Sync preview position when text in editor changes",type:"boolean",default:!1,order:28},syncPreviewOnEditorScroll:{title:"Sync preview position when text editor is scrolled",description:"Note: if both scroll sync options are enabled, the editor has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.1},syncEditorOnPreviewScroll:{title:"Sync editor position when preview is scrolled",description:"Note: if both scroll sync options are enabled, the preview has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.2}}},mathConfig:{type:"object",title:"Math Options",order:30,properties:{enableLatexRenderingByDefault:{title:"Enable Math Rendering By Default",type:"boolean",default:!1,order:0},latexRenderer:{title:"Math Renderer",description:"SVG is noticeably faster, but might look worse on some systems",type:"string",enum:["HTML-CSS","SVG"],default:"SVG",order:5},numberEquations:{title:"Number equations",description:"Number equations that are in equation environment, etc. Will re-render all math on each math change, which might be undesirable.",type:"boolean",default:!1,order:10},texExtensions:{title:"MathJax TeX extensions",type:"array",default:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],order:15,items:{type:"string"}},undefinedFamily:{title:"MathJax `undefinedFamily` (font family)",type:"string",default:"serif",order:20}}},markdownItConfig:{type:"object",title:"Markdown-It Settings",order:40,properties:{breakOnSingleNewline:{title:"Break on single newline",type:"boolean",default:!1,order:0},typographicReplacements:{title:"Typographic Replacements",description:"Replace (R) with ®, (c) with ©, (p) with §, -- with –, enable smart quotes, etc",type:"boolean",default:!0,order:1},useLazyHeaders:{title:"Use Lazy Headers with markdown-it parser",description:"Require no space after headings #",type:"boolean",default:!0,order:5},useCheckBoxes:{title:"Enable CheckBox lists with markdown-it parser",description:"CheckBox lists, like on GitHub",type:"boolean",default:!0,order:10},useEmoji:{title:"Use Emoji with markdown-it parser",description:"Emoji rendering",type:"boolean",default:!0,order:15},useToc:{title:"Use table of contents with markdown-it parser",description:"Replace [[toc]] with autogenerated table of contents",type:"boolean",default:!1,order:20},forceFullToc:{title:"Force full table of contents",description:"Renders all the headers in TOC, even if they are in incorrect order",type:"boolean",default:!1,order:21},tocDepth:{title:"Depth of Table of Contents",description:"Maximum header depth that will be included in TOC",type:"integer",default:2,order:22},useImsize:{title:"Allow specifying image size in image title",description:"Allow non-standard syntax for specifying image size via appending `=<width>x<height>` to image spacification, f.ex. `![test](image.png =100x200)`",type:"boolean",default:!0,order:25},useCriticMarkup:{title:"Enable CriticMarkup syntax support",description:"Support is limited to inline only",type:"boolean",default:!1,order:40},useFootnote:{title:"Enable footnotes with markdown-it parser",description:"Render Markdown footnotes a little prettier.",type:"boolean",default:!1,order:45},useAttributes:{title:"Enable attributes",description:"Allow braced `{}` attributes after inline/block elements. Also sets `id` with `#` and `class` with `.`\n\nF.ex.: `*emphasis*{#id-emphasis .class-emphasis data-attribute=emphasis}`\n\n**NOTE:** this is implicitly enabled by bracketed spans and fenced divs.\n\nSee [package page](https://npmjs.com/package/markdown-it-attrs) for more information.",type:"boolean",default:!1,order:50},useSpans:{title:"Enable bracketed spans",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-bracketed-spans) for more information.",type:"boolean",default:!1,order:60},useDivs:{title:"Enable fenced divs",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-container) for more information.",type:"boolean",default:!1,order:70},useDeflist:{title:"Enable definition lists",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-deflist) for more information.",type:"boolean",default:!1,order:80},useFontmatter:{title:"Enable YAML fontmatter",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-front-matter) for more information.",type:"boolean",default:!0,order:90},useImplicitFigures:{title:"Enable implicitFigures",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-implicit-figures) for more information.",type:"boolean",default:!1,order:100},useSubscript:{title:"Enable subscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sub) for more information.",type:"boolean",default:!1,order:110},useSuperscript:{title:"Enable superscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sup) for more information.",type:"boolean",default:!1,order:120},tableCaptions:{title:"Enable table captions",description:"Table captions as in Pandoc Markdown, e.g. `: caption` or `Table: caption`, etc.",type:"boolean",default:!1,order:125},inlineMathSeparators:{title:"Inline math separators",description:"List of inline math separators in pairs -- first opening, then closing",type:"array",default:["$","$","\\(","\\)"],order:1010,items:{type:"string"}},blockMathSeparators:{title:"Block math separators",description:"List of block math separators in pairs -- first opening, then closing",type:"array",default:["$$","$$","\\[","\\]"],order:1020,items:{type:"string"}},parseDisplayMathInline:{title:"Parse display math inline",description:'Will parse display ("block") math as inline elements, like pandoc',type:"boolean",default:!1,order:1050}}},pandocConfig:{type:"object",title:"Pandoc settings",order:50,properties:{useNativePandocCodeStyles:{title:"Use native Pandoc code block style",type:"boolean",default:!1,description:"Don't convert fenced code blocks to Atom editors when usingPandoc parser",order:0},pandocPath:{type:"string",default:"pandoc",title:"Path to Pandoc executable",description:"Please specify the correct path to your pandoc executable, for example, /usr/bin/pandoc, or C:\\Program Files\\Pandoc\\pandoc.exe",order:5},pandocFilters:{type:"array",default:[],title:"Filters",description:"Comma separated pandoc filters, in order of application. Will be passed via command-line arguments",order:10,items:{type:"string"}},pandocArguments:{type:"array",default:[],title:"Commandline Arguments",description:"Comma separated pandoc arguments e.g. `--smart, --filter=/bin/exe`. Please use long argument names.",order:15,items:{type:"string"}},pandocMarkdownFlavor:{type:"string",default:"markdown-raw_tex+tex_math_single_backslash",title:"Markdown Flavor",description:"Enter the pandoc markdown flavor you want",order:20},pandocBibliography:{type:"boolean",default:!1,title:"Citations (via pandoc-citeproc)",description:"Enable this for bibliography parsing. Note: pandoc-citeproc is applied after other filters specified in Filters, but before other commandline arguments ",order:25},pandocRemoveReferences:{type:"boolean",default:!0,title:"Remove References",description:"Removes references at the end of the HTML preview",order:30},pandocBIBFile:{type:"string",default:"bibliography.bib",title:"Bibliography (bibfile)",description:"Name of bibfile to search for recursively",order:35},pandocBIBFileFallback:{type:"string",default:"",title:"Fallback Bibliography (bibfile)",description:"Full path to fallback bibfile",order:40},pandocCSLFile:{type:"string",default:"custom.csl",title:"Bibliography Style (cslfile)",description:"Name of cslfile to search for recursively",order:45},pandocCSLFileFallback:{type:"string",default:"",title:"Fallback Bibliography Style (cslfile)",description:"Full path to fallback cslfile",order:50}}}},Ba.config=Wa;
//# sourceMappingURL=main.js.map
