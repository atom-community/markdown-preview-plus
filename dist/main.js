var e=require("child_process"),t=require("electron"),n=require("fs"),r=require("atom"),i=require("path"),o=require("url"),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){(0,Io.migrateConfig)()&&atom.notifications.addInfo("Markdown-Preivew-Plus has updated your config to a new format. Please check if everything is in order. This message will not be shown again.",{dismissable:!0});atom.packages.isPackageActive("markdown-preview")&&Co.handlePromise(atom.packages.deactivatePackage("markdown-preview"));atom.packages.isPackageDisabled("markdown-preview")||(atom.packages.disablePackage("markdown-preview"),atom.notifications.addInfo("Markdown-preview-plus has disabled markdown-preview package.",{dismissable:!0}));qa=new Po.CompositeDisposable,qa.add(atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle":Ha}),atom.commands.add("atom-workspace",{"markdown-preview-plus:open-configuration":()=>{Co.handlePromise(atom.workspace.open("atom://config/packages/markdown-preview-plus"))},"markdown-preview-plus:edit-macros":()=>{Co.handlePromise(atom.workspace.open((0,ge.getUserMacrosPath)(atom.getConfigDirPath())))},"markdown-preview-plus:select-syntax-theme":async()=>{try{const e=atom.themes.getLoadedThemeNames();if(void 0===e)return;const t=await(0,To.selectListView)(e.filter(e=>e.match(/-syntax$/)));if(void 0===t)return;atom.config.set("markdown-preview-plus.syntaxThemeName",t)}catch(e){const t=e;atom.notifications.addFatalError(t.name,{detail:t.message,stack:t.stack})}}}),atom.commands.add("atom-text-editor",{"markdown-preview-plus:toggle-render-latex":e=>{const t=e.currentTarget.getModel(),n=(0,d.viewForEditor)(t);n&&n.toggleRenderLatex()}}),atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle-render-latex":e=>{const t=d.MarkdownPreviewView.viewForElement(e.currentTarget);t&&t.toggleRenderLatex()}}),atom.commands.add(".tree-view",{"markdown-preview-plus:preview-file":Ya,"markdown-preview-plus:make-pdf":Za}),atom.workspace.addOpener(es),atom.config.observe("markdown-preview-plus.grammars",Ga(Qa)),atom.config.observe("markdown-preview-plus.extensions",Ga(Xa)))};exports.activate=s;var u=function(){ii.MarkdownItWorker.destroy(),qa&&qa.dispose(),qa=void 0,$i.BrowserWindowHandler.clean()};exports.deactivate=u;var c=function(e){if(void 0!==e.editorId)return new Mo.PlaceholderView(e.editorId);if(e.filePath&&Co.isFileSync(e.filePath))return(0,d.createFileView)(e.filePath);if(e.text)return(0,d.createTextView)(e.text);return};exports.createMarkdownPreviewView=c;var l=function(e){if(!qa)return;if(atom.config.get("markdown-preview-plus.disableToolBarIntegration"))return;const t=e("markdown-preview-plus");t.addButton({icon:"markdown",callback:"markdown-preview-plus:toggle",tooltip:"Markdown Preview"}),qa.add(new Po.Disposable((function(){t.removeItems()})))};exports.consumeToolBar=l,Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return Wa.config}});var f=Ua(o),d={};Object.defineProperty(d,"__esModule",{value:!0});var h={MarkdownPreviewView:!0};Object.defineProperty(d,"MarkdownPreviewView",{enumerable:!0,get:function(){return p.MarkdownPreviewView}});var p={};Object.defineProperty(p,"__esModule",{value:!0});var v=void 0;p.MarkdownPreviewView=v;var m=So(i),g=r,y=function(){var e=this,t={exports:this};return function(){var n="Expected a function",r="__lodash_placeholder__",i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",d="[object GeneratorFunction]",h="[object Map]",p="[object Number]",v="[object Object]",m="[object RegExp]",g="[object Set]",y="[object String]",w="[object Symbol]",b="[object WeakMap]",k="[object ArrayBuffer]",_="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",E="[object Uint16Array]",I="[object Uint32Array]",A=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,j=/(__e\(.*?\)|\b__t\)) \+\n'';/g,T=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,R=RegExp(T.source),F=RegExp(N.source),D=/<%-([\s\S]+?)%>/g,B=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,H=RegExp(q.source),V=/^\s+|\s+$/g,J=/^\s+/,Y=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,G=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Z=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,ie=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,ce=/['\n\r\u2028\u2029\\]/g,le="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="[\\ud800-\\udfff]",he="["+fe+"]",pe="["+le+"]",ve="\\d+",me="[\\u2700-\\u27bf]",ge="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+fe+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",we="\\ud83c[\\udffb-\\udfff]",be="[^\\ud800-\\udfff]",ke="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",xe="(?:"+ge+"|"+ye+")",Pe="(?:"+Se+"|"+ye+")",Oe="(?:"+pe+"|"+we+")"+"?",Ce="[\\ufe0e\\ufe0f]?"+Oe+("(?:\\u200d(?:"+[be,ke,_e].join("|")+")[\\ufe0e\\ufe0f]?"+Oe+")*"),Me="(?:"+[me,ke,_e].join("|")+")"+Ce,Ee="(?:"+[be+pe+"?",pe,ke,_e,de].join("|")+")",Ie=RegExp("['’]","g"),Ae=RegExp(pe,"g"),Le=RegExp(we+"(?="+we+")|"+Ee+Ce,"g"),je=RegExp([Se+"?"+ge+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[he,Se,"$"].join("|")+")",Pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[he,Se+xe,"$"].join("|")+")",Se+"?"+xe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Me].join("|"),"g"),Te=RegExp("[\\u200d\\ud800-\\udfff"+le+"\\ufe0e\\ufe0f]"),Ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,De={};De[S]=De[x]=De[P]=De[O]=De[C]=De[M]=De["[object Uint8ClampedArray]"]=De[E]=De[I]=!0,De[o]=De[s]=De[k]=De[u]=De[_]=De[c]=De[l]=De[f]=De[h]=De[p]=De[v]=De[m]=De[g]=De[y]=De[b]=!1;var Be={};Be[o]=Be[s]=Be[k]=Be[_]=Be[u]=Be[c]=Be[S]=Be[x]=Be[P]=Be[O]=Be[C]=Be[h]=Be[p]=Be[v]=Be[m]=Be[g]=Be[y]=Be[w]=Be[M]=Be["[object Uint8ClampedArray]"]=Be[E]=Be[I]=!0,Be[l]=Be[f]=Be[b]=!1;var We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,$e=parseInt,Ue="object"==typeof a&&a&&a.Object===Object&&a,qe="object"==typeof self&&self&&self.Object===Object&&self,He=Ue||qe||Function("return this")(),Ve="object"==typeof e&&e&&!e.nodeType&&e,Je=Ve&&"object"==typeof t&&t&&!t.nodeType&&t,Ye=Je&&Je.exports===Ve,Ke=Ye&&Ue.process,Ge=function(){try{var e=Je&&Je.require&&Je.require("util").types;return e||Ke&&Ke.binding&&Ke.binding("util")}catch(e){}}(),Xe=Ge&&Ge.isArrayBuffer,Qe=Ge&&Ge.isDate,Ze=Ge&&Ge.isMap,et=Ge&&Ge.isRegExp,tt=Ge&&Ge.isSet,nt=Ge&&Ge.isTypedArray;function rt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function it(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ut(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ct(e,t){return!!(null==e?0:e.length)&&wt(e,t,0)>-1}function lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ht(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var mt=St("length");function gt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function yt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):yt(e,kt,n)}function bt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function kt(e){return e!=e}function _t(e,t){var n=null==e?0:e.length;return n?Ot(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function xt(e){return function(t){return null==e?void 0:e[t]}}function Pt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ot(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ct(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Mt(e){return function(t){return e(t)}}function Et(e,t){return ft(t,(function(t){return e[t]}))}function It(e,t){return e.has(t)}function At(e,t){for(var n=-1,r=e.length;++n<r&&wt(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length;n--&&wt(t,e[n],0)>-1;);return n}function jt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Tt=xt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Nt=xt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Rt(e){return"\\"+We[e]}function Ft(e){return Te.test(e)}function Dt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Bt(e,t){return function(n){return e(t(n))}}function Wt(e,t){for(var n=-1,i=e.length,o=0,a=[];++n<i;){var s=e[n];s!==t&&s!==r||(e[n]=r,a[o++]=n)}return a}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function $t(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Ut(e){return Ft(e)?function(e){var t=Le.lastIndex=0;for(;Le.test(e);)++t;return t}(e):mt(e)}function qt(e){return Ft(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}var Ht=xt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Vt=function e(t){var a,le=(t=null==t?He:Vt.defaults(He.Object(),t,Vt.pick(He,Re))).Array,fe=t.Date,de=t.Error,he=t.Function,pe=t.Math,ve=t.Object,me=t.RegExp,ge=t.String,ye=t.TypeError,we=le.prototype,be=he.prototype,ke=ve.prototype,_e=t["__core-js_shared__"],Se=be.toString,xe=ke.hasOwnProperty,Pe=0,Oe=(a=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",Ce=ke.toString,Me=Se.call(ve),Ee=He._,Le=me("^"+Se.call(xe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=Ye?t.Buffer:void 0,We=t.Symbol,Ue=t.Uint8Array,qe=Te?Te.allocUnsafe:void 0,Ve=Bt(ve.getPrototypeOf,ve),Je=ve.create,Ke=ke.propertyIsEnumerable,Ge=we.splice,mt=We?We.isConcatSpreadable:void 0,xt=We?We.iterator:void 0,Jt=We?We.toStringTag:void 0,Yt=function(){try{var e=Zi(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kt=t.clearTimeout!==He.clearTimeout&&t.clearTimeout,Gt=fe&&fe.now!==He.Date.now&&fe.now,Xt=t.setTimeout!==He.setTimeout&&t.setTimeout,Qt=pe.ceil,Zt=pe.floor,en=ve.getOwnPropertySymbols,tn=Te?Te.isBuffer:void 0,nn=t.isFinite,rn=we.join,on=Bt(ve.keys,ve),an=pe.max,sn=pe.min,un=fe.now,cn=t.parseInt,ln=pe.random,fn=we.reverse,dn=Zi(t,"DataView"),hn=Zi(t,"Map"),pn=Zi(t,"Promise"),vn=Zi(t,"Set"),mn=Zi(t,"WeakMap"),gn=Zi(ve,"create"),yn=mn&&new mn,wn={},bn=Co(dn),kn=Co(hn),_n=Co(pn),Sn=Co(vn),xn=Co(mn),Pn=We?We.prototype:void 0,On=Pn?Pn.valueOf:void 0,Cn=Pn?Pn.toString:void 0;function Mn(e){if(qa(e)&&!ja(e)&&!(e instanceof Ln)){if(e instanceof An)return e;if(xe.call(e,"__wrapped__"))return Mo(e)}return new An(e)}var En=function(){function e(){}return function(t){if(!Ua(t))return{};if(Je)return Je(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function In(){}function An(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ln(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Nn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new Tn(e);this.size=t.size}function Dn(e,t){var n=ja(e),r=!n&&La(e),i=!n&&!r&&Fa(e),o=!n&&!r&&!i&&Qa(e),a=n||r||i||o,s=a?Ct(e.length,ge):[],u=s.length;for(var c in e)!t&&!xe.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ao(c,u))||s.push(c);return s}function Bn(e){var t=e.length;return t?e[Rr(0,t-1)]:void 0}function Wn(e,t){return xo(gi(e),Kn(t,0,e.length))}function zn(e){return xo(gi(e))}function $n(e,t,n){(void 0!==n&&!Ea(e[t],n)||void 0===n&&!(t in e))&&Jn(e,t,n)}function Un(e,t,n){var r=e[t];xe.call(e,t)&&Ea(r,n)&&(void 0!==n||t in e)||Jn(e,t,n)}function qn(e,t){for(var n=e.length;n--;)if(Ea(e[n][0],t))return n;return-1}function Hn(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Vn(e,t){return e&&yi(t,bs(t),e)}function Jn(e,t,n){"__proto__"==t&&Yt?Yt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Yn(e,t){for(var n=-1,r=t.length,i=le(r),o=null==e;++n<r;)i[n]=o?void 0:vs(e,t[n]);return i}function Kn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Gn(e,t,n,r,i,a){var s,l=1&t,b=2&t,A=4&t;if(n&&(s=i?n(e,r,i,a):n(e)),void 0!==s)return s;if(!Ua(e))return e;var L=ja(e);if(L){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return gi(e,s)}else{var j=no(e),T=j==f||j==d;if(Fa(e))return fi(e,l);if(j==v||j==o||T&&!i){if(s=b||T?{}:io(e),!l)return b?function(e,t){return yi(e,to(e),t)}(e,function(e,t){return e&&yi(t,ks(t),e)}(s,e)):function(e,t){return yi(e,eo(e),t)}(e,Vn(s,e))}else{if(!Be[j])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case k:return di(e);case u:case c:return new r(+e);case _:return function(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case x:case P:case O:case C:case M:case"[object Uint8ClampedArray]":case E:case I:return hi(e,n);case h:return new r;case p:case y:return new r(e);case m:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case g:return new r;case w:return i=e,On?ve(On.call(i)):{}}var i}(e,j,l)}}a||(a=new Fn);var N=a.get(e);if(N)return N;a.set(e,s),Ka(e)?e.forEach((function(r){s.add(Gn(r,t,n,r,e,a))})):Ha(e)&&e.forEach((function(r,i){s.set(i,Gn(r,t,n,i,e,a))}));var R=L?void 0:(A?b?Vi:Hi:b?ks:bs)(e);return ot(R||e,(function(r,i){R&&(r=e[i=r]),Un(s,i,Gn(r,t,n,i,e,a))})),s}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ve(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Qn(e,t,r){if("function"!=typeof e)throw new ye(n);return bo((function(){e.apply(void 0,r)}),t)}function Zn(e,t,n,r){var i=-1,o=ct,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=ft(t,Mt(n))),r?(o=lt,a=!1):t.length>=200&&(o=It,a=!1,t=new Rn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}Mn.templateSettings={escape:D,evaluate:B,interpolate:W,variable:"",imports:{_:Mn}},Mn.prototype=In.prototype,Mn.prototype.constructor=Mn,An.prototype=En(In.prototype),An.prototype.constructor=An,Ln.prototype=En(In.prototype),Ln.prototype.constructor=Ln,jn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},jn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jn.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return xe.call(t,e)?t[e]:void 0},jn.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:xe.call(t,e)},jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(e){var t=this.__data__,n=qn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ge.call(t,n,1),--this.size,!0)},Tn.prototype.get=function(e){var t=this.__data__,n=qn(t,e);return n<0?void 0:t[n][1]},Tn.prototype.has=function(e){return qn(this.__data__,e)>-1},Tn.prototype.set=function(e,t){var n=this.__data__,r=qn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(hn||Tn),string:new jn}},Nn.prototype.delete=function(e){var t=Xi(this,e).delete(e);return this.size-=t?1:0,t},Nn.prototype.get=function(e){return Xi(this,e).get(e)},Nn.prototype.has=function(e){return Xi(this,e).has(e)},Nn.prototype.set=function(e,t){var n=Xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Rn.prototype.add=Rn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tn){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(e,t),this.size=n.size,this};var er=ki(ur),tr=ki(cr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!Xa(a):n(a,s)))var s=a,u=o}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=oo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?or(s,t-1,n,r,i):dt(i,s):r||(i[i.length]=s)}return i}var ar=_i(),sr=_i(!0);function ur(e,t){return e&&ar(e,t,bs)}function cr(e,t){return e&&sr(e,t,bs)}function lr(e,t){return ut(t,(function(t){return Wa(e[t])}))}function fr(e,t){for(var n=0,r=(t=si(t,e)).length;null!=e&&n<r;)e=e[Oo(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return ja(e)?r:dt(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Jt&&Jt in ve(e)?function(e){var t=xe.call(e,Jt),n=e[Jt];try{e[Jt]=void 0;var r=!0}catch(e){}var i=Ce.call(e);r&&(t?e[Jt]=n:delete e[Jt]);return i}(e):function(e){return Ce.call(e)}(e)}function pr(e,t){return e>t}function vr(e,t){return null!=e&&xe.call(e,t)}function mr(e,t){return null!=e&&t in ve(e)}function gr(e,t,n){for(var r=n?lt:ct,i=e[0].length,o=e.length,a=o,s=le(o),u=1/0,c=[];a--;){var l=e[a];a&&t&&(l=ft(l,Mt(t))),u=sn(l.length,u),s[a]=!n&&(t||i>=120&&l.length>=120)?new Rn(a&&l):void 0}l=e[0];var f=-1,d=s[0];e:for(;++f<i&&c.length<u;){var h=l[f],p=t?t(h):h;if(h=n||0!==h?h:0,!(d?It(d,p):r(c,p,n))){for(a=o;--a;){var v=s[a];if(!(v?It(v,p):r(e[a],p,n)))continue e}d&&d.push(p),c.push(h)}}return c}function yr(e,t,n){var r=null==(e=mo(e,t=si(t,e)))?e:e[Oo(Bo(t))];return null==r?void 0:rt(r,e,n)}function wr(e){return qa(e)&&hr(e)==o}function br(e,t,n,r,i){return e===t||(null==e||null==t||!qa(e)&&!qa(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var f=ja(e),d=ja(t),b=f?s:no(e),S=d?s:no(t),x=(b=b==o?v:b)==v,P=(S=S==o?v:S)==v,O=b==S;if(O&&Fa(e)){if(!Fa(t))return!1;f=!0,x=!1}if(O&&!x)return a||(a=new Fn),f||Qa(e)?Ui(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!o(new Ue(e),new Ue(t)));case u:case c:case p:return Ea(+e,+t);case l:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case h:var s=Dt;case g:var f=1&r;if(s||(s=zt),e.size!=t.size&&!f)return!1;var d=a.get(e);if(d)return d==t;r|=2,a.set(e,t);var v=Ui(s(e),s(t),r,i,o,a);return a.delete(e),v;case w:if(On)return On.call(e)==On.call(t)}return!1}(e,t,b,n,r,i,a);if(!(1&n)){var C=x&&xe.call(e,"__wrapped__"),M=P&&xe.call(t,"__wrapped__");if(C||M){var E=C?e.value():e,I=M?t.value():t;return a||(a=new Fn),i(E,I,n,r,a)}}if(!O)return!1;return a||(a=new Fn),function(e,t,n,r,i,o){var a=1&n,s=Hi(e),u=s.length,c=Hi(t).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in t:xe.call(t,f)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);var v=a;for(;++l<u;){f=s[l];var m=e[f],g=t[f];if(r)var y=a?r(g,m,f,t,e,o):r(m,g,f,e,t,o);if(!(void 0===y?m===g||i(m,g,n,r,o):y)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var w=e.constructor,b=t.constructor;w==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,a)}(e,t,n,r,br,i))}function kr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=ve(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Fn;if(r)var d=r(c,l,u,e,t,f);if(!(void 0===d?br(l,c,3,r,f):d))return!1}}return!0}function _r(e){return!(!Ua(e)||(t=e,Oe&&Oe in t))&&(Wa(e)?Le:ie).test(Co(e));var t}function Sr(e){return"function"==typeof e?e:null==e?Vs:"object"==typeof e?ja(e)?Er(e[0],e[1]):Mr(e):tu(e)}function xr(e){if(!fo(e))return on(e);var t=[];for(var n in ve(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pr(e){if(!Ua(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=fo(e),n=[];for(var r in e)("constructor"!=r||!t&&xe.call(e,r))&&n.push(r);return n}function Or(e,t){return e<t}function Cr(e,t){var n=-1,r=Na(e)?le(e.length):[];return er(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Mr(e){var t=Qi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Er(e,t){return uo(e)&&ho(t)?po(Oo(e),t):function(n){var r=vs(n,e);return void 0===r&&r===t?ms(n,e):br(t,r,3)}}function Ir(e,t,n,r,i){e!==t&&ar(t,(function(o,a){if(i||(i=new Fn),Ua(o))!function(e,t,n,r,i,o,a){var s=yo(e,n),u=yo(t,n),c=a.get(u);if(c)return void $n(e,n,c);var l=o?o(s,u,n+"",e,t,a):void 0,f=void 0===l;if(f){var d=ja(u),h=!d&&Fa(u),p=!d&&!h&&Qa(u);l=u,d||h||p?ja(s)?l=s:Ra(s)?l=gi(s):h?(f=!1,l=fi(u,!0)):p?(f=!1,l=hi(u,!0)):l=[]:Ja(u)||La(u)?(l=s,La(s)?l=as(s):Ua(s)&&!Wa(s)||(l=io(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));$n(e,n,l)}(e,t,a,n,Ir,r,i);else{var s=r?r(yo(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),$n(e,a,s)}}),ks)}function Ar(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function Lr(e,t,n){t=t.length?ft(t,(function(e){return ja(e)?function(t){return fr(t,1===e.length?e[0]:e)}:e})):[Vs];var r=-1;return t=ft(t,Mt(Gi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Cr(e,(function(e,n,i){return{criteria:ft(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=pi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function jr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=fr(e,a);n(s,a)&&zr(o,si(a,e),s)}return o}function Tr(e,t,n,r){var i=r?bt:wt,o=-1,a=t.length,s=e;for(e===t&&(t=gi(t)),n&&(s=ft(e,Mt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ge.call(s,u,1),Ge.call(e,u,1);return e}function Nr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ao(i)?Ge.call(e,i,1):Zr(e,i)}}return e}function Rr(e,t){return e+Zt(ln()*(t-e+1))}function Fr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Dr(e,t){return ko(vo(e,t,Vs),e+"")}function Br(e){return Bn(Es(e))}function Wr(e,t){var n=Es(e);return xo(n,Kn(t,0,n.length))}function zr(e,t,n,r){if(!Ua(e))return e;for(var i=-1,o=(t=si(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=Oo(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Ua(l)?l:ao(t[i+1])?[]:{})}Un(s,u,c),s=s[u]}return e}var $r=yn?function(e,t){return yn.set(e,t),e}:Vs,Ur=Yt?function(e,t){return Yt(e,"toString",{configurable:!0,enumerable:!1,value:Us(t),writable:!0})}:Vs;function qr(e){return xo(Es(e))}function Hr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=le(i);++r<i;)o[r]=e[r+t];return o}function Vr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Jr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Xa(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Yr(e,t,Vs,n)}function Yr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,u=Xa(t),c=void 0===t;i<o;){var l=Zt((i+o)/2),f=n(e[l]),d=void 0!==f,h=null===f,p=f==f,v=Xa(f);if(a)var m=r||p;else m=c?p&&(r||d):s?p&&d&&(r||!h):u?p&&d&&!h&&(r||!v):!h&&!v&&(r?f<=t:f<t);m?i=l+1:o=l}return sn(o,4294967294)}function Kr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ea(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Gr(e){return"number"==typeof e?e:Xa(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(ja(e))return ft(e,Xr)+"";if(Xa(e))return Cn?Cn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,i=ct,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=lt;else if(o>=200){var c=t?null:Fi(e);if(c)return zt(c);a=!1,i=It,u=new Rn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function Zr(e,t){return null==(e=mo(e,t=si(t,e)))||delete e[Oo(Bo(t))]}function ei(e,t,n,r){return zr(e,t,n(fr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Hr(e,r?0:o,r?o+1:i):Hr(e,r?o+1:0,r?i:o)}function ni(e,t){var n=e;return n instanceof Ln&&(n=n.value()),ht(t,(function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))}),n)}function ri(e,t,n){var r=e.length;if(r<2)return r?Qr(e[0]):[];for(var i=-1,o=le(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=Zn(o[i]||a,e[s],t,n));return Qr(or(o,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function oi(e){return Ra(e)?e:[]}function ai(e){return"function"==typeof e?e:Vs}function si(e,t){return ja(e)?e:uo(e,t)?[e]:Po(ss(e))}var ui=Dr;function ci(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var li=Kt||function(e){return He.clearTimeout(e)};function fi(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function di(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function hi(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xa(e),a=void 0!==t,s=null===t,u=t==t,c=Xa(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function vi(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=an(o-a,0),l=le(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function mi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=an(o-s,0),f=le(l+c),d=!r;++i<l;)f[i]=e[i];for(var h=i;++u<c;)f[h+u]=t[u];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=e[i++]);return f}function gi(e,t){var n=-1,r=e.length;for(t||(t=le(r));++n<r;)t[n]=e[n];return t}function yi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Jn(n,s,u):Un(n,s,u)}return n}function wi(e,t){return function(n,r){var i=ja(n)?it:Hn,o=t?t():{};return i(n,e,Gi(r,2),o)}}function bi(e){return Dr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&so(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=ve(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function ki(e,t){return function(n,r){if(null==n)return n;if(!Na(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ve(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function _i(e){return function(t,n,r){for(var i=-1,o=ve(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Si(e){return function(t){var n=Ft(t=ss(t))?qt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ci(n,1).join(""):t.slice(1);return r[e]()+i}}function xi(e){return function(t){return ht(Ws(Ls(t).replace(Ie,"")),e,"")}}function Pi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=En(e.prototype),r=e.apply(n,t);return Ua(r)?r:n}}function Oi(e){return function(t,n,r){var i=ve(t);if(!Na(t)){var o=Gi(n,3);t=bs(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Ci(e){return qi((function(t){var r=t.length,i=r,o=An.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new ye(n);if(o&&!s&&"wrapper"==Yi(a))var s=new An([],!0)}for(i=s?i:r;++i<r;){var u=Yi(a=t[i]),c="wrapper"==u?Ji(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Yi(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[u]():s.thru(a)}return function(){var e=arguments,n=e[0];if(s&&1==e.length&&ja(n))return s.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}function Mi(e,t,n,r,i,o,a,s,u,c){var l=128&t,f=1&t,d=2&t,h=24&t,p=512&t,v=d?void 0:Pi(e);return function m(){for(var g=arguments.length,y=le(g),w=g;w--;)y[w]=arguments[w];if(h)var b=Ki(m),k=jt(y,b);if(r&&(y=vi(y,r,i,h)),o&&(y=mi(y,o,a,h)),g-=k,h&&g<c){var _=Wt(y,b);return Ni(e,t,Mi,m.placeholder,n,y,_,s,u,c-g)}var S=f?n:this,x=d?S[e]:e;return g=y.length,s?y=go(y,s):p&&g>1&&y.reverse(),l&&u<g&&(y.length=u),this&&this!==He&&this instanceof m&&(x=v||Pi(x)),x.apply(S,y)}}function Ei(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ii(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Gr(n),r=Gr(r)),i=e(n,r)}return i}}function Ai(e){return qi((function(t){return t=ft(t,Mt(Gi())),Dr((function(n){var r=this;return e(t,(function(e){return rt(e,r,n)}))}))}))}function Li(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Fr(t,e):t;var r=Fr(t,Qt(e/Ut(t)));return Ft(t)?ci(qt(r),0,e).join(""):r.slice(0,e)}function ji(e){return function(t,n,r){return r&&"number"!=typeof r&&so(t,n,r)&&(n=r=void 0),t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n,r){for(var i=-1,o=an(Qt((t-e)/(n||1)),0),a=le(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:ns(r),e)}}function Ti(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=os(t),n=os(n)),e(t,n)}}function Ni(e,t,n,r,i,o,a,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],d=n.apply(void 0,f);return co(e)&&wo(d,f),d.placeholder=r,_o(d,e,t)}function Ri(e){var t=pe[e];return function(e,n){if(e=os(e),(n=null==n?0:sn(rs(n),292))&&nn(e)){var r=(ss(e)+"e").split("e");return+((r=(ss(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Fi=vn&&1/zt(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Xs;function Di(e){return function(t){var n=no(t);return n==h?Dt(t):n==g?$t(t):function(e,t){return ft(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Bi(e,t,i,o,a,s,u,c){var l=2&t;if(!l&&"function"!=typeof e)throw new ye(n);var f=o?o.length:0;if(f||(t&=-97,o=a=void 0),u=void 0===u?u:an(rs(u),0),c=void 0===c?c:rs(c),f-=a?a.length:0,64&t){var d=o,h=a;o=a=void 0}var p=l?void 0:Ji(e),v=[e,t,i,o,a,d,h,s,u,c];if(p&&function(e,t){var n=e[1],i=t[1],o=n|i,a=o<131,s=128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&i&&(e[2]=t[2],o|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?vi(c,u,t[4]):u,e[4]=c?Wt(e[3],r):t[4]}(u=t[5])&&(c=e[5],e[5]=c?mi(c,u,t[6]):u,e[6]=c?Wt(e[5],r):t[6]);(u=t[7])&&(e[7]=u);128&i&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(v,p),e=v[0],t=v[1],i=v[2],o=v[3],a=v[4],!(c=v[9]=void 0===v[9]?l?0:e.length:an(v[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,n){var r=Pi(e);return function i(){for(var o=arguments.length,a=le(o),s=o,u=Ki(i);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==u&&a[o-1]!==u?[]:Wt(a,u);if((o-=c.length)<n)return Ni(e,t,Mi,i.placeholder,void 0,a,c,void 0,void 0,n-o);var l=this&&this!==He&&this instanceof i?r:e;return rt(l,this,a)}}(e,t,c):32!=t&&33!=t||a.length?Mi.apply(void 0,v):function(e,t,n,r){var i=1&t,o=Pi(e);return function t(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=le(c+s),f=this&&this!==He&&this instanceof t?o:e;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return rt(f,i?n:this,l)}}(e,t,i,o);else var m=function(e,t,n){var r=1&t,i=Pi(e);return function t(){var o=this&&this!==He&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,i);return _o((p?$r:wo)(m,v),e,t)}function Wi(e,t,n,r){return void 0===e||Ea(e,ke[n])&&!xe.call(r,n)?t:e}function zi(e,t,n,r,i,o){return Ua(e)&&Ua(t)&&(o.set(t,e),Ir(e,t,void 0,zi,o),o.delete(t)),e}function $i(e){return Ja(e)?void 0:e}function Ui(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,d=!0,h=2&n?new Rn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],v=t[f];if(r)var m=a?r(v,p,f,t,e,o):r(p,v,f,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!vt(t,(function(e,t){if(!It(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function qi(e){return ko(vo(e,void 0,To),e+"")}function Hi(e){return dr(e,bs,eo)}function Vi(e){return dr(e,ks,to)}var Ji=yn?function(e){return yn.get(e)}:Xs;function Yi(e){for(var t=e.name+"",n=wn[t],r=xe.call(wn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Ki(e){return(xe.call(Mn,"placeholder")?Mn:e).placeholder}function Gi(){var e=Mn.iteratee||Js;return e=e===Js?Sr:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Qi(e){for(var t=bs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ho(i)]}return t}function Zi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return _r(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ve(e),ut(en(e),(function(t){return Ke.call(e,t)})))}:iu,to=en?function(e){for(var t=[];e;)dt(t,eo(e)),e=Ve(e);return t}:iu,no=hr;function ro(e,t,n){for(var r=-1,i=(t=si(t,e)).length,o=!1;++r<i;){var a=Oo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&$a(i)&&ao(a,i)&&(ja(e)||La(e))}function io(e){return"function"!=typeof e.constructor||fo(e)?{}:En(Ve(e))}function oo(e){return ja(e)||La(e)||!!(mt&&e&&e[mt])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!Ua(n))return!1;var r=typeof t;return!!("number"==r?Na(n)&&ao(t,n.length):"string"==r&&t in n)&&Ea(n[t],e)}function uo(e,t){if(ja(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xa(e))||($.test(e)||!z.test(e)||null!=t&&e in ve(t))}function co(e){var t=Yi(e),n=Mn[t];if("function"!=typeof n||!(t in Ln.prototype))return!1;if(e===n)return!0;var r=Ji(n);return!!r&&e===r[0]}(dn&&no(new dn(new ArrayBuffer(1)))!=_||hn&&no(new hn)!=h||pn&&"[object Promise]"!=no(pn.resolve())||vn&&no(new vn)!=g||mn&&no(new mn)!=b)&&(no=function(e){var t=hr(e),n=t==v?e.constructor:void 0,r=n?Co(n):"";if(r)switch(r){case bn:return _;case kn:return h;case _n:return"[object Promise]";case Sn:return g;case xn:return b}return t});var lo=_e?Wa:ou;function fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function ho(e){return e==e&&!Ua(e)}function po(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ve(n)))}}function vo(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=an(r.length-t,0),a=le(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=le(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),rt(e,this,s)}}function mo(e,t){return t.length<2?e:fr(e,Hr(t,0,-1))}function go(e,t){for(var n=e.length,r=sn(t.length,n),i=gi(e);r--;){var o=t[r];e[r]=ao(o,n)?i[o]:void 0}return e}function yo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var wo=So($r),bo=Xt||function(e,t){return He.setTimeout(e,t)},ko=So(Ur);function _o(e,t,n){var r=t+"";return ko(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ot(i,(function(n){var r="_."+n[0];t&n[1]&&!ct(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(G);return t?t[1].split(X):[]}(r),n)))}function So(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xo(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Rr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var Po=function(e){var t=Sa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(U,(function(e,n,r,i){t.push(r?i.replace(Z,"$1"):n||e)})),t}));function Oo(e){if("string"==typeof e||Xa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Co(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Mo(e){if(e instanceof Ln)return e.clone();var t=new An(e.__wrapped__,e.__chain__);return t.__actions__=gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Eo=Dr((function(e,t){return Ra(e)?Zn(e,or(t,1,Ra,!0)):[]})),Io=Dr((function(e,t){var n=Bo(t);return Ra(n)&&(n=void 0),Ra(e)?Zn(e,or(t,1,Ra,!0),Gi(n,2)):[]})),Ao=Dr((function(e,t){var n=Bo(t);return Ra(n)&&(n=void 0),Ra(e)?Zn(e,or(t,1,Ra,!0),void 0,n):[]}));function Lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),yt(e,Gi(t,3),i)}function jo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=rs(n),i=n<0?an(r+i,0):sn(i,r-1)),yt(e,Gi(t,3),i,!0)}function To(e){return(null==e?0:e.length)?or(e,1):[]}function No(e){return e&&e.length?e[0]:void 0}var Ro=Dr((function(e){var t=ft(e,oi);return t.length&&t[0]===e[0]?gr(t):[]})),Fo=Dr((function(e){var t=Bo(e),n=ft(e,oi);return t===Bo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Gi(t,2)):[]})),Do=Dr((function(e){var t=Bo(e),n=ft(e,oi);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function Bo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Wo=Dr(zo);function zo(e,t){return e&&e.length&&t&&t.length?Tr(e,t):e}var $o=qi((function(e,t){var n=null==e?0:e.length,r=Yn(e,t);return Nr(e,ft(t,(function(e){return ao(e,n)?+e:e})).sort(pi)),r}));function Uo(e){return null==e?e:fn.call(e)}var qo=Dr((function(e){return Qr(or(e,1,Ra,!0))})),Ho=Dr((function(e){var t=Bo(e);return Ra(t)&&(t=void 0),Qr(or(e,1,Ra,!0),Gi(t,2))})),Vo=Dr((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,Qr(or(e,1,Ra,!0),void 0,t)}));function Jo(e){if(!e||!e.length)return[];var t=0;return e=ut(e,(function(e){if(Ra(e))return t=an(e.length,t),!0})),Ct(t,(function(t){return ft(e,St(t))}))}function Yo(e,t){if(!e||!e.length)return[];var n=Jo(e);return null==t?n:ft(n,(function(e){return rt(t,void 0,e)}))}var Ko=Dr((function(e,t){return Ra(e)?Zn(e,t):[]})),Go=Dr((function(e){return ri(ut(e,Ra))})),Xo=Dr((function(e){var t=Bo(e);return Ra(t)&&(t=void 0),ri(ut(e,Ra),Gi(t,2))})),Qo=Dr((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,ri(ut(e,Ra),void 0,t)})),Zo=Dr(Jo);var ea=Dr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yo(e,n)}));function ta(e){var t=Mn(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ra=qi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Yn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Ln&&ao(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[i],thisArg:void 0}),new An(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ia=wi((function(e,t,n){xe.call(e,n)?++e[n]:Jn(e,n,1)}));var oa=Oi(Lo),aa=Oi(jo);function sa(e,t){return(ja(e)?ot:er)(e,Gi(t,3))}function ua(e,t){return(ja(e)?at:tr)(e,Gi(t,3))}var ca=wi((function(e,t,n){xe.call(e,n)?e[n].push(t):Jn(e,n,[t])}));var la=Dr((function(e,t,n){var r=-1,i="function"==typeof t,o=Na(e)?le(e.length):[];return er(e,(function(e){o[++r]=i?rt(t,e,n):yr(e,t,n)})),o})),fa=wi((function(e,t,n){Jn(e,n,t)}));function da(e,t){return(ja(e)?ft:Cr)(e,Gi(t,3))}var ha=wi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var pa=Dr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Lr(e,or(t,1),[])})),va=Gt||function(){return He.Date.now()};function ma(e,t,n){return t=n?void 0:t,Bi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var r;if("function"!=typeof t)throw new ye(n);return e=rs(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var ya=Dr((function(e,t,n){var r=1;if(n.length){var i=Wt(n,Ki(ya));r|=32}return Bi(e,r,t,n,i)})),wa=Dr((function(e,t,n){var r=3;if(n.length){var i=Wt(n,Ki(wa));r|=32}return Bi(t,r,e,n,i)}));function ba(e,t,r){var i,o,a,s,u,c,l=0,f=!1,d=!1,h=!0;if("function"!=typeof e)throw new ye(n);function p(t){var n=i,r=o;return i=o=void 0,l=t,s=e.apply(r,n)}function v(e){return l=e,u=bo(g,t),f?p(e):s}function m(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=a}function g(){var e=va();if(m(e))return y(e);u=bo(g,function(e){var n=t-(e-c);return d?sn(n,a-(e-l)):n}(e))}function y(e){return u=void 0,h&&i?p(e):(i=o=void 0,s)}function w(){var e=va(),n=m(e);if(i=arguments,o=this,c=e,n){if(void 0===u)return v(c);if(d)return li(u),u=bo(g,t),p(c)}return void 0===u&&(u=bo(g,t)),s}return t=os(t)||0,Ua(r)&&(f=!!r.leading,a=(d="maxWait"in r)?an(os(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),w.cancel=function(){void 0!==u&&li(u),l=0,i=c=o=u=void 0},w.flush=function(){return void 0===u?s:y(va())},w}var ka=Dr((function(e,t){return Qn(e,1,t)})),_a=Dr((function(e,t,n){return Qn(e,os(t)||0,n)}));function Sa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Sa.Cache||Nn),r}function xa(e){if("function"!=typeof e)throw new ye(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Sa.Cache=Nn;var Pa=ui((function(e,t){var n=(t=1==t.length&&ja(t[0])?ft(t[0],Mt(Gi())):ft(or(t,1),Mt(Gi()))).length;return Dr((function(r){for(var i=-1,o=sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return rt(e,this,r)}))})),Oa=Dr((function(e,t){return Bi(e,32,void 0,t,Wt(t,Ki(Oa)))})),Ca=Dr((function(e,t){return Bi(e,64,void 0,t,Wt(t,Ki(Ca)))})),Ma=qi((function(e,t){return Bi(e,256,void 0,void 0,void 0,t)}));function Ea(e,t){return e===t||e!=e&&t!=t}var Ia=Ti(pr),Aa=Ti((function(e,t){return e>=t})),La=wr(function(){return arguments}())?wr:function(e){return qa(e)&&xe.call(e,"callee")&&!Ke.call(e,"callee")},ja=le.isArray,Ta=Xe?Mt(Xe):function(e){return qa(e)&&hr(e)==k};function Na(e){return null!=e&&$a(e.length)&&!Wa(e)}function Ra(e){return qa(e)&&Na(e)}var Fa=tn||ou,Da=Qe?Mt(Qe):function(e){return qa(e)&&hr(e)==c};function Ba(e){if(!qa(e))return!1;var t=hr(e);return t==l||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ja(e)}function Wa(e){if(!Ua(e))return!1;var t=hr(e);return t==f||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function za(e){return"number"==typeof e&&e==rs(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ua(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qa(e){return null!=e&&"object"==typeof e}var Ha=Ze?Mt(Ze):function(e){return qa(e)&&no(e)==h};function Va(e){return"number"==typeof e||qa(e)&&hr(e)==p}function Ja(e){if(!qa(e)||hr(e)!=v)return!1;var t=Ve(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==Me}var Ya=et?Mt(et):function(e){return qa(e)&&hr(e)==m};var Ka=tt?Mt(tt):function(e){return qa(e)&&no(e)==g};function Ga(e){return"string"==typeof e||!ja(e)&&qa(e)&&hr(e)==y}function Xa(e){return"symbol"==typeof e||qa(e)&&hr(e)==w}var Qa=nt?Mt(nt):function(e){return qa(e)&&$a(e.length)&&!!De[hr(e)]};var Za=Ti(Or),es=Ti((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(Na(e))return Ga(e)?qt(e):gi(e);if(xt&&e[xt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[xt]());var t=no(e);return(t==h?Dt:t==g?zt:Es)(e)}function ns(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function rs(e){var t=ns(e),n=t%1;return t==t?n?t-n:t:0}function is(e){return e?Kn(rs(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Xa(e))return NaN;if(Ua(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ua(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(V,"");var n=re.test(e);return n||oe.test(e)?$e(e.slice(2),n?2:8):ne.test(e)?NaN:+e}function as(e){return yi(e,ks(e))}function ss(e){return null==e?"":Xr(e)}var us=bi((function(e,t){if(fo(t)||Na(t))yi(t,bs(t),e);else for(var n in t)xe.call(t,n)&&Un(e,n,t[n])})),cs=bi((function(e,t){yi(t,ks(t),e)})),ls=bi((function(e,t,n,r){yi(t,ks(t),e,r)})),fs=bi((function(e,t,n,r){yi(t,bs(t),e,r)})),ds=qi(Yn);var hs=Dr((function(e,t){e=ve(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&so(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=ks(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(void 0===l||Ea(l,ke[c])&&!xe.call(e,c))&&(e[c]=o[c])}return e})),ps=Dr((function(e){return e.push(void 0,zi),rt(Ss,void 0,e)}));function vs(e,t,n){var r=null==e?void 0:fr(e,t);return void 0===r?n:r}function ms(e,t){return null!=e&&ro(e,t,mr)}var gs=Ei((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n}),Us(Vs)),ys=Ei((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),Gi),ws=Dr(yr);function bs(e){return Na(e)?Dn(e):xr(e)}function ks(e){return Na(e)?Dn(e,!0):Pr(e)}var _s=bi((function(e,t,n){Ir(e,t,n)})),Ss=bi((function(e,t,n,r){Ir(e,t,n,r)})),xs=qi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ft(t,(function(t){return t=si(t,e),r||(r=t.length>1),t})),yi(e,Vi(e),n),r&&(n=Gn(n,7,$i));for(var i=t.length;i--;)Zr(n,t[i]);return n}));var Ps=qi((function(e,t){return null==e?{}:function(e,t){return jr(e,t,(function(t,n){return ms(e,n)}))}(e,t)}));function Os(e,t){if(null==e)return{};var n=ft(Vi(e),(function(e){return[e]}));return t=Gi(t),jr(e,n,(function(e,n){return t(e,n[0])}))}var Cs=Di(bs),Ms=Di(ks);function Es(e){return null==e?[]:Et(e,bs(e))}var Is=xi((function(e,t,n){return t=t.toLowerCase(),e+(n?As(t):t)}));function As(e){return Bs(ss(e).toLowerCase())}function Ls(e){return(e=ss(e))&&e.replace(se,Tt).replace(Ae,"")}var js=xi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ts=xi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ns=Si("toLowerCase");var Rs=xi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Fs=xi((function(e,t,n){return e+(n?" ":"")+Bs(t)}));var Ds=xi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Bs=Si("toUpperCase");function Ws(e,t,n){return e=ss(e),void 0===(t=n?void 0:t)?function(e){return Ne.test(e)}(e)?function(e){return e.match(je)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var zs=Dr((function(e,t){try{return rt(e,void 0,t)}catch(e){return Ba(e)?e:new de(e)}})),$s=qi((function(e,t){return ot(t,(function(t){t=Oo(t),Jn(e,t,ya(e[t],e))})),e}));function Us(e){return function(){return e}}var qs=Ci(),Hs=Ci(!0);function Vs(e){return e}function Js(e){return Sr("function"==typeof e?e:Gn(e,1))}var Ys=Dr((function(e,t){return function(n){return yr(n,e,t)}})),Ks=Dr((function(e,t){return function(n){return yr(e,n,t)}}));function Gs(e,t,n){var r=bs(t),i=lr(t,r);null!=n||Ua(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=lr(t,bs(t)));var o=!(Ua(n)&&"chain"in n&&!n.chain),a=Wa(e);return ot(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,dt([this.value()],arguments))})})),e}function Xs(){}var Qs=Ai(ft),Zs=Ai(st),eu=Ai(vt);function tu(e){return uo(e)?St(Oo(e)):function(e){return function(t){return fr(t,e)}}(e)}var nu=ji(),ru=ji(!0);function iu(){return[]}function ou(){return!1}var au=Ii((function(e,t){return e+t}),0),su=Ri("ceil"),uu=Ii((function(e,t){return e/t}),1),cu=Ri("floor");var lu,fu=Ii((function(e,t){return e*t}),1),du=Ri("round"),hu=Ii((function(e,t){return e-t}),0);return Mn.after=function(e,t){if("function"!=typeof t)throw new ye(n);return e=rs(e),function(){if(--e<1)return t.apply(this,arguments)}},Mn.ary=ma,Mn.assign=us,Mn.assignIn=cs,Mn.assignInWith=ls,Mn.assignWith=fs,Mn.at=ds,Mn.before=ga,Mn.bind=ya,Mn.bindAll=$s,Mn.bindKey=wa,Mn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ja(e)?e:[e]},Mn.chain=ta,Mn.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:an(rs(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=le(Qt(r/t));i<r;)a[o++]=Hr(e,i,i+=t);return a},Mn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Mn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=le(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return dt(ja(n)?gi(n):[n],or(t,1))},Mn.cond=function(e){var t=null==e?0:e.length,r=Gi();return e=t?ft(e,(function(e){if("function"!=typeof e[1])throw new ye(n);return[r(e[0]),e[1]]})):[],Dr((function(n){for(var r=-1;++r<t;){var i=e[r];if(rt(i[0],this,n))return rt(i[1],this,n)}}))},Mn.conforms=function(e){return function(e){var t=bs(e);return function(n){return Xn(n,e,t)}}(Gn(e,1))},Mn.constant=Us,Mn.countBy=ia,Mn.create=function(e,t){var n=En(e);return null==t?n:Vn(n,t)},Mn.curry=function e(t,n,r){var i=Bi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.curryRight=function e(t,n,r){var i=Bi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.debounce=ba,Mn.defaults=hs,Mn.defaultsDeep=ps,Mn.defer=ka,Mn.delay=_a,Mn.difference=Eo,Mn.differenceBy=Io,Mn.differenceWith=Ao,Mn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||void 0===t?1:rs(t))<0?0:t,r):[]},Mn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t):[]},Mn.dropRightWhile=function(e,t){return e&&e.length?ti(e,Gi(t,3),!0,!0):[]},Mn.dropWhile=function(e,t){return e&&e.length?ti(e,Gi(t,3),!0):[]},Mn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&so(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=rs(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:rs(r))<0&&(r+=i),r=n>r?0:is(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Mn.filter=function(e,t){return(ja(e)?ut:ir)(e,Gi(t,3))},Mn.flatMap=function(e,t){return or(da(e,t),1)},Mn.flatMapDeep=function(e,t){return or(da(e,t),1/0)},Mn.flatMapDepth=function(e,t,n){return n=void 0===n?1:rs(n),or(da(e,t),n)},Mn.flatten=To,Mn.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},Mn.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:rs(t)):[]},Mn.flip=function(e){return Bi(e,512)},Mn.flow=qs,Mn.flowRight=Hs,Mn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Mn.functions=function(e){return null==e?[]:lr(e,bs(e))},Mn.functionsIn=function(e){return null==e?[]:lr(e,ks(e))},Mn.groupBy=ca,Mn.initial=function(e){return(null==e?0:e.length)?Hr(e,0,-1):[]},Mn.intersection=Ro,Mn.intersectionBy=Fo,Mn.intersectionWith=Do,Mn.invert=gs,Mn.invertBy=ys,Mn.invokeMap=la,Mn.iteratee=Js,Mn.keyBy=fa,Mn.keys=bs,Mn.keysIn=ks,Mn.map=da,Mn.mapKeys=function(e,t){var n={};return t=Gi(t,3),ur(e,(function(e,r,i){Jn(n,t(e,r,i),e)})),n},Mn.mapValues=function(e,t){var n={};return t=Gi(t,3),ur(e,(function(e,r,i){Jn(n,r,t(e,r,i))})),n},Mn.matches=function(e){return Mr(Gn(e,1))},Mn.matchesProperty=function(e,t){return Er(e,Gn(t,1))},Mn.memoize=Sa,Mn.merge=_s,Mn.mergeWith=Ss,Mn.method=Ys,Mn.methodOf=Ks,Mn.mixin=Gs,Mn.negate=xa,Mn.nthArg=function(e){return e=rs(e),Dr((function(t){return Ar(t,e)}))},Mn.omit=xs,Mn.omitBy=function(e,t){return Os(e,xa(Gi(t)))},Mn.once=function(e){return ga(2,e)},Mn.orderBy=function(e,t,n,r){return null==e?[]:(ja(t)||(t=null==t?[]:[t]),ja(n=r?void 0:n)||(n=null==n?[]:[n]),Lr(e,t,n))},Mn.over=Qs,Mn.overArgs=Pa,Mn.overEvery=Zs,Mn.overSome=eu,Mn.partial=Oa,Mn.partialRight=Ca,Mn.partition=ha,Mn.pick=Ps,Mn.pickBy=Os,Mn.property=tu,Mn.propertyOf=function(e){return function(t){return null==e?void 0:fr(e,t)}},Mn.pull=Wo,Mn.pullAll=zo,Mn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,Gi(n,2)):e},Mn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,void 0,n):e},Mn.pullAt=$o,Mn.range=nu,Mn.rangeRight=ru,Mn.rearg=Ma,Mn.reject=function(e,t){return(ja(e)?ut:ir)(e,xa(Gi(t,3)))},Mn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Gi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Nr(e,i),n},Mn.rest=function(e,t){if("function"!=typeof e)throw new ye(n);return Dr(e,t=void 0===t?t:rs(t))},Mn.reverse=Uo,Mn.sampleSize=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:rs(t),(ja(e)?Wn:Wr)(e,t)},Mn.set=function(e,t,n){return null==e?e:zr(e,t,n)},Mn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:zr(e,t,n,r)},Mn.shuffle=function(e){return(ja(e)?zn:qr)(e)},Mn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&so(e,t,n)?(t=0,n=r):(t=null==t?0:rs(t),n=void 0===n?r:rs(n)),Hr(e,t,n)):[]},Mn.sortBy=pa,Mn.sortedUniq=function(e){return e&&e.length?Kr(e):[]},Mn.sortedUniqBy=function(e,t){return e&&e.length?Kr(e,Gi(t,2)):[]},Mn.split=function(e,t,n){return n&&"number"!=typeof n&&so(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ss(e))&&("string"==typeof t||null!=t&&!Ya(t))&&!(t=Xr(t))&&Ft(e)?ci(qt(e),0,n):e.split(t,n):[]},Mn.spread=function(e,t){if("function"!=typeof e)throw new ye(n);return t=null==t?0:an(rs(t),0),Dr((function(n){var r=n[t],i=ci(n,0,t);return r&&dt(i,r),rt(e,this,i)}))},Mn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Mn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||void 0===t?1:rs(t))<0?0:t):[]},Mn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t,r):[]},Mn.takeRightWhile=function(e,t){return e&&e.length?ti(e,Gi(t,3),!1,!0):[]},Mn.takeWhile=function(e,t){return e&&e.length?ti(e,Gi(t,3)):[]},Mn.tap=function(e,t){return t(e),e},Mn.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new ye(n);return Ua(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),ba(e,t,{leading:i,maxWait:t,trailing:o})},Mn.thru=na,Mn.toArray=ts,Mn.toPairs=Cs,Mn.toPairsIn=Ms,Mn.toPath=function(e){return ja(e)?ft(e,Oo):Xa(e)?[e]:gi(Po(ss(e)))},Mn.toPlainObject=as,Mn.transform=function(e,t,n){var r=ja(e),i=r||Fa(e)||Qa(e);if(t=Gi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ua(e)&&Wa(o)?En(Ve(e)):{}}return(i?ot:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Mn.unary=function(e){return ma(e,1)},Mn.union=qo,Mn.unionBy=Ho,Mn.unionWith=Vo,Mn.uniq=function(e){return e&&e.length?Qr(e):[]},Mn.uniqBy=function(e,t){return e&&e.length?Qr(e,Gi(t,2)):[]},Mn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},Mn.unset=function(e,t){return null==e||Zr(e,t)},Mn.unzip=Jo,Mn.unzipWith=Yo,Mn.update=function(e,t,n){return null==e?e:ei(e,t,ai(n))},Mn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,ai(n),r)},Mn.values=Es,Mn.valuesIn=function(e){return null==e?[]:Et(e,ks(e))},Mn.without=Ko,Mn.words=Ws,Mn.wrap=function(e,t){return Oa(ai(t),e)},Mn.xor=Go,Mn.xorBy=Xo,Mn.xorWith=Qo,Mn.zip=Zo,Mn.zipObject=function(e,t){return ii(e||[],t||[],Un)},Mn.zipObjectDeep=function(e,t){return ii(e||[],t||[],zr)},Mn.zipWith=ea,Mn.entries=Cs,Mn.entriesIn=Ms,Mn.extend=cs,Mn.extendWith=ls,Gs(Mn,Mn),Mn.add=au,Mn.attempt=zs,Mn.camelCase=Is,Mn.capitalize=As,Mn.ceil=su,Mn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==t&&(t=(t=os(t))==t?t:0),Kn(os(e),t,n)},Mn.clone=function(e){return Gn(e,4)},Mn.cloneDeep=function(e){return Gn(e,5)},Mn.cloneDeepWith=function(e,t){return Gn(e,5,t="function"==typeof t?t:void 0)},Mn.cloneWith=function(e,t){return Gn(e,4,t="function"==typeof t?t:void 0)},Mn.conformsTo=function(e,t){return null==t||Xn(e,t,bs(t))},Mn.deburr=Ls,Mn.defaultTo=function(e,t){return null==e||e!=e?t:e},Mn.divide=uu,Mn.endsWith=function(e,t,n){e=ss(e),t=Xr(t);var r=e.length,i=n=void 0===n?r:Kn(rs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Mn.eq=Ea,Mn.escape=function(e){return(e=ss(e))&&F.test(e)?e.replace(N,Nt):e},Mn.escapeRegExp=function(e){return(e=ss(e))&&H.test(e)?e.replace(q,"\\$&"):e},Mn.every=function(e,t,n){var r=ja(e)?st:nr;return n&&so(e,t,n)&&(t=void 0),r(e,Gi(t,3))},Mn.find=oa,Mn.findIndex=Lo,Mn.findKey=function(e,t){return gt(e,Gi(t,3),ur)},Mn.findLast=aa,Mn.findLastIndex=jo,Mn.findLastKey=function(e,t){return gt(e,Gi(t,3),cr)},Mn.floor=cu,Mn.forEach=sa,Mn.forEachRight=ua,Mn.forIn=function(e,t){return null==e?e:ar(e,Gi(t,3),ks)},Mn.forInRight=function(e,t){return null==e?e:sr(e,Gi(t,3),ks)},Mn.forOwn=function(e,t){return e&&ur(e,Gi(t,3))},Mn.forOwnRight=function(e,t){return e&&cr(e,Gi(t,3))},Mn.get=vs,Mn.gt=Ia,Mn.gte=Aa,Mn.has=function(e,t){return null!=e&&ro(e,t,vr)},Mn.hasIn=ms,Mn.head=No,Mn.identity=Vs,Mn.includes=function(e,t,n,r){e=Na(e)?e:Es(e),n=n&&!r?rs(n):0;var i=e.length;return n<0&&(n=an(i+n,0)),Ga(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&wt(e,t,n)>-1},Mn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),wt(e,t,i)},Mn.inRange=function(e,t,n){return t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n){return e>=sn(t,n)&&e<an(t,n)}(e=os(e),t,n)},Mn.invoke=ws,Mn.isArguments=La,Mn.isArray=ja,Mn.isArrayBuffer=Ta,Mn.isArrayLike=Na,Mn.isArrayLikeObject=Ra,Mn.isBoolean=function(e){return!0===e||!1===e||qa(e)&&hr(e)==u},Mn.isBuffer=Fa,Mn.isDate=Da,Mn.isElement=function(e){return qa(e)&&1===e.nodeType&&!Ja(e)},Mn.isEmpty=function(e){if(null==e)return!0;if(Na(e)&&(ja(e)||"string"==typeof e||"function"==typeof e.splice||Fa(e)||Qa(e)||La(e)))return!e.length;var t=no(e);if(t==h||t==g)return!e.size;if(fo(e))return!xr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Mn.isEqual=function(e,t){return br(e,t)},Mn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?br(e,t,void 0,n):!!r},Mn.isError=Ba,Mn.isFinite=function(e){return"number"==typeof e&&nn(e)},Mn.isFunction=Wa,Mn.isInteger=za,Mn.isLength=$a,Mn.isMap=Ha,Mn.isMatch=function(e,t){return e===t||kr(e,t,Qi(t))},Mn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,kr(e,t,Qi(t),n)},Mn.isNaN=function(e){return Va(e)&&e!=+e},Mn.isNative=function(e){if(lo(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return _r(e)},Mn.isNil=function(e){return null==e},Mn.isNull=function(e){return null===e},Mn.isNumber=Va,Mn.isObject=Ua,Mn.isObjectLike=qa,Mn.isPlainObject=Ja,Mn.isRegExp=Ya,Mn.isSafeInteger=function(e){return za(e)&&e>=-9007199254740991&&e<=9007199254740991},Mn.isSet=Ka,Mn.isString=Ga,Mn.isSymbol=Xa,Mn.isTypedArray=Qa,Mn.isUndefined=function(e){return void 0===e},Mn.isWeakMap=function(e){return qa(e)&&no(e)==b},Mn.isWeakSet=function(e){return qa(e)&&"[object WeakSet]"==hr(e)},Mn.join=function(e,t){return null==e?"":rn.call(e,t)},Mn.kebabCase=js,Mn.last=Bo,Mn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=rs(n))<0?an(r+i,0):sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):yt(e,kt,i,!0)},Mn.lowerCase=Ts,Mn.lowerFirst=Ns,Mn.lt=Za,Mn.lte=es,Mn.max=function(e){return e&&e.length?rr(e,Vs,pr):void 0},Mn.maxBy=function(e,t){return e&&e.length?rr(e,Gi(t,2),pr):void 0},Mn.mean=function(e){return _t(e,Vs)},Mn.meanBy=function(e,t){return _t(e,Gi(t,2))},Mn.min=function(e){return e&&e.length?rr(e,Vs,Or):void 0},Mn.minBy=function(e,t){return e&&e.length?rr(e,Gi(t,2),Or):void 0},Mn.stubArray=iu,Mn.stubFalse=ou,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=fu,Mn.nth=function(e,t){return e&&e.length?Ar(e,rs(t)):void 0},Mn.noConflict=function(){return He._===this&&(He._=Ee),this},Mn.noop=Xs,Mn.now=va,Mn.pad=function(e,t,n){e=ss(e);var r=(t=rs(t))?Ut(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Li(Zt(i),n)+e+Li(Qt(i),n)},Mn.padEnd=function(e,t,n){e=ss(e);var r=(t=rs(t))?Ut(e):0;return t&&r<t?e+Li(t-r,n):e},Mn.padStart=function(e,t,n){e=ss(e);var r=(t=rs(t))?Ut(e):0;return t&&r<t?Li(t-r,n)+e:e},Mn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(ss(e).replace(J,""),t||0)},Mn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&so(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ns(e),void 0===t?(t=e,e=0):t=ns(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ln();return sn(e+i*(t-e+ze("1e-"+((i+"").length-1))),t)}return Rr(e,t)},Mn.reduce=function(e,t,n){var r=ja(e)?ht:Pt,i=arguments.length<3;return r(e,Gi(t,4),n,i,er)},Mn.reduceRight=function(e,t,n){var r=ja(e)?pt:Pt,i=arguments.length<3;return r(e,Gi(t,4),n,i,tr)},Mn.repeat=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:rs(t),Fr(ss(e),t)},Mn.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mn.result=function(e,t,n){var r=-1,i=(t=si(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Oo(t[r])];void 0===o&&(r=i,o=n),e=Wa(o)?o.call(e):o}return e},Mn.round=du,Mn.runInContext=e,Mn.sample=function(e){return(ja(e)?Bn:Br)(e)},Mn.size=function(e){if(null==e)return 0;if(Na(e))return Ga(e)?Ut(e):e.length;var t=no(e);return t==h||t==g?e.size:xr(e).length},Mn.snakeCase=Rs,Mn.some=function(e,t,n){var r=ja(e)?vt:Vr;return n&&so(e,t,n)&&(t=void 0),r(e,Gi(t,3))},Mn.sortedIndex=function(e,t){return Jr(e,t)},Mn.sortedIndexBy=function(e,t,n){return Yr(e,t,Gi(n,2))},Mn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Jr(e,t);if(r<n&&Ea(e[r],t))return r}return-1},Mn.sortedLastIndex=function(e,t){return Jr(e,t,!0)},Mn.sortedLastIndexBy=function(e,t,n){return Yr(e,t,Gi(n,2),!0)},Mn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Jr(e,t,!0)-1;if(Ea(e[n],t))return n}return-1},Mn.startCase=Fs,Mn.startsWith=function(e,t,n){return e=ss(e),n=null==n?0:Kn(rs(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Mn.subtract=hu,Mn.sum=function(e){return e&&e.length?Ot(e,Vs):0},Mn.sumBy=function(e,t){return e&&e.length?Ot(e,Gi(t,2)):0},Mn.template=function(e,t,n){var r=Mn.templateSettings;n&&so(e,t,n)&&(t=void 0),e=ss(e),t=ls({},t,r,Wi);var i,o,a=ls({},t.imports,r.imports,Wi),s=bs(a),u=Et(a,s),c=0,l=t.interpolate||ue,f="__p += '",d=me((t.escape||ue).source+"|"+l.source+"|"+(l===W?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),h="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(d,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(ce,Rt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var p=xe.call(t,"variable")&&t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(A,""):f).replace(L,"$1").replace(j,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=zs((function(){return he(s,h+"return "+f).apply(void 0,u)}));if(v.source=f,Ba(v))throw v;return v},Mn.times=function(e,t){if((e=rs(e))<1||e>9007199254740991)return[];var n=4294967295,r=sn(e,4294967295);e-=4294967295;for(var i=Ct(r,t=Gi(t));++n<e;)t(n);return i},Mn.toFinite=ns,Mn.toInteger=rs,Mn.toLength=is,Mn.toLower=function(e){return ss(e).toLowerCase()},Mn.toNumber=os,Mn.toSafeInteger=function(e){return e?Kn(rs(e),-9007199254740991,9007199254740991):0===e?e:0},Mn.toString=ss,Mn.toUpper=function(e){return ss(e).toUpperCase()},Mn.trim=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(V,"");if(!e||!(t=Xr(t)))return e;var r=qt(e),i=qt(t);return ci(r,At(r,i),Lt(r,i)+1).join("")},Mn.trimEnd=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=qt(e);return ci(r,0,Lt(r,qt(t))+1).join("")},Mn.trimStart=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(J,"");if(!e||!(t=Xr(t)))return e;var r=qt(e);return ci(r,At(r,qt(t))).join("")},Mn.truncate=function(e,t){var n=30,r="...";if(Ua(t)){var i="separator"in t?t.separator:i;n="length"in t?rs(t.length):n,r="omission"in t?Xr(t.omission):r}var o=(e=ss(e)).length;if(Ft(e)){var a=qt(e);o=a.length}if(n>=o)return e;var s=n-Ut(r);if(s<1)return r;var u=a?ci(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ya(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=me(i.source,ss(te.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(Xr(i),s)!=s){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+r},Mn.unescape=function(e){return(e=ss(e))&&R.test(e)?e.replace(T,Ht):e},Mn.uniqueId=function(e){var t=++Pe;return ss(e)+t},Mn.upperCase=Ds,Mn.upperFirst=Bs,Mn.each=sa,Mn.eachRight=ua,Mn.first=No,Gs(Mn,(lu={},ur(Mn,(function(e,t){xe.call(Mn.prototype,t)||(lu[t]=e)})),lu),{chain:!1}),Mn.VERSION="4.17.20",ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mn[e].placeholder=Mn})),ot(["drop","take"],(function(e,t){Ln.prototype[e]=function(n){n=void 0===n?1:an(rs(n),0);var r=this.__filtered__&&!t?new Ln(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Ln.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Ln.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Gi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Ln.prototype[e]=function(){return this[n](1).value()[0]}})),ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Ln.prototype[e]=function(){return this.__filtered__?new Ln(this):this[n](1)}})),Ln.prototype.compact=function(){return this.filter(Vs)},Ln.prototype.find=function(e){return this.filter(e).head()},Ln.prototype.findLast=function(e){return this.reverse().find(e)},Ln.prototype.invokeMap=Dr((function(e,t){return"function"==typeof e?new Ln(this):this.map((function(n){return yr(n,e,t)}))})),Ln.prototype.reject=function(e){return this.filter(xa(Gi(e)))},Ln.prototype.slice=function(e,t){e=rs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ln(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=rs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ln.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},ur(Ln.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Mn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Mn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Ln,u=a[0],c=s||ja(t),l=function(e){var t=i.apply(Mn,dt([e],a));return r&&f?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,d=!!this.__actions__.length,h=o&&!f,p=s&&!d;if(!o&&c){t=p?t:new Ln(this);var v=e.apply(t,a);return v.__actions__.push({func:na,args:[l],thisArg:void 0}),new An(v,f)}return h&&p?e.apply(this,a):(v=this.thru(l),h?r?v.value()[0]:v.value():v)})})),ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=we[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(ja(i)?i:[],e)}return this[n]((function(n){return t.apply(ja(n)?n:[],e)}))}})),ur(Ln.prototype,(function(e,t){var n=Mn[t];if(n){var r=n.name+"";xe.call(wn,r)||(wn[r]=[]),wn[r].push({name:t,func:n})}})),wn[Mi(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var e=new Ln(this.__wrapped__);return e.__actions__=gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gi(this.__views__),e},Ln.prototype.reverse=function(){if(this.__filtered__){var e=new Ln(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ln.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ja(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=sn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=sn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return ni(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var v=-1,m=e[c+=t];++v<f;){var g=l[v],y=g.iteratee,w=g.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue e;break e}}p[d++]=m}return p},Mn.prototype.at=ra,Mn.prototype.chain=function(){return ta(this)},Mn.prototype.commit=function(){return new An(this.value(),this.__chain__)},Mn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mn.prototype.plant=function(e){for(var t,n=this;n instanceof In;){var r=Mo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Mn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ln){var t=e;return this.__actions__.length&&(t=new Ln(this)),(t=t.reverse()).__actions__.push({func:na,args:[Uo],thisArg:void 0}),new An(t,this.__chain__)}return this.thru(Uo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,xt&&(Mn.prototype[xt]=function(){return this}),Mn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(He._=Vt,define((function(){return Vt}))):Je?((Je.exports=Vt)._=Vt,Ve._=Vt):He._=Vt}.call(this),t.exports}.call({}),w=So(n),b=t,k={};Object.defineProperty(k,"__esModule",{value:!0});var _=async function(e){const t=e.text.replace(/^\s*<!doctype(\s+.*)?>\s*/i,"");let n,r;if("pandoc"===(0,I.atomConfig)().renderer)try{n=await ri.renderPandoc(t,e.filePath,e.renderLaTeX,e.renderErrors)}catch(e){const t=e;if(void 0===t.html)throw t;r=t.message,n=t.html}else n=await ii.MarkdownItWorker.render(t,e.renderLaTeX);const i=(new DOMParser).parseFromString(n,"text/html");if(function(e){e.querySelectorAll("script:not([type^='math/tex'])").forEach(e=>{e.remove()});const t=["onabort","onblur","onchange","onclick","ondbclick","onerror","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup","onreset","onresize","onscroll","onselect","onsubmit","onunload"];e.querySelectorAll("*").forEach(e=>t.map(t=>{e.removeAttribute(t)}))}(i),"normal"===e.mode)e.imageWatcher&&e.imageWatcher.track(),Li(i,e.filePath,!1,void 0,e.imageWatcher),e.imageWatcher&&e.imageWatcher.untrack();else switch(e.mode){case"save":Ai({doc:i,filePath:e.filePath,savePath:e.savePath,behaviour:(0,I.atomConfig)().saveConfig.mediaOnSaveAsHTMLBehaviour});break;case"copy":Ai({doc:i,filePath:e.filePath,behaviour:(0,I.atomConfig)().saveConfig.mediaOnCopyAsHTMLBehaviour});break;default:throw o=e,new Error("Invalid render mode "+JSON.stringify(o))}var o;let a="text";"source.litcoffee"===(e.grammar&&e.grammar.scopeName)&&(a="coffee");"pandoc"===(0,I.atomConfig)().renderer&&(0,I.atomConfig)().pandocConfig.useNativePandocCodeStyles||await(0,di.highlightCodeBlocks)(i,a);if(r){const e=i.createElement("div"),t=i.createElement("code");t.innerText=r,e.innerHTML=`<h1>Pandoc Error:</h1>${t.outerHTML}<hr>`,i.body.insertBefore(e,i.body.firstElementChild)}return i};k.render=_;var S=Ei(i),x={};Object.defineProperty(x,"__esModule",{value:!0});var P=async function(e,t,n,r){const{args:i,opts:o}=ei(t,n);let a;try{return await new Promise((t,s)=>{const u=C.execFile((0,I.atomConfig)().pandocConfig.pandocPath,ni(i),o,(function(e,i,o){e&&(atom.notifications.addError(e.toString(),{stack:e.stack,dismissable:!0}),s(e));try{const e=function(e,t,n){return e?function(e,t,n){const r=new Error(e);throw r.html=ti(t,n),r}(e,t,n):ti(t,n)}(r&&o||"",i||"",n);t(e)}catch(e){s(e)}}));if(!u.stdin)throw new Error("No stdin");u.stdin.write(e),u.stdin.end(),a=window.setInterval(()=>{process.activateUvLoop()},100)})}finally{void 0!==a&&clearInterval(a)}};x.renderPandoc=P;var O=void 0;x.testing=O;var C=Qr(e),M=Qr(n),E=Qr(i),I={};Object.defineProperty(I,"__esModule",{value:!0});var A=function(e){if(!e)return;e.catch(e=>{console.error(e),atom.notifications.addFatalError(e.toString(),{detail:e.message,stack:e.stack,dismissable:!0})})};I.handlePromise=A;var L=function(e){return!!(0,R.existsSync)(e)&&(0,R.lstatSync)(e).isFile()};I.isFileSync=L;var j=async function(e,t,n){const r=new F.WebviewHandler(async()=>{await r.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:{...Kr().mathConfig,latexRenderer:"SVG"},context:"copy-html"}),await r.setBasePath(t);const i=await me.render({text:e,filePath:t,renderLaTeX:n,renderErrors:!1,mode:"copy"}),o=await r.update(i.documentElement.outerHTML,n);if(o){const e=o.replace(/"file:\/\/[^"#]*/g,'"');atom.config.get("markdown-preview-plus.richClipboard")?Vr.write({text:e,html:e}):atom.clipboard.write(e)}r.destroy()});r.element.style.pointerEvents="none",r.element.style.position="absolute",r.element.style.width="0px",r.element.style.height="0px";atom.views.getView(atom.workspace).appendChild(r.element)};I.copyHtml=j;var T=Kr;I.atomConfig=T;var N=function(){if(void 0!==Gr)return Gr;const e=atom.packages.getLoadedPackage("markdown-preview-plus");if(!e)throw new Error("markdown-preview-plus is not loaded but is running");return Gr=e.path};I.packagePath=N;var R=n,F={};Object.defineProperty(F,"__esModule",{value:!0});var D=void 0;F.WebviewHandler=D;var B={};Object.defineProperty(B,"__esModule",{value:!0});var W=void 0;B.WebContentsHandler=W;var z=r,$=t;const U=i;var q,H=(q=function(e){if("string"!=typeof e||e.length<=7||"file://"!==e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");const t=decodeURI(e.substring(7)),n=t.indexOf("/");let r=t.substring(0,n),i=t.substring(n+1);return"localhost"===r&&(r=""),r&&(r=U.sep+U.sep+r),i=i.replace(/^(.+)\|/,"$1:"),"\\"===U.sep&&(i=i.replace(/\//g,"\\")),/^.+:/.test(i)||(i=U.sep+i),r+i})&&q.__esModule?q:{default:q},V={};Object.defineProperty(V,"__esModule",{value:!0});var J=function(e){for(const t of atom.workspace.getTextEditors())if(t.id===e)return t;return};V.editorForId=J;var Y=oe;V.getUserStyles=Y;var K=se;V.getPreviewStyles=K;var G=function(e){let t;if("string"==typeof e){const n=new DOMParser;t=n.parseFromString(e,"text/html")}else t=e;const n={};for(const e of Array.from(t.querySelectorAll("[data-source-lines],[data-pos]"))){const t=e,[r,i]=t.dataset.sourceLines?t.dataset.sourceLines.split(" ").map(e=>parseInt(e,10)):t.dataset.pos.slice(1).split("-").map(e=>parseInt(e.split(":")[0],10)-1);if(!r||!i)continue;let o=e;const a=[];for(;o&&"BODY"!==o.tagName;){let e=0,t=o;for(;t.previousElementSibling;)t=t.previousElementSibling,t.tagName===o.tagName&&e++;a.unshift({tag:o.tagName.toLowerCase(),index:e}),o=o.parentElement}for(let e=r;e<i;++e)(!n[e]||n[e].length<=a.length)&&(n[e]=a)}return n};V.buildLineMap=G;var X=function(e,t,n,r){let i;i=n?function(e){return`<script type="text/x-mathjax-config">\n  MathJax.Hub.Config({\n    jax: ["input/TeX","output/HTML-CSS"],\n    extensions: ["[a11y]/accessibility-menu.js"],\n    'HTML-CSS': {\n      availableFonts: [],\n      webFont: 'TeX',\n      undefinedFamily: ${JSON.stringify((0,I.atomConfig)().mathConfig.undefinedFamily)},\n      mtextFontInherit: true,\n    },\n    TeX: ${JSON.stringify(e,void 0,2)},\n    showMathMenu: true\n  });\n<\/script>\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"><\/script>`}(r):"";return`<!DOCTYPE html>\n<html data-markdown-preview-plus-context="html-export">\n  <head>\n    <meta charset="utf-8" />\n    <title>${e}</title>${i}\n    <style>${se(!1).join("\n").replace(/url\(atom:\/\/markdown-preview-plus\/assets\/(.*)\)/,(function(e,t,n,r){const i=Z.join((0,I.packagePath)(),"assets",t),o=ee.readFileSync(i,"binary");return`url('data:image/jpeg;base64,${Buffer.from(o,"binary").toString("base64")}')`}))}</style>\n${t.head.innerHTML}\n  </head>\n  <body>\n    ${t.body.innerHTML}\n  </body>\n</html>\n`};V.mkHtml=X;var Q=function(e){const t=atom.workspace.paneForItem(e);t?(0,I.handlePromise)(t.destroyItem(e)):e.destroy()};V.destroy=Q;var Z=ne(i),ee=ne(n);function te(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return te=function(){return e},e}function ne(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=te();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function*re(e){const t=atom.styles.getStyleElements();for(const n of t)void 0!==e&&n.getAttribute("context")!==e||(yield n.innerText)}function ie(e){return atom.themes.loadStylesheet(Z.join((0,I.packagePath)(),"styles-client",e+".less"))}function oe(){const e=atom.styles.styleElementsBySourcePath[atom.styles.getUserStyleSheetPath()];return e?[e.innerText]:[]}function*ae(e){const t=atom.packages.getActivePackage(e);if(!t)return;const n=t.getStylesheetPaths();for(const e of n){const t=atom.styles.styleElementsBySourcePath[e];t&&(yield t.innerText)}}function se(e){var t,n;if(null===(t=window["markdown-preview-plus-tests"])||void 0===t?void 0:t.getStylesOverride)return null===(n=window["markdown-preview-plus-tests"])||void 0===n?void 0:n.getStylesOverride(e);const r=[];if(e){const e=atom.styles.styleElementsBySourcePath["global-text-editor-styles"];e&&r.push(...function*(e){for(const t of e)yield t.replace(/\batom-workspace\b/g,":root")}([e.innerText])),r.push(ie("editor-global-font"));const t=(0,I.atomConfig)().importPackageStyles;if(t.includes("*"))r.push(...ue(re())),r.push(ie("patch"));else{for(const e of t)r.push(...ue(ae(e)));if(t.includes("fonts")){const e=atom.styles.styleElementsBySourcePath["fonts-package-editorfont"];e&&r.push(...ue([e.innerText]))}}}return r.push(ie("generic")),e&&r.push(ie("display")),(0,I.atomConfig)().useGitHubStyle?r.push(ie("github")):r.push(ie("default")),r.push(...function(e){if(""!==e){const t=atom.themes.getLoadedThemes();if(t){const[n]=t.filter(t=>t.name===e);if(n){return ue(n.getStylesheetPaths().map(e=>atom.themes.loadStylesheet(e)))}}atom.notifications.addWarning("Failed to load syntax theme",{detail:`Markdown-preview-plus couldn't find '${e}'`})}return ue(re("atom-text-editor"))}((0,I.atomConfig)().syntaxThemeName)),r.push(...ue(oe())),r}function*ue(e){for(const t of e)yield t.replace(/\batom-text-editor\b/g,"pre.editor-colors")}var ce={};Object.defineProperty(ce,"__esModule",{value:!0});var le=void 0;ce.ImageWatcher=le;var fe=r;le=class{registry=new Map;disposed=!1;lastImages=new Set;tracked=!1;constructor(e){this.callback=e}watch(e){this.tracked&&this.lastImages.add(e);const t=this.registry.get(e);if(!t&&(0,I.isFileSync)(e)){const t=Date.now(),n=new fe.CompositeDisposable,r=new fe.File(e);return n.add(r.onDidChange(this.srcClosure(e,"change")),r.onDidDelete(this.srcClosure(e,"delete")),r.onDidRename(this.srcClosure(e,"rename"))),this.registry.set(e,{version:t,watcher:n}),t}return t?t.version:void 0}track(){this.lastImages.clear(),this.tracked=!0}untrack(){this.tracked=!1;const e=Array.from(this.registry.entries());for(const[t,n]of e)this.lastImages.has(t)||(n.watcher.dispose(),this.registry.delete(t));this.lastImages.clear()}dispose(){this.disposed||(this.clear(),this.disposed=!0)}clear(){for(const e of this.registry.values())e.watcher.dispose();this.registry.clear()}srcClosure(e,t){return()=>{const n=this.registry.get(e);n&&("change"===t&&(0,I.isFileSync)(e)?(n.version=Date.now(),this.refreshImages(e,n.version)):(n.watcher.dispose(),this.registry.delete(e),this.refreshImages(e)))}}refreshImages(e,t){this.disposed||this.callback(e,t)}},ce.ImageWatcher=le;var de=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=he();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(i);function he(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return he=function(){return e},e}class pe{static _id=0;emitter=new z.Emitter;destroyed=!1;disposables=new z.CompositeDisposable;zoomLevel=0;replyCallbackId=0;replyCallbacks=new Map;id=++pe._id;listeners={};stylesReady=!1;constructor(e,t,n){this.initCont=n,this.addListeners({"atom-markdown-preview-plus-ipc-zoom-in":this.zoomIn.bind(this),"atom-markdown-preview-plus-ipc-zoom-out":this.zoomOut.bind(this),"atom-markdown-preview-plus-ipc-did-scroll-preview":e=>{this.emitter.emit("did-scroll-preview",e)},"atom-markdown-preview-plus-ipc-uncaught-error":e=>{const t=new Error;atom.notifications.addFatalError(`Uncaught error ${e.name} in markdown-preview-plus webview client`,{dismissable:!0,stack:t.stack,detail:`${e.message}\n\nstack:\n${e.stack}`})},"atom-markdown-preview-plus-ipc-show-context-menu":()=>{t()},"atom-markdown-preview-plus-ipc-request-reply":({id:e,request:t,result:n})=>{const r=this.replyCallbacks.get(e);if(r&&t===r.request){(0,r.callback)(n)}},"atom-markdown-preview-plus-ipc-key":e=>{const t=new KeyboardEvent(e.type,e);this.element&&this.element.dispatchEvent(t)}}),this.disposables.add(atom.styles.onDidAddStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.styles.onDidRemoveStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.styles.onDidUpdateStyleElement(()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.useGitHubStyle",()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.syntaxThemeName",()=>{(0,I.handlePromise)(this.updateStyles())}),atom.config.onDidChange("markdown-preview-plus.importPackageStyles",()=>{(0,I.handlePromise)(this.updateStyles())})),this.contents=e.then(this.initializeContents),this.disposables.add(this.imageWatcher=new ce.ImageWatcher(this.updateImages.bind(this)))}async runJS(e){const t=await this.contents;return new Promise(n=>t.executeJavaScript(e,!1,n))}destroy(){if(!this.destroyed){this.destroyed=!0;for(const[e,t]of Object.entries(this.listeners))$.remote.ipcMain.removeListener(e,t),delete this.listeners[e];this.emitter.emit("did-destroy"),this.disposables.dispose(),this.emitter.dispose()}}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async update(e,t,n="none",r,i){if(!this.destroyed)return this.runRequest("update-preview",{html:e,renderLaTeX:t,map:r,diffMethod:n,scrollSyncParams:i})}async fullyReady(){if(!this.destroyed)return this.runRequest("await-fully-ready",{})}async setBasePath(e){return this.send("set-base-path",{path:e})}async setNativeKeys(e){return this.send("set-native-keys",e)}async init(e){return this.send("init",e)}async updateImages(e,t){return this.send("update-images",{oldsrc:e,v:t})}async printToPDF(e){const t=await this.contents;return new Promise((n,r)=>{t.printToPDF(e,(e,t)=>{e?r(e):n(t)})})}async sync(e,t){return this.send("sync",{line:e,flash:t})}async syncSource(){return this.runRequest("sync-source",{})}async scrollSync(e,t){return this.send("scroll-sync",{firstLine:e,lastLine:t})}async zoomIn(){this.zoomLevel+=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async zoomOut(){this.zoomLevel-=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async resetZoom(){this.zoomLevel=0,(await this.contents).setZoomLevel(this.zoomLevel)}async print(){(await this.contents).print()}async openDevTools(){(await this.contents).openDevTools()}async reload(){await this.runRequest("reload",{}),(await this.contents).reload()}async error(e){return this.send("error",{msg:e})}async getTeXConfig(){return this.runRequest("get-tex-config",{})}async getSelection(){return this.runRequest("get-selection",{})}async search(e){(await this.contents).findInPage(e),this.lastSearchText=e}async findNext(){if(!this.lastSearchText)return;(await this.contents).findInPage(this.lastSearchText,{findNext:!0})}hasSearch(){return!!this.lastSearchText}async stopSearch(){const e=await this.contents;this.lastSearchText=void 0,e.stopFindInPage("keepSelection")}async updateStyles(){if(this.stylesReady)return this.send("style",{styles:(0,V.getPreviewStyles)(!0)})}async runRequest(e,t){const n=this.replyCallbackId++,r=new Promise(t=>{this.replyCallbacks.set(n,{request:e,callback:e=>{this.replyCallbacks.delete(n),t(e)}})}),i=Object.assign({id:n},t);return await this.send(e,i),r}async send(e,t){(await this.contents).send(e,t)}addListeners(e){for(const[t,n]of Object.entries(e))this.listeners[t]=(e,t,...r)=>{this.id===t&&n(...r)},$.remote.ipcMain.on(t,this.listeners[t])}initializeContents=async e=>{e.once("destroyed",()=>this.destroy()),e.on("will-navigate",async(e,t)=>{e.preventDefault();const n=(0,I.atomConfig)().previewConfig.shellOpenFileExtensions.some(e=>t.toLowerCase().endsWith("."+e.toLowerCase()));t.startsWith("file://")&&!n?(0,I.handlePromise)(atom.workspace.open((0,H.default)(t))):(0,I.handlePromise)($.shell.openExternal(t))}),e.getURL().includes("client/template.html")||await e.loadFile(de.join((0,I.packagePath)(),"client","template.html"),{hash:atom.inDevMode()?"dev":void 0});const t=async()=>{this.destroyed||(e.send("set-id",this.id),e.setZoomLevel(this.zoomLevel),this.stylesReady=!0,(0,I.handlePromise)(this.updateStyles().then(this.initCont)))};return await t(),e.on("dom-ready",t),e}}W=pe,B.WebContentsHandler=W;class ve extends B.WebContentsHandler{constructor(e){const t=document.createElement("webview");super(new Promise(e=>{const n=()=>{t.removeEventListener("dom-ready",n),e(t.getWebContents())};t.addEventListener("dom-ready",n)}),()=>{atom.contextMenu.showForEvent({target:this._element})},e),this._element=document.createElement("div"),this._element.style.width="100%",this._element.style.height="100%",t.style.display="none",this._observer=new ResizeObserver(()=>{requestAnimationFrame(this.updatePosition.bind(this))}),this._observer.observe(this._element),this.dragStart=()=>{t.style.pointerEvents="none"},this.dragEnd=()=>{t.style.pointerEvents="auto"},window.addEventListener("dragstart",this.dragStart),window.addEventListener("dragend",this.dragEnd),t.disablewebsecurity="true",t.nodeintegration="true",t.src="about:blank",t.style.position="absolute",t.style.zIndex="0",this._webview=t,atom.views.getView(atom.workspace).appendChild(t)}registerViewEvents(e){this._webview.addEventListener("focus",()=>{const t=atom.workspace.paneForItem(e);t&&(t.activate(),this._webview.focus())});const t=atom.views.getView(e);this._observer2=new MutationObserver(e=>{for(const n of e)Array.from(n.addedNodes).includes(t)&&this.updatePosition()}),this._observer2.observe(atom.views.getView(atom.workspace).querySelector("atom-workspace-axis"),{childList:!0,subtree:!0})}get element(){return this._element}destroy(){this.destroyed||(super.destroy(),window.removeEventListener("dragstart",this.dragStart),window.removeEventListener("dragend",this.dragEnd),this._observer.disconnect(),this._observer2&&this._observer2.disconnect(),this._element.remove(),this._webview.remove())}updatePosition(){const e=this._element.getBoundingClientRect();this._webview.style.display="",this._webview.style.left=e.left+"px",this._webview.style.top=e.top+"px",this._webview.style.right=e.right+"px",this._webview.style.bottom=e.bottom+"px",this._webview.style.width=e.width+"px",this._webview.style.height=e.height+"px",this._webview.style.pointerEvents=this._element.style.pointerEvents,this._webview.style.opacity=this._element.style.opacity}}D=ve,F.WebviewHandler=D;var me=Yr(k),ge={};Object.defineProperty(ge,"__esModule",{value:!0});var ye=Dr;ge.getUserMacrosPath=ye;var we=function(e=atom.getConfigDirPath()){return function(e){try{const t=Nr.readFileSync(e).toString("utf-8");return function(e){const t=/^[^a-zA-Z\d\s]$|^[a-zA-Z]*$/,n={};for(const r of Object.keys(e)){const i=e[r];r.match(t)&&Wr(i)?n[r]=i:atom.notifications.addWarning(`Markdown-Preview-Plus failed to load LaTeX macro named '${r}'. Please see the [LaTeX guide](https://github.com/atom-community/markdown-preview-plus/blob/master/docs/math.md#macro-names)`)}return n}(Tr.parse(t)||{})}catch(t){const n=t;return console.warn(`Error reading Latex Macros file '${e}': ${void 0!==n.stack?n.stack:n}`),console.error(`Failed to load Latex Macros from '${e}'`,{detail:n.message,dismissable:!0}),{}}}(Dr(e))};ge.loadUserMacros=we;var be=Fr(i);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ie(e,t,n){return(Ie=Ee()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Me(i,n.prototype),i}).apply(null,arguments)}function Ae(e){var t="function"==typeof Map?new Map:void 0;return(Ae=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ie(e,arguments,Ce(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Me(r,e)})(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Le(e):t}function Te(e){var t=Ee();return function(){var n,r=Ce(e);if(t){var i=Ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return je(this,n)}}function Ne(e,t,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Re(e,t){return De(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Be(e,t)||ze()}function Fe(e){return De(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Be(e)||ze()}function De(e){if(Array.isArray(e))return e}function Be(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $e(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Be(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}var Ue="&",qe="#",He="!",Ve="-",Je=".",Ye="ALIAS",Ke="BLANK_LINE",Ge="BLOCK_FOLDED",Xe="BLOCK_LITERAL",Qe="COMMENT",Ze="DIRECTIVE",et="DOCUMENT",tt="FLOW_MAP",nt="FLOW_SEQ",rt="MAP",it="MAP_KEY",ot="MAP_VALUE",at="PLAIN",st="QUOTE_DOUBLE",ut="QUOTE_SINGLE",ct="SEQ",lt="SEQ_ITEM",ft={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function dt(e){for(var t=[0],n=e.indexOf("\n");-1!==n;)n+=1,t.push(n),n=e.indexOf("\n",n);return t}function ht(e){var t,n;return"string"==typeof e?(t=dt(e),n=e):(Array.isArray(e)&&(e=e[0]),e&&e.context&&(e.lineStarts||(e.lineStarts=dt(e.context.src)),t=e.lineStarts,n=e.context.src)),{lineStarts:t,src:n}}function pt(e,t){if("number"!=typeof e||e<0)return null;var n=ht(t),r=n.lineStarts,i=n.src;if(!r||!i||e>i.length)return null;for(var o=0;o<r.length;++o){var a=r[o];if(e<a)return{line:o,col:e-r[o-1]+1};if(e===a)return{line:o+1,col:1}}var s=r.length;return{line:s,col:e-r[s-1]+1}}function vt(e,t){var n=ht(t),r=n.lineStarts,i=n.src;if(!r||!(e>=1)||e>r.length)return null;for(var o=r[e-1],a=r[e];a&&a>o&&"\n"===i[a-1];)--a;return i.slice(o,a)}var mt=function(){function e(t,n){_e(this,e),this.start=t,this.end=n||t}return xe(e,null,[{key:"copy",value:function(t){return new e(t.start,t.end)}}]),xe(e,[{key:"isEmpty",value:function(){return"number"!=typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,t){var n=this.start,r=this.end;if(0===e.length||r<=e[0])return this.origStart=n,this.origEnd=r,t;for(var i=t;i<e.length&&!(e[i]>n);)++i;this.origStart=n+i;for(var o=i;i<e.length&&!(e[i]>=r);)++i;return this.origEnd=r+i,o}}]),e}(),gt=function(){function e(t,n,r){_e(this,e),Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=t,this.value=null}return xe(e,null,[{key:"addStringTerminator",value:function(t,n,r){if("\n"===r[r.length-1])return r;var i=e.endOfWhiteSpace(t,n);return i>=t.length||"\n"===t[i]?r+"\n":r}},{key:"atDocumentBoundary",value:function(e,t,n){var r=e[t];if(!r)return!0;var i=e[t-1];if(i&&"\n"!==i)return!1;if(n){if(r!==n)return!1}else if(r!==Ve&&r!==Je)return!1;var o=e[t+1],a=e[t+2];if(o!==r||a!==r)return!1;var s=e[t+3];return!s||"\n"===s||"\t"===s||" "===s}},{key:"endOfIdentifier",value:function(e,t){for(var n=e[t],r="<"===n,i=r?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];n&&-1===i.indexOf(n);)n=e[t+=1];return r&&">"===n&&(t+=1),t}},{key:"endOfIndent",value:function(e,t){for(var n=e[t];" "===n;)n=e[t+=1];return t}},{key:"endOfLine",value:function(e,t){for(var n=e[t];n&&"\n"!==n;)n=e[t+=1];return t}},{key:"endOfWhiteSpace",value:function(e,t){for(var n=e[t];"\t"===n||" "===n;)n=e[t+=1];return t}},{key:"startOfLine",value:function(e,t){var n=e[t-1];if("\n"===n)return t;for(;n&&"\n"!==n;)n=e[t-=1];return t+1}},{key:"endOfBlockIndent",value:function(t,n,r){var i=e.endOfIndent(t,r);if(i>r+n)return i;var o=e.endOfWhiteSpace(t,i),a=t[o];return a&&"\n"!==a?null:o}},{key:"atBlank",value:function(e,t,n){var r=e[t];return"\n"===r||"\t"===r||" "===r||n&&!r}},{key:"nextNodeIsIndented",value:function(e,t,n){return!(!e||t<0)&&(t>0||n&&"-"===e)}},{key:"normalizeOffset",value:function(t,n){var r=t[n];return r?"\n"!==r&&"\n"===t[n-1]?n-1:e.endOfWhiteSpace(t,n):n}},{key:"foldNewline",value:function(t,n,r){for(var i=0,o=!1,a="",s=t[n+1];" "===s||"\t"===s||"\n"===s;){switch(s){case"\n":i=0,n+=1,a+="\n";break;case"\t":i<=r&&(o=!0),n=e.endOfWhiteSpace(t,n+2)-1;break;case" ":i+=1,n+=1}s=t[n+1]}return a||(a=" "),s&&i<=r&&(o=!0),{fold:a,offset:n,error:o}}}]),xe(e,[{key:"getPropValue",value:function(e,t,n){if(!this.context)return null;var r=this.context.src,i=this.props[e];return i&&r[i.start]===t?r.slice(i.start+(n?1:0),i.end):null}},{key:"commentHasRequiredWhitespace",value:function(t){var n=this.context.src;if(this.header&&t===this.header.end)return!1;if(!this.valueRange)return!1;var r=this.valueRange.end;return t!==r||e.atBlank(n,r-1)}},{key:"parseComment",value:function(t){var n=this.context.src;if(n[t]===qe){var r=e.endOfLine(n,t+1),i=new mt(t,r);return this.props.push(i),r}return t}},{key:"setOrigRanges",value:function(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach((function(n){return n.setOrigRange(e,t)})),t}},{key:"toString",value:function(){var t=this.context.src,n=this.range,r=this.value;if(null!=r)return r;var i=t.slice(n.start,n.end);return e.addStringTerminator(t,n.end,i)}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,Ue,!0);if(null!=t)return t}return null}},{key:"comment",get:function(){for(var e=[],t=0;t<this.props.length;++t){var n=this.getPropValue(t,qe,!0);null!=n&&e.push(n)}return e.length>0?e.join("\n"):null}},{key:"hasComment",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]===qe)return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]!==qe)return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[tt,nt,st,ut].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var e=pt(this.range.start,this.context.root);if(e)return{start:e,end:pt(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end;return this.context.src.slice(t,n)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,He,!1);if(null!=t){if("<"===t[1])return{verbatim:t.slice(2,-1)};var n=Re(t.match(/^(.*!)([^!]*)$/),3);n[0];return{handle:n[1],suffix:n[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=t;i<n;++i)if("\n"===r[i])return!0;return!1}}]),e}(),yt=function(e){Oe(n,Ae(Error));var t=Te(n);function n(e,r,i){var o;if(_e(this,n),!(i&&r instanceof gt))throw new Error("Invalid arguments for new ".concat(e));return(o=t.call(this)).name=e,o.message=i,o.source=r,o}return xe(n,[{key:"makePretty",value:function(){if(this.source){this.nodeType=this.source.type;var e=this.source.context&&this.source.context.root;if("number"==typeof this.offset){this.range=new mt(this.offset,this.offset+1);var t=e&&pt(this.offset,e);if(t){var n={line:t.line,col:t.col+1};this.linePos={start:t,end:n}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var r=this.linePos.start,i=r.line,o=r.col;this.message+=" at line ".concat(i,", column ").concat(o);var a=e&&function(e,t){var n=e.start,r=e.end,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,o=vt(n.line,t);if(!o)return null;var a=n.col;if(o.length>i)if(a<=i-10)o=o.substr(0,i-1)+"…";else{var s=Math.round(i/2);o.length>a+s&&(o=o.substr(0,a+s-1)+"…"),a-=o.length-i,o="…"+o.substr(1-i)}var u=1,c="";r&&(r.line===n.line&&a+(r.col-n.col)<=i+1?u=r.col-n.col:(u=Math.min(o.length+1,i)-a,c="…"));var l=a>1?" ".repeat(a-1):"",f="^".repeat(u);return"".concat(o,"\n").concat(l).concat(f).concat(c)}(this.linePos,e);a&&(this.message+=":\n\n".concat(a,"\n"))}delete this.source}}}]),n}(),wt=function(e){Oe(n,yt);var t=Te(n);function n(e,r){return _e(this,n),t.call(this,"YAMLReferenceError",e,r)}return n}(),bt=function(e){Oe(n,yt);var t=Te(n);function n(e,r){return _e(this,n),t.call(this,"YAMLSemanticError",e,r)}return n}(),kt=function(e){Oe(n,yt);var t=Te(n);function n(e,r){return _e(this,n),t.call(this,"YAMLSyntaxError",e,r)}return n}(),_t=function(e){Oe(n,yt);var t=Te(n);function n(e,r){return _e(this,n),t.call(this,"YAMLWarning",e,r)}return n}(),St=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parseBlockValue",value:function(e){for(var t=this.context,r=t.indent,i=t.inFlow,o=t.src,a=e,s=e,u=o[a];"\n"===u&&!gt.atDocumentBoundary(o,a+1);u=o[a]){var c=gt.endOfBlockIndent(o,r,a+1);if(null===c||"#"===o[c])break;a="\n"===o[c]?c:s=n.endOfLine(o,c,i)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=s,s}},{key:"parse",value:function(e,t){this.context=e;var r=e.inFlow,i=e.src,o=t,a=i[o];return a&&"#"!==a&&"\n"!==a&&(o=n.endOfLine(i,t,r)),this.valueRange=new mt(t,o),o=gt.endOfWhiteSpace(i,o),o=this.parseComment(o),this.hasComment&&!this.valueRange.isEmpty()||(o=this.parseBlockValue(o)),o}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=r[n-1];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[--n-1];for(var o="",a=t;a<n;++a){var s=r[a];if("\n"===s){var u=gt.foldNewline(r,a,-1);o+=u.fold,a=u.offset}else if(" "===s||"\t"===s){for(var c=a,l=r[a+1];a<n&&(" "===l||"\t"===l);)l=r[(a+=1)+1];"\n"!==l&&(o+=a>c?r.slice(c,a+1):s)}else o+=s}var f=r[t];switch(f){case"\t":return{errors:[new bt(this,"Plain value cannot start with a tab character")],str:o};case"@":case"`":var d="Plain value cannot start with reserved character ".concat(f);return{errors:[new bt(this,d)],str:o};default:return o}}}],[{key:"endOfLine",value:function(e,t,n){for(var r=e[t],i=t;r&&"\n"!==r&&(!n||"["!==r&&"]"!==r&&"{"!==r&&"}"!==r&&","!==r);){var o=e[i+1];if(":"===r&&(!o||"\n"===o||"\t"===o||" "===o||n&&","===o))break;if((" "===r||"\t"===r)&&"#"===o)break;i+=1,r=o}return i}}]),n}(),xt=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.call(this,Ke)}return xe(n,[{key:"parse",value:function(e,t){return this.context=e,this.range=new mt(t,t+1),t+1}},{key:"includesTrailingLines",get:function(){return!0}}]),n}(),Pt=function(e){Oe(n,gt);var t=Te(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).node=null,i}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.atLineStart,o=e.lineStart;i||this.type!==lt||(this.error=new bt(this,"Sequence items must not have preceding content on the same line"));for(var a=i?t-o:e.indent,s=gt.endOfWhiteSpace(r,t+1),u=r[s],c="#"===u,l=[],f=null;"\n"===u||"#"===u;){if("#"===u){var d=gt.endOfLine(r,s+1);l.push(new mt(s,d)),s=d}else{i=!0,o=s+1,"\n"===r[gt.endOfWhiteSpace(r,o)]&&0===l.length&&(o=(f=new xt).parse({src:r},o)),s=gt.endOfIndent(r,o)}u=r[s]}if(gt.nextNodeIsIndented(u,s-(o+a),this.type!==lt)?this.node=n({atLineStart:i,inCollection:!1,indent:a,lineStart:o,parent:this},s):u&&o>t+1&&(s=o-1),this.node){if(f){var h=e.parent.items||e.parent.contents;h&&h.push(f)}l.length&&Array.prototype.push.apply(this.props,l),s=this.node.range.end}else if(c){var p=l[0];this.props.push(p),s=p.end}else s=gt.endOfLine(r,t+1);var v=this.node?this.node.valueRange.end:s;return this.valueRange=new mt(t,v),s}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.node?this.node.setOrigRanges(e,t):t}},{key:"toString",value:function(){var e=this.context.src,t=this.node,n=this.range,r=this.value;if(null!=r)return r;var i=t?e.slice(n.start,t.range.start)+String(t):e.slice(n.start,n.end);return gt.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}}]),n}(),Ot=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.call(this,Qe)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=this.parseComment(t);return this.range=new mt(t,n),n}}]),n}();function Ct(e){for(var t=e;t instanceof Pt;)t=t.node;if(!(t instanceof Mt))return null;for(var n=t.items.length,r=-1,i=n-1;i>=0;--i){var o=t.items[i];if(o.type===Qe){var a=o.context,s=a.indent,u=a.lineStart;if(s>0&&o.range.start>=u+s)break;r=i}else{if(o.type!==Ke)break;r=i}}if(-1===r)return null;for(var c=t.items.splice(r,n-r),l=c[0].range.start;t.range.end=l,t.valueRange&&t.valueRange.end>l&&(t.valueRange.end=l),t!==e;)t=t.context.parent;return c}var Mt=function(e){Oe(n,gt);var t=Te(n);function n(e){var r;_e(this,n),r=t.call(this,e.type===lt?ct:rt);for(var i=e.props.length-1;i>=0;--i)if(e.props[i].start<e.context.lineStart){r.props=e.props.slice(0,i+1),e.props=e.props.slice(i+1);var o=e.props[0]||e.valueRange;e.range.start=o.start;break}r.items=[e];var a=Ct(e);return a&&Array.prototype.push.apply(r.items,a),r}return xe(n,null,[{key:"nextContentHasIndent",value:function(e,t,r){var i=gt.endOfLine(e,t)+1,o=e[t=gt.endOfWhiteSpace(e,i)];return!!o&&(t>=i+r||("#"===o||"\n"===o)&&n.nextContentHasIndent(e,t,r))}}]),xe(n,[{key:"parse",value:function(e,t){this.context=e;var r=e.parseNode,i=e.src,o=gt.startOfLine(i,t),a=this.items[0];a.context.parent=this,this.valueRange=mt.copy(a.valueRange);for(var s=a.range.start-a.context.lineStart,u=t,c=i[u=gt.normalizeOffset(i,u)],l=gt.endOfWhiteSpace(i,o)===u,f=!1;c;){for(;"\n"===c||"#"===c;){if(l&&"\n"===c&&!f){var d=new xt;if(u=d.parse({src:i},u),this.valueRange.end=u,u>=i.length){c=null;break}this.items.push(d),u-=1}else if("#"===c){if(u<o+s&&!n.nextContentHasIndent(i,u,s))return u;var h=new Ot;if(u=h.parse({indent:s,lineStart:o,src:i},u),this.items.push(h),this.valueRange.end=u,u>=i.length){c=null;break}}if(o=u+1,u=gt.endOfIndent(i,o),gt.atBlank(i,u)){var p=gt.endOfWhiteSpace(i,u),v=i[p];v&&"\n"!==v&&"#"!==v||(u=p)}c=i[u],l=!0}if(!c)break;if(u!==o+s&&(l||":"!==c)){if(u<o+s){o>t&&(u=o);break}if(!this.error){this.error=new kt(this,"All collection items must start at the same column")}}if(a.type===lt){if("-"!==c){o>t&&(u=o);break}}else if("-"===c&&!this.error){var m=i[u+1];if(!m||"\n"===m||"\t"===m||" "===m){this.error=new kt(this,"A collection cannot be both a mapping and a sequence")}}var g=r({atLineStart:l,inCollection:!0,indent:s,lineStart:o,parent:this},u);if(!g)return u;if(this.items.push(g),this.valueRange.end=g.valueRange.end,c=i[u=gt.normalizeOffset(i,g.range.end)],l=!1,f=g.includesTrailingLines,c){for(var y=u-1,w=i[y];" "===w||"\t"===w;)w=i[--y];"\n"===w&&(o=y+1,l=!0)}var b=Ct(g);b&&Array.prototype.push.apply(this.items,b)}return u}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){t=n.setOrigRanges(e,t)})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;for(var i=e.slice(n.start,t[0].range.start)+String(t[0]),o=1;o<t.length;++o){var a=t[o],s=a.context,u=s.atLineStart,c=s.indent;if(u)for(var l=0;l<c;++l)i+=" ";i+=String(a)}return gt.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return this.items.length>0}}]),n}(),Et=function(e){Oe(n,gt);var t=Te(n);function n(){var e;return _e(this,n),(e=t.call(this,Ze)).name=null,e}return xe(n,[{key:"parseName",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"\t"!==r&&" "!==r;)r=t[n+=1];return this.name=t.slice(e,n),n}},{key:"parseParameters",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"#"!==r;)r=t[n+=1];return this.valueRange=new mt(e,n),n}},{key:"parse",value:function(e,t){this.context=e;var n=this.parseName(t+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new mt(t,n),n}},{key:"parameters",get:function(){var e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}}]),n}(),It=function(e){Oe(n,gt);var t=Te(n);function n(){var e;return _e(this,n),(e=t.call(this,et)).directives=null,e.contents=null,e.directivesEndMarker=null,e.documentEndMarker=null,e}return xe(n,null,[{key:"startCommentOrEndBlankLine",value:function(e,t){var n=gt.endOfWhiteSpace(e,t),r=e[n];return"#"===r||"\n"===r?n:t}}]),xe(n,[{key:"parseDirectives",value:function(e){var t=this.context.src;this.directives=[];for(var r=!0,i=!1,o=e;!gt.atDocumentBoundary(t,o,Ve);)switch(t[o=n.startCommentOrEndBlankLine(t,o)]){case"\n":if(r){var a=new xt;(o=a.parse({src:t},o))<t.length&&this.directives.push(a)}else o+=1,r=!0;break;case"#":var s=new Ot;o=s.parse({src:t},o),this.directives.push(s),r=!1;break;case"%":var u=new Et;o=u.parse({parent:this,src:t},o),this.directives.push(u),i=!0,r=!1;break;default:return i?this.error=new bt(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o}return t[o]?(this.directivesEndMarker=new mt(o,o+3),o+3):(i?this.error=new bt(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o)}},{key:"parseContents",value:function(e){var t=this.context,r=t.parseNode,i=t.src;this.contents||(this.contents=[]);for(var o=e;"-"===i[o-1];)o-=1;var a=gt.endOfWhiteSpace(i,e),s=o===e;for(this.valueRange=new mt(a);!gt.atDocumentBoundary(i,a,Je);){switch(i[a]){case"\n":if(s){var u=new xt;(a=u.parse({src:i},a))<i.length&&this.contents.push(u)}else a+=1,s=!0;o=a;break;case"#":var c=new Ot;a=c.parse({src:i},a),this.contents.push(c),s=!1;break;default:var l=gt.endOfIndent(i,a),f=r({atLineStart:s,indent:-1,inFlow:!1,inCollection:!1,lineStart:o,parent:this},l);if(!f)return this.valueRange.end=l;this.contents.push(f),a=f.range.end,s=!1;var d=Ct(f);d&&Array.prototype.push.apply(this.contents,d)}a=n.startCommentOrEndBlankLine(i,a)}if(this.valueRange.end=a,i[a]&&(this.documentEndMarker=new mt(a,a+3),i[a+=3])){if("#"===i[a=gt.endOfWhiteSpace(i,a)]){var h=new Ot;a=h.parse({src:i},a),this.contents.push(h)}switch(i[a]){case"\n":a+=1;break;case void 0:break;default:this.error=new kt(this,"Document end marker line cannot have a non-comment suffix")}}return a}},{key:"parse",value:function(e,t){e.root=this,this.context=e;var n=65279===e.src.charCodeAt(t)?t+1:t;return n=this.parseDirectives(n),n=this.parseContents(n)}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.directives.forEach((function(n){t=n.setOrigRanges(e,t)})),this.directivesEndMarker&&(t=this.directivesEndMarker.setOrigRange(e,t)),this.contents.forEach((function(n){t=n.setOrigRanges(e,t)})),this.documentEndMarker&&(t=this.documentEndMarker.setOrigRange(e,t)),t}},{key:"toString",value:function(){var e=this.contents,t=this.directives,n=this.value;if(null!=n)return n;var r=t.join("");return e.length>0&&((t.length>0||e[0].type===Qe)&&(r+="---\n"),r+=e.join("")),"\n"!==r[r.length-1]&&(r+="\n"),r}}]),n}(),At=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=gt.endOfIdentifier(n,t+1);return this.valueRange=new mt(t+1,r),r=gt.endOfWhiteSpace(n,r),r=this.parseComment(r)}}]),n}(),Lt="CLIP",jt="KEEP",Tt="STRIP",Nt=function(e){Oe(n,gt);var t=Te(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).blockIndent=null,i.chomping=Lt,i.header=null,i}return xe(n,[{key:"parseBlockHeader",value:function(e){for(var t=this.context.src,n=e+1,r="";;){var i=t[n];switch(i){case"-":this.chomping=Tt;break;case"+":this.chomping=jt;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=i;break;default:return this.blockIndent=Number(r)||null,this.header=new mt(e,n),n}n+=1}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,n=t.indent,r=t.src,i=!!this.blockIndent,o=e,a=e,s=1,u=r[o];"\n"===u&&(o+=1,!gt.atDocumentBoundary(r,o));u=r[o]){var c=gt.endOfBlockIndent(r,n,o);if(null===c)break;var l=r[c],f=c-(o+n);if(this.blockIndent){if(l&&"\n"!==l&&f<this.blockIndent){if("#"===r[c])break;if(!this.error){var d="Block scalars must not be less indented than their ".concat(i?"explicit indentation indicator":"first line");this.error=new bt(this,d)}}}else if("\n"!==r[c]){if(f<s){this.error=new bt(this,"Block scalars with more-indented leading empty lines must use an explicit indentation indicator")}this.blockIndent=f}else f>s&&(s=f);o="\n"===r[c]?c:a=gt.endOfLine(r,c)}return this.chomping!==jt&&(o=r[a]?a+1:a),this.valueRange=new mt(e+1,o),o}},{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=this.parseBlockHeader(t);return r=gt.endOfWhiteSpace(n,r),r=this.parseComment(r),r=this.parseBlockValue(r)}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.header?this.header.setOrigRange(e,t):t}},{key:"includesTrailingLines",get:function(){return this.chomping===jt}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end,r=this.context,i=r.indent,o=r.src;if(this.valueRange.isEmpty())return"";for(var a=null,s=o[n-1];"\n"===s||"\t"===s||" "===s;){if((n-=1)<=t){if(this.chomping===jt)break;return""}"\n"===s&&(a=n),s=o[n-1]}var u=n+1;a&&(this.chomping===jt?(u=a,n=this.valueRange.end):n=a);for(var c=i+this.blockIndent,l=this.type===Ge,f=!0,d="",h="",p=!1,v=t;v<n;++v){for(var m=0;m<c&&" "===o[v];++m)v+=1;var g=o[v];if("\n"===g)"\n"===h?d+="\n":h="\n";else{var y=gt.endOfLine(o,v),w=o.slice(v,y);v=y,l&&(" "===g||"\t"===g)&&v<u?(" "===h?h="\n":p||f||"\n"!==h||(h="\n\n"),d+=h+w,h=y<n&&o[y]||"",p=!0):(d+=h+w,h=l&&v<u?" ":"\n",p=!1),f&&""!==w&&(f=!1)}}return this.chomping===Tt?d:d+"\n"}}]),n}(),Rt=function(e){Oe(n,gt);var t=Te(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).items=null,i}return xe(n,[{key:"prevNodeIsJsonLike",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.items[e-1];return!!t&&(t.jsonLike||t.type===Qe&&this.prevNodeIsJsonLike(e-1))}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.indent,o=e.lineStart,a=r[t];this.items=[{char:a,offset:t}];var s=gt.endOfWhiteSpace(r,t+1);for(a=r[s];a&&"]"!==a&&"}"!==a;){switch(a){case"\n":if(o=s+1,"\n"===r[gt.endOfWhiteSpace(r,o)]){var u=new xt;o=u.parse({src:r},o),this.items.push(u)}if((s=gt.endOfIndent(r,o))<=o+i&&(a=r[s],s<o+i||"]"!==a&&"}"!==a)){this.error=new bt(this,"Insufficient indentation in flow collection")}break;case",":this.items.push({char:a,offset:s}),s+=1;break;case"#":var c=new Ot;s=c.parse({src:r},s),this.items.push(c);break;case"?":case":":var l=r[s+1];if("\n"===l||"\t"===l||" "===l||","===l||":"===a&&this.prevNodeIsJsonLike()){this.items.push({char:a,offset:s}),s+=1;break}default:var f=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:o,parent:this},s);if(!f)return this.valueRange=new mt(t,s),s;this.items.push(f),s=gt.normalizeOffset(r,f.range.end)}a=r[s=gt.endOfWhiteSpace(r,s)]}return this.valueRange=new mt(t,s+1),a&&(this.items.push({char:a,offset:s}),s=gt.endOfWhiteSpace(r,s+1),s=this.parseComment(s)),s}},{key:"setOrigRanges",value:function(e,t){return t=Ne(Ce(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){if(n instanceof gt)t=n.setOrigRanges(e,t);else if(0===e.length)n.origOffset=n.offset;else{for(var r=t;r<e.length&&!(e[r]>n.offset);)++r;n.origOffset=n.offset+r,t=r}})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;var i=t.filter((function(e){return e instanceof gt})),o="",a=n.start;return i.forEach((function(t){var n=e.slice(a,t.range.start);a=t.range.end,"\n"===(o+=n+String(t))[o.length-1]&&"\n"!==e[a-1]&&"\n"===e[a]&&(a+=1)})),o+=e.slice(a,n.end),gt.addStringTerminator(e,n.end,o)}}]),n}(),Ft=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parseCharCode",value:function(e,t,n){var r=this.context.src,i=r.substr(e,t),o=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;return isNaN(o)?(n.push(new kt(this,"Invalid escape sequence ".concat(r.substr(e-2,t+2)))),r.substr(e-2,t+2)):String.fromCodePoint(o)}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new mt(t,i),i=gt.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;'"'!==a[r-1]&&e.push(new kt(this,'Missing closing "quote'));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){gt.atDocumentBoundary(a,u+1)&&e.push(new bt(this,"Document boundary indicators are not allowed within string values"));var l=gt.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new bt(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===c)switch(a[u+=1]){case"0":s+="\0";break;case"a":s+="";break;case"b":s+="\b";break;case"e":s+="";break;case"f":s+="\f";break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"v":s+="\v";break;case"N":s+="";break;case"_":s+=" ";break;case"L":s+="\u2028";break;case"P":s+="\u2029";break;case" ":s+=" ";break;case'"':s+='"';break;case"/":s+="/";break;case"\\":s+="\\";break;case"\t":s+="\t";break;case"x":s+=this.parseCharCode(u+1,2,e),u+=2;break;case"u":s+=this.parseCharCode(u+1,4,e),u+=4;break;case"U":s+=this.parseCharCode(u+1,8,e),u+=8;break;case"\n":for(;" "===a[u+1]||"\t"===a[u+1];)u+=1;break;default:e.push(new kt(this,"Invalid escape sequence ".concat(a.substr(u-1,2)))),s+="\\"+a[u]}else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n&&'"'!==n;)n=e[t+="\\"===n?2:1];return t+1}}]),n}(),Dt=function(e){Oe(n,gt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new mt(t,i),i=gt.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;"'"!==a[r-1]&&e.push(new kt(this,"Missing closing 'quote"));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){gt.atDocumentBoundary(a,u+1)&&e.push(new bt(this,"Document boundary indicators are not allowed within string values"));var l=gt.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new bt(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===c)s+=c,"'"!==a[u+=1]&&e.push(new kt(this,"Unescaped single quote? This should not happen."));else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n;)if("'"===n){if("'"!==e[t+1])break;n=e[t+=2]}else n=e[t+=1];return t+1}}]),n}();function Bt(e,t){switch(e){case Ye:return new At(e,t);case Ge:case Xe:return new Nt(e,t);case tt:case nt:return new Rt(e,t);case it:case ot:case lt:return new Pt(e,t);case Qe:case at:return new St(e,t);case st:return new Ft(e,t);case ut:return new Dt(e,t);default:return null}}var Wt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.atLineStart,o=r.inCollection,a=r.inFlow,s=r.indent,u=r.lineStart,c=r.parent;_e(this,e),Pe(this,"parseNode",(function(n,r){if(gt.atDocumentBoundary(t.src,r))return null;var i=new e(t,n),o=i.parseProps(r),a=o.props,s=o.type,u=o.valueStart,c=Bt(s,a),l=c.parse(i,u);if(c.range=new mt(r,l),l<=r&&(c.error=new Error("Node#parse consumed no characters"),c.error.parseEnd=l,c.error.source=c,c.range.end=r+1),i.nodeStartsCollection(c)){c.error||i.atLineStart||i.parent.type!==et||(c.error=new kt(c,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var f=new Mt(c);return l=f.parse(new e(i),l),f.range=new mt(r,l),f}return c})),this.atLineStart=null!=i?i:n.atLineStart||!1,this.inCollection=null!=o?o:n.inCollection||!1,this.inFlow=null!=a?a:n.inFlow||!1,this.indent=null!=s?s:n.indent,this.lineStart=null!=u?u:n.lineStart,this.parent=null!=c?c:n.parent||{},this.root=n.root,this.src=n.src}return xe(e,null,[{key:"parseType",value:function(e,t,n){switch(e[t]){case"*":return Ye;case">":return Ge;case"|":return Xe;case"{":return tt;case"[":return nt;case"?":return!n&&gt.atBlank(e,t+1,!0)?it:at;case":":return!n&&gt.atBlank(e,t+1,!0)?ot:at;case"-":return!n&&gt.atBlank(e,t+1,!0)?lt:at;case'"':return st;case"'":return ut;default:return at}}}]),xe(e,[{key:"nodeStartsCollection",value:function(e){var t=this.inCollection,n=this.inFlow,r=this.src;if(t||n)return!1;if(e instanceof Pt)return!0;var i=e.range.end;return"\n"!==r[i]&&"\n"!==r[i-1]&&":"===r[i=gt.endOfWhiteSpace(r,i)]}},{key:"parseProps",value:function(t){for(var n=this.inFlow,r=this.parent,i=this.src,o=[],a=!1,s=i[t=this.atLineStart?gt.endOfIndent(i,t):gt.endOfWhiteSpace(i,t)];s===Ue||s===qe||s===He||"\n"===s;){if("\n"===s){var u=t+1,c=gt.endOfIndent(i,u),l=c-(u+this.indent),f=r.type===lt&&r.context.atLineStart;if(!gt.nextNodeIsIndented(i[c],l,!f))break;this.atLineStart=!0,this.lineStart=u,a=!1,t=c}else if(s===qe){var d=gt.endOfLine(i,t+1);o.push(new mt(t,d)),t=d}else{var h=gt.endOfIdentifier(i,t+1);s===He&&","===i[h]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(t+1,h+13))&&(h=gt.endOfIdentifier(i,h+5)),o.push(new mt(t,h)),a=!0,t=gt.endOfWhiteSpace(i,h)}s=i[t]}return a&&":"===s&&gt.atBlank(i,t+1,!0)&&(t-=1),{props:o,type:e.parseType(i,t,n),valueStart:t}}}]),e}();function zt(e){var t=[];-1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,(function(e,n){return e.length>1&&t.push(n),"\n"})));var n=[],r=0;do{var i=new It,o=new Wt({src:e});r=i.parse(o,r),n.push(i)}while(r<e.length);return n.setOrigRanges=function(){if(0===t.length)return!1;for(var e=1;e<t.length;++e)t[e]-=e;for(var r=0,i=0;i<n.length;++i)r=n[i].setOrigRanges(t,r);return t.splice(0,t.length),!0},n.toString=function(){return n.join("...\n")},n}function $t(e,t,n){return n?-1===n.indexOf("\n")?"".concat(e," #").concat(n):"".concat(e,"\n")+n.replace(/^/gm,"".concat(t||"","#")):e}var Ut=function e(){_e(this,e)};function qt(e,t,n){if(Array.isArray(e))return e.map((function(e,t){return qt(e,String(t),n)}));if(e&&"function"==typeof e.toJSON){var r=n&&n.anchors&&n.anchors.get(e);r&&(n.onCreate=function(e){r.res=e,delete n.onCreate});var i=e.toJSON(t,n);return r&&n.onCreate&&n.onCreate(i),i}return n&&n.keep||"bigint"!=typeof e?e:Number(e)}var Ht=function(e){Oe(n,Ut);var t=Te(n);function n(e){var r;return _e(this,n),(r=t.call(this)).value=e,r}return xe(n,[{key:"toJSON",value:function(e,t){return t&&t.keep?this.value:qt(this.value,e,t)}},{key:"toString",value:function(){return String(this.value)}}]),n}();function Vt(e,t,n){for(var r=n,i=t.length-1;i>=0;--i){var o=t[i],a=Number.isInteger(o)&&o>=0?[]:{};a[o]=r,r=a}return e.createNode(r,!1)}var Jt=function(e){return null==e||"object"===ke(e)&&e[Symbol.iterator]().next().done},Yt=function(e){Oe(n,Ut);var t=Te(n);function n(e){var r;return _e(this,n),Pe(Le(r=t.call(this)),"items",[]),r.schema=e,r}return xe(n,[{key:"addIn",value:function(e,t){if(Jt(e))this.add(t);else{var r=Fe(e),i=r[0],o=r.slice(1),a=this.get(i,!0);if(a instanceof n)a.addIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,Vt(this.schema,o,t))}}}},{key:"deleteIn",value:function(e){var t=Fe(e),r=t[0],i=t.slice(1);if(0===i.length)return this.delete(r);var o=this.get(r,!0);if(o instanceof n)return o.deleteIn(i);throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(i))}},{key:"getIn",value:function(e,t){var r=Fe(e),i=r[0],o=r.slice(1),a=this.get(i,!0);return 0===o.length?!t&&a instanceof Ht?a.value:a:a instanceof n?a.getIn(o,t):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every((function(e){if(!e||"PAIR"!==e.type)return!1;var t=e.value;return null==t||t instanceof Ht&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag}))}},{key:"hasIn",value:function(e){var t=Fe(e),r=t[0],i=t.slice(1);if(0===i.length)return this.has(r);var o=this.get(r,!0);return o instanceof n&&o.hasIn(i)}},{key:"setIn",value:function(e,t){var r=Fe(e),i=r[0],o=r.slice(1);if(0===o.length)this.set(i,t);else{var a=this.get(i,!0);if(a instanceof n)a.setIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,Vt(this.schema,o,t))}}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(e,t,r,i){var o=this,a=t.blockItem,s=t.flowChars,u=t.isMap,c=t.itemIndent,l=e,f=l.indent,d=l.indentStep,h=l.stringify,p=this.type===tt||this.type===nt||e.inFlow;p&&(c+=d);var v=u&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:v,indent:c,inFlow:p,type:null});var m,g=!1,y=!1,w=this.items.reduce((function(t,n,r){var i;n&&(!g&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore&&n.commentBefore.match(/^.*$/gm).forEach((function(e){t.push({type:"comment",str:"#".concat(e)})})),n.comment&&(i=n.comment),p&&(!g&&n.spaceBefore||n.commentBefore||n.comment||n.key&&(n.key.commentBefore||n.key.comment)||n.value&&(n.value.commentBefore||n.value.comment))&&(y=!0)),g=!1;var a=h(n,e,(function(){return i=null}),(function(){return g=!0}));return p&&!y&&a.includes("\n")&&(y=!0),p&&r<o.items.length-1&&(a+=","),a=$t(a,c,i),g&&(i||p)&&(g=!1),t.push({type:"item",str:a}),t}),[]);if(0===w.length)m=s.start+s.end;else if(p){var b=s.start,k=s.end,_=w.map((function(e){return e.str}));if(y||_.reduce((function(e,t){return e+t.length+2}),2)>n.maxFlowStringSingleLineLength){m=b;var S,x=$e(_);try{for(x.s();!(S=x.n()).done;){var P=S.value;m+=P?"\n".concat(d).concat(f).concat(P):"\n"}}catch(e){x.e(e)}finally{x.f()}m+="\n".concat(f).concat(k)}else m="".concat(b," ").concat(_.join(" ")," ").concat(k)}else{var O=w.map(a);m=O.shift();var C,M=$e(O);try{for(M.s();!(C=M.n()).done;){var E=C.value;m+=E?"\n".concat(f).concat(E):"\n"}}catch(e){M.e(e)}finally{M.f()}}return this.comment?(m+="\n"+this.comment.replace(/^/gm,"".concat(f,"#")),r&&r()):g&&i&&i(),m}}]),n}();function Kt(e){var t=e instanceof Ht?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),Number.isInteger(t)&&t>=0?t:null}Pe(Yt,"maxFlowStringSingleLineLength",60);var Gt=function(e){Oe(n,Yt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"add",value:function(e){this.items.push(e)}},{key:"delete",value:function(e){var t=Kt(e);return"number"==typeof t&&this.items.splice(t,1).length>0}},{key:"get",value:function(e,t){var n=Kt(e);if("number"==typeof n){var r=this.items[n];return!t&&r instanceof Ht?r.value:r}}},{key:"has",value:function(e){var t=Kt(e);return"number"==typeof t&&t<this.items.length}},{key:"set",value:function(e,t){var n=Kt(e);if("number"!=typeof n)throw new Error("Expected a valid index, not ".concat(e,"."));this.items[n]=t}},{key:"toJSON",value:function(e,t){var n=[];t&&t.onCreate&&t.onCreate(n);var r,i=0,o=$e(this.items);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.push(qt(a,String(i++),t))}}catch(e){o.e(e)}finally{o.f()}return n}},{key:"toString",value:function(e,t,r){return e?Ne(Ce(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return"comment"===e.type?e.str:"- ".concat(e.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},t,r):JSON.stringify(this)}}]),n}(),Xt=function(e){Oe(n,Ut);var t=Te(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _e(this,n),(r=t.call(this)).key=e,r.value=i,r.type=n.Type.PAIR,r}return xe(n,[{key:"addToJSMap",value:function(e,t){var n=qt(this.key,"",e);if(t instanceof Map){var r=qt(this.value,n,e);t.set(n,r)}else if(t instanceof Set)t.add(n);else{var i=function(e,t,n){return null===t?"":"object"!==ke(t)?String(t):e instanceof Ut&&n&&n.doc?e.toString({anchors:{},doc:n.doc,indent:"",indentStep:n.indentStep,inFlow:!0,inStringifyKey:!0,stringify:n.stringify}):JSON.stringify(t)}(this.key,n,e);t[i]=qt(this.value,i,e)}return t}},{key:"toJSON",value:function(e,t){var n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}},{key:"toString",value:function(e,t,n){if(!e||!e.doc)return JSON.stringify(this);var r=e.doc.options,i=r.indent,o=r.indentSeq,a=r.simpleKeys,s=this.key,u=this.value,c=s instanceof Ut&&s.comment;if(a){if(c)throw new Error("With simple keys, key nodes cannot have comments");if(s instanceof Yt){throw new Error("With simple keys, collection cannot be used as a key value")}}var l=!a&&(!s||c||s instanceof Yt||s.type===Ge||s.type===Xe),f=e,d=f.doc,h=f.indent,p=f.indentStep,v=f.stringify;e=Object.assign({},e,{implicitKey:!l,indent:h+p});var m=!1,g=v(s,e,(function(){return c=null}),(function(){return m=!0}));if(g=$t(g,e.indent,c),e.allNullValues&&!a)return this.comment?(g=$t(g,e.indent,this.comment),t&&t()):m&&!c&&n&&n(),e.inFlow?g:"? ".concat(g);g=l?"? ".concat(g,"\n").concat(h,":"):"".concat(g,":"),this.comment&&(g=$t(g,e.indent,this.comment),t&&t());var y="",w=null;if(u instanceof Ut){if(u.spaceBefore&&(y="\n"),u.commentBefore){var b=u.commentBefore.replace(/^/gm,"".concat(e.indent,"#"));y+="\n".concat(b)}w=u.comment}else u&&"object"===ke(u)&&(u=d.schema.createNode(u,!0));e.implicitKey=!1,!l&&!this.comment&&u instanceof Ht&&(e.indentAtStart=g.length+1),m=!1,!o&&i>=2&&!e.inFlow&&!l&&u instanceof Gt&&u.type!==nt&&!u.tag&&!d.anchors.getName(u)&&(e.indent=e.indent.substr(2));var k=v(u,e,(function(){return w=null}),(function(){return m=!0})),_=" ";if(y||this.comment)_="".concat(y,"\n").concat(e.indent);else if(!l&&u instanceof Yt){("["===k[0]||"{"===k[0])&&!k.includes("\n")||(_="\n".concat(e.indent))}return m&&!w&&n&&n(),$t(g+_+k,e.indent,w)}},{key:"commentBefore",get:function(){return this.key instanceof Ut?this.key.commentBefore:void 0},set:function(e){if(null==this.key&&(this.key=new Ht(null)),!(this.key instanceof Ut)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}}]),n}();Pe(Xt,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var Qt=function(e){Oe(n,Ut);var t=Te(n);function n(e){var r;return _e(this,n),(r=t.call(this)).source=e,r.type=Ye,r}return xe(n,null,[{key:"stringify",value:function(e,t){var n=e.range,r=e.source,i=t.anchors,o=t.doc,a=t.implicitKey,s=t.inStringifyKey,u=Object.keys(i).find((function(e){return i[e]===r}));if(!u&&s&&(u=o.anchors.getName(r)||o.anchors.newName()),u)return"*".concat(u).concat(a?" ":"");var c=o.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(c," [").concat(n,"]"))}}]),xe(n,[{key:"toJSON",value:function(e,t){if(!t)return qt(this.source,e,t);var n=t.anchors,r=t.maxAliasCount,i=n.get(this.source);if(!i||void 0===i.res){var o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new wt(this.cstNode,o):new ReferenceError(o)}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=function e(t,n){if(t instanceof Qt){var r=n.get(t.source);return r.count*r.aliasCount}if(t instanceof Yt){var i,o=0,a=$e(t.items);try{for(a.s();!(i=a.n()).done;){var s=e(i.value,n);s>o&&(o=s)}}catch(e){a.e(e)}finally{a.f()}return o}if(t instanceof Xt){var u=e(t.key,n),c=e(t.value,n);return Math.max(u,c)}return 1}(this.source,n)),i.count*i.aliasCount>r)){var a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new wt(this.cstNode,a):new ReferenceError(a)}return i.res}},{key:"toString",value:function(e){return n.stringify(this,e)}},{key:"tag",set:function(e){throw new Error("Alias nodes cannot have tags")}}]),n}();function Zt(e,t){var n,r=t instanceof Ht?t.value:t,i=$e(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof Xt){if(o.key===t||o.key===r)return o;if(o.key&&o.key.value===r)return o}}}catch(e){i.e(e)}finally{i.f()}}Pe(Qt,"default",!0);var en=function(e){Oe(n,Yt);var t=Te(n);function n(){return _e(this,n),t.apply(this,arguments)}return xe(n,[{key:"add",value:function(e,t){e?e instanceof Xt||(e=new Xt(e.key||e,e.value)):e=new Xt(e);var n=Zt(this.items,e.key),r=this.schema&&this.schema.sortMapEntries;if(n){if(!t)throw new Error("Key ".concat(e.key," already set"));n.value=e.value}else if(r){var i=this.items.findIndex((function(t){return r(e,t)<0}));-1===i?this.items.push(e):this.items.splice(i,0,e)}else this.items.push(e)}},{key:"delete",value:function(e){var t=Zt(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}},{key:"get",value:function(e,t){var n=Zt(this.items,e),r=n&&n.value;return!t&&r instanceof Ht?r.value:r}},{key:"has",value:function(e){return!!Zt(this.items,e)}},{key:"set",value:function(e,t){this.add(new Xt(e,t),!0)}},{key:"toJSON",value:function(e,t,n){var r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);var i,o=$e(this.items);try{for(o.s();!(i=o.n()).done;){i.value.addToJSMap(t,r)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);var i,o=$e(this.items);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!(a instanceof Xt))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(a)," instead"))}}catch(e){o.e(e)}finally{o.f()}return Ne(Ce(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},t,r)}}]),n}(),tn=function(e){Oe(n,Xt);var t=Te(n);function n(e){var r;if(_e(this,n),e instanceof Xt){var i=e.value;i instanceof Gt||((i=new Gt).items.push(e.value),i.range=e.value.range),(r=t.call(this,e.key,i)).range=e.range}else r=t.call(this,new Ht("<<"),new Gt);return r.type=Xt.Type.MERGE_PAIR,je(r)}return xe(n,[{key:"addToJSMap",value:function(e,t){var n,r=$e(this.value.items);try{for(r.s();!(n=r.n()).done;){var i=n.value.source;if(!(i instanceof en))throw new Error("Merge sources must be maps");var o,a=$e(i.toJSON(null,e,Map));try{for(a.s();!(o=a.n()).done;){var s=Re(o.value,2),u=s[0],c=s[1];t instanceof Map?t.has(u)||t.set(u,c):t instanceof Set?t.add(u):Object.prototype.hasOwnProperty.call(t,u)||(t[u]=c)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"toString",value:function(e,t){var r=this.value;if(r.items.length>1)return Ne(Ce(n.prototype),"toString",this).call(this,e,t);this.value=r.items[0];var i=Ne(Ce(n.prototype),"toString",this).call(this,e,t);return this.value=r,i}}]),n}(),nn={defaultType:Xe,lineWidth:76},rn={trueStr:"true",falseStr:"false"},on={asBigInt:!1},an={nullStr:"null"},sn={defaultType:at,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function un(e,t,n){var r,i=$e(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.format,s=o.test,u=o.resolve;if(s){var c=e.match(s);if(c){var l=u.apply(null,c);return l instanceof Ht||(l=new Ht(l)),a&&(l.format=a),l}}}}catch(e){i.e(e)}finally{i.f()}return n&&(e=n(e)),new Ht(e)}var cn=function(e,t){for(var n=e[t+1];" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t};function ln(e,t,n,r){var i=r.indentAtStart,o=r.lineWidth,a=void 0===o?80:o,s=r.minContentWidth,u=void 0===s?20:s,c=r.onFold,l=r.onOverflow;if(!a||a<0)return e;var f=Math.max(1+u,1+a-t.length);if(e.length<=f)return e;var d,h=[],p={},v=a-("number"==typeof i?i:t.length),m=void 0,g=void 0,y=!1,w=-1;for("block"===n&&-1!==(w=cn(e,w))&&(v=w+f);d=e[w+=1];){if("quoted"===n&&"\\"===d)switch(e[w+1]){case"x":w+=3;break;case"u":w+=5;break;case"U":w+=9;break;default:w+=1}if("\n"===d)"block"===n&&(w=cn(e,w)),v=w+f,m=void 0;else{if(" "===d&&g&&" "!==g&&"\n"!==g&&"\t"!==g){var b=e[w+1];b&&" "!==b&&"\n"!==b&&"\t"!==b&&(m=w)}if(w>=v)if(m)h.push(m),v=m+f,m=void 0;else if("quoted"===n){for(;" "===g||"\t"===g;)g=d,d=e[w+=1],y=!0;h.push(w-2),p[w-2]=!0,v=w-2+f,m=void 0}else y=!0}g=d}if(y&&l&&l(),0===h.length)return e;c&&c();for(var k=e.slice(0,h[0]),_=0;_<h.length;++_){var S=h[_],x=h[_+1]||e.length;"quoted"===n&&p[S]&&(k+="".concat(e[S],"\\")),k+="\n".concat(t).concat(e.slice(S+1,x))}return k}var fn=function(e){var t=e.indentAtStart;return t?Object.assign({indentAtStart:t},sn.fold):sn.fold},dn=function(e){return/^(%|---|\.\.\.)/m.test(e)};function hn(e,t){var n=t.implicitKey,r=sn.doubleQuoted,i=r.jsonEncoding,o=r.minMultiLineLength,a=JSON.stringify(e);if(i)return a;for(var s=t.indent||(dn(e)?"  ":""),u="",c=0,l=0,f=a[l];f;f=a[++l])if(" "===f&&"\\"===a[l+1]&&"n"===a[l+2]&&(u+=a.slice(c,l)+"\\ ",c=l+=1,f="\\"),"\\"===f)switch(a[l+1]){case"u":u+=a.slice(c,l);var d=a.substr(l+2,4);switch(d){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:"00"===d.substr(0,2)?u+="\\x"+d.substr(2):u+=a.substr(l,6)}c=(l+=5)+1;break;case"n":if(n||'"'===a[l+2]||a.length<o)l+=1;else{for(u+=a.slice(c,l)+"\n\n";"\\"===a[l+2]&&"n"===a[l+3]&&'"'!==a[l+4];)u+="\n",l+=2;u+=s," "===a[l+2]&&(u+="\\"),c=(l+=1)+1}break;default:l+=1}return u=c?u+a.slice(c):a,n?u:ln(u,s,"quoted",fn(t))}function pn(e,t){if(t.implicitKey){if(/\n/.test(e))return hn(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return hn(e,t);var n=t.indent||(dn(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(n))+"'";return t.implicitKey?r:ln(r,n,"flow",fn(t))}function vn(e,t,n,r){var i=e.comment,o=e.type,a=e.value;if(/\n[\t ]+$/.test(a)||/^\s*$/.test(a))return hn(a,t);var s=t.indent||(t.forceBlockIndent||dn(a)?"  ":""),u=s?"2":"1",c=o!==Ge&&(o===Xe||!function(e,t){var n=e.length;if(n<=t)return!1;for(var r=0,i=0;r<n;++r)if("\n"===e[r]){if(r-i>t)return!0;if(n-(i=r+1)<=t)return!1}return!0}(a,sn.fold.lineWidth-s.length)),l=c?"|":">";if(!a)return l+"\n";var f="",d="";if(a=a.replace(/[\n\t ]*$/,(function(e){var t=e.indexOf("\n");return-1===t?l+="-":a!==e&&t===e.length-1||(l+="+",r&&r()),d=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(function(e){-1!==e.indexOf(" ")&&(l+=u);var t=e.match(/ +$/);return t?(f=e.slice(0,-t[0].length),t[0]):(f=e,"")})),d&&(d=d.replace(/\n+(?!\n|$)/g,"$&".concat(s))),f&&(f=f.replace(/\n+/g,"$&".concat(s))),i&&(l+=" #"+i.replace(/ ?[\r\n]+/g," "),n&&n()),!a)return"".concat(l).concat(u,"\n").concat(s).concat(d);if(c)return a=a.replace(/\n+/g,"$&".concat(s)),"".concat(l,"\n").concat(s).concat(f).concat(a).concat(d);a=a.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(s));var h=ln("".concat(f).concat(a).concat(d),s,"block",sn.fold);return"".concat(l,"\n").concat(s).concat(h)}function mn(e,t,n,r){var i=sn.defaultType,o=t.implicitKey,a=t.inFlow,s=e,u=s.type,c=s.value;"string"!=typeof c&&(c=String(c),e=Object.assign({},e,{value:c}));var l=function(i){switch(i){case Ge:case Xe:return vn(e,t,n,r);case st:return hn(c,t);case ut:return pn(c,t);case at:return function(e,t,n,r){var i=e.comment,o=e.type,a=e.value,s=t.actualString,u=t.implicitKey,c=t.indent,l=t.inFlow;if(u&&/[\n[\]{},]/.test(a)||l&&/[[\]{},]/.test(a))return hn(a,t);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return u||l||-1===a.indexOf("\n")?-1!==a.indexOf('"')&&-1===a.indexOf("'")?pn(a,t):hn(a,t):vn(e,t,n,r);if(!u&&!l&&o!==at&&-1!==a.indexOf("\n"))return vn(e,t,n,r);if(""===c&&dn(a))return t.forceBlockIndent=!0,vn(e,t,n,r);var f=a.replace(/\n+/g,"$&\n".concat(c));if(s){var d=t.doc.schema.tags;if("string"!=typeof un(f,d,d.scalarFallback).value)return hn(a,t)}var h=u?f:ln(f,c,"flow",fn(t));return!i||l||-1===h.indexOf("\n")&&-1===i.indexOf("\n")?h:(n&&n(),function(e,t,n){if(!n)return e;var r=n.replace(/[\s\S]^/gm,"$&".concat(t,"#"));return"#".concat(r,"\n").concat(t).concat(e)}(h,c,i))}(e,t,n,r);default:return null}};u!==st&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(c)?u=st:!o&&!a||u!==Ge&&u!==Xe||(u=st);var f=l(u);if(null===f&&null===(f=l(i)))throw new Error("Unsupported default string type ".concat(i));return f}function gn(e){var t=e.format,n=e.minFractionDigits,r=e.tag,i=e.value;if("bigint"==typeof i)return String(i);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";var o=JSON.stringify(i);if(!t&&n&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(o)){var a=o.indexOf(".");a<0&&(a=o.length,o+=".");for(var s=n-(o.length-a-1);s-- >0;)o+="0"}return o}function yn(e,t){var n,r,i;switch(t.type){case tt:n="}",r="flow map";break;case nt:n="]",r="flow sequence";break;default:return void e.push(new bt(t,"Not a flow collection!?"))}for(var o=t.items.length-1;o>=0;--o){var a=t.items[o];if(!a||a.type!==Qe){i=a;break}}if(i&&i.char!==n){var s,u="Expected ".concat(r," to end with ").concat(n);"number"==typeof i.offset?(s=new bt(t,u)).offset=i.offset+1:(s=new bt(i,u),i.range&&i.range.end&&(s.offset=i.range.end-i.range.start)),e.push(s)}}function wn(e,t){var n=t.context.src[t.range.start-1];if("\n"!==n&&"\t"!==n&&" "!==n){e.push(new bt(t,"Comments must be separated from other tokens by white space characters"))}}function bn(e,t){var n=String(t),r=n.substr(0,8)+"..."+n.substr(-8);return new bt(e,'The "'.concat(r,'" key is too long'))}function kn(e,t){var n,r=$e(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.afterKey,a=i.before,s=i.comment,u=e.items[a];u?(o&&u.value&&(u=u.value),void 0===s?!o&&u.commentBefore||(u.spaceBefore=!0):u.commentBefore?u.commentBefore+="\n"+s:u.commentBefore=s):void 0!==s&&(e.comment?e.comment+="\n"+s:e.comment=s)}}catch(e){r.e(e)}finally{r.f()}}function _n(e,t){var n=t.strValue;return n?"string"==typeof n?n:(n.errors.forEach((function(n){n.source||(n.source=t),e.errors.push(n)})),n.str):""}function Sn(e,t){var n=t.tag,r=t.type,i=!1;if(n){var o=n.handle,a=n.suffix,s=n.verbatim;if(s){if("!"!==s&&"!!"!==s)return s;var u="Verbatim tags aren't resolved, so ".concat(s," is invalid.");e.errors.push(new bt(t,u))}else if("!"!==o||a)try{return function(e,t){var n=t.tag,r=n.handle,i=n.suffix,o=e.tagPrefixes.find((function(e){return e.handle===r}));if(!o){var a=e.getDefaults().tagPrefixes;if(a&&(o=a.find((function(e){return e.handle===r}))),!o)throw new bt(t,"The ".concat(r," tag handle is non-default and was not declared."))}if(!i)throw new bt(t,"The ".concat(r," tag has no suffix."));if("!"===r&&"1.0"===(e.version||e.options.version)){if("^"===i[0])return e.warnings.push(new _t(t,"YAML 1.0 ^ tag expansion is not supported")),i;if(/[:/]/.test(i)){var s=i.match(/^([a-z0-9-]+)\/(.*)/i);return s?"tag:".concat(s[1],".yaml.org,2002:").concat(s[2]):"tag:".concat(i)}}return o.prefix+decodeURIComponent(i)}(e,t)}catch(t){e.errors.push(t)}else i=!0}switch(r){case Ge:case Xe:case st:case ut:return ft.STR;case tt:case rt:return ft.MAP;case nt:case ct:return ft.SEQ;case at:return i?ft.STR:null;default:return null}}function xn(e,t,n){var r,i=e.schema.tags,o=[],a=$e(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.tag===n){if(!s.test){var u=s.resolve(e,t);return u instanceof Yt?u:new Ht(u)}o.push(s)}}}catch(e){a.e(e)}finally{a.f()}var c=_n(e,t);return"string"==typeof c&&o.length>0?un(c,o,i.scalarFallback):null}function Pn(e,t,n){try{var r=xn(e,t,n);if(r)return n&&t.tag&&(r.tag=n),r}catch(n){return n.source||(n.source=t),e.errors.push(n),null}try{var i=function(e){switch(e.type){case tt:case rt:return ft.MAP;case nt:case ct:return ft.SEQ;default:return ft.STR}}(t);if(!i)throw new Error("The tag ".concat(n," is unavailable"));var o="The tag ".concat(n," is unavailable, falling back to ").concat(i);e.warnings.push(new _t(t,o));var a=xn(e,t,i);return a.tag=n,a}catch(n){var s=new wt(t,n.message);return s.stack=n.stack,e.errors.push(s),null}}function On(e,t){var n,r={before:[],after:[]},i=!1,o=!1,a=$e(function(e){if(!e)return!1;var t=e.type;return t===it||t===ot||t===lt}(t.context.parent)?t.context.parent.props.concat(t.props):t.props);try{for(a.s();!(n=a.n()).done;){var s=n.value,u=s.start,c=s.end;switch(t.context.src[u]){case qe:if(!t.commentHasRequiredWhitespace(u)){e.push(new bt(t,"Comments must be separated from other tokens by white space characters"))}var l=t.header,f=t.valueRange;(f&&(u>f.start||l&&u>l.start)?r.after:r.before).push(t.context.src.slice(u+1,c));break;case Ue:if(i){e.push(new bt(t,"A node can have at most one anchor"))}i=!0;break;case He:if(o){e.push(new bt(t,"A node can have at most one tag"))}o=!0}}}catch(e){a.e(e)}finally{a.f()}return{comments:r,hasAnchor:i,hasTag:o}}function Cn(e,t){if(!t)return null;t.error&&e.errors.push(t.error);var n=On(e.errors,t),r=n.comments,i=n.hasAnchor,o=n.hasTag;if(i){var a=e.anchors,s=t.anchor,u=a.getNode(s);u&&(a.map[a.newName(s)]=u),a.map[s]=t}if(t.type===Ye&&(i||o)){e.errors.push(new bt(t,"An alias node must not specify any properties"))}var c=function(e,t){var n=e.anchors,r=e.errors,i=e.schema;if(t.type===Ye){var o=t.rawValue,a=n.getNode(o);if(!a){var s="Aliased anchor not found: ".concat(o);return r.push(new wt(t,s)),null}var u=new Qt(a);return n._cstAliases.push(u),u}var c=Sn(e,t);if(c)return Pn(e,t,c);if(t.type!==at){var l="Failed to resolve ".concat(t.type," node here");return r.push(new kt(t,l)),null}try{return un(_n(e,t),i.tags,i.tags.scalarFallback)}catch(e){return e.source||(e.source=t),r.push(e),null}}(e,t);if(c){c.range=[t.range.start,t.range.end],e.options.keepCstNodes&&(c.cstNode=t),e.options.keepNodeTypes&&(c.type=t.type);var l=r.before.join("\n");l&&(c.commentBefore=c.commentBefore?"".concat(c.commentBefore,"\n").concat(l):l);var f=r.after.join("\n");f&&(c.comment=c.comment?"".concat(c.comment,"\n").concat(f):f)}return t.resolved=c}function Mn(e,t){if(t.type!==rt&&t.type!==tt){var n="A ".concat(t.type," node cannot be resolved as a mapping");return e.errors.push(new kt(t,n)),null}var r=t.type===tt?function(e,t){for(var n=[],r=[],i=void 0,o=!1,a="{",s=0;s<t.items.length;++s){var u=t.items[s];if("string"==typeof u.char){var c=u.char,l=u.offset;if("?"===c&&void 0===i&&!o){o=!0,a=":";continue}if(":"===c){if(void 0===i&&(i=null),":"===a){a=",";continue}}else if(o&&(void 0===i&&","!==c&&(i=null),o=!1),void 0!==i&&(r.push(new Xt(i)),i=void 0,","===c)){a=":";continue}if("}"===c){if(s===t.items.length-1)continue}else if(c===a){a=":";continue}var f="Flow map contains an unexpected ".concat(c),d=new kt(t,f);d.offset=l,e.errors.push(d)}else u.type===Ke?n.push({afterKey:!!i,before:r.length}):u.type===Qe?(wn(e.errors,u),n.push({afterKey:!!i,before:r.length,comment:u.comment})):void 0===i?(","===a&&e.errors.push(new bt(u,"Separator , missing in flow map")),i=Cn(e,u)):(","!==a&&e.errors.push(new bt(u,"Indicator : missing in flow map entry")),r.push(new Xt(i,Cn(e,u))),i=void 0,o=!1)}yn(e.errors,t),void 0!==i&&r.push(new Xt(i));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=void 0,o=null,a=0;a<t.items.length;++a){var s=t.items[a];switch(s.type){case Ke:n.push({afterKey:!!i,before:r.length});break;case Qe:n.push({afterKey:!!i,before:r.length,comment:s.comment});break;case it:void 0!==i&&r.push(new Xt(i)),s.error&&e.errors.push(s.error),i=Cn(e,s.node),o=null;break;case ot:if(void 0===i&&(i=null),s.error&&e.errors.push(s.error),!s.context.atLineStart&&s.node&&s.node.type===rt&&!s.node.context.atLineStart){e.errors.push(new bt(s.node,"Nested mappings are not allowed in compact mappings"))}var u=s.node;if(!u&&s.props.length>0){(u=new St(at,[])).context={parent:s,src:s.context.src};var c=s.range.start+1;if(u.range={start:c,end:c},u.valueRange={start:c,end:c},"number"==typeof s.range.origStart){var l=s.range.origStart+1;u.range.origStart=u.range.origEnd=l,u.valueRange.origStart=u.valueRange.origEnd=l}}var f=new Xt(i,Cn(e,u));En(s,f),r.push(f),i&&"number"==typeof o&&s.range.start>o+1024&&e.errors.push(bn(t,i)),i=void 0,o=null;break;default:void 0!==i&&r.push(new Xt(i)),i=Cn(e,s),o=s.range.start,s.error&&e.errors.push(s.error);e:for(var d=a+1;;++d){var h=t.items[d];switch(h&&h.type){case Ke:case Qe:continue e;case ot:break e;default:e.errors.push(new bt(s,"Implicit map keys need to be followed by map values"));break e}}if(s.valueRangeContainsNewline){e.errors.push(new bt(s,"Implicit map keys need to be on a single line"))}}}void 0!==i&&r.push(new Xt(i));return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new en;a.items=o,kn(a,i);for(var s=!1,u=0;u<o.length;++u){var c=o[u].key;if(c instanceof Yt&&(s=!0),e.schema.merge&&c&&"<<"===c.value){o[u]=new tn(o[u]);var l=o[u].value.items,f=null;l.some((function(e){if(e instanceof Qt){var t=e.source.type;return t!==rt&&t!==tt&&(f="Merge nodes aliases can only point to maps")}return f="Merge nodes can only have Alias nodes as values"})),f&&e.errors.push(new bt(t,f))}else for(var d=u+1;d<o.length;++d){var h=o[d].key;if(c===h||c&&h&&Object.prototype.hasOwnProperty.call(c,"value")&&c.value===h.value){var p='Map keys must be unique; "'.concat(c,'" is repeated');e.errors.push(new bt(t,p));break}}}if(s&&!e.options.mapAsMap){e.warnings.push(new _t(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}function En(e,t){if(function(e){var t=e.context,n=t.lineStart,r=t.node,i=t.src,o=e.props;if(0===o.length)return!1;var a=o[0].start;if(r&&a>r.valueRange.start)return!1;if(i[a]!==qe)return!1;for(var s=n;s<a;++s)if("\n"===i[s])return!1;return!0}(e)){var n=e.getPropValue(0,qe,!0),r=!1,i=t.value.commentBefore;if(i&&i.startsWith(n))t.value.commentBefore=i.substr(n.length+1),r=!0;else{var o=t.value.comment;!e.node&&o&&o.startsWith(n)&&(t.value.comment=o.substr(n.length+1),r=!0)}r&&(t.comment=n)}}function In(e,t){if(t.type!==ct&&t.type!==nt){var n="A ".concat(t.type," node cannot be resolved as a sequence");return e.errors.push(new kt(t,n)),null}var r=t.type===nt?function(e,t){for(var n=[],r=[],i=!1,o=void 0,a=null,s="[",u=null,c=0;c<t.items.length;++c){var l=t.items[c];if("string"==typeof l.char){var f=l.char,d=l.offset;if(":"===f||!i&&void 0===o||(i&&void 0===o&&(o=s?r.pop():null),r.push(new Xt(o)),i=!1,o=void 0,a=null),f===s)s=null;else if(s||"?"!==f){if("["!==s&&":"===f&&void 0===o){if(","===s){if((o=r.pop())instanceof Xt){var h=new bt(t,"Chaining flow sequence pairs is invalid");h.offset=d,e.errors.push(h)}if(!i&&"number"==typeof a){var p=l.range?l.range.start:l.offset;p>a+1024&&e.errors.push(bn(t,o));for(var v=u.context.src,m=a;m<p;++m)if("\n"===v[m]){e.errors.push(new bt(u,"Implicit keys of flow sequence pairs need to be on a single line"));break}}}else o=null;a=null,i=!1,s=null}else if("["===s||"]"!==f||c<t.items.length-1){var g="Flow sequence contains an unexpected ".concat(f),y=new kt(t,g);y.offset=d,e.errors.push(y)}}else i=!0}else if(l.type===Ke)n.push({before:r.length});else if(l.type===Qe)wn(e.errors,l),n.push({comment:l.comment,before:r.length});else{if(s){var w="Expected a ".concat(s," in flow sequence");e.errors.push(new bt(l,w))}var b=Cn(e,l);void 0===o?(r.push(b),u=l):(r.push(new Xt(o,b)),o=void 0),a=l.range.start,s=","}}yn(e.errors,t),void 0!==o&&r.push(new Xt(o));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=0;i<t.items.length;++i){var o=t.items[i];switch(o.type){case Ke:n.push({before:r.length});break;case Qe:n.push({comment:o.comment,before:r.length});break;case lt:if(o.error&&e.errors.push(o.error),r.push(Cn(e,o.node)),o.hasProps){e.errors.push(new bt(o,"Sequence items cannot have tags or anchors before the - indicator"))}break;default:o.error&&e.errors.push(o.error),e.errors.push(new kt(o,"Unexpected ".concat(o.type," node in sequence")))}}return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new Gt;if(a.items=o,kn(a,i),!e.options.mapAsMap&&o.some((function(e){return e instanceof Xt&&e.key instanceof Yt}))){e.warnings.push(new _t(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}var An={identify:function(e){return e instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(e,t){var n=_n(e,t);if("function"==typeof Buffer)return Buffer.from(n,"base64");if("function"==typeof atob){for(var r=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}return e.errors.push(new wt(t,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:nn,stringify:function(e,t,n,r){var i,o=e.comment,a=e.type,s=e.value;if("function"==typeof Buffer)i=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var u="",c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);i=btoa(u)}if(a||(a=nn.defaultType),a===st)s=i;else{for(var l=nn.lineWidth,f=Math.ceil(i.length/l),d=new Array(f),h=0,p=0;h<f;++h,p+=l)d[h]=i.substr(p,l);s=d.join(a===Xe?"\n":" ")}return mn({comment:o,type:a,value:s},t,n,r)}};function Ln(e,t){for(var n=In(e,t),r=0;r<n.items.length;++r){var i=n.items[r];if(!(i instanceof Xt)){if(i instanceof en){if(i.items.length>1){throw new bt(t,"Each pair must have its own sequence indicator")}var o=i.items[0]||new Xt;i.commentBefore&&(o.commentBefore=o.commentBefore?"".concat(i.commentBefore,"\n").concat(o.commentBefore):i.commentBefore),i.comment&&(o.comment=o.comment?"".concat(i.comment,"\n").concat(o.comment):i.comment),i=o}n.items[r]=i instanceof Xt?i:new Xt(i)}}return n}function jn(e,t,n){var r=new Gt(e);r.tag="tag:yaml.org,2002:pairs";var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=void 0,u=void 0;if(Array.isArray(a)){if(2!==a.length)throw new TypeError("Expected [key, value] tuple: ".concat(a));s=a[0],u=a[1]}else if(a&&a instanceof Object){var c=Object.keys(a);if(1!==c.length)throw new TypeError("Expected { key: value } tuple: ".concat(a));u=a[s=c[0]]}else s=a;var l=e.createPair(s,u,n);r.items.push(l)}}catch(e){o.e(e)}finally{o.f()}return r}var Tn={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ln,createNode:jn},Nn=function(e){Oe(n,Gt);var t=Te(n);function n(){var e;return _e(this,n),Pe(Le(e=t.call(this)),"add",en.prototype.add.bind(Le(e))),Pe(Le(e),"delete",en.prototype.delete.bind(Le(e))),Pe(Le(e),"get",en.prototype.get.bind(Le(e))),Pe(Le(e),"has",en.prototype.has.bind(Le(e))),Pe(Le(e),"set",en.prototype.set.bind(Le(e))),e.tag=n.tag,e}return xe(n,[{key:"toJSON",value:function(e,t){var n=new Map;t&&t.onCreate&&t.onCreate(n);var r,i=$e(this.items);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=void 0,s=void 0;if(o instanceof Xt?(a=qt(o.key,"",t),s=qt(o.value,a,t)):a=qt(o,"",t),n.has(a))throw new Error("Ordered maps must not include duplicate keys");n.set(a,s)}}catch(e){i.e(e)}finally{i.f()}return n}}]),n}();Pe(Nn,"tag","tag:yaml.org,2002:omap");var Rn={identify:function(e){return e instanceof Map},nodeClass:Nn,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function(e,t){var n,r=Ln(e,t),i=[],o=$e(r.items);try{for(o.s();!(n=o.n()).done;){var a=n.value.key;if(a instanceof Ht){if(i.includes(a.value)){throw new bt(t,"Ordered maps must not include duplicate keys")}i.push(a.value)}}}catch(e){o.e(e)}finally{o.f()}return Object.assign(new Nn,r)},createNode:function(e,t,n){var r=jn(e,t,n),i=new Nn;return i.items=r.items,i}},Fn=function(e){Oe(n,en);var t=Te(n);function n(){var e;return _e(this,n),(e=t.call(this)).tag=n.tag,e}return xe(n,[{key:"add",value:function(e){var t=e instanceof Xt?e:new Xt(e);Zt(this.items,t.key)||this.items.push(t)}},{key:"get",value:function(e,t){var n=Zt(this.items,e);return!t&&n instanceof Xt?n.key instanceof Ht?n.key.value:n.key:n}},{key:"set",value:function(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(ke(t)));var n=Zt(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Xt(e))}},{key:"toJSON",value:function(e,t){return Ne(Ce(n.prototype),"toJSON",this).call(this,e,t,Set)}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return Ne(Ce(n.prototype),"toString",this).call(this,e,t,r);throw new Error("Set items must all have null values")}}]),n}();Pe(Fn,"tag","tag:yaml.org,2002:set");var Dn={identify:function(e){return e instanceof Set},nodeClass:Fn,default:!1,tag:"tag:yaml.org,2002:set",resolve:function(e,t){var n=Mn(e,t);if(!n.hasAllNullValues())throw new bt(t,"Set items must all have null values");return Object.assign(new Fn,n)},createNode:function(e,t,n){var r,i=new Fn,o=$e(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.items.push(e.createPair(a,null,n))}}catch(e){o.e(e)}finally{o.f()}return i}},Bn=function(e,t){var n=t.split(":").reduce((function(e,t){return 60*e+Number(t)}),0);return"-"===e?-n:n},Wn=function(e){var t=e.value;if(isNaN(t)||!isFinite(t))return gn(t);var n="";t<0&&(n="-",t=Math.abs(t));var r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),n+r.map((function(e){return e<10?"0"+String(e):String(e)})).join(":").replace(/000000\d*$/,"")},zn={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(e,t,n){return Bn(t,n.replace(/_/g,""))},stringify:Wn},$n={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(e,t,n){return Bn(t,n.replace(/_/g,""))},stringify:Wn},Un={identify:function(e){return e instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(e,t,n,r,i,o,a,s,u){s&&(s=(s+"00").substr(1,3));var c=Date.UTC(t,n-1,r,i||0,o||0,a||0,s||0);if(u&&"Z"!==u){var l=Bn(u[0],u.slice(1));Math.abs(l)<30&&(l*=60),c-=6e4*l}return new Date(c)},stringify:function(e){return e.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function qn(e){var t="undefined"!=typeof process&&process.env||{};return e?"undefined"!=typeof YAML_SILENCE_DEPRECATION_WARNINGS?!YAML_SILENCE_DEPRECATION_WARNINGS:!t.YAML_SILENCE_DEPRECATION_WARNINGS:"undefined"!=typeof YAML_SILENCE_WARNINGS?!YAML_SILENCE_WARNINGS:!t.YAML_SILENCE_WARNINGS}function Hn(e,t){if(qn(!1)){var n="undefined"!=typeof process&&process.emitWarning;n?n(e,t):console.warn(t?"".concat(t,": ").concat(e):e)}}var Vn={};var Jn={createNode:function(e,t,n){var r=new en(e);if(t instanceof Map){var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=Re(i.value,2),s=a[0],u=a[1];r.items.push(e.createPair(s,u,n))}}catch(e){o.e(e)}finally{o.f()}}else if(t&&"object"===ke(t))for(var c=0,l=Object.keys(t);c<l.length;c++){var f=l[c];r.items.push(e.createPair(f,t[f],n))}return"function"==typeof e.sortMapEntries&&r.items.sort(e.sortMapEntries),r},default:!0,nodeClass:en,tag:"tag:yaml.org,2002:map",resolve:Mn};var Yn={createNode:function(e,t,n){var r=new Gt(e);if(t&&t[Symbol.iterator]){var i,o=$e(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=e.createNode(a,n.wrapScalars,null,n);r.items.push(s)}}catch(e){o.e(e)}finally{o.f()}}return r},default:!0,nodeClass:Gt,tag:"tag:yaml.org,2002:seq",resolve:In},Kn=[Jn,Yn,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:_n,stringify:function(e,t,n,r){return mn(e,t=Object.assign({actualString:!0},t),n,r)},options:sn}],Gn=function(e){return"bigint"==typeof e||Number.isInteger(e)},Xn=function(e,t,n){return on.asBigInt?BigInt(e):parseInt(t,n)};function Qn(e,t,n){var r=e.value;return Gn(r)&&r>=0?n+r.toString(t):gn(e)}var Zn={identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:an,stringify:function(){return an.nullStr}},er={identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(e){return"t"===e[0]||"T"===e[0]},options:rn,stringify:function(e){return e.value?rn.trueStr:rn.falseStr}},tr={identify:function(e){return Gn(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(e,t){return Xn(e,t,8)},options:on,stringify:function(e){return Qn(e,8,"0o")}},nr={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(e){return Xn(e,e,10)},options:on,stringify:gn},rr={identify:function(e){return Gn(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(e,t){return Xn(e,t,16)},options:on,stringify:function(e){return Qn(e,16,"0x")}},ir={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:gn},or={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e)},stringify:function(e){var t=e.value;return Number(t).toExponential()}},ar={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(e,t,n){var r=t||n,i=new Ht(parseFloat(e));return r&&"0"===r[r.length-1]&&(i.minFractionDigits=r.length),i},stringify:gn},sr=Kn.concat([Zn,er,tr,nr,rr,ir,or,ar]),ur=function(e){return"bigint"==typeof e||Number.isInteger(e)},cr=function(e){var t=e.value;return JSON.stringify(t)},lr=[Jn,Yn,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:_n,stringify:cr},{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:cr},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(e){return"true"===e},stringify:cr},{identify:ur,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(e){return on.asBigInt?BigInt(e):parseInt(e,10)},stringify:function(e){var t=e.value;return ur(t)?t.toString():JSON.stringify(t)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(e){return parseFloat(e)},stringify:cr}];lr.scalarFallback=function(e){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(e)))};var fr=function(e){return e.value?rn.trueStr:rn.falseStr},dr=function(e){return"bigint"==typeof e||Number.isInteger(e)};function hr(e,t,n){var r=t.replace(/_/g,"");if(on.asBigInt){switch(n){case 2:r="0b".concat(r);break;case 8:r="0o".concat(r);break;case 16:r="0x".concat(r)}var i=BigInt(r);return"-"===e?BigInt(-1)*i:i}var o=parseInt(r,n);return"-"===e?-1*o:o}function pr(e,t,n){var r=e.value;if(dr(r)){var i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return gn(e)}var vr=Kn.concat([{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new Ht(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:an,stringify:function(){return an.nullStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:rn,stringify:fr},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:rn,stringify:fr},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(e,t,n){return hr(t,n,2)},stringify:function(e){return pr(e,2,"0b")}},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(e,t,n){return hr(t,n,8)},stringify:function(e){return pr(e,8,"0")}},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(e,t,n){return hr(t,n,10)},stringify:gn},{identify:dr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(e,t,n){return hr(t,n,16)},stringify:function(e){return pr(e,16,"0x")}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:gn},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e.replace(/_/g,""))},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(e,t){var n=new Ht(parseFloat(e.replace(/_/g,"")));if(t){var r=t.replace(/_/g,"");"0"===r[r.length-1]&&(n.minFractionDigits=r.length)}return n},stringify:gn}],An,Rn,Tn,Dn,zn,$n,Un),mr={core:sr,failsafe:Kn,json:lr,yaml11:vr},gr={binary:An,bool:er,float:ar,floatExp:or,floatNaN:ir,floatTime:$n,int:nr,intHex:rr,intOct:tr,intTime:zn,map:Jn,null:Zn,omap:Rn,pairs:Tn,seq:Yn,set:Dn,timestamp:Un};function yr(e,t,n){if(e instanceof Ut)return e;var r=n.defaultPrefix,i=n.onTagObj,o=n.prevObjects,a=n.schema,s=n.wrapScalars;t&&t.startsWith("!!")&&(t=r+t.slice(2));var u=function(e,t,n){if(t){var r=n.filter((function(e){return e.tag===t})),i=r.find((function(e){return!e.format}))||r[0];if(!i)throw new Error("Tag ".concat(t," not found"));return i}return n.find((function(t){return(t.identify&&t.identify(e)||t.class&&e instanceof t.class)&&!t.format}))}(e,t,a.tags);if(!u){if("function"==typeof e.toJSON&&(e=e.toJSON()),"object"!==ke(e))return s?new Ht(e):e;u=e instanceof Map?Jn:e[Symbol.iterator]?Yn:Jn}i&&(i(u),delete n.onTagObj);var c={};if(e&&"object"===ke(e)&&o){var l=o.get(e);if(l){var f=new Qt(l);return n.aliasNodes.push(f),f}c.value=e,o.set(e,c)}return c.node=u.createNode?u.createNode(n.schema,e,n):s?new Ht(e):e,t&&c.node instanceof Ut&&(c.node.tag=t),c.node}var wr=function(e,t){return e.key<t.key?-1:e.key>t.key?1:0},br=function(){function e(t){var n=t.customTags,r=t.merge,i=t.schema,o=t.sortMapEntries,a=t.tags;_e(this,e),this.merge=!!r,this.name=i,this.sortMapEntries=!0===o?wr:o||null,!n&&a&&function(e,t){if(!Vn[e]&&qn(!0)){Vn[e]=!0;var n="The option '".concat(e,"' will be removed in a future release");Hn(n+=t?", use '".concat(t,"' instead."):".","DeprecationWarning")}}("tags","customTags"),this.tags=function(e,t,n,r){var i=e[r.replace(/\W/g,"")];if(!i){var o=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown schema "'.concat(r,'"; use one of ').concat(o))}if(Array.isArray(n)){var a,s=$e(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;i=i.concat(u)}}catch(e){s.e(e)}finally{s.f()}}else"function"==typeof n&&(i=n(i.slice()));for(var c=0;c<i.length;++c){var l=i[c];if("string"==typeof l){var f=t[l];if(!f){var d=Object.keys(t).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown custom tag "'.concat(l,'"; use one of ').concat(d))}i[c]=f}}return i}(mr,gr,n||a,i)}return xe(e,[{key:"createNode",value:function(t,n,r,i){var o={defaultPrefix:e.defaultPrefix,schema:this,wrapScalars:n};return yr(t,r,i?Object.assign(i,o):o)}},{key:"createPair",value:function(e,t,n){n||(n={wrapScalars:!0});var r=this.createNode(e,n.wrapScalars,null,n),i=this.createNode(t,n.wrapScalars,null,n);return new Xt(r,i)}}]),e}();Pe(br,"defaultPrefix","tag:yaml.org,2002:"),Pe(br,"defaultTags",ft);var kr={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},_r={get binary(){return nn},set binary(e){Object.assign(nn,e)},get bool(){return rn},set bool(e){Object.assign(rn,e)},get int(){return on},set int(e){Object.assign(on,e)},get null(){return an},set null(e){Object.assign(an,e)},get str(){return sn},set str(e){Object.assign(sn,e)}},Sr={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"tag:yaml.org,2002:"},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]}};function xr(e,t){if("1.0"===(e.version||e.options.version)){var n=t.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(n)return"!"+n[1];var r=t.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return r?"!".concat(r[1],"/").concat(r[2]):"!".concat(t.replace(/^tag:/,""))}var i=e.tagPrefixes.find((function(e){return 0===t.indexOf(e.prefix)}));if(!i){var o=e.getDefaults().tagPrefixes;i=o&&o.find((function(e){return 0===t.indexOf(e.prefix)}))}if(!i)return"!"===t[0]?t:"!<".concat(t,">");var a=t.substr(i.prefix.length).replace(/[!,[\]{}]/g,(function(e){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[e]}));return i.handle+a}function Pr(e,t,n,r){var i,o=t.doc,a=o.anchors,s=o.schema;if(!(e instanceof Ut)){var u={aliasNodes:[],onTagObj:function(e){return i=e},prevObjects:new Map};e=s.createNode(e,!0,null,u);var c,l=$e(u.aliasNodes);try{for(l.s();!(c=l.n()).done;){var f=c.value;f.source=f.source.node;var d=a.getName(f.source);d||(d=a.newName(),a.map[d]=f.source)}}catch(e){l.e(e)}finally{l.f()}}if(e instanceof Xt)return e.toString(t,n,r);i||(i=function(e,t){if(t instanceof Qt)return Qt;if(t.tag){var n=e.filter((function(e){return e.tag===t.tag}));if(n.length>0)return n.find((function(e){return e.format===t.format}))||n[0]}var r,i;if(t instanceof Ht){i=t.value;var o=e.filter((function(e){return e.identify&&e.identify(i)||e.class&&i instanceof e.class}));r=o.find((function(e){return e.format===t.format}))||o.find((function(e){return!e.format}))}else i=t,r=e.find((function(e){return e.nodeClass&&i instanceof e.nodeClass}));if(!r){var a=i&&i.constructor?i.constructor.name:ke(i);throw new Error("Tag not resolved for ".concat(a," value"))}return r}(s.tags,e));var h=function(e,t,n){var r=n.anchors,i=n.doc,o=[],a=i.anchors.getName(e);return a&&(r[a]=e,o.push("&".concat(a))),e.tag?o.push(xr(i,e.tag)):t.default||o.push(xr(i,t.tag)),o.join(" ")}(e,i,t);h.length>0&&(t.indentAtStart=(t.indentAtStart||0)+h.length+1);var p="function"==typeof i.stringify?i.stringify(e,t,n,r):e instanceof Ht?mn(e,t,n,r):e.toString(t,n,r);return h?e instanceof Ht||"{"===p[0]||"["===p[0]?"".concat(h," ").concat(p):"".concat(h,"\n").concat(t.indent).concat(p):p}var Or=function(){function e(t){_e(this,e),Pe(this,"map",{}),this.prefix=t}return xe(e,null,[{key:"validAnchorNode",value:function(e){return e instanceof Ht||e instanceof Gt||e instanceof en}}]),xe(e,[{key:"createAlias",value:function(e,t){return this.setAnchor(e,t),new Qt(e)}},{key:"createMergePair",value:function(){for(var e=this,t=new tn,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.value.items=r.map((function(t){if(t instanceof Qt){if(t.source instanceof en)return t}else if(t instanceof en)return e.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")})),t}},{key:"getName",value:function(e){var t=this.map;return Object.keys(t).find((function(n){return t[n]===e}))}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var t=Object.keys(this.map),n=1;;++n){var r="".concat(e).concat(n);if(!t.includes(r))return r}}},{key:"resolveNodes",value:function(){var e=this.map,t=this._cstAliases;Object.keys(e).forEach((function(t){e[t]=e[t].resolved})),t.forEach((function(e){e.source=e.source.resolved})),delete this._cstAliases}},{key:"setAnchor",value:function(t,n){if(null!=t&&!e.validAnchorNode(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");var r=this.map,i=t&&Object.keys(r).find((function(e){return r[e]===t}));if(i){if(!n)return i;i!==n&&(delete r[i],r[n]=t)}else{if(!n){if(!t)return null;n=this.newName()}r[n]=t}return n}}]),e}(),Cr=function(e){return Object.keys(function e(t,n){if(t&&"object"===ke(t)){var r=t.tag;t instanceof Yt?(r&&(n[r]=!0),t.items.forEach((function(t){return e(t,n)}))):t instanceof Xt?(e(t.key,n),e(t.value,n)):t instanceof Ht&&r&&(n[r]=!0)}return n}(e,{}))};function Mr(e,t){var n=e.tagPrefixes,r=Re(t.parameters,2),i=r[0],o=r[1];if(!i||!o){throw new bt(t,"Insufficient parameters given for %TAG directive")}if(n.some((function(e){return e.handle===i}))){throw new bt(t,"The %TAG directive must only be given at most once per handle in the same document.")}return{handle:i,prefix:o}}function Er(e,t){var n=Re(t.parameters,1)[0];if("YAML:1.0"===t.name&&(n="1.0"),!n){throw new bt(t,"Insufficient parameters given for %YAML directive")}if(!Sr[n]){var r=e.version||e.options.version,i="Document will be parsed as YAML ".concat(r," rather than YAML ").concat(n);e.warnings.push(new _t(t,i))}return n}function Ir(e){if(e instanceof Yt)return!0;throw new Error("Expected a YAML collection as document contents")}var Ar=function(){function e(t){_e(this,e),this.anchors=new Or(t.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=t,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return xe(e,[{key:"add",value:function(e){return Ir(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,t){Ir(this.contents),this.contents.addIn(e,t)}},{key:"delete",value:function(e){return Ir(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return Jt(e)?null!=this.contents&&(this.contents=null,!0):(Ir(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return e.defaults[this.version]||e.defaults[this.options.version]||{}}},{key:"get",value:function(e,t){return this.contents instanceof Yt?this.contents.get(e,t):void 0}},{key:"getIn",value:function(e,t){return Jt(e)?!t&&this.contents instanceof Ht?this.contents.value:this.contents:this.contents instanceof Yt?this.contents.getIn(e,t):void 0}},{key:"has",value:function(e){return this.contents instanceof Yt&&this.contents.has(e)}},{key:"hasIn",value:function(e){return Jt(e)?void 0!==this.contents:this.contents instanceof Yt&&this.contents.hasIn(e)}},{key:"set",value:function(e,t){Ir(this.contents),this.contents.set(e,t)}},{key:"setIn",value:function(e,t){Jt(e)?this.contents=t:(Ir(this.contents),this.contents.setIn(e,t))}},{key:"setSchema",value:function(e,t){if(e||t||!this.schema){"number"==typeof e&&(e=e.toFixed(1)),"1.0"===e||"1.1"===e||"1.2"===e?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&"string"==typeof e&&(this.options.schema=e),Array.isArray(t)&&(this.options.customTags=t);var n=Object.assign({},this.getDefaults(),this.options);this.schema=new br(n)}}},{key:"parse",value:function(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var n=e.directives,r=void 0===n?[]:n,i=e.contents,o=void 0===i?[]:i,a=e.directivesEndMarker,s=e.error,u=e.valueRange;if(s&&(s.source||(s.source=this),this.errors.push(s)),function(e,t,n){var r,i=[],o=!1,a=$e(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.comment,c=s.name;switch(c){case"TAG":try{e.tagPrefixes.push(Mr(e,s))}catch(t){e.errors.push(t)}o=!0;break;case"YAML":case"YAML:1.0":if(e.version){e.errors.push(new bt(s,"The %YAML directive must only be given at most once per document."))}try{e.version=Er(e,s)}catch(t){e.errors.push(t)}o=!0;break;default:if(c){var l="YAML only supports %TAG and %YAML directives, and not %".concat(c);e.warnings.push(new _t(s,l))}}u&&i.push(u)}}catch(e){a.e(e)}finally{a.f()}if(n&&!o&&"1.1"===(e.version||n.version||e.options.version)){e.tagPrefixes=n.tagPrefixes.map((function(e){return{handle:e.handle,prefix:e.prefix}})),e.version=n.version}e.commentBefore=i.join("\n")||null}(this,r,t),a&&(this.directivesEndMarker=!0),this.range=u?[u.start,u.end]:null,this.setSchema(),this.anchors._cstAliases=[],function(e,t){var n,r={before:[],after:[]},i=void 0,o=!1,a=$e(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.valueRange){if(void 0!==i){e.errors.push(new kt(s,"Document contains trailing content not separated by a ... or --- line"));break}var u=Cn(e,s);o&&(u.spaceBefore=!0,o=!1),i=u}else if(null!==s.comment){(void 0===i?r.before:r.after).push(s.comment)}else s.type===Ke&&(o=!0,void 0===i&&r.before.length>0&&!e.commentBefore&&(e.commentBefore=r.before.join("\n"),r.before=[]))}}catch(e){a.e(e)}finally{a.f()}if(e.contents=i||null,i){var c=r.before.join("\n");if(c){var l=i instanceof Yt&&i.items[0]?i.items[0]:i;l.commentBefore=l.commentBefore?"".concat(c,"\n").concat(l.commentBefore):c}e.comment=r.after.join("\n")||null}else e.comment=r.before.concat(r.after).join("\n")||null}(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var c,l=$e(this.errors);try{for(l.s();!(c=l.n()).done;){var f=c.value;f instanceof yt&&f.makePretty()}}catch(e){l.e(e)}finally{l.f()}var d,h=$e(this.warnings);try{for(h.s();!(d=h.n()).done;){var p=d.value;p instanceof yt&&p.makePretty()}}catch(e){h.e(e)}finally{h.f()}}return this}},{key:"listNonDefaultTags",value:function(){return Cr(this.contents).filter((function(e){return 0!==e.indexOf(br.defaultPrefix)}))}},{key:"setTagPrefix",value:function(e,t){if("!"!==e[0]||"!"!==e[e.length-1])throw new Error("Handle must start and end with !");if(t){var n=this.tagPrefixes.find((function(t){return t.handle===e}));n?n.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter((function(t){return t.handle!==e}))}},{key:"toJSON",value:function(e,t){var n=this,r=this.options,i=r.keepBlobsInJSON,o=r.mapAsMap,a=r.maxAliasCount,s=i&&("string"!=typeof e||!(this.contents instanceof Ht)),u={doc:this,indentStep:"  ",keep:s,mapAsMap:s&&!!o,maxAliasCount:a,stringify:Pr},c=Object.keys(this.anchors.map);c.length>0&&(u.anchors=new Map(c.map((function(e){return[n.anchors.map[e],{alias:[],aliasCount:0,count:1}]}))));var l=qt(this.contents,e,u);if("function"==typeof t&&u.anchors){var f,d=$e(u.anchors.values());try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.count;t(h.res,p)}}catch(e){d.e(e)}finally{d.f()}}return l}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var t=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(t))}this.setSchema();var n=[],r=!1;if(this.version){var i="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?i="%YAML:1.0":"1.1"===this.version&&(i="%YAML 1.1")),n.push(i),r=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach((function(e){var t=e.handle,i=e.prefix;o.some((function(e){return 0===e.indexOf(i)}))&&(n.push("%TAG ".concat(t," ").concat(i)),r=!0)})),(r||this.directivesEndMarker)&&n.push("---"),this.commentBefore&&(!r&&this.directivesEndMarker||n.unshift(""),n.unshift(this.commentBefore.replace(/^/gm,"#")));var a={anchors:{},doc:this,indent:"",indentStep:" ".repeat(e),stringify:Pr},s=!1,u=null;if(this.contents){this.contents instanceof Ut&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&n.push(""),this.contents.commentBefore&&n.push(this.contents.commentBefore.replace(/^/gm,"#")),a.forceBlockIndent=!!this.comment,u=this.contents.comment);var c=u?null:function(){return s=!0},l=Pr(this.contents,a,(function(){return u=null}),c);n.push($t(l,"",u))}else void 0!==this.contents&&n.push(Pr(this.contents,a));return this.comment&&(s&&!u||""===n[n.length-1]||n.push(""),n.push(this.comment.replace(/^/gm,"#"))),n.join("\n")+"\n"}}]),e}();Pe(Ar,"defaults",Sr);var Lr=function(e){Oe(n,Ar);var t=Te(n);function n(e){return _e(this,n),t.call(this,Object.assign({},kr,e))}return n}();function jr(e,t){var n=zt(e),r=new Lr(t).parse(n[0]);if(n.length>1){r.errors.unshift(new bt(n[1],"Source contains multiple documents; please use YAML.parseAllDocuments()"))}return r}var Tr=Fr({createNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;void 0===n&&"string"==typeof t&&(n=t,t=!0);var r=Object.assign({},Ar.defaults[kr.version],kr),i=new br(r);return i.createNode(e,t,n)},defaultOptions:kr,Document:Lr,parse:function(e,t){var n=jr(e,t);if(n.warnings.forEach((function(e){return Hn(e)})),n.errors.length>0)throw n.errors[0];return n.toJSON()},parseAllDocuments:function(e,t){var n,r,i=[],o=$e(zt(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=new Lr(t);s.parse(a,n),i.push(s),n=s}}catch(e){o.e(e)}finally{o.f()}return i},parseCST:zt,parseDocument:jr,scalarOptions:_r,stringify:function(e,t){var n=new Lr(t);return n.contents=e,String(n)}}),Nr=Fr(n);function Rr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Rr=function(){return e},e}function Fr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Rr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Dr(e){const t=be.join(e,"markdown-preview-plus.yaml");if(!(0,I.isFileSync)(t)){const n=be.join(e,"markdown-preview-plus.cson");if((0,I.isFileSync)(n)){const e=[{text:"Edit new YAML",onDidClick(){(0,I.handlePromise)(atom.workspace.open(t))}},{text:"Show old CSON",onDidClick(){(0,I.handlePromise)(atom.workspace.open(n))}}];try{const r=Tr.parseDocument(Nr.readFileSync(n).toString("utf-8"),{keepCstNodes:!0});Nr.writeFileSync(t,r.toString(),{encoding:"utf-8"}),Object.keys(r.toJSON()).length>0&&atom.notifications.addInfo(`${n} converted to YAML and re-saved as ${t}`,{detail:"markdown-preview-plus.cson was converted to YAML. The backup is kept as "+n,dismissable:!0,buttons:e})}catch(n){Br(t),atom.notifications.addWarning("Error converting markdown-preview-plus.cson",{dismissable:!0,detail:n.toString(),description:"Failed to convert markdown-preview-plus.cson to YAML; please make the conversion manually",buttons:e})}}else console.debug("Creating markdown-preview-plus.yaml, this is a one-time operation."),Br(t)}return t}function Br(e){const t=be.join((0,I.packagePath)(),"assets","macros-template.yaml"),n=Nr.readFileSync(t,"utf8");Nr.writeFileSync(e,n)}function Wr(e){if(Array.isArray(e)){const t=e[0],n=e[1];return"number"==typeof n&&(n%1==0&&"string"==typeof t)}return"string"==typeof e}var zr={};Object.defineProperty(zr,"__esModule",{value:!0});var $r=function(e){var t;return(null===(t=window["markdown-preview-plus-tests"])||void 0===t?void 0:t.clipboardWrite)?window["markdown-preview-plus-tests"].clipboardWrite(e):Hr.write(e)};zr.write=$r;var Ur=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=qr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(t);function qr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return qr=function(){return e},e}const Hr="linux"===process.platform&&"renderer"===process.type?Ur.remote.clipboard:Ur.clipboard;var Vr=Yr(zr);function Jr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Jr=function(){return e},e}function Yr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Jr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Kr(){return atom.config.get("markdown-preview-plus")}let Gr;function Xr(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Xr=function(){return e},e}function Qr(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Xr();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function Zr(e,t){const n=E.join(e,"../",t);if(M.existsSync(n))return n;{const r=E.join(n,"..");return r!==e&&!atom.project.getPaths().includes(r)&&Zr(r,t)}}function ei(e,t){const n={maxBuffer:1/0};void 0!==e&&(n.cwd=E.dirname(e));const r=(0,I.atomConfig)().pandocConfig,i={from:r.pandocMarkdownFlavor,to:"html",mathjax:t?"atom://markdown-preview-plus/node_modules/mathjax/MathJax.js":void 0,filter:r.pandocFilters};if(r.pandocBibliography){i.filter.push("pandoc-citeproc");let t=e&&Zr(e,r.pandocBIBFile);t||(t=r.pandocBIBFileFallback),i.bibliography=t||void 0;let n=e&&Zr(e,r.pandocCSLFile);n||(n=r.pandocCSLFileFallback),i.csl=n||void 0}return{args:i,opts:n}}function ti(e,t){return t&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".math").forEach((function(e){let t=e.innerText;const n=t.indexOf("\\[")>-1?"; mode=display":"";return t=t.replace(/\\[[()\]]/g,""),e.outerHTML=`<span class="math"><script type='math/tex${n}'>${t}<\/script></span>`})),t.innerHTML}(e)),(0,I.atomConfig)().pandocConfig.pandocRemoveReferences&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".references").forEach(e=>{e.remove()}),t.innerHTML}(e)),e}function ni(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?t.push(...r.map(e=>`--${n}=${e}`)):r&&t.push(`--${n}=${r}`);const n=[];for(const e of[...t,...(0,I.atomConfig)().pandocConfig.pandocArguments]){const t=e.replace(/^(--[\w\-]+)\s(.+)$/i,"$1=$2");"-"===t.substr(0,1)&&n.push(t)}return n}O={setPandocOptions:ei,getArguments:ni,findFileRecursive:Zr},x.testing=O;var ri=Ei(x),ii={};Object.defineProperty(ii,"__esModule",{value:!0});var oi=void 0;ii.MarkdownItWorker=oi;var ai=function(e){return e&&e.__esModule?e:{default:e}}(i),si=r;const ui={useLazyHeaders:!0,useCheckBoxes:!0,useToc:!1,useEmoji:!1,breakOnSingleNewline:!1,typographicReplacements:!0,useCriticMarkup:!1,useFootnote:!0,useImsize:!1,inlineMathSeparators:["$","$"],blockMathSeparators:["$$","$$"],forceFullToc:!1,tocDepth:0,useAttributes:!0,useSpans:!0,useDivs:!0,useDeflist:!0,useFontmatter:!0,useImplicitFigures:!0,useSubscript:!0,useSuperscript:!0,parseDisplayMathInline:!0,tableCaptions:!0};class ci{requestId=0;replyCallbacks=new Map;disposables=new si.CompositeDisposable;constructor(){if(this.workerPath=ai.default.join((0,I.packagePath)(),"dist","worker","main.js"),this.worker=this.initWorker(),atom.inDevMode()){const e=new si.File(this.workerPath);this.disposables.add(e.onDidChange(()=>{this.teardownWorker(),this.worker=this.initWorker(),this.configure(atom.config.get("markdown-preview-plus.markdownItConfig"))}))}this.disposables.add(atom.config.onDidChange("markdown-preview-plus.renderer",({newValue:e})=>{"pandoc"===e?this.configure(ui):this.configure((0,I.atomConfig)().markdownItConfig)}),atom.config.observe("markdown-preview-plus.markdownItConfig",e=>{"markdown-it"===(0,I.atomConfig)().renderer&&this.configure(e)}))}static destroy(){ci._instance&&(ci._instance.teardownWorker(),ci._instance.disposables.dispose(),ci._instance=void 0)}static async render(e,t){return ci.instance().request({cmd:"render",text:e,rL:t})}static async getTokens(e,t){return ci.instance().request({cmd:"getTokens",text:e,rL:t})}static instance(){return ci._instance||(ci._instance=new ci),ci._instance}initWorker(){const e=new Worker(this.workerPath);return e.onmessage=e=>{if("id"in e.data){const t=this.replyCallbacks.get(e.data.id);t&&t.resolve(e.data.result)}else if("evt"in e.data)switch(e.data.evt){case"odd-separators":t=e.data.arr,n=e.data.option,atom.notifications.addWarning("Invalid math delimiter configuration"+(n?"in "+n:""),{detail:`Expected even number of elements, but got "${t.join(", ")}"`,dismissable:!0})}var t,n},e}teardownWorker(){this.worker.onmessage=null,this.worker.terminate();for(const{reject:e}of Array.from(this.replyCallbacks.values()))e(new Error("Worker terminated"))}configure(e){this.worker.postMessage({cmd:"config",arg:e})}async request(e){const t=this.requestId++,n=new Promise((e,n)=>{this.replyCallbacks.set(t,{resolve:n=>{this.replyCallbacks.delete(t),e(n)},reject:e=>{this.replyCallbacks.delete(t),n(e)}})}),r=Object.assign({id:t},e);return this.worker.postMessage(r),n}}oi=ci,ii.MarkdownItWorker=oi;var li={};Object.defineProperty(li,"__esModule",{value:!0});var fi=function(e){return e.querySelectorAll("img[src],audio[src],video[src],link[href]")};li.getMedia=fi;var di={};Object.defineProperty(di,"__esModule",{value:!0});var hi=async function(e,t){const n=atom.config.get("markdown-preview-plus.previewConfig.highlighter");if("none"===n)return e;const r=atom.config.get("editor.fontFamily");if(r)for(const t of Array.from(e.querySelectorAll("code")))t.style.fontFamily=r;const i=(0,I.atomConfig)().codeTabWidth||atom.config.get("editor.tabLength");return await Promise.all(Array.from(e.querySelectorAll("pre")).map(async e=>{const r=null!==e.firstElementChild?e.firstElementChild:e,o=r.className&&e.className?e.className:r.className||e.className,a=o?o.replace(/^(lang-|sourceCode )/,""):t;e.style.tabSize=i.toString();const s=await async function(e,t){await new Promise(setImmediate);const n=performance.now();let r=n,i=r;return async function(){if(i=performance.now(),i-r>e&&(await new Promise(setImmediate),r=i),i-n>t){const e=new Error("Max time reached");let t="The highlighter took too long to complete and was terminated.\nSome code blocks may be incomplete.";throw"tree-sitter-compatible"===atom.config.get("markdown-preview-plus.previewConfig.highlighter")&&(t+=" You're currently using tree-view-compatible highlighter, you may try\nswitching to legacy highlighter instead."),atom.notifications.addError("Markdown-Preview-Plus: Highlighter took more than 5 seconds to complete",{dismissable:!0,description:t,stack:e.stack}),e}}}(100,5e3),u=r.textContent.replace(/\r?\n$/,"");"legacy"===n?e.innerHTML=await async function(e,t,n){const r=(0,yi.hightlightLines)(e.split("\n"),(0,pi.scopeForFenceName)(t),"text.plain.null-grammar"),i=[];let o=r.next();for(;!o.done;){i.push(o.value);try{await n()}catch(e){console.error(e);break}o=r.next()}return i.join("\n")}(u,a,s):"tree-sitter-compatible"===n&&(e.innerHTML=await async function(e,t,n,r){const i=new gi.TextBuffer;try{const o=atom.grammars.grammarForId((0,pi.scopeForFenceName)(t)),a=atom.grammars.languageModeForGrammarAndBuffer(o,i);i.setLanguageMode(a),i.setText(e);const s=i.getEndPosition();a.startTokenizing&&a.startTokenizing(),await async function(e){return new Promise(t=>{if(e.fullyTokenized||e.tree)t();else if(e.onDidTokenize){const n=e.onDidTokenize(()=>{n.dispose(),t()})}else t()})}(a);const u=a.buildHighlightIterator();if(u.getOpenScopeIds&&u.getCloseScopeIds){let e={row:0,column:0};u.seek(e);const t=[];for(;e.row<s.row||e.row===s.row&&e.column<=s.column;){const n=u.getOpenScopeIds().map(e=>a.classNameForScopeId(e)),o=u.getCloseScopeIds().map(e=>a.classNameForScopeId(e));t.push(...o.map(e=>"</span>")),t.push(...n.map(e=>`<span class="${e}">`)),u.moveToSuccessor();const s=u.getPosition();t.push(i.getTextInRange([e,s]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));try{await r()}catch(e){console.error(e);break}e=s}return t.join("")}return n}finally{i.destroy()}}(u,a,r.innerHTML,s)),e.classList.add("editor-colors"),a&&e.classList.add("lang-"+a)})),e};di.highlightCodeBlocks=hi;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});var vi=function(e){const t=e.toLowerCase();return mi[t]||"source."+t};pi.scopeForFenceName=vi;const mi={sh:"source.shell",bash:"source.shell",c:"source.c","c++":"source.cpp",cpp:"source.cpp",coffee:"source.coffee",coffeescript:"source.coffee","coffee-script":"source.coffee",cs:"source.cs",csharp:"source.cs",css:"source.css",scss:"source.css.scss",sass:"source.sass",erlang:"source.erl",go:"source.go",html:"text.html.basic",java:"source.java",js:"source.js",javascript:"source.js",json:"source.json",less:"source.less",mustache:"text.html.mustache",objc:"source.objc","objective-c":"source.objc",php:"text.html.php",py:"source.python",python:"source.python",rb:"source.ruby",ruby:"source.ruby",text:"text.plain",toml:"source.toml",xml:"text.xml",yaml:"source.yaml",yml:"source.yaml"};var gi=r,yi={};Object.defineProperty(yi,"__esModule",{value:!0});var wi=(ki=void 0,yi.isEqualArray=ki);function bi(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}yi.hightlightLines=wi;var ki=bi;function _i(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;";default:return e}}function Si(e){return e.replace(/[&"'<>]/g,_i)}function xi(e){return e.replace(/[&"'<> ]/g,_i)}function Pi(e,t,n){e.push(t),n.push(`<span class="${t.replace(/\.+/g," ")}">`)}function Oi(e,t){e.pop(),t.push("</span>")}function Ci(e,t,n){let r=e.length-t.length;if(r>0)for(;r--;)Oi(e,n);let i=0;for(let r=e.length;r>=0;--r){if(bi(e.slice(0,r),t.slice(0,r))){i=r;break}Oi(e,n)}for(let r=i;r<t.length;++r)Pi(e,t[r],n)}function Mi(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Mi=function(){return e},e}function Ei(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Mi();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}yi.isEqualArray=ki,wi=function*(e,t,n,r){const i=atom.grammars.textmateRegistry||atom.grammars;if(!i)throw new Error("No Atom grammar registry found");const o=i.grammarForScopeName(t)||(n?i.grammarForScopeName(n):void 0);if(!o)throw new Error(`Grammar ${t} not found, and no ${n} grammar`);const a=r?xi:Si,s=e[Symbol.iterator]();let u=s.next(),c=null;const l=[];for(;!u.done;){const e=o.tokenizeLine(u.value,c);c=e.ruleStack;const t=[];for(const{value:n,scopes:r}of e.tokens){Ci(l,r.map(e=>"syntax--"+e.replace(/\./g,".syntax--")),t),t.push(a(n))}for(;l.length>0;)Oi(l,t);yield t.join(""),u=s.next()}},yi.hightlightLines=wi;const{resourcePath:Ii}=atom.getLoadSettings();function Ai(e){const t="relativized"===e.behaviour;switch(e.behaviour){case"relativized":case"absolutized":Li(e.doc,e.filePath,t,e.savePath)}}function Li(e,t,n,r,i){const[o]=atom.project.relativizePath(t||""),a=(0,li.getMedia)(e);Array.from(a).map((function(e){let a;a="LINK"===e.tagName?"href":"src";let s=e.getAttribute(a);if(s){if("pandoc"!==(0,I.atomConfig)().renderer&&(s=decodeURI(s)),s.match(/^(https?|atom|data):/))return;if(process.resourcesPath&&s.startsWith(process.resourcesPath))return;if(s.startsWith(Ii))return;if(s.startsWith((0,I.packagePath)()))return;if("/"===s[0]){if(!(0,I.isFileSync)(s))try{null!==o&&(s=S.join(o,s.substring(1)))}catch(e){}}else t&&(s=S.resolve(S.dirname(t),s));if(n&&(void 0!==t||void 0!==r)){const e=void 0!==r?r:t;s=S.relative(S.dirname(e),s)}if(i){const e=i.watch(s);void 0!==e&&(s=`${s}?v=${e}`)}e[a]=s}}))}var ji=So(k),Ti=So(V),Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});var Ri=async function(e,t,n,r,i){return new Promise(o=>{const a=new F.WebviewHandler(async()=>{const s=(0,I.atomConfig)().saveConfig.saveToPDFOptions,u="Custom"===s.pageSize?function(e){if(!e)return;const t=e.replace(/\s*/g,"").match(/^([\d.,]+)(cm|mm|in)?x([\d.,]+)(cm|mm|in)?$/i);if(t){const e=parseFloat(t[1]),n=t[2],r=parseFloat(t[3]),i=t[4];return{width:Di(e,n),height:Di(r,i)}}return}(s.customPageSize):s.pageSize;if(void 0===u)throw new Error("Failed to parse custom page size: "+s.customPageSize);const c=!!await a.getSelection()&&s.printSelectionOnly,l={...s,pageSize:u,printSelectionOnly:c},[f,d]=function(e){switch(e){case"A3":return[297,420];case"A4":return[210,297];case"A5":return[148,210];case"Legal":return[216,356];case"Letter":return[216,279];case"Tabloid":return[279,432];default:return[e.width/1e3,e.height/1e3]}}(l.pageSize),h=(0,I.atomConfig)().mathConfig,p=(0,I.atomConfig)().saveConfig.saveToPDFOptions.latexRenderer,v="Same as live preview"===p?h.latexRenderer:p;await a.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:{...h,latexRenderer:v},context:"pdf-export",pdfExportOptions:{width:l.landscape?d:f}}),await a.setBasePath(t);const m=await(0,k.render)({text:e,filePath:t,grammar:n,renderLaTeX:r,renderErrors:!1,mode:"normal"});await a.update(m.documentElement.outerHTML,r),await a.fullyReady();try{const e=await a.printToPDF(l);await new Promise((t,n)=>{(0,Fi.writeFile)(i,e,e=>{e?n(e):t()})})}catch(e){const t=e;atom.notifications.addError("Failed saving to PDF",{description:t.toString(),dismissable:!0,stack:t.stack})}a.destroy(),o()});a.element.style.pointerEvents="none",a.element.style.position="absolute",a.element.style.top="0",a.element.style.opacity="0",a.element.style.height="100vh",a.element.style.width="100vw";atom.views.getView(atom.workspace).appendChild(a.element),a.updatePosition()})};Ni.saveAsPDF=Ri;var Fi=n;function Di(e,t){return e*function(e="mm"){switch(e){case"mm":return 1e3;case"cm":return 1e4;case"in":return 25400}}(t)}var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});var Wi=async function(e=""){let t;const n=document.activeElement,r=new zi.CompositeDisposable;try{return await new Promise(n=>{const i=atom.workspace.buildTextEditor({mini:!0,placeholderText:e}),o=atom.views.getView(i);let a=!0;setTimeout(()=>{a=!1},100),o.onblur=()=>{a?o.focus():atom.commands.dispatch(o,"core:cancel")},r.add(atom.commands.add(o,{"core:confirm":()=>{n(i.getText())},"core:cancel":()=>{o.onblur=null,n()}})),t=atom.workspace.addModalPanel({item:i,visible:!0}),o.focus()})}finally{r.dispose(),t&&t.destroy(),n&&n.focus()}};Bi.modalTextEditorView=Wi;var zi=r;var $i={};Object.defineProperty($i,"__esModule",{value:!0});var Ui=void 0;$i.BrowserWindowHandler=Ui;var qi=t;const Hi=[{label:"Sync Source",command:"markdown-preview-plus:sync-source"},{label:"Search Selection in Source",command:"markdown-preview-plus:search-selection-in-source"},{label:"Find in Preview...",command:"markdown-preview-plus:find-in-preview"},{label:"Find Next",command:"markdown-preview-plus:find-next"},{label:"Copy As HTML",command:"core:copy"},{label:"Save As…",command:"core:save-as"},{label:"Open in main window",command:"markdown-preview-plus:main-window"},{label:"Open Dev Tools",command:"markdown-preview-plus:open-dev-tools"},{label:"Toggle math rendering",command:"markdown-preview-plus:toggle-render-latex"}];class Vi extends B.WebContentsHandler{static windows=new Set;static views=new Map;constructor(e){const t=new qi.remote.BrowserWindow({webPreferences:{webSecurity:!1,nodeIntegration:!0}});Vi.windows.add(t),t.on("close",()=>this.destroy()),t.setMenuBarVisibility(!1),super(Promise.resolve(t.webContents),()=>{this.menu&&this.menu.popup({window:t})},e),this.window=t,this._element=document.createElement("div")}get element(){return this._element}static clean(){const e=Array.from(Vi.windows);for(const t of e)t.close();const t=Array.from(Vi.views.keys());for(const e of t)e.destroy()}static viewForURI(e){return Array.from(Vi.views.keys()).find(t=>t.getURI()===e)}static windowForView(e){return Vi.views.get(e)}registerViewEvents(e){Vi.views.set(e,this.window);const t=e.onDidDestroy(()=>{Vi.views.delete(e),t.dispose()}),n=atom.views.getView(e);this.disposables.add(atom.commands.add(n,{"core:save-as":()=>{const t=atom.applicationDelegate.showSaveDialog(e.getSaveDialogOptions());t&&e.saveAs(t)},"markdown-preview-plus:main-window":()=>{e.openMainWindow()}})),this.menu=qi.remote.Menu.buildFromTemplate(Hi.map(({label:e,command:t})=>({label:e,click:()=>atom.commands.dispatch(n,t)})))}destroy(){this.destroyed||(super.destroy(),this.window.destroy(),Vi.windows.delete(this.window))}}Ui=Vi,$i.BrowserWindowHandler=Ui;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Object.defineProperty(Ji,"MarkdownPreviewControllerEditor",{enumerable:!0,get:function(){return Yi.MarkdownPreviewControllerEditor}}),Object.defineProperty(Ji,"MarkdownPreviewControllerFile",{enumerable:!0,get:function(){return ho.MarkdownPreviewControllerFile}}),Object.defineProperty(Ji,"MarkdownPreviewControllerText",{enumerable:!0,get:function(){return wo.MarkdownPreviewControllerText}}),Object.defineProperty(Ji,"MarkdownPreviewController",{enumerable:!0,get:function(){return Xi.MarkdownPreviewController}});var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});var Ki=void 0;Yi.MarkdownPreviewControllerEditor=Ki;var Gi=r,Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});var Qi=void 0;Xi.MarkdownPreviewController=Qi;var Zi=r;Qi=class{disposables=new Zi.CompositeDisposable;emitter=new Zi.Emitter;constructor(){this.disposables.add(this.emitter)}destroy(){this.emitter.emit("did-destroy"),this.disposables.dispose()}didScrollPreview(e,t){}getScrollSyncParams(){}onDidChange(e){return this.emitter.on("did-change",e)}onDidChangePath(e){return this.emitter.on("did-change-path",e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}onScrollSync(e){return this.emitter.on("scroll-sync",e)}onSearch(e){return this.emitter.on("search",e)}onSync(e){return this.emitter.on("sync",e)}onActivate(e){return this.emitter.on("activate",e)}},Xi.MarkdownPreviewController=Qi;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var to=function(e){const t=so(e);return t||new p.MarkdownPreviewView(new Ji.MarkdownPreviewControllerEditor(e))};eo.createEditorView=to;var no=so;eo.viewForEditor=no;var ro=uo;eo.viewForFile=ro;var io=function(e){const t=uo(e);return t||new p.MarkdownPreviewView(new Ji.MarkdownPreviewControllerFile(e))};eo.createFileView=io;var oo=function(e){return new p.MarkdownPreviewView(new Ji.MarkdownPreviewControllerText(Promise.resolve(e)))};eo.createTextView=oo;var ao=async function(e){const t=atom.workspace.getActivePane(),n={searchAllPanes:!0},r=(0,I.atomConfig)().previewConfig.previewSplitPaneDir;"none"!==r&&(n.split=r);const i=await atom.workspace.open(e,n);t.isDestroyed()||t.activate();return i};function so(e){return co("markdown-preview-plus://editor/"+e.id)}function uo(e){return co("markdown-preview-plus://file/"+e)}function co(e){const t=atom.workspace.paneForURI(e);if(t){const n=t.itemForURI(e);if(n)return n}return $i.BrowserWindowHandler.viewForURI(e)}eo.openPreviewPane=ao;var lo=t;class fo extends Xi.MarkdownPreviewController{type="editor";text="";constructor(e){super(),this.editor=e,this.text=e.getText(),(0,I.handlePromise)(this.handleEditorEvents())}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",editorId:this.editor&&this.editor.id}}getTitle(){return this.editor.getTitle()+" Preview"}getURI(){return"markdown-preview-plus://editor/"+this.editor.id}getPath(){return this.editor.getPath()}async getMarkdownSource(){return this.text}getGrammar(){return this.editor.getGrammar()}onDidChange(e){return this.emitter.on("did-change",e)}didScrollPreview(e,t){if(this.shouldScrollSync("preview"))if(0===e)this.editor.scrollToBufferPosition([e,0]);else if(t>=this.editor.getLastBufferRow()-1)this.editor.scrollToBufferPosition([t,0]);else{const n=Gi.Range.fromObject([[e,0],[t,0]]);this.editor.scrollToScreenRange(this.editor.screenRangeForBufferRange(n),{center:!1})}}getScrollSyncParams(){try{const[e,t]=this.editor.getVisibleRowRange();return{firstLine:this.editor.bufferRowForScreenRow(e),lastLine:this.editor.bufferRowForScreenRow(t)}}catch(e){return void console.error(e)}}openSource(e){void 0!==e&&this.editor.setCursorBufferPosition([e,0]);const t=atom.workspace.paneForItem(this.editor);t&&(t.activateItem(this.editor),t.activate())}async handleEditorEvents(){this.disposables.add(atom.workspace.onDidChangeActiveTextEditor(e=>{(0,I.atomConfig)().previewConfig.activatePreviewWithEditor&&e===this.editor&&this.emitter.emit("activate",atom.workspace.paneForItem(e))}),this.editor.getBuffer().onDidStopChanging(()=>{(0,I.atomConfig)().previewConfig.liveUpdate&&this.changeHandler(),(0,I.atomConfig)().syncConfig.syncPreviewOnChange&&this.syncPreviewHelper(!1)}),this.editor.onDidChangePath(()=>{this.emitter.emit("did-change-path",this.getPath())}),this.editor.onDidDestroy(()=>{this.destroy()}),this.editor.getBuffer().onDidSave(()=>{(0,I.atomConfig)().previewConfig.liveUpdate||this.changeHandler()}),this.editor.getBuffer().onDidReload(()=>{(0,I.atomConfig)().previewConfig.liveUpdate||this.changeHandler()}),atom.views.getView(this.editor).onDidChangeScrollTop(()=>{if(!this.shouldScrollSync("editor"))return;const e=this.getScrollSyncParams();void 0!==e&&this.emitter.emit("scroll-sync",e)}),atom.commands.add(atom.views.getView(this.editor),{"markdown-preview-plus:sync-preview":()=>{this.syncPreviewHelper(!0)},"markdown-preview-plus:search-selection-in-preview":()=>{const e=this.editor.getSelectedText();this.emitter.emit("search",e)}}))}changeHandler(){this.text=this.editor.getText(),this.emitter.emit("did-change")}syncPreviewHelper(e){const t=this.editor.getCursorBufferPosition().row;this.emitter.emit("sync",[t,e])}shouldScrollSync(e){const t=(0,I.atomConfig)().syncConfig;if(!t.syncEditorOnPreviewScroll||!t.syncPreviewOnEditorScroll)return t.syncEditorOnPreviewScroll&&"preview"===e||t.syncPreviewOnEditorScroll&&"editor"===e;if("editor"===e){const e=this.editor;if(!e)return!1;return!!lo.remote.getCurrentWindow().isFocused()&&e===atom.workspace.getActivePaneItem()}if("preview"===e){const e=(0,eo.viewForEditor)(this.editor);if(!e)return!1;const t=$i.BrowserWindowHandler.windowForView(e);return t?t.isFocused():e===atom.workspace.getActivePaneItem()}return!1}}Ki=fo,Yi.MarkdownPreviewControllerEditor=Ki;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});var po=void 0;ho.MarkdownPreviewControllerFile=po;var vo=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=go();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(i),mo=r;function go(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return go=function(){return e},e}class yo extends Xi.MarkdownPreviewController{type="file";constructor(e){super(),this.file=new mo.File(e),this.disposables.add(this.file.onDidChange(()=>{this.emitter.emit("did-change")}))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",filePath:this.file.getPath()}}getTitle(){const e=this.getPath();return(e?vo.basename(e):"Markdown File")+" Preview"}getURI(){return"markdown-preview-plus://file/"+this.getPath()}getPath(){return this.file.getPath()}getGrammar(){}async getMarkdownSource(){const e=await this.file.read();return null!==e?e:""}}po=yo,ho.MarkdownPreviewControllerFile=po;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});var bo=void 0;wo.MarkdownPreviewControllerText=bo;class ko extends Xi.MarkdownPreviewController{type="text";text="";constructor(e){super(),this.textPromise=e,(0,I.handlePromise)(e.then(e=>{this.text=e}))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",text:this.text}}getTitle(){return"Markdown Preview"}getURI(){return"markdown-preview-plus://text/"}getPath(){}getGrammar(){}async getMarkdownSource(){return this.textPromise}}function _o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _o=function(){return e},e}function So(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}bo=ko,wo.MarkdownPreviewControllerText=bo;class xo{static elementMap=new WeakMap;get type(){return this.controller.type}emitter=new g.Emitter;disposables=new g.CompositeDisposable;destroyed=!1;loading=!0;constructor(e,t=(0,I.atomConfig)().mathConfig.enableLatexRenderingByDefault,n=F.WebviewHandler){this.controller=e,this.renderLaTeX=t,this.handler=new n(async()=>{const e=(0,I.atomConfig)();await this.handler.init({userMacros:(0,ge.loadUserMacros)(),mathJaxConfig:e.mathConfig,context:"live-preview"}),await this.handler.setBasePath(this.getPath()),await this.handler.setNativeKeys(e.previewConfig.nativePageScrollKeys),this.emitter.emit("did-change-title"),this.emitter.emit("did-init")}),this.element=document.createElement("div"),this.element.tabIndex=-1,this.element.classList.add("markdown-preview-plus"),xo.elementMap.set(this.element,this),this.subscribeController(),this._initialRenderPromsie=new Promise(e=>{this.disposables.add(this.emitter.on("did-init",()=>{(0,I.handlePromise)(this.renderMarkdown().then(()=>{this.loading=!1,e()}))}))}),this.handler.element&&this.element.appendChild(this.handler.element),this.handler.registerViewEvents(this),this.disposables.add(this.handler.onDidDestroy(()=>this.destroy())),this.handleEvents()}static viewForElement(e){return xo.elementMap.get(e)}serialize(){return this.controller.serialize()}destroy(){this.destroyed||(this.destroyed=!0,this.emitter.emit("did-destroy"),this.disposables.dispose(),this.controller.destroy(),this.handler.destroy(),xo.elementMap.delete(this.element),this.element.remove())}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async runJS(e){return this.handler.runJS(e)}async initialRenderPromise(){await this._initialRenderPromsie}onDidChangeTitle(e){return this.emitter.on("did-change-title",e)}onDidChangeMarkdown(e){return this.emitter.on("did-change-markdown",e)}toggleRenderLatex(){this.renderLaTeX=!this.renderLaTeX,this.changeHandler()}getTitle(){return this.controller.getTitle()}getDefaultLocation(){return(0,I.atomConfig)().previewConfig.previewDock}getIconName(){return"markdown"}getURI(){return this.controller.getURI()}getPath(){return this.controller.getPath()}getSaveDialogOptions(){let e=this.getPath();if(void 0===e){const t=atom.project.getPaths()[0];e="untitled.md",t&&(e=m.join(t,e))}return e+="."+(0,I.atomConfig)().saveConfig.defaultSaveFormat,{defaultPath:e}}saveAs(e){if(void 0===e)return;if(this.loading)throw new Error("Preview is still loading");const{name:t,ext:n}=m.parse(e);".pdf"===n?(0,I.handlePromise)(this.getMarkdownSource().then(async t=>(await(0,Ni.saveAsPDF)(t,this.getPath(),this.getGrammar(),this.renderLaTeX,e),(0,I.atomConfig)().saveConfig.openOnSave.pdf?atom.workspace.open(e):void 0))):(0,I.handlePromise)(this.getHTMLToSave(e).then(async n=>{const r=Ti.mkHtml(t,n,this.renderLaTeX,await this.handler.getTeXConfig());return w.writeFileSync(e,r),(0,I.atomConfig)().saveConfig.openOnSave.html?atom.workspace.open(e):void 0}))}openMainWindow(){const e=this.createNewFromThis(F.WebviewHandler);(0,I.handlePromise)((0,eo.openPreviewPane)(e)),Ti.destroy(this)}openNewWindow(){const e=this.createNewFromThis($i.BrowserWindowHandler);atom.views.getView(atom.workspace).appendChild(e.element),Ti.destroy(this)}createNewFromThis(e){const t=this.controller;return this.controller=new Ji.MarkdownPreviewControllerText(this.getMarkdownSource()),this.subscribeController(),new xo(t,this.renderLaTeX,e)}changeHandler=()=>{(0,I.handlePromise)(this.renderMarkdown());const e=atom.workspace.paneForItem(this);void 0!==e&&e!==atom.workspace.getActivePane()&&e.activateItem(this)};async getMarkdownSource(){return this.controller.getMarkdownSource()}getGrammar(){return this.controller.getGrammar()}async openSource(e){const t=this.getPath();if(void 0===t)return;const n=await atom.workspace.open(t,{initialLine:e,searchAllPanes:!0});return atom.workspace.isTextEditor(n)?("editor"!==this.controller.type&&(this.controller.destroy(),this.controller=new Ji.MarkdownPreviewControllerEditor(n),this.subscribeController()),n):void 0}async syncPreview(e,t){return this.handler.sync(e,t)}handleEvents(){this.disposables.add(atom.grammars.onDidAddGrammar(()=>(0,y.debounce)(()=>{(0,I.handlePromise)(this.renderMarkdown())},250)),atom.grammars.onDidUpdateGrammar((0,y.debounce)(()=>{(0,I.handlePromise)(this.renderMarkdown())},250)),atom.commands.add(this.element,{"core:move-up":()=>this.handler.runJS('window.scrollBy({top:-30, behavior: "auto"})'),"core:move-down":()=>this.handler.runJS('window.scrollBy({top:30, behavior: "auto"})'),"core:move-left":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:move-right":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:page-up":()=>this.handler.runJS('window.scrollBy({top:-0.9*window.innerHeight, behavior: "auto"})'),"core:page-down":()=>this.handler.runJS('window.scrollBy({top:0.9*window.innerHeight, behavior: "auto"})'),"core:move-to-top":()=>this.handler.runJS('window.scrollBy({top:-document.body.scrollHeight, behavior: "smooth"})'),"core:move-to-bottom":()=>this.handler.runJS('window.scrollBy({top:document.body.scrollHeight, behavior: "smooth"})'),"core:cancel":e=>{this.handler.hasSearch()?(0,I.handlePromise)(this.handler.stopSearch()):e.abortKeyBinding()},"core:copy":()=>{(0,I.handlePromise)(this.copyToClipboard())},"markdown-preview-plus:open-dev-tools":()=>{(0,I.handlePromise)(this.handler.openDevTools())},"markdown-preview-plus:new-window":()=>{this.openNewWindow()},"markdown-preview-plus:print":()=>{(0,I.handlePromise)(this.handler.print())},"markdown-preview-plus:zoom-in":()=>{(0,I.handlePromise)(this.handler.zoomIn())},"markdown-preview-plus:zoom-out":()=>{(0,I.handlePromise)(this.handler.zoomOut())},"markdown-preview-plus:reset-zoom":()=>{(0,I.handlePromise)(this.handler.resetZoom())},"markdown-preview-plus:sync-source":e=>{(0,I.handlePromise)(this.handler.syncSource().then(e=>this.openSource(e)))},"markdown-preview-plus:search-selection-in-source":()=>{(0,I.handlePromise)(this.searchSelectionInSource())},"markdown-preview-plus:find-next":()=>{(0,I.handlePromise)(this.handler.findNext())},"markdown-preview-plus:find-in-preview":()=>{const e=b.remote.getCurrentWindow(),t=b.remote.BrowserWindow.getFocusedWindow();t!==e&&e.focus(),(0,I.handlePromise)((0,Bi.modalTextEditorView)("Find in preview").then(n=>{if(t&&t!==e&&t.focus(),n)return this.handler.search(n)}))}}),atom.config.onDidChange("markdown-preview-plus.markdownItConfig",()=>{"markdown-it"===(0,I.atomConfig)().renderer&&this.changeHandler()}),atom.config.onDidChange("markdown-preview-plus.pandocConfig",()=>{"pandoc"===(0,I.atomConfig)().renderer&&this.changeHandler()}),atom.config.onDidChange("markdown-preview-plus.mathConfig.latexRenderer",()=>(0,I.handlePromise)(this.handler.reload())),atom.config.onDidChange("markdown-preview-plus.mathConfig.numberEquations",()=>(0,I.handlePromise)(this.handler.reload())),atom.config.onDidChange("markdown-preview-plus.previewConfig.nativePageScrollKeys",({newValue:e})=>(0,I.handlePromise)(this.handler.setNativeKeys(e))),atom.config.onDidChange("markdown-preview-plus.renderer",this.changeHandler),atom.config.onDidChange("markdown-preview-plus.previewConfig.highlighter",this.changeHandler),this.handler.emitter.on("did-scroll-preview",({min:e,max:t})=>{this.controller.didScrollPreview(e,t)}))}async renderMarkdown(){return this.renderMarkdownText(await this.getMarkdownSource())}async getHTMLToSave(e){const t=await this.getMarkdownSource();return ji.render({text:t,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!1,mode:"save",savePath:e})}async renderMarkdownText(e){try{const t=await ji.render({text:e,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!0,mode:"normal",imageWatcher:this.handler.imageWatcher});if(this.destroyed)return;await this.handler.update(t.documentElement.outerHTML,this.renderLaTeX,(0,I.atomConfig)().previewConfig.diffMethod,Ti.buildLineMap(t.querySelector("[data-pos]")?t:await ii.MarkdownItWorker.getTokens(e,this.renderLaTeX)),(0,I.atomConfig)().syncConfig.syncPreviewOnEditorScroll?this.controller.getScrollSyncParams():void 0),this.emitter.emit("did-change-markdown")}catch(e){await this.showError(e)}}async showError(e){return this.destroyed?void atom.notifications.addFatalError("Error reported on a destroyed Markdown Preview Plus view",{dismissable:!0,stack:e.stack,detail:e.message}):this.loading?void atom.notifications.addFatalError("Error reported when Markdown Preview Plus view is loading",{dismissable:!0,stack:e.stack,detail:e.message}):this.handler.error(e.message)}async copyToClipboard(){const e=await this.handler.getSelection();if(void 0!==e)atom.config.get("markdown-preview-plus.richClipboard")?await this.handler.runJS('document.execCommand("copy")'):atom.clipboard.write(e);else{const e=await this.getMarkdownSource();await(0,I.copyHtml)(e,this.getPath(),this.renderLaTeX)}}async searchSelectionInSource(){const e=await this.handler.getSelection();if(!e)return;const t=await this.openSource();if(!t)return;const n=e.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/\n+$/,"").replace(/\s+/g,"\\s+"),r=new RegExp(n);let i=!1;t.scanInBufferRange(r,new g.Range(t.getCursors()[0].getBufferPosition(),t.getBuffer().getRange().end),e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),i=!0,e.stop()}),i||t.scan(r,e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),e.stop()})}subscribeController(){this.controllerDisposables&&(this.disposables.remove(this.controllerDisposables),this.controllerDisposables.dispose()),this.controllerDisposables=new g.CompositeDisposable,this.disposables.add(this.controllerDisposables),this.controllerDisposables.add(this.controller.onDidChange(this.changeHandler),this.controller.onDidChangePath(e=>{(0,I.handlePromise)(this.handler.setBasePath(e)),this.emitter.emit("did-change-title")}),this.controller.onDidDestroy(()=>{if((0,I.atomConfig)().previewConfig.closePreviewWithEditor)Ti.destroy(this);else{const e=this.controller.getPath();this.controller=e?new Ji.MarkdownPreviewControllerFile(e):new Ji.MarkdownPreviewControllerText(this.controller.getMarkdownSource()),this.subscribeController()}}),this.controller.onActivate(e=>{const t=atom.workspace.paneForItem(this);t&&t!==e&&t.activateItem(this)}),this.controller.onScrollSync(({firstLine:e,lastLine:t})=>{(0,I.handlePromise)(this.handler.scrollSync(e,t))}),this.controller.onSearch(e=>{(0,I.handlePromise)(this.handler.search(e))}),this.controller.onSync(([e,t])=>{(0,I.handlePromise)(this.syncPreview(e,t))}))}}v=xo,p.MarkdownPreviewView=v,Object.keys(eo).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(h,e)||e in d&&d[e]===eo[e]||Object.defineProperty(d,e,{enumerable:!0,get:function(){return eo[e]}}))}));var Po=r,Oo=Ua(i),Co=Ua(I),Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});var Eo=void 0;Mo.PlaceholderView=Eo;Eo=class{element=document.createElement("div");constructor(e){this.editorId=e,this.element.classList.add("markdown-spinner"),setImmediate(this.initialize)}getView(){return this._view}getTitle(){return"Placeholder Markdown Preview Plus View"}getURI(){return"markdown-preview-plus://placeholder"}initialize=()=>{const e=(0,V.editorForId)(this.editorId);if(!e)return;const t=atom.workspace.paneForItem(this);this._view=(0,d.createEditorView)(e),t&&(t.addItem(this._view),(0,I.handlePromise)(t.destroyItem(this)))}},Mo.PlaceholderView=Eo;var Io={};Object.defineProperty(Io,"__esModule",{value:!0});var Ao=function(){const e=atom.config.get("markdown-preview-plus"),t=[];void 0!==e.enablePandoc&&(atom.config.set("markdown-preview-plus.renderer",e.enablePandoc?"pandoc":"markdown-it"),Lo("enablePandoc"),t.push(!0));return t.push(jo(e,"markdown-preview-plus.markdownItConfig.breakOnSingleNewline","breakOnSingleNewline"),jo(e,"markdown-preview-plus.previewConfig.liveUpdate","liveUpdate"),jo(e,"markdown-preview-plus.previewConfig.previewSplitPaneDir","previewSplitPaneDir"),jo(e,"markdown-preview-plus.previewConfig.previewDock","previewDock"),jo(e,"markdown-preview-plus.previewConfig.closePreviewWithEditor","closePreviewWithEditor"),jo(e,"markdown-preview-plus.previewConfig.activatePreviewWithEditor","activatePreviewWithEditor"),jo(e,"markdown-preview-plus.syncConfig.syncPreviewOnChange","syncPreviewOnChange"),jo(e,"markdown-preview-plus.syncConfig.syncPreviewOnEditorScroll","syncPreviewOnEditorScroll"),jo(e,"markdown-preview-plus.syncConfig.syncEditorOnPreviewScroll","syncEditorOnPreviewScroll"),jo(e,"markdown-preview-plus.mathConfig.enableLatexRenderingByDefault","enableLatexRenderingByDefault"),jo(e,"markdown-preview-plus.mathConfig.latexRenderer","latexRenderer"),jo(e,"markdown-preview-plus.mathConfig.numberEquations","numberEquations"),jo(e,"markdown-preview-plus.markdownItConfig.useLazyHeaders","useLazyHeaders"),jo(e,"markdown-preview-plus.markdownItConfig.useCheckBoxes","useCheckBoxes"),jo(e,"markdown-preview-plus.markdownItConfig.useEmoji","useEmoji"),jo(e,"markdown-preview-plus.markdownItConfig.useToc","useToc"),jo(e,"markdown-preview-plus.markdownItConfig.inlineMathSeparators","inlineMathSeparators"),jo(e,"markdown-preview-plus.markdownItConfig.blockMathSeparators","blockMathSeparators"),jo(e,"markdown-preview-plus.pandocConfig.useNativePandocCodeStyles","useNativePandocCodeStyles"),jo(e,"markdown-preview-plus.pandocConfig.pandocPath","pandocPath"),jo(e,"markdown-preview-plus.pandocConfig.pandocFilters","pandocFilters"),jo(e,"markdown-preview-plus.pandocConfig.pandocArguments","pandocArguments"),jo(e,"markdown-preview-plus.pandocConfig.pandocMarkdownFlavor","pandocMarkdownFlavor"),jo(e,"markdown-preview-plus.pandocConfig.pandocBibliography","pandocBibliography"),jo(e,"markdown-preview-plus.pandocConfig.pandocRemoveReferences","pandocRemoveReferences"),jo(e,"markdown-preview-plus.pandocConfig.pandocBIBFile","pandocBIBFile"),jo(e,"markdown-preview-plus.pandocConfig.pandocBIBFileFallback","pandocBIBFileFallback"),jo(e,"markdown-preview-plus.pandocConfig.pandocCSLFile","pandocCSLFile"),jo(e,"markdown-preview-plus.pandocConfig.pandocCSLFileFallback","pandocCSLFileFallback")),t.some(e=>!0===e)};function Lo(e){atom.config.unset("markdown-preview-plus."+e)}function jo(e,t,n){return null!=e[n]&&(atom.config.set(t,e[n]),Lo(n),!0)}Io.migrateConfig=Ao;var To={};Object.defineProperty(To,"__esModule",{value:!0});var No=async function(e){let t;const n=document.activeElement;try{return await new Promise(n=>{const r=new Da.default({items:e,elementForItem:e=>{const t=document.createElement("li");return t.innerText=e,t},didCancelSelection:()=>{n()},didConfirmSelection:e=>{n(e)},itemsClassList:["atom-typescript"]});t=atom.workspace.addModalPanel({item:r,visible:!0}),r.focus()})}finally{t&&t.destroy(),n&&n.focus()}};To.selectListView=No;var Ro;const{Disposable:Fo,CompositeDisposable:Do,TextEditor:Bo}=r;var Wo,zo,$o={};zo={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var Uo={};function qo(e,t,...n){for(let e=0;e<n.length;){const t=n[e];switch(typeof t){case"string":case"number":n[e]={text:t},e++;break;case"object":Array.isArray(t)?n.splice(e,1,...t):t?e++:n.splice(e,1);break;default:throw new Error("Invalid child node: "+t)}}if(t){for(const e in t){const n=zo[e];n&&(t.on||(t.on={}),t.on[n]=t[e])}t.class&&(t.className=t.class)}return{tag:e,props:t,children:n}}Uo=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);const Ho=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const e of Ho)qo[e]=(t,...n)=>qo(e,t,...n);for(const e of Uo)qo[e]=(t,...n)=>qo(e,t,...n);Wo=qo;var Vo,Jo={},Yo={};Yo=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);function Ko(e,t,n,r){if(t)for(var i in t)n&&i in n||(r?e[i]="":delete e[i]);if(n)for(var i in n){const r=t&&t[i],o=n[i];o!==r&&(e[i]=o)}}function Go(e,t,n){if(t)for(var r in t)n&&r in n||e.removeAttribute(r);if(n)for(var r in n){const i=t&&t[r],o=n[r];o!==i&&e.setAttribute(r,o)}}function Xo(e,t){let n;if(null!=e.text)n=document.createTextNode(e.text);else{const{tag:r,children:i}=e;let{props:o}=e;if("function"==typeof r){let a;o&&o.ref&&(a=o.ref);const s=new r(o||{},i);e.component=s,n=s.element,t&&t.refs&&a&&(t.refs[a]=s)}else Uo.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&Qo(n,i,t),o&&Vo(n,null,e,t)):(n=document.createElement(r),i&&Qo(n,i,t),o&&Vo(n,null,e,t))}return e.domNode=n,n}function Qo(e,t,n){for(let r=0;r<t.length;r++)e.appendChild(Xo(t[r],n))}Vo=function(e,t,n,r){const i=t&&t.props,o=n.props;let a,s;r&&(a=r.refs,s=r.listenerContext),function e(t,n,r,i,o){if(r)for(var a in r)"ref"!==a&&"on"!==a&&(a in zo||o&&a in o||("dataset"===a?e(t.dataset,null,r&&r.dataset,null,null):"innerHTML"!==a&&n&&Uo.has(n.tag)?t.removeAttribute(Yo.get(a)||a):(t[a]="",delete t[a])));if(o)for(var a in o)if("ref"!==a&&"on"!==a&&!(a in zo)){var s=r&&r[a],u=o[a];"dataset"===a?Ko(t.dataset,s,u,!1):"style"===a&&"string"!=typeof u?("string"==typeof s&&(t.style="",s=null),Ko(t.style,s,u,!0)):"attributes"===a?Go(t,s,u):u!==s&&("innerHTML"!==a&&i&&Uo.has(i.tag)?t.setAttribute(Yo.get(a)||a,u):i&&"input"===i.tag&&"value"===a&&t[a]===u||(t[a]=u))}}(e,t,i,n,o),a&&function(e,t,n,r){n!==t&&(t&&r[t]===e&&delete r[t],n&&(r[n]=e))}(e,i&&i.ref,o&&o.ref,a),function(e,t,n,r){const i=t&&t.props&&t.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=t&&t.boundListeners&&t.boundListeners[n]?t.boundListeners[n]:i[n],e.removeEventListener(n,r)}for(const a in o){const s=i&&i[a],u=o[a];if(u!==s){if(s){let n;n=t&&t.boundListeners&&t.boundListeners[a]?t.boundListeners[a]:s,e.removeEventListener(a,n)}if(u){let t;r?(t=u.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[a]=t):t=u,e.addEventListener(a,t)}}}}(e,t,n,s)},Jo=Xo;var Zo,ea={};function ta(e,t,n){const r=e.domNode;if(t===e)return r;if(ia(e,t)){let i;return null!=t.text?(r.nodeValue=t.text,i=r):"function"==typeof t.tag?i=function(e,t,n){const{component:r,props:i}=e;let{props:o,children:a}=t;if(t.component=r,n&&n.refs){const e=n.refs,t=i&&i.ref,a=o&&o.ref;a!==t&&(t&&e[t]===r&&delete e[t],a&&(e[a]=r))}return r.update(o||{},a),r.element}(e,t,n):(!function(e,t,n,r){var i,o=0,a=t.length-1,s=t[0],u=t[a],c=0,l=n.length-1,f=n[0],d=n[l];for(;o<=a&&c<=l;)if(s)if(u)if(ia(s,f))ta(s,f,r),s=t[++o],f=n[++c];else if(ia(u,d))ta(u,d,r),u=t[--a],d=n[--l];else if(ia(s,d))ta(s,d,r),e.insertBefore(s.domNode,u.domNode.nextSibling),s=t[++o],d=n[--l];else if(ia(u,f))ta(u,f,r),e.insertBefore(u.domNode,s.domNode),u=t[--a],f=n[++c];else{i||(na.length>0?(i=na.pop()).clear():i=new Map,aa(i,t,o,a));var h=oa(f),p=h?i.get(h):null;if(null==p)e.insertBefore(Jo(f,r),s.domNode),f=n[++c];else{var v=t[p];ta(v,f,r),t[p]=void 0,e.insertBefore(v.domNode,s.domNode),f=n[++c]}}else u=t[--a];else s=t[++o];if(o>a){var m=n[l+1]?n[l+1].domNode:null;for(let t=c;t<=l;t++)e.insertBefore(Jo(n[t],r),m)}else if(c>l)for(let e=o;e<=a;e++){var g=t[e];g&&ra(g,r&&r.refs)}i&&na.push(i)}(r,e.children,t.children,n),Vo(r,e,t,n),i=r),t.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;ra(e,n&&n.refs);const a=Jo(t,n);return i&&i.insertBefore(a,o),t.domNode=a,a}}let na=[new Map,new Map,new Map,new Map];function ra(e,t,n=!0){const{domNode:r,props:i,children:o,component:a}=e,s=i&&i.ref;if(a)t&&s&&t[s]===a&&delete t[s],a.destroy&&a.destroy();else if(t&&s&&t[s]===r&&delete t[s],o)for(let e=0;e<o.length;e++)ra(o[e],t,!1);n&&r.remove()}function ia(e,t){return oa(e)===oa(t)&&e.tag===t.tag}function oa(e){return e.props?e.props.key:void 0}function aa(e,t,n,r){for(let i=n;i<=r;i++){const n=oa(t[i]);n&&e.set(n,i)}return e}ea=ta;var sa;sa=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(e){this.updateRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(e){this.readRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise(e=>{this.resolveNextUpdatePromise=e})),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let e=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,e()}}};let ua=null;var ca=function(){return ua||(ua=new sa),ua};const la=new WeakSet;let fa=0,da=0;function ha(e){return null!=e&&!1!==e}function pa(e,t=!0){if(!ha(e.virtualNode))throw new Error((e.constructor?e.constructor.name+" instance":e)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==e.element)throw new Error((e.constructor?e.constructor.name+" instance":e)+" is not associated with a DOM element. Perhaps this component was never initialized?");let n=e.render();if(!ha(n)){const t=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+t)}fa++;let r=e.virtualNode,i=e.element,o=ea(r,n,{refs:e.refs,listenerContext:e});if(e.virtualNode=n,o!==i&&!t)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");e.element=o,"function"==typeof e.writeAfterUpdate&&e.writeAfterUpdate(),"function"==typeof e.readAfterUpdate&&ca().readDocument((function(){e.readAfterUpdate()})),fa--}function va(e,t=!0){da++,ma(e.virtualNode),1===da&&t&&e.element.remove(),da--}function ma(e){e.component&&"function"==typeof e.component.destroy?e.component.destroy():e.children&&e.children.forEach(ma)}Zo={initialize:function(e){if("function"!=typeof e.update)throw new Error("Etch components must implement `update(props, children)`.");let t=e.render();if(!ha(t)){let n=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+t+" returned from render()"+n)}e.refs={},e.virtualNode=t,e.element=Jo(e.virtualNode,{refs:e.refs,listenerContext:e})},update:function(e,t=!0){if(fa>0)return pa(e,t),Promise.resolve();let n=ca();return la.has(e)||(la.add(e),n.updateDocument((function(){la.delete(e),pa(e,t)}))),n.getNextUpdatePromise()},updateSync:pa,destroy:function(e,t=!0){if(fa>0||da>0)return va(e,t),Promise.resolve();let n=ca();return n.updateDocument((function(){va(e,t)})),n.getNextUpdatePromise()},destroySync:va};const{initialize:ga,update:ya,updateSync:wa,destroy:ba,destroySync:ka}=Zo,_a=($o={dom:Wo,render:Jo,initialize:ga,update:ya,updateSync:wa,destroy:ba,destroySync:ka,setScheduler:function(e){ua=e},getScheduler:ca}).dom;var Sa,xa,Pa,Oa={},Ca=!1;function Ma(){return Ca||(Ca=!0,function(){var e,t;e=i.sep,Sa=function(t,n,r){var i,o,a,s,u;for(o=t.length-1;t[o]===e;)o--;for(u=0,a=o,i=null;o>=0;)t[o]===e?(u++,null==i&&(i=t.substring(o+1,a+1))):0===o&&(a<t.length-1?null==i&&(i=t.substring(0,a+1)):null==i&&(i=t)),o--;return i===t?r*=2:i&&(r+=xa(i,n)),s=u+1,r*=.01*Math.max(1,10-s)},Pa.basenameScore=Sa,xa=function(n,r){var i,o,a,s,u,c,l,f,d,h,p,v;if(n===r)return 1;if(t(n,r))return 1;for(h=0,l=r.length,d=n.length,a=0,s=0;a<l;){if(i=r[a++],u=n.indexOf(i.toLowerCase()),p=n.indexOf(i.toUpperCase()),-1===(c=Math.min(u,p))&&(c=Math.max(u,p)),-1===(s=c))return 0;o=.1,n[s]===i&&(o+=.1),0===s||n[s-1]===e?o+=.8:"-"!==(v=n[s-1])&&"_"!==v&&" "!==v||(o+=.7),n=n.substring(s+1,d),h+=o}return((f=h/l)*(l/d)+f)/2},Pa.score=xa,t=function(t,n){if(t[t.length-n.length-1]===e)return t.lastIndexOf(n)===t.length-n.length}}.call(Pa={})),Pa}var Ea,Ia=!1;function Aa(){return Ia||(Ia=!0,function(){var e,t,n;t=Ma(),e=function(e){return e.candidate},n=function(e,t){return t.score-e.score},Ea=function(r,i,o,a){var s,u,c,l,f,d,h,p,v;if(u=(v=null!=a?a:{}).key,c=v.maxResults,i){for(f=[],h=0,p=r.length;h<p;h++)s=r[h],(d=null!=u?s[u]:s)&&(l=t.score(d,i,o),o||(l=t.basenameScore(d,i,l)),l>0&&f.push({candidate:s,score:l}));f.sort(n),r=f.map(e)}return null!=c&&(r=r.slice(0,c)),r}}.call(Ea={})),Ea}var La,ja,Ta,Na=!1;function Ra(){return Na||(Na=!0,function(){var e;e=i.sep,La=function(t,n){var r,i,o;for(i=t.length-1;t[i]===e;)i--;for(o=i,r=null;i>=0;)t[i]===e?null==r&&(r=t.substring(i+1,o+1)):0===i&&(o<t.length-1?null==r&&(r=t.substring(0,o+1)):null==r&&(r=t)),i--;return ja(r,n,t.length-r.length)},Ta.basenameMatch=La,ja=function(e,t,n){var r,i,o,a,s,u,c,l,f,d;if(null==n&&(n=0),e===t)return function(){d=[];for(var t=n,r=n+e.length;n<=r?t<r:t>r;n<=r?t++:t--)d.push(t);return d}.apply(this);for(c=t.length,l=e.length,i=0,o=0,s=[];i<c;){if(r=t[i++],a=e.indexOf(r.toLowerCase()),f=e.indexOf(r.toUpperCase()),-1===(u=Math.min(a,f))&&(u=Math.max(a,f)),-1===(o=u))return[];s.push(n+o),n+=o+1,e=e.substring(o+1,l)}return s},Ta.match=ja}.call(Ta={})),Ta}(function(){var e,t,n,r,o;o=Ma(),n=Aa(),r=Ra(),e=i.sep,t=/\ /g,Oa={filter:function(r,i,o){var a;return i&&(a=-1!==i.indexOf(e),i=i.replace(t,"")),n(r,i,a,o)},score:function(n,r){var i,a;return n&&r?n===r?2:(i=-1!==r.indexOf(e),r=r.replace(t,""),a=o.score(n,r),i||(a=o.basenameScore(n,r,a)),a):0},match:function(n,i){var o,a,s,u,c,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var e=0,t=n.length;0<=t?e<t:e>t;0<=t?e++:e--)l.push(e);return l}.apply(this);if(u=-1!==i.indexOf(e),i=i.replace(t,""),s=r.match(n,i),!u)for(o=r.basenameMatch(n,i),s=s.concat(o).sort((function(e,t){return e-t})),c=null,a=0;a<s.length;)a&&c===s[a]?s.splice(a,1):(c=s[a],a++);return s}}}).call(Oa),Ro=class{static setScheduler(e){$o.setScheduler(e)}static getScheduler(e){return $o.getScheduler()}constructor(e){this.props=e,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),e.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new Do,$o.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),e.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const t=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);t.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",e=>{e.target===this.refs.items&&(this.didClickItemsList=!0)}),this.disposables.add(new Fo(()=>{t.removeEventListener("blur",n)}))}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{for(const t of e)if(t.intersectionRatio>0){const e=t.target;this.visibilityObserver.unobserve(e);const n=Array.from(this.refs.items.children).indexOf(e);n>=0&&this.renderItemAtIndex(n)}})}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(e){this.didClickItemsList||this.element.contains(e.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),$o.destroy(this)}registerAtomCommands(){return a.atom.commands.add(this.element,{"core:move-up":e=>{this.selectPrevious(),e.stopPropagation()},"core:move-down":e=>{this.selectNext(),e.stopPropagation()},"core:move-to-top":e=>{this.selectFirst(),e.stopPropagation()},"core:move-to-bottom":e=>{this.selectLast(),e.stopPropagation()},"core:confirm":e=>{this.confirmSelection(),e.stopPropagation()},"core:cancel":e=>{this.cancelSelection(),e.stopPropagation()}})}update(e={}){let t=!1;return e.hasOwnProperty("items")&&(this.props.items=e.items,t=!0),e.hasOwnProperty("maxResults")&&(this.props.maxResults=e.maxResults,t=!0),e.hasOwnProperty("filter")&&(this.props.filter=e.filter,t=!0),e.hasOwnProperty("filterQuery")&&(this.props.filterQuery=e.filterQuery,t=!0),e.hasOwnProperty("query")&&(this.refs.queryEditor.setText(e.query),t=!1),e.hasOwnProperty("selectQuery")&&(e.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),e.hasOwnProperty("order")&&(this.props.order=e.order),e.hasOwnProperty("emptyMessage")&&(this.props.emptyMessage=e.emptyMessage),e.hasOwnProperty("errorMessage")&&(this.props.errorMessage=e.errorMessage),e.hasOwnProperty("infoMessage")&&(this.props.infoMessage=e.infoMessage),e.hasOwnProperty("loadingMessage")&&(this.props.loadingMessage=e.loadingMessage),e.hasOwnProperty("loadingBadge")&&(this.props.loadingBadge=e.loadingBadge),e.hasOwnProperty("itemsClassList")&&(this.props.itemsClassList=e.itemsClassList),e.hasOwnProperty("initialSelectionIndex")&&(this.props.initialSelectionIndex=e.initialSelectionIndex),t&&this.computeItems(),$o.update(this)}render(){return _a.div({},_a(Bo,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const e=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&$o.getScheduler().updateDocument(()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach(e=>{this.visibilityObserver.observe(e)})}),this.listItems=this.items.map((e,t)=>{const n=this.getSelectedItem()===e,r=!this.props.initiallyVisibleItemCount||t<this.props.initiallyVisibleItemCount;return _a(Fa,{element:this.props.elementForItem(e,{selected:n,index:t,visible:r}),selected:n,onclick:()=>this.didClickItem(t)})}),_a.ol({className:e,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?_a.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?_a.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?_a.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?_a.div({className:"loading"},_a.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?_a.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(e){this.selectIndex(e),this.confirmSelection()}computeItems(e){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const t=this.props.filter||this.fuzzyFilter.bind(this);this.items=t(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,e)}fuzzyFilter(e,t){if(0===t.length)return e;{const n=[];for(const r of e){const e=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r;let i=Oa.score(e,t);i>0&&n.push({item:r,score:i})}return n.sort((e,t)=>t.score-e.score),n.map(e=>e.item)}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(e){const t=this.items[e],n=this.getSelectedItem()===t,r=this.listItems[e].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(t,{selected:n,index:e,visible:!0}),selected:n,onclick:()=>this.didClickItem(e)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(e,t=!0){e>=this.items.length?e=0:e<0&&(e=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=e,void 0!==e&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),t?this.listItems?(n>=0&&this.renderItemAtIndex(n),e>=0&&this.renderItemAtIndex(e),$o.getScheduler().getNextUpdatePromise()):$o.update(this):Promise.resolve()}selectItem(e){const t=this.items.indexOf(e);if(-1===t)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(t)}confirmSelection(){const e=this.getSelectedItem();null!=e?this.props.didConfirmSelection&&this.props.didConfirmSelection(e):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class Fa{constructor(e){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=e.selected,this.onclick=e.onclick,this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new Fo(()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)}),$o.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(e){e.preventDefault()}mouseUp(e){e.preventDefault()}didClick(e){e.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(e){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(e.element,this.element),this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),e.selected&&this.element.classList.add("selected"),this.selected=e.selected,this.onclick=e.onclick,$o.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var Da=function(e){return e&&e.__esModule?e:{default:e}}(Ro);var Ba=Ua(Ni),Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});var za=void 0;Wa.config=za;function $a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return $a=function(){return e},e}function Ua(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=$a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}let qa;async function Ha(e){const t=d.MarkdownPreviewView.viewForElement(e.currentTarget);if(!t)return;const n=atom.workspace.paneForItem(t);n?await n.destroyItem(t):t.destroy()}async function Va(e){return function(e){const t=(0,d.viewForEditor)(e);if(!t)return!1;const n=atom.workspace.paneForItem(t);if(n){if(t!==n.getActiveItem())return n.activateItem(t),!0;Co.handlePromise(n.destroyItem(t))}else{const e=$i.BrowserWindowHandler.windowForView(t);if(e&&!e.isFocused())return e.focus(),!0;t.destroy()}return!0}(e)?void 0:Ja(e)}async function Ja(e){return(0,d.openPreviewPane)((0,d.createEditorView)(e))}async function Ya(e){const{currentTarget:t}=e,n=t.querySelector(".entry.file.selected .name").dataset.path;if(!n)return void e.abortKeyBinding();const r=Oo.extname(n).substr(1);if(Co.atomConfig().extensions.includes(r)){for(const e of atom.workspace.getTextEditors())if(e.getPath()===n)return void await Ja(e);await atom.workspace.open("markdown-preview-plus://file/"+encodeURI(n),{searchAllPanes:!0})}else e.abortKeyBinding()}async function Ka(e){const t=Co.atomConfig().mathConfig.enableLatexRenderingByDefault,n=e.getSelectedText()||e.getText();await Co.copyHtml(n,e.getPath(),t)}function Ga(e){let t;return function(n){if(!qa)return;t&&(t.dispose(),qa.remove(t)),t=new Po.CompositeDisposable;const r={};e(n,t,r),t.add(atom.contextMenu.add(r)),qa.add(t)}}function Xa(e,t,n){for(const t of e){n[`.tree-view .file .name[data-name$=".${t}"]`]=[{label:"Markdown Preview",command:"markdown-preview-plus:preview-file"},{label:"Make PDF",command:"markdown-preview-plus:make-pdf"}]}}function Qa(e,t,n){for(const r of e){const e=`atom-text-editor[data-grammar="${r.replace(/\./g," ")}"]`;t.add(atom.commands.add(e,{"markdown-preview-plus:toggle":e=>{Co.handlePromise(Va(e.currentTarget.getModel()))},"markdown-preview-plus:copy-html":e=>{Co.handlePromise(Ka(e.currentTarget.getModel()))}})),n[e]=[{label:"Sync Preview",command:"markdown-preview-plus:sync-preview"},{label:"Copy Markdown as HTML",command:"markdown-preview-plus:copy-html"}]}}async function Za(e){const{currentTarget:t}=e,n=t.querySelectorAll(".entry.file.selected .name");const r=Co.atomConfig().extensions,i=Array.from(n).map(e=>e.dataset.path).filter(e=>void 0!==e&&r.includes(Oo.extname(e).substr(1))).map((async function(e){if(void 0===e)return;const t=new Po.File(e),n=await t.read();if(null===n)return;const r=e+".pdf",i=new Po.File(r);!await i.exists()||Co.atomConfig().saveConfig.makePDFOverwrite?await Ba.saveAsPDF(n,e,void 0,Co.atomConfig().mathConfig.enableLatexRenderingByDefault,r):atom.notifications.addInfo(i.getBaseName()+" exists, will not overwrite")}));0!==i.length?await Promise.all(i):e.abortKeyBinding()}function es(e){try{var t=f.parse(e)}catch(t){return void console.error(t,e)}if("markdown-preview-plus:"===t.protocol&&t.pathname){try{var n=decodeURI(t.pathname)}catch(e){return void console.error(e)}if("file"===t.hostname)return(0,d.createFileView)(n.slice(1));if("editor"===t.hostname){const e=parseInt(n.slice(1),10),t=atom.workspace.getTextEditors().find(t=>t.id===e);return void 0===t?void atom.notifications.addWarning(`Markdown-preview-plus: Tried to open preview for editor with id ${e}, which does not exist`):(0,d.createEditorView)(t)}throw new Error(`Tried to open markdown-preview-plus with uri ${e}. This is not supported. Please report this error.`)}}za={grammars:{title:"Markdown Grammars",description:"Editors using what grammars are considered Markdown",type:"array",default:["source.gfm","source.litcoffee","text.html.basic","text.md","text.plain","text.plain.null-grammar"],order:0,items:{type:"string"}},extensions:{type:"array",title:"Markdown file extensions",description:"Which files are considered Markdown",default:["markdown","md","mdown","mkd","mkdown","ron","txt"],order:1,items:{type:"string"}},disableToolBarIntegration:{title:"Disable Tool Bar integration",description:"Do not add the preview button to tool bar (only relevant if [tool-bar](https://atom.io/packages/tool-bar) package is installed)",type:"boolean",default:!1,order:.5},useGitHubStyle:{title:"Use GitHub.com style",type:"boolean",default:!1,order:2},syntaxThemeName:{title:"Syntax theme for code blocks",description:"If not empty, will try to use the given syntax theme for code blocks in preview",type:"string",default:"",order:2.5},importPackageStyles:{title:"Packages that can affect preview rendering",description:"A list of Atom package names that can affect preview style, comma-separated. A special value of `*` (star) will import all Atom styles into the preview, use with care. This does not affect exported HTML",type:"array",items:{type:"string"},default:["fonts"],order:2.6},codeTabWidth:{title:"Tab width for code blocks",description:"How to render tab character in code blocks; 0 means use Atom global setting",type:"integer",default:0,minimum:0,order:2.7},renderer:{type:"string",default:"markdown-it",title:"Renderer backend",enum:["markdown-it","pandoc"],order:3},richClipboard:{type:"boolean",default:!0,title:"Use rich clipboard",description:"Copy rich text to clipboard in addition to raw HTML when using copy html commands",order:4},previewConfig:{title:"Preview Behaviour",order:10,type:"object",properties:{liveUpdate:{title:"Live Update",type:"boolean",default:!0,order:10},diffMethod:{title:"Diff Method",description:"Advanced diffing method selection when updating the preview. None is obviously fastest, but inaccurate; heuristic is reasonably fast and should work most of the time; myers uses classic min-diff algoritm, but can be slow on large documents",type:"string",enum:["none","heuristic","myers"],default:"heuristic",order:15},highlighter:{title:"Code Highlighter",description:"What is used for highlighting code in code blocks. `none` is no highlighting, `legacy` is fast, but only supports legacy textmate grammars. `tree-sitter-compatible` uses Atom's internal highlighting API, and hence is compatible with tree-sitter grammars,  but it can be slower than `legacy` and is not as well-tested",type:"string",enum:["none","legacy","tree-sitter-compatible"],default:"tree-sitter-compatible",order:15},previewSplitPaneDir:{title:"Direction to load the preview in split pane",type:"string",default:"right",enum:["down","right","none"],order:20},previewDock:{title:"Open preview in dock",type:"string",default:"center",enum:["left","right","bottom","center"],order:25},closePreviewWithEditor:{title:"Close preview when editor closes",type:"boolean",default:!0,order:26},activatePreviewWithEditor:{title:"Bring up preview when editor activates",type:"boolean",default:!1,order:27},nativePageScrollKeys:{title:"Use native scroll keys in preview",description:"Will use arrow keys, page up, page down, home, end and space for native navigation in preview. The upside is smoother scroll behaviour. The downside is that when this option is enabled, these keys will be invisible to Atom when preview is focused, so those can not be used in keymap with preview-focused commands. Also unlike non-native commands, these are non-rebindable.",type:"boolean",default:!0,order:27.5},shellOpenFileExtensions:{title:"Always open links to these file types externally",description:"This is a comma-separated list of file name extensions that should always be opened with an external program. For example, if you want to always open PDF files (presumably named `something.pdf`) in system PDF viewer, add `pdf` here.",type:"array",default:["odt","doc","docx","ods","xls","xlsx","odp","ppt","pptx","zip","rar","7z","gz","xz","bz2","tar","tgz","txz","tbz2"],order:28,items:{type:"string"}}}},saveConfig:{type:"object",title:"Export Behaviour",order:15,properties:{mediaOnSaveAsHTMLBehaviour:{title:"When saving as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"relativized",enum:["relativized","absolutized","untouched"],order:10},mediaOnCopyAsHTMLBehaviour:{title:"When copying as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"untouched",enum:["relativized","absolutized","untouched"],order:15},defaultSaveFormat:{title:"Default format to save as",type:"string",order:20,enum:["html","pdf"],default:"html"},openOnSave:{type:"object",title:"Open after saving",order:21,properties:{html:{title:"HTML",type:"boolean",default:!0,order:10},pdf:{title:"PDF",type:"boolean",default:!1,order:20}}},makePDFOverwrite:{type:"boolean",title:"`Make PDF` on Tree View will overwrite files without prompt",order:22,default:!1},saveToPDFOptions:{title:"Save to PDF options",type:"object",order:25,properties:{latexRenderer:{title:"Math Renderer",description:"LaTeX Math renderer for PDF export; HTML-CSS usually looks better",type:"string",enum:["Same as live preview","HTML-CSS","SVG"],default:"Same as live preview",order:5},marginsType:{title:"Margins Type",type:"integer",enum:[{value:0,description:"Default margins"},{value:1,description:"No margins"},{value:2,description:"Minimum margins"}],default:0,order:10},pageSize:{title:"Page Size",enum:["A3","A4","A5","Legal","Letter","Tabloid","Custom"],type:"string",default:"A4",order:20},customPageSize:{title:"Custom Page Size",description:"Takes effect when Page Size is set to `Custom`. Specified as `<width>x<height>`, where `<height>` and `<width>` are floating-point numbers with `.` (dot) as decimal separator, no thousands separator, and with optional `cm`, `mm` or `in` suffix to indicate units, default is `mm`. For example, A4 is `8.3in x 11.7in` or `210mm x 297mm` or `210 x 297`. Whitespace is ignored.",type:"string",default:"",order:25},landscape:{title:"Page orientation",type:"boolean",enum:[{value:!1,description:"Portrait"},{value:!0,description:"Landscape"}],default:!1,order:26},printBackground:{title:"Render background",description:"Whether to render CSS backgrounds in PDF",type:"boolean",default:!1,order:30},printSelectionOnly:{title:"Render only selection",description:"Only render selected document fragment. Experimental",type:"boolean",default:!1,order:40}}}}},syncConfig:{title:"Preview position synchronization behaviour",type:"object",order:20,properties:{syncPreviewOnChange:{title:"Sync preview position when text in editor changes",type:"boolean",default:!1,order:28},syncPreviewOnEditorScroll:{title:"Sync preview position when text editor is scrolled",description:"Note: if both scroll sync options are enabled, the editor has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.1},syncEditorOnPreviewScroll:{title:"Sync editor position when preview is scrolled",description:"Note: if both scroll sync options are enabled, the preview has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.2}}},mathConfig:{type:"object",title:"Math Options",order:30,properties:{enableLatexRenderingByDefault:{title:"Enable Math Rendering By Default",type:"boolean",default:!1,order:0},latexRenderer:{title:"Math Renderer",description:"SVG is noticeably faster, but might look worse on some systems",type:"string",enum:["HTML-CSS","SVG"],default:"SVG",order:5},numberEquations:{title:"Number equations",description:"Number equations that are in equation environment, etc. Will re-render all math on each math change, which might be undesirable.",type:"boolean",default:!1,order:10},texExtensions:{title:"MathJax TeX extensions",type:"array",default:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],order:15,items:{type:"string"}},undefinedFamily:{title:"MathJax `undefinedFamily` (font family)",type:"string",default:"serif",order:20}}},markdownItConfig:{type:"object",title:"Markdown-It Settings",order:40,properties:{breakOnSingleNewline:{title:"Break on single newline",type:"boolean",default:!1,order:0},typographicReplacements:{title:"Typographic Replacements",description:"Replace (R) with ®, (c) with ©, (p) with §, -- with –, enable smart quotes, etc",type:"boolean",default:!0,order:1},useLazyHeaders:{title:"Use Lazy Headers with markdown-it parser",description:"Require no space after headings #",type:"boolean",default:!0,order:5},useCheckBoxes:{title:"Enable CheckBox lists with markdown-it parser",description:"CheckBox lists, like on GitHub",type:"boolean",default:!0,order:10},useEmoji:{title:"Use Emoji with markdown-it parser",description:"Emoji rendering",type:"boolean",default:!0,order:15},useToc:{title:"Use table of contents with markdown-it parser",description:"Replace [[toc]] with autogenerated table of contents",type:"boolean",default:!1,order:20},forceFullToc:{title:"Force full table of contents",description:"Renders all the headers in TOC, even if they are in incorrect order",type:"boolean",default:!1,order:21},tocDepth:{title:"Depth of Table of Contents",description:"Maximum header depth that will be included in TOC",type:"integer",default:2,order:22},useImsize:{title:"Allow specifying image size in image title",description:"Allow non-standard syntax for specifying image size via appending `=<width>x<height>` to image spacification, f.ex. `![test](image.png =100x200)`",type:"boolean",default:!0,order:25},useCriticMarkup:{title:"Enable CriticMarkup syntax support",description:"Support is limited to inline only",type:"boolean",default:!1,order:40},useFootnote:{title:"Enable footnotes with markdown-it parser",description:"Render Markdown footnotes a little prettier.",type:"boolean",default:!1,order:45},useAttributes:{title:"Enable attributes",description:"Allow braced `{}` attributes after inline/block elements. Also sets `id` with `#` and `class` with `.`\n\nF.ex.: `*emphasis*{#id-emphasis .class-emphasis data-attribute=emphasis}`\n\n**NOTE:** this is implicitly enabled by bracketed spans and fenced divs.\n\nSee [package page](https://npmjs.com/package/markdown-it-attrs) for more information.",type:"boolean",default:!1,order:50},useSpans:{title:"Enable bracketed spans",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-bracketed-spans) for more information.",type:"boolean",default:!1,order:60},useDivs:{title:"Enable fenced divs",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-container) for more information.",type:"boolean",default:!1,order:70},useDeflist:{title:"Enable definition lists",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-deflist) for more information.",type:"boolean",default:!1,order:80},useFontmatter:{title:"Enable YAML fontmatter",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-front-matter) for more information.",type:"boolean",default:!0,order:90},useImplicitFigures:{title:"Enable implicitFigures",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-implicit-figures) for more information.",type:"boolean",default:!1,order:100},useSubscript:{title:"Enable subscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sub) for more information.",type:"boolean",default:!1,order:110},useSuperscript:{title:"Enable superscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sup) for more information.",type:"boolean",default:!1,order:120},tableCaptions:{title:"Enable table captions",description:"Table captions as in Pandoc Markdown, e.g. `: caption` or `Table: caption`, etc.",type:"boolean",default:!1,order:125},inlineMathSeparators:{title:"Inline math separators",description:"List of inline math separators in pairs -- first opening, then closing",type:"array",default:["$","$","\\(","\\)"],order:1010,items:{type:"string"}},blockMathSeparators:{title:"Block math separators",description:"List of block math separators in pairs -- first opening, then closing",type:"array",default:["$$","$$","\\[","\\]"],order:1020,items:{type:"string"}},parseDisplayMathInline:{title:"Parse display math inline",description:'Will parse display ("block") math as inline elements, like pandoc',type:"boolean",default:!1,order:1050}}},pandocConfig:{type:"object",title:"Pandoc settings",order:50,properties:{useNativePandocCodeStyles:{title:"Use native Pandoc code block style",type:"boolean",default:!1,description:"Don't convert fenced code blocks to Atom editors when usingPandoc parser",order:0},pandocPath:{type:"string",default:"pandoc",title:"Path to Pandoc executable",description:"Please specify the correct path to your pandoc executable, for example, /usr/bin/pandoc, or C:\\Program Files\\Pandoc\\pandoc.exe",order:5},pandocFilters:{type:"array",default:[],title:"Filters",description:"Comma separated pandoc filters, in order of application. Will be passed via command-line arguments",order:10,items:{type:"string"}},pandocArguments:{type:"array",default:[],title:"Commandline Arguments",description:"Comma separated pandoc arguments e.g. `--smart, --filter=/bin/exe`. Please use long argument names.",order:15,items:{type:"string"}},pandocMarkdownFlavor:{type:"string",default:"markdown-raw_tex+tex_math_single_backslash",title:"Markdown Flavor",description:"Enter the pandoc markdown flavor you want",order:20},pandocBibliography:{type:"boolean",default:!1,title:"Citations (via pandoc-citeproc)",description:"Enable this for bibliography parsing. Note: pandoc-citeproc is applied after other filters specified in Filters, but before other commandline arguments ",order:25},pandocRemoveReferences:{type:"boolean",default:!0,title:"Remove References",description:"Removes references at the end of the HTML preview",order:30},pandocBIBFile:{type:"string",default:"bibliography.bib",title:"Bibliography (bibfile)",description:"Name of bibfile to search for recursively",order:35},pandocBIBFileFallback:{type:"string",default:"",title:"Fallback Bibliography (bibfile)",description:"Full path to fallback bibfile",order:40},pandocCSLFile:{type:"string",default:"custom.csl",title:"Bibliography Style (cslfile)",description:"Name of cslfile to search for recursively",order:45},pandocCSLFileFallback:{type:"string",default:"",title:"Fallback Bibliography Style (cslfile)",description:"Full path to fallback cslfile",order:50}}}},Wa.config=za;
//# sourceMappingURL=main.js.map
