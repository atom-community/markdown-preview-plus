{"version":3,"sources":["util.ts","..\\src\\markdown-preview-view\\webview-handler.ts","..\\src\\pandoc-helper.ts","..\\src\\markdown-it-math\\lib\\table.ts","..\\src\\markdown-it-math\\index.ts","..\\src\\markdown-it-helper.ts","..\\src\\extension-helper.ts","..\\src\\markdown-preview-view\\util.ts","..\\src\\markdown-preview-view\\markdown-preview-view.ts","..\\src\\markdown-preview-view\\ipc\\ipc-caller.ts","..\\src\\markdown-preview-view\\ipc\\event-handler.ts","..\\src\\markdown-preview-view\\ipc\\request-handler.ts","..\\src\\markdown-preview-view\\ipc\\should-scroll-sync.ts","..\\src\\markdown-preview-view\\ipc\\setup-editor.ts","..\\src\\markdown-preview-view\\ipc\\index.ts","..\\src\\markdown-preview-view\\markdown-preview-view-editor-remote.ts","..\\src\\markdown-preview-view\\markdown-preview-view-editor.ts","..\\src\\markdown-preview-view\\markdown-preview-view-file.ts","..\\src\\markdown-preview-view\\index.ts","..\\src\\image-watch-helper.ts","..\\src\\util-common.ts","..\\src\\renderer.ts","..\\src\\util.ts","mathjax-helper.ts","update-preview.ts","main.ts"],"names":["Object","defineProperty","exports","value","tslib_1","require","fs","__importStar","atom_1","electron_1","fileUriToPath","util_1","WebviewHandler","constructor","init","emitter","Emitter","disposables","CompositeDisposable","destroyed","zoomLevel","replyCallbacks","Map","replyCallbackId","_element","document","createElement","classList","add","disablewebsecurity","nodeintegration","src","__dirname","style","width","height","addEventListener","e","channel","zoomIn","zoomOut","emit","args","id","request","result","cb","get","callback","url","startsWith","handlePromise","atom","workspace","open","shell","openExternal","styles","onDidAddStyleElement","updateStyles","onDidRemoveStyleElement","onDidUpdateStyleElement","onload","setZoomLevel","element","runJS","js","Promise","resolve","executeJavaScript","destroy","dispose","remove","update","html","renderLaTeX","mjrenderer","undefined","runRequest","setSourceMap","map","send","setUseGitHubStyle","setBasePath","path","atomHome","numberEqns","updateImages","oldSource","version","oldsrc","v","saveToPDF","filePath","printToPDF","error","data","notifications","addError","description","toString","dismissable","stack","writeFileSync","sync","line","syncSource","scrollSync","firstLine","lastLine","resetZoom","print","openDevTools","reload","msg","getTeXConfig","set","delete","newargs","assign","getStyleElements","se","push","innerHTML","text","renderMath","setPandocOptions","opts","reject","cp","CP","execFile","atomConfig","pandocConfig","pandocPath","getArguments","stdout","stderr","handleResponse","stdin","write","end","renderPandoc","_","getMathJaxPath","cached","findFileRecursive","fileName","bibFile","join","existsSync","newPath","includes","project","getPaths","maxBuffer","Infinity","cwd","dirname","mathjaxPath","config","from","pandocMarkdownFlavor","to","mathjax","filter","pandocFilters","pandocBibliography","pandocBIBFile","pandocBIBFileFallback","bibliography","cslFile","pandocCSLFile","pandocCSLFileFallback","csl","handleError","err","Error","handleSuccess","handleMath","doc","querySelectorAll","forEach","elem","math","innerText","mode","indexOf","replace","outerHTML","removeReferences","pandocRemoveReferences","iargs","reduce","res","val","key","isEmpty","nval","flatten","pandocArguments","newval","substr","testing","getLine","state","pos","bMarks","blkIndent","max","eMarks","escapedSplit","str","openDelims","closeDelims","length","ch","escapes","lastPos","lastDelim","delimed","delimMaskMap","openDelimIdx","closeDelimIdx","charCodeAt","substring","table","startLine","endLine","silent","lineText","i","nextLine","columns","columnCount","token","aligns","t","tableLines","tbodyLines","sCount","tShift","test","split","trim","attrs","content","children","makeTable","options","inlineDelim","unshift","bind","table_1","skipTextCommand","textCommand","slice","curPos","scanDelims","start","delimLength","lastChar","nextChar","count","canOpen","canClose","isLastWhiteSpace","isLastPunctChar","isNextWhiteSpace","isNextPunctChar","leftFlanking","rightFlanking","posMax","isWhiteSpace","md","utils","isPunctChar","isMdAsciiPunct","String","fromCharCode","can_open","can_close","delims","makeMath_inline","math_inline","startCount","found","closeDelim","foundDelims","find","openDelim","close","pending","inline","skipToken","markup","makeMath_block","math_block","len","lastLinePos","haveEndMarker","closeStartsAtNewline","lastIndexOf","skipSpaces","block","getLines","makeMathRenderer","renderingOptions","display","tokens","idx","math_plugin","blockDelim","oInlineRenderer","inlineRenderer","oBlockRenderer","blockRenderer","mathInline","mathBlock","ruler","before","after","alt","renderer","rules","tableBlock","at","markdownItModule","twemoji","getOptions","breaks","xhtmlOut","langPrefix","linkify","typographer","currentConfig","rL","markdownItConfig","lazyHeaders","useLazyHeaders","checkBoxes","useCheckBoxes","toc","useToc","emoji","useEmoji","breakOnSingleNewline","inlineMathSeparators","blockMathSeparators","initState","markdownIt","pairUp","use","parse","folder","ext","base","sep","wrapInitIfNeeded","initf","newState","isEqual","initIfNeeded","render","getTokens","scopesByFenceName","sh","bash","c","cpp","coffee","coffeescript","cs","csharp","css","scss","sass","erlang","go","java","javascript","json","less","mustache","objc","php","py","python","rb","ruby","toml","xml","yaml","yml","scopeForFenceName","fenceName","lcfn","toLowerCase","editorForId","editorId","getTextEditors","editor","getStylesOverride","__setGetStylesOverride","f","getStyles","context","textEditorStyles","initialize","setAttribute","Array","childNodes","styleElement","getMarkdownPreviewCSS","markdowPreviewRules","cssUrlRefExp","concat","_match","assetsName","_offset","_string","assetPath","originalData","readFileSync","base64Data","Buffer","decodeTag","tag","buildLineMap","lineMap","tokenTagCount","hidden","nesting","index","level","ttc","mathJaxScript","texConfig","JSON","stringify","mkHtml","title","useGithubStyle","githubStyle","maybeMathJaxScript","head","body","item","pane","paneForItem","destroyItem","imageWatcher","util","webview_handler_1","MarkdownPreviewView","defaultRenderMode","mathConfig","enableLatexRenderingByDefault","loading","changeHandler","renderMarkdown","getActivePane","activateItem","renderPromise","handler","getConfigDirPath","numberEquations","getPath","elementMap","handleEvents","on","min","didScrollPreview","viewForElement","removeFile","onDidChangeTitle","onDidChangeMarkdown","toggleRenderLatex","refreshImages","getVersion","getDefaultLocation","previewConfig","previewDock","getIconName","getSaveDialogOptions","defaultPath","projectPath","saveConfig","defaultSaveFormat","saveAs","name","getHTMLToSave","then","fullHtml","_min","_max","openSource","initialLine","searchAllPanes","syncPreview","openNewWindow","addWarning","pathsToOpen","newWindow","grammars","onDidAddGrammar","debounce","onDidUpdateGrammar","commands","scrollBy","top","event","copyToClipboard","stopPropagation","_event","onDidChange","newValue","source","getMarkdownSource","renderMarkdownText","savePath","getGrammar","domDocument","documentElement","latexRenderer","showError","addFatalError","detail","message","selection","window","getSelection","selectedText","selectedNode","baseNode","copyHtml","WeakMap","IPCCaller","windowId","ipcIdx","myWindowId","remote","getCurrentWindow","scrollToBufferRange","arg","ipc","cmd","forWindowId","ipcMain","removeListener","reply","EventHandler","handlers","RequestHandler","handleRequest","func","shouldScrollSync","whatScrolled","syncConfig","syncEditorOnPreviewScroll","syncPreviewOnEditorScroll","isFocused","request_handler_1","should_scroll_sync_1","RemoteEditorServer","destroyTimeoutLength","usageCounter","eventHandlers","scrollToBufferPosition","getLastBufferRow","range","Range","fromObject","scrollToScreenRange","screenRangeForBufferRange","center","resetTimeout","destroyTimeout","setTimeout","getTitle","grammar","scopeName","getText","row","setCursorBufferPosition","focus","activate","handleEditorEvents","create","editorMap","newRes","clearTimeout","getBuffer","onDidStopChanging","liveUpdate","syncPreviewOnChange","getCursorBufferPosition","onDidChangePath","onDidChangeGrammar","onDidDestroy","closePreviewWithEditor","onDidSave","onDidReload","views","getView","onDidChangeScrollTop","getVisibleRowRange","first","last","bufferRowForScreenRow","ipc_caller_1","event_handler_1","setup_editor_1","markdown_preview_view_1","ipc_1","MarkdownPreviewViewEditorRemote","grammarForScopeName","catch","ignore","getURI","serialize","console","log","changeText","changePath","changeGrammar","grammarName","markdown_preview_view_editor_remote_1","MarkdownPreviewViewEditor","syncPreviewHelper","mppv","viewForEditor","deserializer","onDidChangeActiveTextEditor","ed","activatePreviewWithEditor","edPane","isActive","MarkdownPreviewViewFile","file","File","p","basename","read","markdown_preview_view_editor_1","markdown_preview_view_file_1","SerializedMPV","image","imageRegister","isFileSync","Date","now","watcher","af","srcClosure","onDidDelete","onDidRename","watched","files","getPaneItems","mapValues","without","getMedia","pandocHelper","parser","DOMParser","parseFromString","sanitize","resolveImagePaths","relativize","behaviour","mediaOnSaveAsHTMLBehaviour","mediaOnCopyAsHTMLBehaviour","invalidMode","handleImages","defaultCodeLanguage","useNativePandocCodeStyles","highlightCodeBlocks","errd","msgel","insertBefore","firstElementChild","relativizePath","rootDirectory","media","util_common_1","all","img","getAttribute","decodeURI","match","process","resourcesPath","resourcePath","packagePath","fp","relative","highlight","extension_helper_1","getLoadSettings","attributesToRemove","attribute","removeAttribute","domFragment","defaultLanguage","copyHTML","fontFamily","codeElement","preElement","codeBlock","cbClass","className","addClass","fileContents","textContent","nbsp","lineDivs","editorDiv","editorDivTag","editorDivClass","view","clipboard","pointerEvents","position","ws","appendChild","promise","fs_1","lstatSync","isFile","arr","option","_value","array","isElement","node","nodeType","Node","ELEMENT_NODE"],"mappings":";;;ACAA;ADAA,SAAA,aAAA,CAA8B,OAA9B,EAAmD;AEAnD,AFCE,QAAI,CAAC,OAAL,EAAc;AACd,YAAQ,OAAR,EAAc,UAAC,KAAD,EAAa;AGF7B,AFCAA,ADEI,OCFGC,SDEK,KCFZ,ADEI,CCFkBC,ADEJ,KAAd,ECFJ,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,ADEG,KAFD,CCAIC,UAAUC,QAAQ,OAAR,CAAhB,CC0GA,WAA4BuH,IAA5B,EAAkC/B,QAAlC,EAA4CgC,UAA5C,EAAwD;AE5GxD,ADCA7H,AFEA,ACyGwD,AFvGvD,MCFKM,CEFCL,IFEIG,QAAQG,EEFnB,CAAsBL,OAAtB,EAA+B,AFEpB,CAAqBG,AC0GLyH,QD1Ga,GEFxC,CFEgC,CEFa,AFElC,CAAX,CEF+C3H,ED4GH0F,KC5GU,GD4G3B,CC5GkB,CD4GSgC,CC5GtD,SD4G2B,CAD6B;AC1GxD,AFEA,ADJA,MCIMrH,EDJN,CGESoM,MFEMvM,CEFf,CAAiBwM,IHFjB,CGEA,CFEuB,CEFCpG,AHFxB,IGEA,CFEe,CEFe,AFE9B,ODJA;AKAA,ADCAzG,ADEI,AFEJ,ACuGwD,AFtGxD,IAAA,ECDMS,CGJCR,GDEG6M,CHGV,GEuGYpK,EC1GImK,EDyGwC,CDvGrCxM,ADCnB,EILA,CAAsBH,ADEA6M,CHGtB,CAAA,GCD2B,CEFX,CCFhB,ADE6BtG,ECFE,EDEf,IAAqBoG,AFElB,CAAnB,CCwGYnK,IE5GZ,ADE2CsK,ADyGa,EE3GX,EAAE7M,KDE3C,ECFkD,IAAT,EAA7C;AACA,ADEI,AFEJ,ACsGwD,AFrGxD,MILM0P,AHIAnP,GDCN,CGHUuM,IDyGQlF,EE3GF1H,ADEAwM,EDwGwC,CFrGxD,CAA2B,EGHLK,AFEA7M,EGJE,IDER,AHGhB,CGH6BoG,CFEC,ADCa,GGH3B,CAAZ,GCFY,CAAhB,CF2GkBsB,IADsC,KDtGlC,CAAtB;AKNA,ADCA/H,ADEA,ADEI,AFEJ,ADCE,MCDIW,CINCV,CLOD,CILG6P,AJKF,EGHIjD,GHGJ,CCDQxM,EEFE0B,GAAN,CEJX,AFIqB2K,CEJCxM,CJMC,CGJvB,AJKO,CILkB2M,AJKP,EGHP,CAAiBC,CEJ5B,CDEA,CCF+B,AFIpB,CCFqBG,AHIjB,CEFkBA,AFEjC,ADCO,CAAL,CILF,CJK6B,CILQ,EDEEH,GAA5B,CEJX,AFII,AHGgC,EKPS,EAAE3M,CLOlB,MKPyB,IAAT,EAA7C;AACA,ADEI,ADEH,AFED,ACsGI,AFrGF,MKPIC,AJMAQ,IGJImP,CJKD,IEqGE,CG5GK1P,ALOP,GEqGM8D,CDtGf,CAAqB,GING,ADEA0I,CJKf,CEqGE,AFrGQ,CEqGI,GE1GO9K,CCFd,CAAhB,CDEwB,CAAUiO,AJKzB,EAAoB,CEqGL5L,EE1GA,CAAgByI,EJK/B,EEqGc,AFrGrB,EIL4CC,AF0Gb9E,GE1GT,EAA2B6E,CF0G5B,EAAqB,GE1GaC,GAAN,GAAY,CAAvC,CAApB;AEHJ9M,ADEA,ADEI,ADEJ,AIPA,ANSIa,ACsGI,AFrGP,MKPK0T,CCFCtU,EHMEkN,CCFC8C,MHIMnP,ECsGFmH,CE1GK4E,CHIf,CKRJ,AHMA,CGNsB3M,AHMAkN,AFEA,CCsGHlF,EG5GM7H,ADEAyM,ADEzB,CDwGsB3E,CCxGKkF,CCFvB,CEJJ,EAA+B,EDEE,CH4Gd,CAAY1M,ECxG/B,EAAuC2M,GDwGDlF,CI9GtC,EAA6C,CDEpB,CCFsBjI,ADE/C,GFIA,EAAoD,ADwGrB,EI9GuB,CJ8GHkI,GI9GN,EAA7C,OJ8G+B,CAAiCC,UAA7C,EAAyDC,aAAa7F,IAAb,CAAzD,EAA6EqF,IAA7E,EAAmF,UAAUhC,KAAV,EAAiByC,MAAjB,EAAyBC,MAAzB,EAAiC;AI7GvI,ADEA,ADEI,ADEA,AFEI,ACsGI,AFzGZ,MMLMoO,ADEArC,EDEEzE,AJCR,EGCUlN,GFEG9B,GINGX,ELGhB,CGCmB,CFEX,ACsGQ2F,CCxGZ,AHDJ,ECGuB,CINCxF,ADEA,CF0GZ,CI9Gc,CLQCC,ACsGJ,IFzGvB,CIDI,EAA8B,AHIAQ,EINlB,CAAqBX,IJMd,EAAf,EINqC,SAAR,CAArB,CAAhB;ACDIyW,ADEJ,ADEQjK,ADEJ,AKTJ,ADCA7M,ANUQ,ACsGQoD,AFrGhB,MKPMgC,CEJCnF,CDEC,AHMA6M,CHGR,IKPa1M,AJMAa,CGJC6L,ADEA,CAAV,ECFI,ICFavM,ADEA,AGNrB,CDC0B,AFKlB,AGNcL,CPWtB,CCDQ,ADEN,CEoGmB+F,EDtGM,CDC3B,COXA,CPaE,COb6B,ANUAzF,EINlB,CAAqBH,IJMIa,ACsGtB,CAAmBgF,EFrGnC,CKP0C,CEJ1C,APaoD,EObP,EAAE/F,ALgH/B,CG5GkB,AH4GU4F,CG5G/B,CAAb,IEJsD,ALgHJK,GDtGvB,CMVkB,CNUrC,CMVR,ELgH4C,EAA5B,EAA8C;AI7G1D2Q,ADEJ,ADEQ,ADEJ,AIRJ,ANUQ,ACsGYzQ,AFlGlB,MKVI3F,AEJAP,EPcA,EMZI,AHMA6M,GFEG9L,EINEd,ADEAwM,CDECO,AIRA/M,EPcA,EGNIkN,CCFCxL,CHIb,ADIN,CKVqB,CCJG,AFMX,AGNS,CHMC8K,AHIA,CEFrB,IFEI,CINO,ADEgBC,AGNf,ALgHW/G,CG5G3B,AEJA,EHMe,GF0GkBO,GE1GO,EFyGsB,CEzGtD,EAAqC;AEHzC0Q,ADEJ,ADEYnK,ADER,AMXJ,AFGA,ANUQ,ACsGYxG,AFlGlB,MKVI0C,AEJA3D,CDEC,CHMCoI,CHMc,CKVZpN,AFIN,GIRSA,ANUAgB,ADIS,IMfI,CDKRb,ADEAuM,AJQI,CAAA,EIRV,AGNSvM,APcC,CCJd,GAAiB,CAAjB,IINE,CAAqBF,EEJlB,CAAqBA,GLgHD,AFlGX,EKViB,GEJG,KFIX,CAArB,AEJwB,APchC,CKVF,AEJa,CAAb,APcsB,KAAA,cAAA,MAApB,EAAoB,IAApB,EAA+B;AMX7B,ADEJ,ADES,ADEL,AIRJ,ANUQ,ACmGsD,AFhGvD,MObDC,EJQEmN,CEJCoG,ECFE,ACFAzT,CPaE,CCHAiB,KEFK,CEJlB,AFII,AIRed,CFICqH,ALSF,CEgGF,EI/GU,CDM1B,EAA0B,CJMlB,GAAsB,CMVnB,CAAqBvH,ENUEiB,ADGhB,EAAA,CCHY,ADGvB,ECHC,CMVgC,IAAR,CAArB,CAAX;ADGI2V,ADEA,ADEI,ADEJ,AObJ,AFCAjX,ADIA,ANUQ,ACsGQgI,AFnGZ,MObErH,CCJCV,CLYCyN,CGNC,EDEG,CDEAb,AJOF,CCHGtL,EMVElB,GHMG0B,ADEA,CAAd,EGXsB,AFSd,AIVZ,CJUsB8K,AIVA3M,CDIC,ILgHA6F,CE1GK+G,AHIpB,COdR,EJUY,AIVmB,APcA,ADGkB,COblC,ANUP,ACsGQ,CKhHhB,IHMqC,EJQ9B,CIRC,EAAkC,CIV1C,EAA6C,EAAE3M,OAAO,CRiBL,CACzB,CKViCyH,CGRZ,EAA7C,CHQ8D,SLU1B,MAAM,GKVtC,ALS6C,EAE1C,IAF0C,CAErC,MAAM,KAF+B,CAA7C;AMVAsP,ADEH,ADEWrK,ADER,AKZJ,ADIA,ANUQ,ACsGK,AFjGT,MQnBEzM,ELYEuN,CIRCmL,GDEG,ANaJ,CCLKtX,GOdGnB,EJUEyM,EDEE,AIRpB,CHMY,ADER,AIRiBiM,ANUb,GGJgB9I,AIVA,APcAxO,GKdE,CNmBtB,COfJ,CHMY,AJSc,CQnBV,ADIe,CCJ/B,CPciCC,aAAT,CAAuB,SAAvB,CAAhB;AKPJyV,ADEJ,ADES,ADEL,AOdJnX,ADAAA,AEDA,AHGA,ADG+B,ANWvB,ACsGI,AFjGN,MQnBAoF,CEFCnF,ADAAA,CNcC2N,CEJCkG,ADAD,IIRKzT,APcAmB,EGHA,GELK,ADElB,AFIkB,CEJCoG,CH4GH,CQtHhB,ADAA,ADEqB,APcb,CShBc1H,ADAAA,ARgBAyB,ADKN,CKXhB,AFII,EEJqB,EGRZ,CAAb,CEFA,ADAA,ECA+B,ADAA,ARgBvB,CAAwBC,CKfN,ELelB,CAA4B,EDK9B,KUrBN,ADAA,ECA6C,ADAA,ECAEzB,ADAAA,OCAO,ADAA,ICAT,ADAA,CRgBrC,CShBR,ADAA,CRgB6D,qBAArD;AKPJ,ADEA,ADGQ,ADCR,AOdJ,ADAA,ADEA,ADE+B,ANYvB,ACsGQ,AFjGX,MUrBCM,ADAAA,ADEAD,ELYEqN,CHKJ,EKTQ,EJMCrM,EOdEnB,ARmBJ,IIRQwM,AMbAxM,ADAAA,CNcf,CGNiB,ALQb,CAAcwB,COdC,EJWEE,CFyGHc,CQtHK,ADAA,CLaR,CAAUgK,AIXd,CAAf,KJWmCC,AFyGJpE,CItHL,CIAP,ADAA,CLaA,AMbnB,ADAA,ERgBQ,GAAmC,CGHC,GAAzB,EHGX,CCsGsCD,CEzGKoE,MAAMC,GAAN,AFyGK,EAAzB,CEzGgCG,CFyGHzE,EEzGhD,EAAwD,GCHGZ,GH4GD,CG5GM,CH4G7C,EAA2CC,UAA3C,CAAf,IG5GZ;ACDAuP,ADEH,ADGevK,ADCZ,AOdJ,ADAA,AEFA7M,ACDA,AJKA,ADC+B,ANavB,ACsGQoE,AFjGV,MUrBAme,ADAAd,ADEA1Y,CGJC9I,CLUC,AHMA6N,EKZEzN,GPcGmB,EQhBb,CAAgB,ECAhB,AFEkB,CFHQ,AICP,ECFnB,AVkBQ,CGHcsL,AOfA5M,AVkBA4B,CEFC,CAAC,CCDR,ADCZ,CKZM,CAAV,CNoHwBe,CSxHxB,EAA+B,GTwHf,GDtGR,GAAgC,GUlBxC,EAA6C,CVkBrC,CUlBuC1C,OAAO,IAAT,EAA7C;ALWIkX,ADEJ,ADGa,ADCT,AOdAxW,ADAAA,AEFJ,AHIA,APcQ,ACsGK,AFjGR,MWvBCJ,AHIAH,ELYEyN,CEJC0G,EGREpU,CFMC,CLQCmB,GShBGkgB,ADAAA,CPmHJ,CAIA,CG7GZ,AMZmBrhB,AHIA,CHQCqU,CJMZ,CAAc3S,CKlBI,AEIf,CLYa,AOdpB,ADAA,ADEJ,CLYyB,AFEjB,ACuGWM,CG7GnB,AFII,AOdsB0W,ADAAA,APuHd,CSzHe,CNYC,AJMC,ACuGP,MQvHlB,ADAA,ECAgCyJ,ADAA,CEFjB,CAAnB,CVkBuCxgB,KShBnC,EAA0C,ETgBG,6BAAzC;AKPJsV,ADEA,ADGK,ADCL9J,AOdI,ADAA,AEFR,AEHA,ADCAxN,AJMA,ADD+B,ANevB,ACuGQgI,AFlGb,MWvBGya,AHIAtO,CINClU,ENYE,AHMAmN,EEJE,EFIEY,AOdA0T,ADAAA,ARgBAlgB,IOdInB,GGJjB,CLD0B,AIGlB,ADAA,AEFa,ACFrB,AXoBQ,CWpBcH,AXoBA+B,CEFb,CAAe6K,AOdA4U,ADAAA,CDEC,ELYhB,AFED,ACuGerf,CCzGnB,AFEwBH,ACuGZ,CU3HhB,EAA+B,CFIvB,ADAA,CRgBA,GAA4B,EOdnB,CAAjB,GPcQ,CWpBR,EAA6C,EAAE/B,OAAO,IAAT,EAA7C;ANaIoX,ADEI7S,ADGH,ADCDmJ,AOdI,ADAA,AEFJhN,ACFJ,AJMA,ADDI,ANeI,ACuGK,AFjGX,MY1BIF,AJMAmV,ERoBA,EMdI,GIRGiD,ADAAA,ARgBAvX,CINC,COdCnB,CDECqhB,ENWL,CFKQ,AKZArhB,CRoBD,CUtBV,ADAA,ARgBA,CAAc4B,CWpBC,CFIC8W,ADAAA,AEFpB,AXwBF,EWxBwBA,AXwBF,CM1BE,AEMC,APcnB,CAAoB5W,CMfHiB,GGDjB,ADAA,CTsBuB,CWxB3B,AJG0BC,ANetB,CWpBO,CDEqBmf,ACFpC,CXoBqC,IEFRngB,CAAV,AHQK,COrBC,ANejB,ADR4C,CGMpB,AQhB5B,AJGoC2W,APqBC,EWxBK,IHI3B,CAAnB,ODDyB,EAArB,8HAAsD;ADQtDxB,ADEI7C,ADGP,ADCO,AOdA,AIPR,ALOQ,AEFA,ACFR,AJMA,ADF0D,ANgBlD,ACuGC,AFjGP,MY1BIlU,AJMA0b,IFMI,CNcD,EUtBIqG,ADAAb,AEFAD,AVkBAlgB,ACwFM,CAAX,CC1FO4L,GEJG,AEVH6L,APsBb,CGRiBhL,AMdX,AGJW5N,EFIX,ACFA,AHIaA,APcb,CQhBc,ARgBA+B,CKrBI,ADaf,AIRH,CCAgBogB,ACFAd,AJEkC,GKJ/B,CTkBZ,CAAc5U,AKZA,GLYd,AOdP,ACFA,ERgB0BA,GSlBf,CAAnB,AXoBQ,CAA+B,CEFCzK,EAAEkL,MAA3B,IKZM,APcb,COdR,CLYsDlL,AFECA,CEF/C,AFE8C,IAAO;AKPzDoV,ADEI/C,ADGR,ADCK,AOdG,ADAA,AEFA,ACFR,AJMA,APcY,ACuGJzM,AFjGP,KGVG,CKVEtH,GJWGuP,AQjBA0S,GNYG,CIRC5F,ADAA4E,AEFA7I,CNSF,CGLI1Y,ANqHJsI,IE1GX,CAAoBkE,AMbZ,ATgBYxK,ACuGZ,CSzHA,ATyHSuG,CDvGKtG,CShBED,ADAhB,ADEe,CFRG,AIMH,ACFC0W,CPexB,AQjBA,CHI0BtY,AGJAoiB,AV2HlB,CE1GmB1S,AF0GJvI,CQvHO,CTgBlB,ECuGJ,CE1GR,AOfQ,AHIO,CAAf,CJWkCwI,GKbGyR,CGJrC,EAAwC,GHId,CAAkBC,CLa5C,EAA+C,aKbrB,GAAqCnf,EAAvD;AHSJ+U,ADEI9C,ADGJ,ADCA,AOdQ,AIRZ5U,ALQK,AEFG,AENRA,ADII,AGLJ,APWA,ADHQ,ANiBQ,ACuGRiI,AFpHR,MQDMmU,CMVCnc,ADAAA,CPgBC,AFKA6M,AJVR,EYPU9C,CTkBC8C,EQhBE0V,AHIApiB,CJWC+P,CF0GHxH,CQvHK,AHDJsQ,CJeKhM,EGrBS,AFoBtB,AQjBetM,CPcC,AFIhB,ADyGI,CQvHaoY,AIRrB,AHMQ,AENR,ALUqBxY,APcA,ACuGJsI,CCzGK,AWtBA3I,ADAAA,AbWtB,COJmByC,CIDK6f,ATyHhB,CKxHI,APIZ,CYP0Bpa,CPUf,EKNK,AIRhB,ADAA,CNO0B2Q,ANiBV,CaxBe,ADAA,CFMvB,CHIK,CEFqB1W,AFEAhC,EEFE0Y,AEJjB,ELGX,CKH+B+J,AZOvC,COJoC,ECGM,CMV1C,ADAA,CHQgB,CIR6B,ADAA,ECAE3iB,ADAAA,CHQC,CEJ5C,CJM8B,CAArB,CAAb,CEFqDuhB,CIRC,ADAA,ICAT,ADAA,ECA7C,ADAA,CHQgD,KAAkBrf,EAAEqf,QAAxD,EACI;AJQZhd,ADEImQ,ADGJ,ADCI/G,AObI,AITZ,ALQUiU,AEFF,AENR,ADII,AJMJ,ADHY,ANiBQ,ACuGf,IY/HDmE,EDAE1lB,ALUA6b,EJWEhM,AQjBArG,CVwGG,CI5FD,AJ4FN,GStGS0Y,EENEriB,ADIA0iB,CRiBX,CCHa,CKTC/F,CITC3c,ETaR,EFSYgN,AMdnB,AIRmB,ANOJ4L,CECW+I,CRgBLzf,CUlBjB,AHIkBlC,CFVA,AQAC,ALQvB,CCCwB,CDDO,AEFLgC,AENf,ANOH,CIDiB,AEN7B,CZwBoB,ESfamgB,CPaCxd,AQhBE,AHIF,GLYX,CAAe6I,ESlB9B,CFKoB,AITT,CJSuBxL,AIT1C,EJS4C0d,AELA/V,KFKhB,CPaL,AObX,CELuCgZ,CTkBCrX,CKZ1B,CAA1B,KLYuB,CAAqC,IAArC,CAAf,WSlBJ,EAA0E;ANa1EgM,ADEI7C,ADGJ,ADCI/G,AObIiP,AITZ9c,ALOmC,AEDvB,AENZ,ADIQ,AIPR,ARaA,ADHS,ANiBW,ACuGnB,MW/HKO,ALUA6b,EJWEhM,AUrBAmR,ERgBE,KMZKhhB,CRiBX,AOfY4B,CGNhB,CHMkB0W,CENC1Y,CHSCgC,AITA6jB,CTkBC,CKTClE,CJVI,CHuBF1U,CObZ,AFCZ,CGJgB,ACFUuU,AJMA,CKVC,IFMI,CCFhB,CEJkBJ,AFIAK,GTkBG9c,AQhBA+T,CENjB,CAAnB,CVsBwB,CAAgBlL,EWtBxC,EHMgB,IAAgCxL,CCFjC,CDEmCqf,ERgB1B,ASlB4BuB,ETkBEtX,IQhBN,GRgBxB,ASlBT,CTkB+C,CQhBC,ACFvD,GTkBgB,CAAhB,CQhB4D+V,QAAxD,EACI;ALUZxd,ADLO,ADUP,ADCI,AObC,AITT,AHOY,AEPZ,ADIK,AJMDrD,ADHC,ANiBW,IaxBZslB,CTWA,AOTA,CCFEjD,EPgBE,AFKA3S,CMjBA,EECC,CTiBGzC,CCDR,GIXYyO,EGHEoG,CLTQ,EL0BL,CaxBCtiB,GHOG,CEPCA,CVsBC,CAAC,CAAhB,CWtBkB,AHOAmiB,CViBd,EEFiB/U,CUtBC,ELUE,EGHX,CAAcpL,EAAE6f,EReE,CAAV,AQfR,AHGrB,CGHQ,CHGkCvd,CMVxB,CAAtB,CXsBiD,CAArC,GUtBc,CVsB4B,AUtBtD,CVsBuDiJ,KKZKjN,ELYpD,EAAwD,GKZGyH,UAAP,GAAoBoU,UAApB,CACnDC,6BADL,EACoC;AFMpC7E,ADEH,ADGG,ADCQhK,AObJnN,AITRP,ALKmC,AEEvB,AEPZ,ADKQ,AGTRF,AEDA,ATgBQ,ADVuB,ANuBX,MYxBdW,CEJCV,CXyBCuQ,AUrBA+R,KNWKhG,EJUT,ASrBWlc,ADKE2J,CNWD,EKTEsY,CDECT,CITnB,AZuGe/Y,Ca3Gf,CZ0BsB,ASjBEia,AGTF7iB,CZ0BC0N,AWtBAuY,ADAA,EHSf,ATeiB3jB,CSfC4f,ACFAO,CLVA,ESD1B,CZ0BY,AKXJ,CGJuBtgB,AIXA,Cd4BX,CSfZ,ACFyBK,AHIA6Z,CEFCe,CGTnB,CHSP,AGTR,CHSqC,ACFX,CAAd,CGP2BiF,ICJvC,EAA6C,EHS5B,AGT8BpiB,GPevC,CMXR,AFKqD0iB,GGTC,IAAT,EAA7C,QHSsE,KFI9D,EAAmE,EEJ3D,GFIgE7F,CEHnEhT,MFGL,CEHYgZ,yBAAP,IAAoCH,iBAAiB,QAD1D;ANYJhL,ADEJ,ADGI,ADCQlK,AObP,AITL,ALKQ,AEEIlN,AEPZ,ADMK,AGVL,APeQ,ADXuB,ANwBX,IaxBhByiB,EDAEC,AEJA/iB,EXyBEqQ,CCHCsE,CCFC,GELGpQ,GJUT,AWzBYtE,GNSD,GJaf,CCtB0B,ADsBH2U,AMXA6M,CReC/U,AWtBAzM,ACJA,APehB,CHOR,AIboB4hB,EJaO,AGPAtd,CCNZ,CAAS,AEEZ,AEPiBtE,CVsBCgN,AQfA+U,CIXd,CDIgB,ACJhC,KJWY,AEPyB,CFOC3f,AHI9B,GLWiCqL,CQf7B,CAA+B,OFF5B,CKLS,CAAxB,ALK+CkU,CNiBjB,EAAyBzU,AMjBxC,CAAP,GILqB,CAA7B,CVsBwB,GAAwC,CAApD,cQfA,EAAqE;ALU7EuK,ADEA,ADGA,ADCQhL,Ae7BZ,ARgBIvI,AITJrE,ALGmC,AEInB6Y,AEPhB,ADMC,AGVD,APeQ,ADZuB,ANyBf,MYxBVqK,AEJAhH,EXyBE1L,AUrBA+R,ERgBE,ADEAzY,GUtBG5J,APeAW,CEFC,KLSKJ,AFIA0M,CKXX,COfa9M,Ad4BA,CaxBrB,CRL0B,AEgBH,CJUnB,ASrBJ,CCAyB2iB,ADAA,CRkBC9a,AMXA/F,CHIC7B,CGJCuY,EReEjL,GY1BjB,CAAqBzN,APeAW,EHOf,AMZ8D,GNY1CiU,EGPhB,APaP,CEFG,AY1BuB,CDICwN,ANWnC,CLWoClV,MAAzB,AY1Be,CAArB,CAAb,CZ0BqD,CAAzC,CEJR,ESlBJ;ARiBIwK,ADEA,ADGA,ADCK,AObDtX,AITR,ALIK,AEGWihB,AEPZ7gB,ADMJX,AGVA,APeQ,ADbuB,AN0BX,IaxBhBkmB,ECJEC,EXyBE1V,AQfAiS,CTYA,EEAG,EGPE3hB,CFKC,CHOD,CUvBGgY,GVuBClL,AOdE8T,EITExhB,CDAjB,CTqBA,CSrBoB,ADMxB,AJKQ,CEFA,ATeiBU,CSfCqhB,ACFA/f,CCDCugB,AJKA,CGJClB,CGPC,ENWElhB,COfCH,Ad4BZ,CSfZ,ATeyBoC,CK9BP,AIeQ4f,CPcD,CAAC,AQlB+C,CRkBhE,AFCG,CObkBnhB,APaA,Ec5BE,CZ2BDuM,ESjBvC,EENqB,CAArB,EJSQ,CAAyC,EPcA,CAAV,KAAgB,AKZ5B,CLYV,AFCG,CObZ,CPaoDpL,EEDAuL,AFCElL,Gc5B9B,CAAhC,Ad4B4D,CAAO,CAAP,CED/C,AFCO,EEDiD,cOd7D,EAA+E,KAAKsa,OAApF;AJQJhF,AazBJ,Ad2BQrT,ADGJ,ADEQiJ,Ae/BZ5N,ARiBK,AITLE,ALIUoE,AEGM6d,AEPR,ADMR,AGVA,ACJAniB,ACAAA,ATmBQ,ADduB,AN2BX,Mc5BdW,CGJCV,AFAAA,ACAAA,Cb6BC2Q,AUrBAwS,ERgBE,CGZN,EIJSnK,ALWA9X,CCPO,CMRLd,IFIP,ERkBa2U,Aa1BrB,AFAA,ACAA,Cd+BsB,Ae/BA9U,ALQA+Y,AGRA/Y,ACAAA,ATmBd,CFlBkB,ADwBf,AFMY0N,AY3BA,CXyBnB,CIVqB,CMXzB,EDAQ,CKRR,AJQ6BwY,AHOA/jB,AKf7B,ACAA,Cd+BY,AKZJ,CUnBuB,APeA8f,AKfA,ACAA,CFIhB,CAAf,SJQiF,COZjF,AFAA,ACAA,CHQ4CiB,CIRC,AFAA,ACAA,ECAEjjB,AFAAA,ACAAA,OCAO,AFAA,ACAA,ICAT,AFAA,ACAA,ECA7C,AFAA,ACAA,EHQA;ARiBI,ADEI+U,ADGJ,ADEQvH,Ae/BZ,ARCmB,AIOnB,ALGoB,AEIJ2F,AEPR,AEJR,ACJA,ACAA,ATmBQ,ADfuB,AN4Bf,IiBhCZ8U,AJQAjF,ECJEmD,ACJAlmB,ACAAgF,Eb6BEyL,KSrBK5P,AIRAZ,ATmBAqc,COfCrc,ECJEA,GVwBG,CELX,CHOa2J,AMXA3H,AMfA,AhBgCA,Cc5BC,CXyBlB,AOdmBiR,AHIA,CLYCxG,AUvBhB,AGRgB,ELWyD,CGHtDzM,ADAA,AIRd,ATmBL,CHOoB8U,AY1B5B,CFIc,CZ2BgB7H,AY3B9B,CFI+B9M,AGRf,CVAU,AUA1B,GFQmC,CbwBnB,CiBhCqBH,CLQCa,IRgB3B,AFO+B6M,Ge/BG,Uf+Bf,EAA2BR,AWvB9B,ADAA,CCA3B,CDAQ,IVuBgB,GAA0C,CAAtD,Ue/ByB,CAArC;AZyBI0K,ADEI7C,ADGJ,ADEQtI,Ae/BZ5M,ARiBAA,AITAA,AHOgBoiB,AEPR,AEJR,ACJA,ACAA,ATmBQ,ADhBuB,AN4BO,AmBlCtC,MLOM7hB,ACJAD,ACAAA,Eb6BEsQ,Ac7BAsW,ARiBA7E,AITAK,CRgBC,IOhBIlB,ALWA/E,EQnBEtc,ACAAA,Id+BIiN,AY3BAjN,CVsBC2J,AKTpB,CGTQ,ETqBe,AMZAuY,AMjBA,ACAA,CXDG,AQS1B,ADAwB9hB,ELWhB,CHOmB4U,ADGvB,AUrBuB8N,ACJA,ECJZ,ACAA,ATmBc,CQnB7B,ACAA,Cd+B+BpV,Ee/B/B,ERiBA,AGTmC8T,ALWA,CUnBCuG,CHIjB,CAAnB,EVmBW,CQfa,CAAkBtG,EVuBvB,EAA2BvU,EWvBEqV,IXuB7B,GAAoC,CAA3C,EUvBY,GAAqCjgB,EAArD,CCAR,GIRmEykB,yBAAnE;AZyBIlP,ADEI5C,ADGJ,ADEK,Ae/BT,ARiBA,AITA,ALCoB,AEA6D,AEDzE,AEJR,ACJA,ACAA,ATmBY3U,ADjBmB,AN4BO,ACjCtCX,IgBGIqoB,EHIE9B,ACJAnK,ACAAiK,CfHCpmB,CI2BC,AFKA8Q,CDFK,IEDA/G,AMjBD,AEDCqZ,AGRAjjB,EbgCA,IAAIoN,AKbErK,CHOCoS,CW1BChV,AdHrB,CAAsBL,CICI,CF+BF,ECPb,AFUa,ECHpB,CFhCJ,CCmCiB,CDnCc,CeGCG,ATmBpB,CKXJ,AGRK,ARmBoB,CWoBjC,AhBPgCoN,AahCEpN,CEACA,CLQC,CEJpC,CPesCuc,CPYcva,CgB/BZ,CJQhC,AZuB8CK,Ce/BZ,CEAC,AhBH3C,CCmC0C,CgBOhB6lB,AhBPM,AFDoB,AClCP,CaOClC,Ad2Ba,CAAP,AClCLlmB,CDiCT,EkBStC,AhBPgD,AahCd,CbgCjB,AahCJ,CGuCoB4nB,AHvCjC,ARmBiC,EAArB,ANtB0C,CCmCD,CgBOrD,AhBPsDna,EgBOf,AjB1CM,EAA7C,GCmCa,EAAkD,AchC/B,CAAhC,IFIsE0O,GGJnC,CAAnC,eHIA,CAA0F;ATqBtFnE,AaeA,AdbI3C,ADGJ,ADGQ3S,AehCZ3C,ATSQ,AEMC,AEPD,AEJJW,ACJJ,ACAA,ATmBY,ADlBmB,AN4BO,AChCtC,AmBFA,ADCAb,MJIMqmB,ACAAyB,AfHA/e,CkBDC9I,CFIC6nB,CPGA,CP0BE7a,AFhCA5M,EI2BE,AaeJoF,CN/BK6d,ERkBEtZ,CDGC6C,AWzBA6U,EPeE1F,ANtBA,CiB0Cd,AhBPetU,AMvBJ,EWbf,Cf8BsB+N,ADGAzE,AgBjCA9Q,CjBoCV,CAAYkN,AY5BpB,CFII,ALWiBhK,CCVL6e,AMLMlJ,AbPhB,CIAgB,AJA1B,CEgCI,ADGwB9K,AUxBA,CJCb,AIDP,AIRR,AGJA,CfyBW,AIZa,ADUM5K,APWFV,CiB9B5B,AEJ+B,CJICtC,Af6BM,EiB7BJgoB,AHI9B,EAAgC,CZ4BZ,CAAc3a,AchCA2Y,CRSvB,ADUU,CQnBe,ARmBApK,CCVLpX,EWbnC,CnBkC4BlC,CEEJ,AiBpCqB,CnBiCP,CEGSmK,AiBpCA3M,GjBoCvB,AMvBT,CNuBH,AMvBJ,ADUiB,CAA2B,EYvBE,EZuB7B,CAAb,CYvBiC,EAA7C,EHI8Dmc,CCACwL,EFA/B,CAAhC,eCAA,CAAkF,ICAlF;AZyBI1P,AaeA,AdbI1D,ADGJ,ADGQhH,AehCZ,ATOoB,AEQZjN,AEPA,AEJA,ACJR,ACAII,ATmBQ,ADnBmB,AN4BO,AC/BtC,AkBDA,IFIIwlB,EFAE1lB,AdHAuH,EI2BE,Cc5BCohB,ChBiCCrY,CFhCC5Q,EWWEkjB,CM+BHhV,CHvCKlO,CX0BC2J,AY1BAnE,ATmBAmW,CYvBhB,CD2CcwM,AC3CI/mB,CTmBCogB,ATlBA,EIDO,CHoCJ/U,CENC4I,AW1BA,CCAnB,Cb6BqB7I,AOdjB,AHIiBhI,CGJCud,AEPlB,AIRkB,AGJ1B,EjBoC4B,AiBpCA,CjBoChB,AUxBiB,CKRC/hB,AjB6BEuC,CGADsO,CeUHqX,AHvCb,CZ6BU,AOdjB,AKfR,CZ6BkCpX,AOdAmM,AHIlB,ANtBL,CAAX,CSkBQ,CQwBM,ARxBuB,AVaC,CkBWlC,ADvCkC,AVmBAtB,CJUb,CAAe/K,GCT7B,IGDoC7N,EPUfR,GGA5B,AIVgDS,IPSd,KOTS,CAAewZ,CUnBhC,CAA9B,WPeQ,AHIuC,EGJ8B,AHIjE,EAAmE,GGJG6F,aAA1E;ALUJrK,AaeA,AdbI1C,ADGJ,ADGK,AehCTzV,ATQK,AEOA,AEPO6hB,AEJJ,ACJR,ACAQ,ATmBQ/F,ADpBe,AN4BO,AC9BtC,AkBDI,AEHJ,MNOMmL,AdHA7mB,EgBGEgc,Cf6BK,CGLH,AFKAlL,CFhCC/Q,AkBDAoB,CD2CH,CAAC8M,AJnCImT,CImCT,ChBNS,CgBMD,GhBNKlU,ADpCE,CkBDCnC,CLQZ,APeayR,EFxBK,AJEf,CEgCajQ,AWzBA6U,AbPxB,ECoCwB,CejCxB,Gb0B8B1X,ADGAkH,ADIjB,AejCiBmV,AjB4BWxjB,EGCjB,ADIM,AY7BtB,CXyByBsO,ASrBA,ALWjB,CKXkB,ALWA,CKXCoM,CZmBG,AmB/B3B,Cf8B0B5H,Ae9BA,ChBiCb,ASrBU,ALWlB,CJUuBvE,CSrBCnE,GAAN,CAAD,EGRa5M,Ef4BLwC,CYpBQ,CTqB7C,Ic7BkDyZ,AFAA,Af2BhB,GIR3B,YevBA,CAAP,GFIJ,oBFA8C,CAA9C;AVyBI1U,AaeI,AdbAgO,ADGJ,ADIQnI,AejCZvN,ATQUY,AEONyD,AEPY,AEJR,ACJR,ACAQ,ATmBK,ADrBkB,ALD/B,AkBDC,MJIK6iB,AdHAhiB,EgBGEkjB,ATQJ,EHgBM,AFKAjX,CKrBO,EMJJ0H,AEJAgP,AfHA1nB,CSkBC,EQwBFM,CFvCJ,GJQY4c,AIRA,CCApB,AHIQ,AbPa,CIHK,Ca6CPkL,CDvCKpC,AHIAtN,AEJAvY,Gb6BGqM,AFhCd,CWWe,AXX5B,CG6B6B7C,AQlBb,EAAe,AGR/B,ACA+Bge,CFIvB,CImCI,AfVqB9W,CeUHqX,CfVH,Aa7BP,CZ0BgB3S,ADGAzE,Aa7BAtL,GEuCxB,CAAJ,AHvCgCwgB,CZ6Bb,CeUW,AfVIhV,Ea7BtB,CAAZ,GCAwCiX,Qd6B5C,Kc7BJ,GFAgEhM,mBAAhE,CAAoF;AVyBhFhE,AaeQ7S,AdtBD,ADYP4K,ADIK,AejCT,ATOiB,AEQT5P,AEPY,AEJZ,ACJJI,ACAI,ATmBC,ADtBsB,AN8BX,AC9BpB,AkBDAX,KfqBI,CHpBES,EkBDE2oB,CjBmCK,AKlBL,CFWE,GSpBG1hB,AEJA3G,Eb6BEkP,ADKF,ADrCE9P,CcGC4Y,AIJhB,CLQQ,EJWW4I,ASnBAyH,CLQC,EAAZ,ACJJ,CVPsB,AFoCH,AFhCA,CEgCR,AY7BS,ACAhB,CNeA,AEPiBrQ,AIRArX,CEuCH8mB,ARxBItG,CPcCvV,AgBjC3B,CHIQ,CAAqB,ChB2BH/J,CkBYC6lB,AN/BP,AXXL,CWWiBnF,AXXhC,CEgCiCzhB,AOdzB,CQwBc,ARxBYsgB,AMfA0F,ChB2BH,CkBYnB,AfVe,CAAU/Z,Ca7BR,CAAUmS,ChB2BH9e,OGET,CAAqB8O,AOdxC,CAAyC,CMfpB,CAAsB,GJQ/B,AZmBW,CYnBwB,AZmBJpN,CGEK,ASrBAwa,AIRAZ,Cb6B7B,CAAZ,AHFgB,CYnBwB,AZmBAha,EGEM,ASrBA,AZmB9B,CYnBwB,AZmBnC,CYnBA,ETqBhB,Ia7ByB,CAArB,iBNeA,EAAiF,KAAK+f,aAAtF;ALUJnK,AaeQ,AdbX,ADGG,ADKQ9K,AQnBP,AEPY,AEJT,ACLgB,ACCnB,ATmBG,ADvBuB,AN+BX,AC9BpB,AkBDA,AGNA,MrBOMzE,EEgCE8D,CELC,ISpBI2O,APeAsB,EJUE9P,ESvBC,CTuBZ,AWzBI,CTZkB,CFqCN,CWzBC,CImCH2b,AhBLI,CAAV,AUzBS,AXZG,GMsBhB,CKViB3b,CZkBDnK,CORK,GWoBD,AJnCpB,CPeyBqB,AajBjC,AC+BA,CTxBgC,AZkBFvB,CC9BM,CiB0CJpC,GN9BKyY,CLUR,CAAa7U,EWoBHlD,CErCjB0G,AC+BEA,CTxBQ,CAAY6b,AZkBF3gB,EORD,AajBzC,AC+BA,CrBN6CF,CoBzBjBiD,AC+BEA,EddwB,IPQlC,EAAkC,AoBzBtD,AC+BA,ED/BsCue,AC+BEzf,EHMZ,AN9BI,EM8BpB,GN9BqD,AQPjE,CROqB,CQP0BA,CROqB,CSwBpE,EAAqD,OD/BrD,EAA4D+G,IAA5D,EAAkE8U,QAAlE,EAA4E;AfuBxEhI,AaeQ,AdbZ,ADGQhI,ADKC,AM7BQ,AEbI,AEiBD,AELZ,AEJJoW,ATmBQ,APQY,AC9BpB,AmBKAhf,AC+BA,AC3CJ,QrBOQqB,CG6BCnI,CCFC,GDEV,AUtBamhB,CVsBCpM,AiBOJmX,CD/BCplB,CNEH,AEJQ,CTmBCoV,ANtBA,CEgCC,CWzBC,CMFHpR,CnBLZ,AoBoCa,CHMCid,CbhDQ,ADmC1B,ADGQ,AWzBevC,CPeX,CHOa,AQjBArN,ASwBJoD,EHME,AXpBI,AajBhB,CAAa,CNEKoF,EImCFjhB,AN9BP,ALUW6b,CKVCmH,EZkBFxgB,IkBYIglB,AJnCf,CAAoBtG,GImChB,CAAgB6G,AGNA3nB,ErBNEkC,EcvBtB,CImCI,AlBZqBE,CkBYhC,AJnCqC+V,APeAnY,KKV7B,CAAmC,CAACqM,AZkBhC,AoBzBb,CNEQ,AO6BF,CP7BT,AMF8C,CROC,CQP5C,CROkD,AQPzD,CROmD,CAAnC,ALUO,CAAqC,MAAM,McchB,aAAY;AhBR9DwL,AaeQmQ,AdbR,ADGC,ADKG9b,AM7BA,AEUR5M,AENiB,AELT,ACNA,ACEA,ATmBQ,ADnBZ,AN2BoB8C,AC9BpB,AmBKA,AC+BIgqB,AC3CR,QZyBQvK,CLSC,CDEC3M,CE1BCjR,ALHA,CmBKHH,CNEKzD,EEJE,CIEX,CRKiB,AS0BRH,Eb5BE,CFLX,CCmBiBkc,Accb,CXlBR,AWkBkB5Z,CjBPKmR,AQhBF,AXbE,CiB0CH3S,AJnCZ,CJWiB6gB,AIXA7gB,CNCLqgB,CUkCR,AGNWhF,CHMC4L,AJnChB,APeQ,CCdD,AMDc,APeA/nB,CCdL,CUkCGqf,EXpBX,COfkB8B,APeA7e,ECdnB,CMDP,AduByBP,CQtBDgC,CEUhC,AHIuCoY,CHOCxI,EcahB,CAAeqU,AlBZf,AqBMN,EAAV,Eb5BO,Aa4B4B1gB,Cb5BnC,GJqB2CyN,GcaD0S,CXpBhB,EAAlB,EWoBuB,AXpBoB5nB,CccH6b,CHMC,AdbI9H,KGPKtM,CHO1B,CAAjB,CcagB,AdbnC,CcaoB,AGNmB,CHM/B,AGNuD8U,EHME2L,GAAGE,AXpBb,GAAoBvM,OccvE,CHM6D,CAAesM,CXpBzB,CAA+B5L,SWoBKqL,KAAX,CXpBpE,CWoBsF,QAAlB,CAAf,CAAzD,EAAsGM,GAAGG,WAAH,CAAeF,WAAWP,KAAX,EAAkB,QAAlB,CAAf,CAAtG;AbjDc,AakDdC,AdbR,ADGA1b,ADKI,AM/BS,AEYjB,AELoB,AENZ,ACNA,ACEI0a,ATmBI,ADnBf,AN2BoB,AC9Bb,AmBKJ,AC+BIwF,AC3CR,CjBDA,ODqCQnX,GDGGzF,CDKCtD,ADrCA7D,AmBKJlD,CNEK4e,ACNA1L,IKIT,AC+BS/T,CjBPKP,CW5BV,CboCYsI,CKfC+P,CJUjB,AY/BkB/D,CboCV,ADrCW,GWaGyK,AIVA,CdkCC9V,ADrCnB,CcCA,ARqBQ,CHOZ,AGPyB1I,ANtBA,CiB0CHqjB,CdbK,AUtBvB,GZ8BA,AUxB0B/nB,ASuB1B,CHMI,AGNmB4C,CnBCK,GgBKD,CGNC4G,CTvBK2Z,KAAP,ALSlB,Acce,CTvBgBC,ALSAxgB,AccJL,GAAZ,CAAgB,CddKiH,KKTlB,CAAwB,ALSX,CKTY,ALSAjH,CKTCwa,ELSb,CKTY,ALSI,EKTE,CAAN,CAAD,EAAW,AIXtD,CJWuDtQ,GAAD,EAAM,CAAN,CAAX,CAAxB,CAAd,USuBW,CAAvB,WdduC,CAA/B;AFMhB,AaegB7H,AdbR,ADGJmL,ADKQ3C,AM9BP,AIMe,AENZ,ACNA,ACEI/H,ATmBI,ADnBhB3F,AN2BoB,AC9BR,AmBKR,AC+BI8sB,AC3CR,QhBUQlU,CDwBCJ,GFKG5L,AiB3BJnM,CNEKshB,ACNAoF,CX4BC3X,EUtBN,CACK5O,AO4BAqE,ClBJKgL,CG7BlB,ALHmBlH,AmBKJb,ENEP,APea4U,CLeC,AclCA,AVAAlE,CH6BlB,CWvBS8F,CFIY3F,AXbb,CI2BZ,AaesBsP,CbfK5P,AHUf,AclCeoP,CZ0BCpnB,AUtBpB,APeQ,AccR,CP3BWgF,APaUR,AajBrB,AC+BiBU,CP3BP,ACRV,CGwC2B,AN5Bf,AIVE,CJUUge,AIVA1G,AIEJhJ,CdF5B,CQMyB,CVoBU4B,CCFnC,CgBSQ,ChBT8B,CWxBhB,CTmBN,AajBR,ChBwBoB,AGPa,CHOCF,GgBxBD,CbiBKsH,KKT1B,AGZa,CX4BmBxH,AQhBA,CLSX,AajBrC,EbiBY,AajBmC,ERQMsD,MAAL,CAAY6K,AGZnB,QX4BjB,EAA8C,eQhBtB,CAAsCJ,KAAtC,CRgBxB,AQhBR,CRgBZ,CQhB0F;APe9F,AaeYuF,AdbR,ADGJ3Y,ADKQxD,AM9BFkS,AIMc+E,AEJZ,ACRA,ACDG,ATsBC,ADnBhB,AN2BiB,AC9BR,AmBKD,AC+BA,AC3CR,IhBUI7K,KUHI,CX2BEN,IDEIpF,AItBV,CLyBW1G,AKzBMkV,CYFT,CfsBKrJ,ASlBA/Q,CZ4BC+F,AM9Bd,AONcb,AMmCJ4T,Eb7BY,CLyBLzT,AWvBT,APaSlM,GJUN,AWvBS4E,ACRA,ATEAd,EQME+C,CTkBCiR,ADEAlY,ADGAkM,CIVX,CWoBS,AXpBIpK,CLeC,AY5BlB,ACRiBwW,CboCjB,CUxBoB,ASuBJ,CHIO,AfRFlX,AIVjB,ADnBhB,CF0BkCgU,AGPA,EJUP,AY/BH,CZ+Ba/H,AY/BDoX,CV0BnB,AgBSiBjR,EhBT9B,ADEuB,CAAc0B,MDGd,AkBIgBc,ClBJK7J,GCHG8I,ADGxB,CAAZ,AIVC,CcckB,CAAgBhO,ClBJK,GkBIrB,ClBJ9B,CY/BoB,AMmCgC/B,GNnCM0e,GAAlD,EMmCsB,EjBPP,AiBOuC1f,EjBPM,OiBOtC,EAA2CF,WAA3C,CjBPP,CAAnB,AiBOkF,MAAxD,CAA1B;AhBRJ,AaeYukB,AdbRpT,ADGJnF,ADKK,AM/BiB,AIKwE,AEFtF,ACRA,ACEP,ATmBWvM,ADnBhB,ANQY,ACXJ,AmBKIM,AC+BJ,SfjCCyU,EDwBEtC,CJ3BC,KaSKzR,CCRA+Z,AMmCHjT,CjBPK8J,EQlBC,AEFR,CVoBJ,ADIA3E,CCJehR,AgBxBJ,CNIKsF,APaA,AccJ,EP3BMP,CIiCH2iB,EbfMnP,AU1BjB,ARqBiBgE,AajBJ2M,CNIb,ACRiBzc,AMmCHkgB,CjBPK,AE1B/B,CAAgC5T,CDwBrB,AU1BC,ATEZ,CYuC8B,CAAC2O,AZvCI,AeiCJtjB,ElBHR4L,CENgB,CaeT,CAAP,CGNG,CD/BYvH,AC+BA4X,CHMC,AXpBf,EWiBW,AfN3B,AIXQ,GFKgC9H,EFMZxH,CCJb,CCF8B,CDEAmC,CCFjD,AetBqB,AC+ByBoN,CD/BC/Y,IAA1B,EAAgC/B,CjB4BTyL,ECJxC,EAA0D,GDIXC,AiB5B9B,AC+Ba,CAA4B1F,CD/BClH,QC+BzC,ElBHsB,AkBG6BA,ClBHT0L,AiB5B3C,CAAb,OjB4BoC,CAAZ,CADhC,AkBIsB,EAAgE,KAAhE,CAAlB;AhBRP,Aaee5K,AdbJiK,ADIRmB,ADIIrD,AUxBS,AEJL,ACRH,ACEL2W,ATmBS,ADnBTjL,AN2BK,AC9BG,AmBKH,AC+BD,SNtCA,AfWA,IE4BK9L,AKrBc,AabnB,CbaI,AaVJ,CJHO,CKiCHlB,CnBCK8B,AY5BAoW,EbTGnb,AoBoCZ,ED9BO+B,AC+BH5H,ClBHJiO,CCN0D,CUnBtD,ARNY+H,AcGhB,CdHJ,CcGgB,AC+BH6T,CHCkB,AhBDtB,AY5Bc7pB,CZ4BC0J,ADrCCzM,GCqChB,CAAL,AY5BwBmf,GO4BpB,CpBrCyBpb,AoBqCVwE,ClBHJ0H,GWzBI,CAAckW,AO4B7B,CAAqBta,CpBrCJ,CAAgB,CEkCrC,AkBGI,KlBHwBkF,GFlCP,CAAjB,MaSe,CAAkCzL,CXyBb2L,CWzBe8S,MXyBR7S,CWzB5B,CAAf,UXyBoC,CAAoBjB,QAApB,CAAZ,CADhC;AELJpQ,AaegB0oB,AdbJpV,ADKR9C,ADGC,AMjCqB,AISb,AEJD,ACRJ,ACEA,ATmBI4L,ADnBX,AN2BO,AC9BC,AmBMG,AC+BJ0Q,QhBVAtU,CJ7BA,CAGA,GWFqB,AGEhBiM,Af6BAnjB,CgB3BCymB,GFMGxM,AbRFpZ,AoBoCFiC,CLlCK,AfFV,EAAU,CD6BV,CIH0D,AUlBtD,AdqBUlC,AoBxBJC,CjB4BK4O,Aa/BAkM,CKkCf,ChBVR,ASlByBxX,CMHHqF,CNGKyQ,CTkBC/C,CerBhB,CJHM,CDFV,CDQI,AENJ,ATmBwB0E,IJYI/M,EHJ5B,CAA+B,GOR3B,CAA+BjJ,CJYpB,CEPvB,AFOI,CIZQ,CAAmC,KAAKpD,EPQ5C,KORI,EAAiD,IAAjD;AFMZ,AaSmC,AdPvB0P,ADKR9C,ADGA/N,AMjCI,AISIyB,AEJA,ACRP,ACEG,ATmBC,ADnBTpE,AN0BQ,AC5BI,AmBKA,AC+BP,QflCGiZ,CCUqB,AceZ,CdfT,CLwBGzR,AmBTP,InBSA,AclCY,CdkCA0F,CgBDJ,AJ3BKrM,CENCknB,CRCH,APHI,CCoCCha,AkB/BJ5L,CROK,AXZT,CeEU+C,AIGJV,CjB4BKuM,CWzBX,CAAaxO,CNLLwf,AYEJ,CROW,AIVAiG,CZ0BCrU,CFQZ,AMjCD,AMKH,CZ4BkBnG,AMjCN,AMKM,ARN9B,CcG2B7I,EdHMsU,EUAX,Cb+Bc7I,Aa/BA2X,CdkCpB,AclCM,CZuB4C,AFW9D,AclCc,EIGN,CJH6B,AhB0Be,CQzBzC,AYGC,EjB2BO,AK9BejG,CL8BlC,EK9BW,CAAP,AMKI,AMFU3f,CAAN,GpBsB+CA,CAAP,EM1BxD,AN0BqE,CgB1BZ,UAAjD;AEwCI,AdbAuR,ADKR,ADGA,AMnCsB,AIWV,AEJJ,ACRR,ACEC,ATmBG,ADnBR,AN0BY,AC5BH,AmBMG7N,AC8BRinB,QlBHIpc,CG/BCyI,EJkCExW,AapCA+hB,ERqBE3gB,AceJD,InBAL,AY5Ba2Y,ACRb,CAAc1D,ARqBV,ADnBR,CAAmBK,CN0BHjX,AqBQZ,CTxBiBihB,ALSA,AceJrhB,CrBRCgB,CkBaCwC,CfRf,AYjCA,AKMgBpD,CpBsBJ,CGKU,AYjCA,ARqBA2a,ADnB1B,AN0BsB9Z,AoBtBA8d,AC8BlB,CjBRuBlN,AiBQJoZ,CflCK,EYuChB,AJjCA,GFII,ALSK,AafT,CbesBjpB,EPOlB,CYhBqB,AZgBJ,CYhBjB,CLSK,CAAmB2L,AcepC,GAAmC,CdflB,CAAwB,CPO7B,CAAJ,EAAiC,AqBQzC,Cdf8CoN,OAA7B,CAAb;AWqBC,AdlByD,ADU1DlM,ADGP,AMlCI,AIUW,AEJP,ACRD,ACEJ6V,ATmBI,ADnBJ,AN0BYhmB,AC5BX,AmBMO+D,AC8BRsoB,KpB9CA,GKYI9T,CFqBA,AUxBA,EAUKuN,CCTDa,CG4BJ,AF1BK,ATmBAjK,AceJrZ,GPrCD,CAUY3B,CAAD,CIiCN,AH1CM+kB,CHYC,ASwBhB,CAAanlB,CP3BS,CXwBH,AiB3BJI,ERMMihB,ALSjB,ADnBJ,AcIiB5e,CC8BjB,CfjCI,ANyBevB,AqBQAgqB,ClBHf,CiB3BI,KdHGjU,CeiCX,ETxBgB,CSwBc,ErBRlB,CYhByB,AZgBJ9V,CYhBrB,EAA4B,CGZCyhB,Cf4BHxhB,EqBQtC,IfjC6BiW,ESHd,CAAoCvW,Af4BlB,CAAeO,Ee5BjC,CAAwC2V,ATG5C,CAAP,ANyB6B,CAAoBvY,Ie5BtC,CAAX,Sf4B+D2B,EAAEY,GAAhB,CAApB,CAArB;AkBeJ,AddP,ADKA,ADGL,AMlCIsB,AIUgB,AEHRnB,ACTJ,ACEA,ATmBA,ADlBJ,ANyBS,AC5BZ,AmBMQ,AC8BL4pB,CpBjDmB,EAAvB,EE4CI,IDKK9e,CIjCCqL,CH+BD,CYlCG,CAAC+N,ARqBAtK,AceJhZ,CnBAT,AMlCc,CLgCD6M,ADEExD,AMjCV,AQDW,EFOCpH,ACTT,Af0BI,Ee1BO,CRqBX,AceJ,CdfiBlF,AceJkB,EHME,AlBbF,EEOjB,AUxByB+hB,CSwBrB,CnBAuB1W,AmBAJpL,CHMX,AXrBJ,CAAqBob,ADlBA7b,CH+BpB,AWzBG,CAAmByE,APYvB,CJasB,AIbE,Ace5B,GAA2B,ETxBX,CVwBpB,AIjCsCxE,CQM1B,CZ2B4BmL,AY3BA,AO2BpC,KnBAJ,EAA+CsB,AclCA,IVClB,CUDuBgP,ATmB5C,ADlB4C,ECkBE,CAAC,CLevD,CKfyDI,CLeCnP,CclCX,CTmBQ,CSnBO,CTmBAnB,CSnBtD,CFOI,CZ2BZ,AKfuD,ADlB1B,CQMqC,ARN9D,CJiC+DoB,AKfb,KAAkB,CLexE,EAA2E;AgBOlE,AddL,ADMI,ADEJ,AMjCM4T,AISU,AEHJ5b,ACTJihB,ACEP,ATmBO,ADlBR/N,AN0BY9Y,AC7BhB,AmBMK,AC8BDusB,ObjCA,CJyBInX,AFQArI,AMjCM0U,CPHLhZ,AmBLL,ClByCA,CMjCA,CL+BQ,CK/BOxG,AaiCVsB,ClBFK0M,CiB3BL,EZJL,ADkBa8M,CHOCtI,CIzBO,AOHN,CMoCf,CfjCiBsE,AeiCJvX,ENpCMmlB,EHYEnD,CXZzB,AoBoCI,CpBpCuBpe,AoBoCJ1D,EjBRnB,AUnByB,EVoBrB2T,AE1BJ,AN0BuBvS,CM1BKH,CQKkC,APatD,AceR,ClBF8BuN,AIbA4M,CNrBlC,CD6BgB,AqBOgB,CdfpB,ADlByB9Z,AN0BJD,AC7BI2F,EWYjB,ALSmB8D,EcenC,CjBPe+I,AQjBuBkL,ALS9B,CDlBR,EF0BI,AH7BR,CG6BuB7gB,CH7BwB,CcA5B,CZkCP,AStBqC6jB,AGZAjL,Af6BjC,CGKR,AHLsC5W,EGKM,AHLJY,EIAjB,CW7BZ,Af6BH,Ce7BJ,GHY8B,CAAkB,MAAM,cRiB3C,CAAf;AccH,AdbD,ADKQ6N,ADER,AMlCqB,AIUD,AEHRiQ,ACTJqG,ACERjK,ATmBK,ADlBL5D,AN0BS,AC7BT,AmBOI7U,AC6BJ,QjBPImR,AFOAvH,CKjBA,CNnBElF,IeEI,AKkCJgkB,EnBAN,EEPchY,CgBtBHU,AC6BA1S,CpBpCKgC,CKGCqU,GQMGpX,AO2BJsjB,CpBpCKtc,CaSCjD,CXyBC,CCLvB,CQjByB7B,AXZT,AoBoCL,CjBNPuR,AH9BsBjQ,AmBOJ8Q,AC6BAiP,ElBFd,CG/BR,CQMoB,ARNU,EMSV,AEL0C,AMAnD,CAAkBhe,AC6BlB,CNpCuBid,AdAlB,AoBoCczhB,EpBpCM,CG8BrB4S,AgBvBJ,EdJX,AcImCrR,AC6BAtB,CjBN/B,CAAehD,AE3BsBiZ,ALHzB,EcAR,AdAmCnQ,CcAC/B,GAApC,CAAwC6R,ATGhD,AeiCW,CjBNgB,AiBM3B,CD7BW,CnBPK,AmBOZ,CnBPJ,EcAQ,EAAgDqO,IAAhD,aX8BW,CAAf;AcaJ,AdZA,ADIK,ADEL,AUxBiB,AEHLhhB,ACTP,ACED,ATmBH,ADlBD,AN0BK,AC7BL,AmBOC,AC6BD8mB,QjBNIvX,AFMA/I,ADpCAxM,GCoCJ,AIjCOoZ,ALHApQ,AoBoCJ+jB,ErBdC,CkBoBEnE,CFxCK,EVCEjf,CF2BCqL,EY5BEyS,CZ4BhB,AQpBsC,ANP/B,ALHH,CiB0CUxZ,AZvCIgL,ALHAnQ,AoBoClB,CjBLI0M,AQnBe,AEHAzT,AO2BJ2qB,CHMC9D,AFxCL,CFOU5iB,AEPA6W,GJUGkG,ASwBJrf,CHMpB,AjB1CI,CAAJ,EeEW,AfFiB,EG+BbgS,AY7BX,CKkCJ,EjBLI,CAAe3V,CE5BgBsZ,OF4BR,EQrBW,CAAtB,ANPT,EAAwC3U,GAAxC,CAA6C4U,YAAD,IAAkBA,MF4BlD,CAAf,ME5B8EnO,SAA3E,CAAP;AYwCA,AdXA,ADGC,ADED,AMpCqB,AIYR,AEPiD,ACL1D,ACEH,ATmBD,ADlBH,ALHO,AmBOJ,AC6BH,QjBLOoK,AFKAtH,AKfAvK,CLeJ,GgBMI+jB,CJrCI,CMEFyB,CLPKlC,ARqBX,ANrBWle,GG+BGoM,AGVA,CQrBV,CG0CQ,CAACzM,CjB1CT,CiB0CWS,AdXf,AgBxBe,EhBwBM,EgBxBFigB,IFmCN,CAAWP,IEnCT,CFmCF,CEnCb,CFmC+BnB,IAAlB,CAAb,EAAsC;AAClCxZ,AdXAuH,ADGJ,ADEA,AMpCI,AIYK,AEHJ,ACTJ,ACED2K,ATmBI,ADlBRvgB,ANiBQ,ACpBH,AmBOD,KnBTA,GEoCIwQ,ADEAlC,AIjCA6K,CQVA,EbQC,EWZoB,CMqDnB6P,AEnCA9d,CbcK,CLeX,CclCa,AVCjB,EYuCQ,AdXW4K,AI/BJ,CU0CCtO,AXrBIsV,ADlBA3D,AcIJmQ,EhBwBR,CAAenpB,AI/BJ8D,CU0CX,AfRJ,CeQiB4jB,CfRK,CIbX,AadQ2B,CbcK1lB,CWqBpB,AZvCR,CEHe,CJ+BgB,AI/BJ,IDqBnB,MCrBoBI,CYOZ,CAAuBM,IAAvB,CZPW,CYOkB,ChBwBtB,AI/BcsD,CJ+B7B,KI/BmB,EAAqB,EYOhC,CAAZ;AFoCC,AdXG8N,ADGA/E,ADEJ,AMpCQ,AIYAjQ,AEHP,ACTD,ACEI,ATmBH,ADlBL,ANgBQ,AClBA,AmBMJ6oB,QlB6BIlb,CIjCCoL,ESHE0N,GdCGhe,CCmCV,EkB7BS6B,CRKK,CRmBC+I,CgBxBf,ACUWoN,EbjBGjO,ELkCM,AStBA,AGZpB,AdCoBlO,CcDC6T,EX+BjB,CAAoB7E,AI/BJ,CLkChB,AFjCqB/K,CKE7B,CSHI,EX+BI,AW/ByB,ATGA,ALFT,CG8BUmM,AH9BApM,CODLuY,IJ+BrB,EI/BgB,APCA,CG8BkB,CI/B9B,APC+B,IAAnB,CAAhB,IG8B4ChT,KAAV,EAAiB2E,GAAjB,EAAsB;AcY5D7N,AdXQ,ADGP,ADED,AMpCQ,AIYI,AEHZ,ACTI,ACEH,ATmBD,ADlBA,ANeI,ACjBA,AmBMJ,KjByBA,GDIIiJ,EIjCEoL,CHgCD,AW1BExW,APYAma,CNpBClU,AmBMJmC,GjB4BKiF,AW1BT,ACTWyW,CDSCnO,EIiCF1K,CdXKiG,AFKf,CgBMY/O,CN9BK6d,AQLJ,CZPCtG,AMSd,EAAoB,AbRAnX,CMoBpB,CAAsB7B,CWqBtB,AdXuBiS,EgBxBvB,CjB4BK,CiB5BkB,ChBwBR,ADIW,AKnCF,AFGI,ALFpB,CG8BqBtH,AQnBjB,ALSZ,ADlB6B,ECkBE,CNpBC,CWWC,AXXA5F,CWWrB,CRmBuBuK,AH9BA9J,EODrBwT,AOAuB6H,CX+BR,EAAWvV,GH9BP,CODT,APCoBlM,CODnBf,CAAD,AOAb,CX+BI,AW/BgCU,CPAhB,CJ+BkB,AH9BA0G,CcDtC,CAAwCwP,KdCP,CcDjC,AdC8CvP,CcDrD,ITGwB,CAA5B,ELF4C,EAAX,EAAoCH,OAApC,CAA7B,EAA2E;AiB0C/E,AdXY2M,ADIR,ADCJ,AMpCY,AIYA,AEHR,ACTH,ACEKoK,ATmBF,ADlBJ,ANcI,AChBI,AmBMJ,QlB6BA3R,EIjCEoL,EYuCF,AfPI,CeOHtU,AhBNL,CCDUmL,AW1BA8Q,CPYCpF,GadDsN,CnBNK1gB,CiByCX,CN9Ba8a,AIVjB,GEwCgBrjB,AdXI,AI/BJ0B,AQEU,CFOL5B,ARNA,CEHH0hB,GJ8B+B,EcY1BsG,EN9BX,CTuBkB5X,CIdCuM,COZCyE,AMFJzW,CZPZ,APCiB7B,EmBMvB,EFmCM,AEnCiB1D,CFmCC0iB,AV1CA,AMSb,CAAkBzG,CbRxB,CMoBJ,CAA+B/e,ANpBAoG,CiByC1B,CAAhB,CfPQ,AKnC+ByY,ADqB5B,AadD,CFmCgC,AfPtC,AId0C5d,CadH,CjB4BK,EFlCjC,CAAP,EMoBG,CAAP,CCrBY,AMSK,GAAqCrB,CNR1CN,CMQZ,CNRcqf,QAAF,KAAe,AFE/B,OEFoCA,QADpB,IAEArf,EAAE0W,QAAF,KAAe,OAAKA,QAFpB,IAGA1W,EAAEiR,GAAF,KAAUA,GAHd,EAGmB;AUwC3B7N,AdXQ0Q,ADIJpF,ADCR,AMjCgBtQ,AISJ,AEHR,ACTJ6D,ACC0B,AToBzB,ADlBD,ANqBI,ACvBC,AmBMGmB,QlB6BJmJ,CDrCA,EKIGkL,ENqBE7Y,CEYT,AY3BU8X,ACTA,CdED,MG6BQ,CcWH2P,CN9BK,CZYf,CcfiBzP,AdeArX,AoBjBJ,EFmCE+mB,Adb8B,CDMzB,AHXpB,CAAqBvlB,AoBlBkB,CFoC7B,CZtCT4W,CYsCD,AJjCwBrX,CX0BpB,CW1BJ,Ade0Bc,CQrBHoe,EFApB,CACKxI,ENoBa,CQrBT,ARqBqB3V,CQrBH0e,MFCZ,CEDN,CAA0BC,WRqBjB,CAAiC,EQrB1C,CAAyC,GRqBO,GMpBpD,CADL,EAEFrI,MAFE,CAEKX,UAAU,UEFN,EAA+E2D,MFEnF,CEFI,AFAT,EAGF3T,IAHE,CAGG,IAHH,EAIFuC,OAJE,CAIM,uBAJN,EAI+B,mBAJ/B,EAKFA,OALE,CAKM,iCALN,EAKyC,6BALzC,EAMFA,OANE,CAMM,qCANN,EAM6C,6BAN7C,EAOFA,OAPE,CAOMmO,YAPN,EAOoB,UAAUE,MAAV,EAAkBC,UAAlB,EAA8BC,OAA9B,EAAuCC,OAAvC,EAAgD;AYiCvE7L,AdXQ6H,ADIP,ADCL,AMjCgBhS,AISAgB,AEHZhC,ACTA,ARqBJkB,ADXI,ANcI,ACtBA,AmBKAulB,QlB6BJhb,CAAJ,IY3BSvL,CIiCHmC,AH1CInB,ARqBA,ADXA+V,GQDN,AdeS1W,CcfC,CbPC,EiBwCX,AH1CA,CX+BcyB,EcWFK,AjBxCR,EWUc,ANFAL,CFqBC0E,CgBxBH,CpBiBZ,EkBkBJ,AN9BuBmP,ANFA5P,CEPHhH,EJ4BN,AI5BQigB,CJ4BKjiB,AErBT,CAAU2B,CMEV,CAAYmb,CJTlB,IJ4BuB/Y,EQnBjB,ANFA,EMCH,ANDwB,GFqBZ,CAAgB,SAAhB,CAAb,AErBI,EAAqC8V,EFqBE9U,KAAKiR,GErB5C,CAAlB;AYiCH,AdfgD,ADQhD,ADCD,AMjCa,AISGoF,AEHR6D,ACTJ8H,ACDsB,ATsBtB,ADXA,ANcC,ACtBA,AmBEsC,QlBgCvCtY,CFdqB,CAArB,EODI,APGA1L,CIGO,AgBvBL,ChBuBF,AEjBEkX,AcNN,GbiBSnZ,APGAsC,CEYb,KFZQ,CAAYG,CcfC,CACR,APWT,CKTmB,CLUf,CDZiBtD,GMEG2Y,ANFAsB,ESVEsK,IHYP,CAAYV,IGZ/B,CAAoC9c,ATUf,CAAgBgT,EMElB,AZYf,CAAoC,CYdzB,CGVf,CAA2C,GTUtB,ANcyB,EexBEpB,ATUA,MSVhD,ETUqB,CAArB,EQAiDyI,QAAS,IAAG3I,QAAS,EADrD,CADP;AImCd,AdXK,ADILvI,ADCA,AMjCS,AISO4T,AEDR7E,ACXP,ACDG,ATuBA,ADZA,ANcI,ACtBP,AmBKA,QlB6BGxQ,CEXA,AgBvBJ,IboBS5N,CJaC2P,AGzBA0J,CYgCH/U,AElCF,EZbG,AR6BK9B,CEYb,AcrCUuI,IE2CV,AXpBI,COXe,CEZH,CTuBK,CJarB,CGzBuB,EMEE,ALUrB,APEI,CgBzBc,CVWKuO,GMEGxB,EIbH8O,CVWJ,CAAWzN,EMET,AIbH,CJaemG,AIbL0H,IAAV,EAAlB,GVWmB,CMEE,CNFuB,EMEE9D,MNF3B,EAAmCje,CMDvC,ONCI,CAA4C,QAA5C,CAAnB;AYiCP,AdXI,ADIDqK,ADCA,AMjCQ,AISQ7I,AENF,ACNdgf,ACDI,ATuBA,ADZA,ANcC,ACtBR,AmBMO,ACxCR5mB,OAAOC,CnBoECkO,CY9BA,AdgBI,CAFJ,EAII/K,EOFEgC,CJaC2L,AGzBC,CSVA,ACDJ7E,AISA4d,CpBgBKrmB,GEYG,CAAZ,AKda,ActDrB,CbmCkByI,AanCIhM,CrBwDV,CEYYkO,AcrCJ,AhByBIvK,CoBhBhB,CRIkB,ALUAsZ,EJatB,AKhCoB1c,AQJhB,CK/BR,CLgCY,CdoCR,AUxB2BwY,AS5CA,EnBoEE,AKdZ,EAAb,EKVkB,AIZP/M,CJYmBoY,CJTHzC,CQHvB,CADJ,EK/BR,EbmCwB,AISE,AS5CmB,CbmCHO,AQD9B,AVQkC5H,CNclC,AqBxDmCra,CrBwDC,KQrBxB,AQDL,CRC+BsC,ARqBI,AqBxDA,CLkC1C,CVQ6C,EEPjC,AanCqB,CbmCU,CFO/C,Ae1CR,qCbmCwB,EAAuE;AJ6B3F,ADIA,ADCI,AMjCQif,AIIO,AEIf4E,ACXA,ACJsB,AT0BtBlhB,ADZH,ANcO,ACtBZ,AmBMQ,ACxCR,Kf8BW,CAAP,Ae9BEhF,GpBkCG0H,EG6BEgO,ADIA,GWxBGsN,CZyBC,AapCA,CRsBCjH,ActDA9b,CTuCA,AZiBCsD,GEYT,AkB5BQ+H,ChBuBZ,GgBvBI,ACxCgB,CpBkCxB,CAA0B7F,GMoBG6X,APEjB,CQrBc,CanCV,CP2CR,AO3CR,CP2CiCkH,CbTjC,EAAoC/c,COCL6Z,EMQvB,APWQ,COXwBzI,APWA7T,IAAxB,CCpB+E,ADoBvF,COXA,AbTR,EAAgD;AG8B/C,ADIOoM,ADCH,AMjCWuH,AISH,AEDR,ACXOyO,ACCP,ATqBG,ADZP,ANcQ,ACtBL,AmBMQ,ACxCZ,SrBsDY,AqBtDHrkB,CrBkDD,AChBE4E,GWvBmB,AL2ChB9G,INpBI,CEiCCuP,CFjCC7G,CiBMJoU,CEAE,CCxCjB,CAAuBuP,CdsDf,CJYG,AIZc/oB,CQtBC,CKQd,GZLc,APDIqF,AoBlC9B,EdsDQ,ActDwB,KbmCDmP,CPDd,EAAb,KOD2F,wBOFhF;AXiCf,ADIQtH,ADCJjD,AMjCY2T,AISJnD,AEDR1a,ACXQyU,AC/BsE,ATqD1E,ADZR,ANcQ,ACtBJ,AmBMY+Q,ACxCZ,QpBkCIjkB,AoBlCA,CjB+DCyQ,AErBAoE,Ae1CA4S,IdsDItQ,COXC,AdaAlZ,CEYCqK,CmBpEX,Ef0CJ,AezCQ,ClBkEWsC,AGzBA9B,CCYX,CAAarK,ANpBAO,CcFC,CfwBC,CYZE0f,ANFzB,CFqBA,CAA0BhO,AErBA,CHuBf,ADGgB,AUxBH,AGZG0C,CboCvB,AKdI,CPEqB,CCtBzB,CG6BJ,AQnBiC,CXVD,AmBMJtY,ChBuBK,AI5BJ,AOHP,IAAe,EKQFyH,CZLDwZ,EOHQ3I,MAAL,CAAYtW,AKQrB,CZRmE,EYQ/C4b,UAApB,CAA+BwL,0BAA3C;AhBwBZ,ADIIrY,ADCJ,AMjCY4B,AISA,AEDR,ACdO,ACIfpT,ATqBQoc,ADZJ,ANcQ,ACtBJvU,AmBMQ,ACvCZulB,QjB8DIxX,AFKAjJ,AcnCAib,AVSAnZ,CSbA,GM5BI8X,CP0CCxE,AbTApY,CCkCCmF,AI1BA2L,EHyBEpK,AWxBR,AdaQ,ACtBR,CaSSjM,ARDT,AezCJ,CAAeyB,CpBiCAX,CCkCX,AUxBYmf,CRmBC,AFKA/V,AFZArN,CMdC,CEXyE,Aa9B7E,CP0CV,AbTgB2I,CG6BpB,EUpBuB2c,AO1CE,CT2CD5hB,ALUAuY,ADZxB,CJ0BI,CI1BsB,ANclB,CgBvBZ,AfCmB,CaSX,AdcQ,ACvBgBvX,CCkCCgH,AYzBA6Z,CEVCoB,GJWlB,CLUR,CLc+B9a,AUxBA,AED/B,APW+B3F,CNpBpB,CAAX,IMoBA,CAAsC,ELc1C,EAA8C,CKdCrD,MSrBnD,CTqBQ;AHUJ,ADAO,ADKH,AMjCQke,AISI,AEDZ,ACXH,ACCL,ATqBK,ADZG,ANeI,ACvBP,AmBMO,ACvCJ2E,KlB8DJ,GCAIhR,MUpBMvR,CZyBC,AI1BA,CezCCyB,CrBwDCvE,GIMG,AFKZ,CYzBA,ARDA,AcFS,ACvCT,CAAcuE,Cb6ByE,CJiC3F,CQnBqBkT,AZab,CAAclV,CoBjBd,ACvCJ,IT2CY,CAAYygB,MZapB,CAA2B,KAAKpjB,SAAhC,EYbQ,CAAoC,CAACmjB,GAAD,EAAM,CAAN,CAApC;ARoBhB,ADIH,ADCI,AMjCW7hB,AISC,AEDZ,ACXDyhB,ARsBAxG,ADZC,ANeO,ACvBR,AmBMYmM,ACvCR1mB,UpBiCE2G,CG6BC,EiB9DE9D,EN+BE,EfyBEtC,IIMI6S,AGTAxT,GNpBGgG,EoBjChB,CAAmB8X,EjB8DhB,AGTP,APGQ,EIMmB,AGTA,CadHngB,OAAOyH,CnBN/B,AoBjCI,CAAiCrC,MAAMK,EDuCnB,GAAoBmY,GCvCP,EAAjC,EAAmD,GDuC/B,CAA+ByL,0BAA3C;AhBwBR,ADIR,ADCIld,AMxC2F,AIgB/ErM,AEDZ0jB,ACXI,ARsBA,ADZJ,ANeQrjB,ACvBR,AmBMY,ACvCJigB,QfyCJpS,CHyBCgD,CDCC9E,ADlCA7C,EG6BE8L,EErBE6E,CQCC,ACXC,ARsBD,CLcC5N,CMxCQ,AFchB,CEdI,AOIM,CdECpM,CMoBCI,AcrDAgF,EnBmEV,AI1BY,CJ0BCyI,AapCAyK,CZmCvB,CAAyBvH,CFjCCtJ,AoBjCA4Y,CjB8DC,AQnBAa,ALUZ,CAAavE,ADZxB,CSVc,CAAY6G,ARsBf,ADZe,CFqBlB,ADIZ,ADCU,AKdqB,EJaE,ASvBjB,AS5C2C,CT4CzBrC,CRmBC,AFKAjV,CELC9D,AH7BjB,EG6BmB0N,AW/BpB,CdEqBpO,CcFE,CboCA4G,IELL,CAAU4G,CFKX,CAAarH,CKdjC,CKVC,AGZR,CRsB2CxL,ANpB/C,EWUiDyhB,ERmBjB,CFKD,CELsBjO,AFKrD,CUxBY,CLUD,CAAP,KHS4B,CAA5B,EAA4D;AACxDX,ADIR,ADCA,AMjCQ,AISI,AEDR,ACXH,ARsBA,ADZG,ANeC,ACvBL,AmBMQ,ACvCAvP,QnBmEJwG,CFjBA,CCjBEpK,CEiCC,IDCImK,AYzBC,ARDD,ELRE,CaSC,CO1CC9G,ClBkEC6L,AKhCJ,CNiCK1E,AMjCJhB,CISK8P,CEDCP,CVoBCjF,AI5BZ,CalCalQ,CbkCH,CNiCP,CAAakI,AYzBC,CFCApL,CS7C8B,ClBoEhD,CCJC,ADIoByJ,CGzBxB,CME0BxJ,EVwBnB,CCDJ,ADCP,CYzBI,CXwB+BgL,ADCA,IUxBV,CAAe4N,CTuBjC,EAAoC,QSvBlB,CAA2B,KAAKhD,MAAhC,CAAb;AMpDhBjZ,AdwEY8V,ADIJ,ADCA,AMjCQ9N,AISA,AEDX,ACXD2e,ARsBA/I,ADZC,ANeG,ACvBA3T,AmBMQ,ACvCJ5D,OHVLpG,Kf4EK4R,CYnCC,AfyBArQ,CCvBCwI,CCkCC,KAAP,AUxBY,CMrDpB,ANqDqBgS,AZab,ACvBa9R,CiB3CChK,Af4Ed,AHVckC,EOHEY,CHSCuT,AQnBT,AS3CS,CDuCH0T,CZLC,AIUH,EMtDpB,EAA+B,AdwEAzT,AI5BJvL,CDmBvB,EAA8B,ECnBX,CAAU,CRsBzB,AoBjB0BS,ChBuBT,AJNc,CIM3B,CH9BK,CmBOK,CFjDtB,AEiDgB,EFjD6B,EAAEvL,GlBkEvC,EAA4C2D,EkBlEE,IAAT,AlBkErC,EkBlER,kBV4CuB,CAAP;AU3ChB,AdwES,ADID,ADCH,AMjCW,AIUAkY,AEFZ2K,ACXI,ARsBA,ADZJ,ANeC,ACvBGxc,AmBHA,AClCmD,MHNrDpB,EZmDE4F,Ce7CA,CHNEtO,Ef4EEyR,AFjCA,CaSC,CRDC6I,CSVE,ARsBD,EJaP,AGzBA,CYnDU,AjByCD,EMsBG5Z,CKTC+b,CNHC,EAAlB,EYnDM,AZmDgB,CYnD1B,AX+De,CAAaQ,EAAb,CAAgB,EKTf,CAAkB,KAAKrE,MAAvB,IGbiC,GRsBlC,EQtBuCA,ARsBAjW,MQtBL,CAAYL,CRsB9C,CQtBiD,ARsBxD,EQtBA;AGxCR,AdwEQ,ADIA,ADCJ6K,AMjCS,AIUGwO,AEFR,ACXH,ARsBA,ADZG,ANeJ,ACvBI5R,AmBMA,ACvCH,KAPD,CHHEic,ElBkEEriB,CEWC6I,GCDGX,GCJG4J,ADIP,ADCO/T,AYzBC,ARDD,ANeX,ECvBa8F,CCkCR,AFXS,AoBjBJqiB,ClB4BKlc,AI1BX,EMGa0W,IRkBb,IFKC,AUvBO,CVuBc5X,ADlCA/C,CmBMH,CFjDK1J,ChB6EvB,AkB5BoB+K,ClB4BzB,EkB5BuB,EAAOvF,EFjDM,CjB2CvB,GAA2BhB,EmBMjB,EAAiB2b,KnBT3B,GaYuC,AMH7B,EAA2BsJ,GNGOpI,IIpD7B,CAAhC,CEiD2B,ENG2C,AMHxD,CAAN,GNGiE,KAAK3I,QAAS,EAA/E;AInDR,AdwEK,ADIG,ADCJ,AMjCQtY,AIUC,AEFR,ACXD0c,ARsBAU,ADZC,ANeG,ACvBAxT,AmBMH,ACvCJ,KjBwDG,CclEE7J,EhB6EEgN,ICDImB,EYnCE,CGzCCtO,AhB6EA,AFXA,CCvBC2J,CEiCR,EDCA,CFXYxI,GkBlEG,AhB6EAgM,ADlCAlD,CMoBC,GCnBDuX,CRsBf,CkBlEO,CAAf,AhB6E8B,GMjClB,CNiCJ,AMjCsBO,INiCQ5U,GMjC1B,CAA0B8P,EAA1B,CNiCiC,AMjCJ,INiCrC,EAA+C,8BMjCvC,EAAmEN,OAAnE;AU3CZ,AdwEC,ADIO,ADCA,AMjCC,AInCoB,AE2CzBG,ACXI,ARsBA,ADZJ,ANeC,AC5BY,AmBWb,ACvCJjd,KpB4BI,CiBtCES,EGUEwC,CTDA,EN0CGwL,CHyBCoD,AiB3BJoY,CZ7BO,AD2CFxlB,CC3CL,AMgCM,CIpDCtE,AhB6EA,AapCA,ETUEsa,GJ0BT,AapCY1B,ATUhB,CezCJ,ClBkEQ,Ce5Ee,CX+Df,AcrDgB9V,EN+BT,CAAYga,ARsBA,CAAC,GW/Db,CAAf,CX+DiCxY,CQtBlB,AKQe,ELRtB,CM/BR,GDuCI,IbcI;AW9DR,AdwEA,ADIQ,ADCH,AM3DoB,AIoCjB,AEFA,ACXH,ARsBG,ADZP,ANeSV,ACvBN,AmBMA,ACvCJ,IHVIukB,EdwEE9R,AiB9DA6W,EpBiCEvjB,CDuBJ,CAAY9F,EAAZ,AoBjBI,CRKKjD,ALSA0b,AadJyH,ACvCI/jB,ClBkEC4M,AHVM,CcdL,AbTA1C,KiB3CK,Af4EAsC,AWxBAzH,CVoBCkR,AiB9DA,CHVrB,ENsDQ,AEFA,AMHY8N,CRKKxiB,AS5CZ,ClBkEaoP,AIblB,AcrDR,ET4CQ,CAAqB,GTsBrB,AiB3BoBqT,CRKKnB,AXX7B,EAA+B,GG6BGpiB,GgBvB9B,ChBuBa,CAArB,IgBvB2C,IRKQ2hB,cAAtB,AQLzB,CRK8D,CQLH,IRKQf,QAA1C,EAAoDzI,OAAOtW,EAA3D,EAA+D,KAAK4gB,aAApE,CAArB;AMrDR,AdwEA,ADIQ,ADCJjV,AMlCC,AIWG,AEFH,ACXKgS,ARsBL,ADZL,ANcoB,ACtBZ5d,AmBMAynB,ACvCR,MHVMrM,GdwEGnH,AErBAiE,AezCA6N,IT4CI9D,AXXAta,CEiCC8F,CCJd,AFKevD,CELChF,GH7BR,AoBjCR,CjB8DA,AH7BoBF,AoBjCA7B,CN+BhB,ATUJ,CYnDsBkD,AdwEAiM,ADIAnI,AGzBAwG,CJ0BCxG,CgB7EC6S,AdwExB,AW/B8B,AdEtB,CAAiB,CG6BC,EDIE5S,ADCb,AI1Bf,AezCA,EnBmE8BqB,AI1BA,AezCA,ClBkEtB,AStBA,CMtDc,EEiDQ,QlB4BY,ADlClC,AmBMA,ClB4BO,CAAX;AgB7EkB,AdyElB,ADII,ADCJ,AMlFY,AI2DX,AEFDyY,ACZ0B,ARuBpB9I,ADZN,ALRI,AmBMH,ACvCD,QnBmEI,AmBnEA,CnBmEC,AmBnEAyP,CjB8DCzX,AErBA+E,ELREzR,EEiCE4I,AkBlEA1I,EP0CE,CPWZ,CAAoB5D,EDZJ,CJ0BCwJ,CI1BjB,ALRkBrJ,CG6BC6Q,CGTnB,AcrDK,CnBmEA,AmBnEgB7Q,CnBmECyI,AKdM,EJaJoD,Ke7EK,AGWxB,CnBmEA,ADlCyBxI,AoBjC9B,ClBkE+B+I,ADC/B,CELgC8C,AiB7D5B,CnBkE6B,ECDT,CAAY,GkBjEzB,CHZkChT,GAAhB,CGYzB,CHZ8C,CdyEJiT,ADIAzG,CAAV,CCJJ,AH7BgB1I,CG6B7B,ADI8B,CCJjD,MH7B8B,EAA4BmE,OAAOQ,aAAnC,CAA1B;AiB5C8C,Ad0ElD,ADIQ,ADCJ,AMlCRtK,AIWI,AEFI,APUwB,ADX5B,ANYgB,ACpBZ,AmBMJ,ACtCA,QbgCIuhB,EFQE3G,CFqBChF,AQlBA8O,AS3CA2I,CpBgCC,AmBMJ,CnBNKnkB,CmBMHzI,ClB4BK,AYzBAkE,COzCC2oB,CbgChB,AIWI,CTsBclqB,AStBA2V,EVuBV,AMlCYwI,APAZ,CmBMSrZ,ChBuBKuO,AH7BA,EWWlB,AEFI,CXwBiBpI,AkBjEd,CT2Ce,ANHA,AexCA1I,ClBiEC,CCJhB,ADIc,AGzBrB,CFqByB+B,ADIjB,AKjCZ,EYMU,EhBuBC,CAAP,AgBvB0BuM,ACtCnB,EAAyBsZ,MDsC1B,ACtCC,EAAP,GDsCuC,QAAjC,IACF9sB,OAAOyH,UAAP,GAAoBC,YAApB,CAAiC+hB,yBADjC,CAAJ,EACiE;AFpDf,Ad2ErD,ADIW,ADCP,AMlCL,AIWQ,AEFH,ACdyB,ATa1BtP,ANYI,ACpBI1R,AmBOJihB,ACvCP,cT2Cane,ITsBIgG,AGzBA,CAAd,ANYW,CYTKkR,EXXEpZ,CKQC,ANYJ7F,EMZf,ILRyBsG,CEiCCoC,AHbf,CAAY,CoBbCzB,GAApB,CjB0B4BrJ,CiB1BHooB,EjB0BH,AStBStF,CTsBC7U,CHbZ5L,IGaE,CAAgB+L,EStB1B,AZSO,CYTsBpN,CXXrC,CEiCkB,CStBV,CTsBiCoN,AStBA8I,GQJ7C,EAA8CvN,CRIlC,CAAZ,CTsBqDpI,KAAKiK,CiB1BH,KjB0BjC,CAAlB,EiB1BJ;AFrD8C,Ad4EtDrN,ADIY,ADCRuO,AUvBI,AEFJ2Q,ACdI,ARsBwB,ADbF,ANeH,ACnBlB,AmBOJ,ACvCLlf,QjB6DQyW,AiB7DA8R,IT2CIvc,ERkBZ,AFKcoC,CUvBN,ERkBSqI,AQjBL,CS5CZ,ClBiEmBzE,AYtCJ,CDcK,COzCCuW,EjB6DrB,AFKuBtZ,AFfiB,CYPrBjD,EGjBC+M,CHiBR,CVsBE,CAAe,AFfgBzX,EqBnD7C,CnBkEc,AavCC,CZsCkB8B,ADC7B,AavCuBghB,IZsCf,AHd4B,CAAcjgB,EexBvC,EAAP,afwBgC,CAAgCH,EAAhC,EAAoC,KAApC,EAA2CE,OAA3C,CAAb;AIW3B,ADIS,ADCLwK,AUtBI,AEHAxL,AChBsB,ARwBtB,ADdsB,ANeH,AClBnBV,AmBOJ,ACvCJ,SjB6DSkU,ADAmB,AkB7DnBb,ClB6DD,EiBtBAhQ,ClB2BK,AYzBAzC,AdSE,AClBFoH,CWYCoa,AZMN,CEgBJ,AmBlEJ,CAAgB4I,CPyCR,AMFJ,ChBsBJ,AUpBkB,APQJ/nB,CHYKiC,AgBtBJ,ACvCf,EAAqB+lB,CdiDH,CHYlB,AQjBuB,ERiBE3Y,AH7BjB,EG6BR,AQjB2BoO,AS5C3B,CdiDwBjH,ANjBI/S,CG6BC,AiB7DA,SpBgCSA,GMiBD2U,IKLd,AXZK,CWYkB9E,EXZEpU,GMiBxB,CKLD,ALKyBa,CKLxC,IXZA,CMiBgB,EAAgC,MAAKyX,OAAL,EAAhC,CAAhB;AWjE8C,Ad8ElD,ADII,ADCJ,AUtBIiG,AEHI9D,ACfP,ARuBG,ADfsB,ANcV,AChBZ,AmBOA,ACvCJ,QAAIoO,CnBkECnf,CELCuH,EDIE,AFjCAnL,AoBhCA4C,ClBiECyE,ADCA,CAAT,EAAYzD,EKjBHyO,AaVCsN,ACvCN,EnBkEY7b,CmBlEC,CpBgCC5I,AoBhCd,CjB6De6Q,CDIf,CWxBiB,APQjB,AaVatL,CjB0BK,AWxBA,APQL7F,CKLMsf,AS5CA,CnBkECtX,AmBlExB,CDuCqB7L,CCvCK,CPyCCilB,GZyB3B,ADlC8Bzd,EG6BE6L,AFKAxG,AUtB5B,CAA6BnH,AEHX,CPQlB,CLiBJ,AYzBqB,APQS1B,CKL1B,AEJU,CZ0BuB,AUtBAuT,CQLpB,CAAkB,EbU/B,EKLA,ALKkCtT,CAAlC,AaVa,CRK4Bmf,AQLzC,ChBsB0C9P,EAAd,AH7BgBnP,CG6B7B,CAAnB,CQjBI,KXZ0B,EAA4BmE,OAAOY,aAAnC,CAA1B;AiBhDJ,Ad8EA,ADIQ,ADCJiE,AUtBA,AEHI0Q,ACfRkB,ARoB4B,APG3B,ACjBG,AmBOA,ACvCArd,WjB6DG0S,CFKCrH,ADlCA,CAAC9D,AoBhCA1E,ET4CE6e,EGlBE,CKaHyF,CjB0BK,CDCChc,ADlCZ,CCkCI,AUtBJ,CRiBc0H,AH7BA,CCkCC7G,AYzBA,CXwBX,EiB1BUhE,ACvCd,CjB6DG,AFKC,AmBlEeiU,CjB6DCzX,CFKpB,CkB3BkBlG,EhBsBf,Cc9EY0B,Cd8EW,EAAvB,CAAP,AiB7DI,CHjBoBC,AGiBW,KDuCjB,CAAkB,GFxDjB,CAAe8lB,EEwDhB,CAAd,SFxDe,EAAnB,eGiByEwE,SAAU,MAAKA,MAAO,EAAtB,GAA0B,EAAG,EAAlG,EAAqG,+EHjBvD;AAAA,Ad+ErD,ADIQ,ADCD,AUtBH,AENa,ACZV,ARsBH,ADhByB,ANiB1BrpB,ACjBQqG,AmBOJ4f,ACvCIxJ,SPsCJ,GZ4BI,CAAClS,CAAL,AFjBM,CevBC,CbwCC,EkB3BFpD,ELbMwN,AM1BC,EHlBN8C,AjBkDO/R,IiBlDgC,AH4CvC,CAAYyW,AKanB,EnBPqB5V,CmBOH9E,KAAlB,ELbO,EAAP,WdMI,gBoBhCsD2nB,IAAIrkB,IAAJ,CAAS,IAAT,CAAe,GAD4B;AjB+D7GnJ,ADIQ,ADCI,AUtBRqE,AEHI6X,ACfH,ARsBD4B,ADbA,ANcI,ACjBC,AmBODsM,ACvCIjkB,QjB6DJuQ,IJZI,CcRCtS,CXwBChB,ASrBA,EVsBEiL,CELhB,AJZiBpN,AoBVJwG,GhBsBOiP,AUpBZ,CXwBa5E,AWxBA,CZyBC,CAAN,EYzBR,APOiB,AchDA,CrBiDjB,AoBVA,ClB2BmBzD,CFhBf,CIWZ,AgBtB0B,CdJF8E,GH8BS,ADCA5E,CCDZ,CAAb,CG9BJ,KJ+BqClB,MAAR,GAAiB,CAAtC,EAAyC,CkB3BHgd,MAAM1e,SAAU,MAA1D,4FdJwB;AYrDxB,AdgFR,ADIQ,ADCQ,AUtBRuX,AEHH,ACfD5F,ARsBI,ADdwB,ANgBxB,AClBA9a,AmBOA0I,AC1CqG,SAArG,IrBqDKjK,AClBA2J,CEiCCqH,CIjBCxR,CNhBP,AmBOImb,EdLGnN,CLFIhE,CiBnDPoR,AE0DJ,CLbawB,AKaJiN,CjB0BKxY,AIjBA5J,APEd,CMhBwB,CSR5B,CfwBqB,CexBC6E,CHkBC4X,EGlBvB,AfwBI,AClBqBla,EcNE,CRsBhB,CaTP,CjB0B0B,AiB1BJ2f,CjB0BR,AIjBarM,CWnEPoI,AfoFpB,ASrBA,AXZW,CWYkBhf,CQL7B,CnBP+BxC,CmBOHuG,GRK5B,CAAoC,AQLJ0Q,IbSzB,ANhBP,AmBO4B,CRKa7C,ALIAiF,AaTJuM,MRKrC,KM/D4CnO,AXmE5C,MaTA,aF1DA,EAAiE;AAC7D,AfoFJ,ADCK,AUtBL,AEHEgE,ACfF,ARsBH,APEG,AClBH,AmBOA,ACvCA,YlBiEOjS,AYvCA,CbsCA,AUpBCpN,AGlBA,AfwBAA,KGeL,AYvCU2hB,CbyCD,CCFG,CWxBhB,GFGI,AEHsB,AdStB,CYNiBre,AZMAA,CkBrEPwX,KAAK+B,CN+Df,AZMA,EexBK,CAAsB,SG7CjB,AH6CL,CG7CwB/b,AH6C7B,EACI,CG9CM,CAAN;AACH,AfoFG,ADEI,AUvBX,AEJyB,ACbtB,ARqBJoc,ADfI,ANiBA,AClBJ,AmBOA,ACvCA,WpBgCO,AoBhCAuP,CN2BCnQ,CfuBC/b,AClBAkB,EmBOF0I,ACvCIa,CfiCH0C,CLDD,CMgBO,AaTd,CjB0Be,AFjCA5G,CcLC,CAAZ,AfuBA,AqBlDG,CfiCOgT,ANiBIvW,AqBlDA,CnBmEC,AaxCA,AdKZ,CEiCC,CFjCR,GCmCY,AIlCR,ANiBA,EMhBI,EelCoB3B,MAAV,EAAkB+qB,MAAlB,EAA0B3S,KAA1B,EAAiC4S,KAAjC,EAAwC;AHlBzD,AfoFI,ADEI,AUvBT7J,AGjBQ,ARqBJ,ADdA,ANgBH,AClBJ,AmBOA,ACvCO,YAAI/I,GdgDG,CDdHtM,CSPKsK,EHiBE,CS5CC,CAAR,CfkCMjU,CSPN,CAAYwe,CRqBhB,ADdI,CelCc,CAAlB,EfkCiB,AejCb3gB,IfiCJ,EACI,CelCO6E,IAAP,CAAY,CAACmmB,IN0Bb,CAAmC,CAACtQ,AM1BjBtC,GN0BgB,EAAM,AM1B5B,CN0BsB,AM1BvB,CN0BZ,CM1B2B4S,MAAM5S,QAAQ,CAAd,CAAf,CAAZ;AHzB0C,Af0F9C/O,ADEC,AUvBD,AENsB,ACXrB,ARqBJ,ADbG,ANeEzH,AClBV,AoB/BQ,SNwBA,AdOCsG,CDkBL,CAAarG,CYNL,ETqBEwL,CYrCD,AfsBT,AqBjDWrN,ET2CEohB,AZMMtf,CMfTgW,CSPG1N,CdIjB,CAAqBlH,AoB/Bb,GfkCY2U,CH8BK7N,CYrCD,AdIxB,EDkBI,AClBwBnI,EEiCd,AHfsBE,CYNxB,AGhBiBqU,CZqCG9I,AFjChC,EKG8BxB,ALHI9G,EWYEhD,CTqBtB,AYrCU,CAAY4e,CZqCGngB,AG9BnB,CAAZ,ANeJ,EAA4C,EGeJiK,AFjC5C,CWYQ,CXZsC,CWYC,GTqBjC,CAAN,GYrCgB,KAAiC,CAA5C,EAA+C;AGrDN,Af2F9CsE,ADEA,AUvBIqP,AENJ,ACVI,ARoBR9C,ADbI,ANcwC,ACjB5C,AoB/BC,KAJM,EAIJ,EAJI,CpBmCDpT,AoBnCN,EnBsEQ,CAAC,GIhCD2P,ALHI,CcJC1B,EHgBE8L,AENJ,CbNK9Z,AmBrDL0L,CjBsFMzK,EYrCT,CbuCYgD,AavCAsU,ATOJ,CH8BK9R,AW3BL9J,AbNJ,CAAU7B,CMgBC,CLmBd,AIhCL,CJgCqB8I,AY7BrB,CZ6BK,AI/BD,CH6BJ,ADEA,AUvBI,AXZI,CWYgB,AXZ5B,CCmC6B,IUvBIoV,SGhBzB,CAAmC,CAAChX,GHgBpC,AGhBmC,EAAM,CAAN,CAAnC;AGtD0C,Af4F9C,ADEI,AUvBA,AERkB,ACRrB,ARoBD,ADZA,ALJJjC,AoB/BH,QpB+BOtG,CcNK,GZuCD,AIjBA2Z,ANhBR,CEiCSnS,EYpCA,AdGEhB,CKIHyD,CH6BK6C,ASrBAyS,EVuBE,GI/BDjJ,EJ+BN,CCFJ,CIjBkB,CJiBC,EG7Bf,ALJiBtW,EWYjB,ALImByY,ENhBhB,CWYmBtY,ANRJ,CAAtB,ALJ2BgD,EKIF,CCYP,EAAlB,GKJI,EXZG,CAAX;AiB3DkD,Af6F1CgF,ADEH,AUvBA,AEPJ,ACRO,ARmBJ,ADZI,ANWoC,ACf5C,AoB/BJ3M,QAAQ6V,EpB+BE/K,EMgBEqT,CNhBR,CoB/BJ,GAAiBtI,ClBgECjJ,AYpCA4W,GZoCN,AG7BK,EenCjB,ElBgEyB7R,AG7BJpL,CSPKjG,ERmBEqE,IDZA8J,CSPKgV,EZoCrB,EIjBJ,CQnBkB,ATOQ3e,CSPK4e,ARmBA,EDZX,CAAU,CAAV,CAAhB,EAA8Bnd,GSPhB,CAAwB,CAAC,CAAC8W,CTOH5O,ESPE,EAAM,CAAN,CAAD,ATOK3J,ESPM,CAACiI,ATOb,CAAU,CAAV,CSPY,ATOjD,ESPuD,ATOJxG,CSPF,CAAX,CAAxB,CAAd,ITO2D,CAA3D,EAA8D;AYhEpB,Af8F1CoG,ADEJ,AUvBH,AEPD4T,ACRQ,ARmBA,ADZI,ANWR,ACfP,AoB/BD,SAASqN,GnBkEGjf,EAAEb,EFpBF,CcVK,ACRAiL,CZoCC7G,AIjBAkM,Ac/ClB,CAAmByP,IN4BP,AfkBK5sB,AqB9CjB,CnBkEY,AatCY0iB,ATOJhJ,CH6BR,ADEahM,AmBlEA,EnBkEEtB,ECFEV,GIjBGzJ,ADZJqD,ANWpB,CEoBiB,CFnBb,CGiBuB1E,CDEC,AI/BhB,CJ+BR,AKnByB0H,CJiBR,CAAUuG,EG7BF,ANYlBnL,EEmBwB,AatC/B,CZoCiB,AYpCe,ARmBZ,CJiBasL,AIjBAzG,ADZ7B,EJ+BR,AI9BYmR,EJ8B6B,AatCA5B,CZoCpB,AHjBjB,EGiBwCpM,CIjBpB,EQnBY,ATQhBpG,CSR4Bqd,ARmBA,CAAxB,CJiB0BhX,AIjB9C,CDXQ,EH4BS,CAAjB,CG5BwB,EAAhB,gBSRwB,CAAsC4W,KAAtC,CAAhC,EAA8E,EAAEK,QAAQ,KAAV,EAA9E;AG1D0C,Af+F1C,ADEAnV,AUvBR+V,AEPI,ACRC,ARmBGtG,ADXIxD,ANWR,AChBR,AoB/BI,SpB+BK1P,EoB/BE4iB,IPoCI,COpCCC,GlBgEG,ADEAtmB,AFnBJ,AChBf,CaKoB0c,AbLA1f,GEiCR,ADEA,CAAYmK,ADnCxB,AoB/BW,CT2Cc,CVuBCb,AKnBA,APANlJ,AChBM,CaKlB,CRAgB2B,CepCKwnB,GfoCb,EAAcvmB,AepCIwmB,EnBkEV,AFnBT,CEmBsB,AFnBN,CEmBP,AI9BR,CCWJ,ADXuB,KJ8BS,EmBlExC,EnBkEoB,GAA2B,EFnBpC,EAAkC,IEmBzB,GAAsC,OAAlD;AgBjG0C,AfgG7C,ADEA,AUvBD,AEPH,ACRA,ARmBO,ADXQvT,ANWRjW,AChBR,AoB/BH,SnBgEO,CDjCE0G,GWYGnK,EVwBA,CKpBGqd,ANhBA7c,GCoCCoN,CFrBgC,CEqB9Bb,GUxBX,CAAiBpM,AXZAF,EMgBb,CKJJ,CAAqB,ALIA,ADXJiZ,EJ+BR,CAAa,AIhCK,CJgClB,CUxBiB1B,IXZlB,CCoCqB,ADpCE,CWYV,CAAY+L,EVwB5B,CDpCG,CCoC2B,ADpCvC,KWYyB,GAAwBC,iBAAxB,CAA0C,MAAM;AM3EvB,AfiG9CpY,ADGI+B,AUxBA,AEPR4O,ACRA4B,ARmBYf,ADXIpD,ANWRtW,AChBRyG,AoB/BJlL,QpB+BQyH,AoB/BAmmB,MlBgEMhhB,ESrBEnM,CTqBR,AFjCJ,AoB/BJ,EnBmEmB+G,CCHCyI,AYpCA,AdGAzL,AoB/BAopB,CPoCCvQ,EZ+BT,AUxBWnV,CVwBC,AY/BpB,AbLA,EaKsB6E,CdSuB,CGmBrB3J,CW5BxB,AOpCJ,CnBmEY,AKpBkB8B,COXC,ARAJ0V,EH4BMvN,ASrBjB,CQwBhB,CbpBmClE,CKJC4U,GTqB5B,AIjBsB,CAAUK,KDXC3P,Ac+Bb5G,IRxBZ,AQwBhB,CRxBkDmd,CLIpB,ADXiBhK,Ac+Bb,EbpBmBmD,GDX1B,EAA2B1D,EMO1C,CNPe,CMOmC,ELIhC,CAAd,CDX8C;AYrER,AfkG9C,ADGC,AUxBO,AEPR,ACRAwM,ARmBK,ADdsB,ANcvBviB,AChBRwG,AmBoCA,ACnEJ,MAAMiR,EpB+BEhR,CCkCK,GY7BD,CAACib,CM+BHuD,CjBHKhd,ADIF,IYhCM+V,EX4BE9V,ASrBArK,ANVL,GH+BD,AFjCX,CWYY,AXZS,CWYC,AS3CApC,ClBgEC4M,AiBGJlF,GjBHf,EAAwB,AFjC5B,AmBoCwB+hB,EnBpCMxe,AoB/BA,CPoCrB,CAAuB,EFOpB,EAAwB,CXZpC,AmBoCmB,CnBpCmB,GWYG2N,AEPhC,CAAL,ACRsCsN,AKuCJ,EN9B9B,GFM4B,CAAYjC,AXZA/Y,IAAV,EAAgB,CWYlB,AQwBpC,ERxBY,cS3CU,CAA1B,CN4BQ,CAAsEjI,IAAtE,CAA2E,KAAK2V,MAAhF;AG9D8C,AfmG1ClH,ADIAnD,AUzBC,AENL,ACTAwN,ARmBC,ADXI,ANOoC,ACZzC,AmBoCJ,ACnEJ,MAAMjI,MpB+BM3I,CaMCyW,ACTA3d,AfeE,CAAP,EcNA,AM8BIyD,CN9BKga,AOrCA3hB,EnBoEEsH,ADrCA6D,CcHX,CAAa,AKuCJue,ElBCL,CAAY,ADrCAre,CEiCCoB,AYpCjB,AM5BiBtM,CnBoEb,IkBDR,CjBH2BwB,EFjCvB,CEiCiB,CAAUiO,CW3B3B,CAA6B,AOrCpB,CPqCqBuN,AOrCAld,ElBgEb,CAAgBwM,AW3BJ,EAAMI,GAAN,AOrCS,ClBgECH,AW3BvC,EAAyC2Z,CX2BxB,EAA2B5Z,EW3B5C,CAA+C6Z,GX2BG5Z,AkBhEpB,CAArB,CAAjB,ClBgEoD,AW3B5C,GX2BwDqF,MAAM5E,MAA7C,CAAb;AenG0C,AfoG1C,ADIH,AUzBG,AENP,ACTA,ARmBG8Q,ADXIvD,ANGoC,ACRxC,AmBoCA,cnBpCMpP,EEiCEqG,ASrBApR,CQwBH,InBpCQ6K,EWYEpD,ALIA,GNhBGuD,GMgBGhL,CDXHgO,Ac+BlB,CjBHuBwD,ESrBf,AXZK,CAAa,EEiCtB,ASrBwB2Q,ALIA1a,ADXJ8S,EH4BM,CFjCjB,EKKK,ELLiB,CKKH,ALLI,CKKhC,ALLS,CWYL,ALIa,CKJkBiK,CXZC,CMgBC5G,ADXJ,EAAjC,QCWiB,CAA+BC,INhBvC,EWYT,CXZuD,CWYC,CXZ5D,QMgBA;AWnF8C,AfqGtCtS,ADIX,AUzBW,AENZ8S,ACTAA,ARmBI,ADXC,ANUJ,ACfGxT,AmBoCA,AClDRtL,QAAQqhB,KfSA,EQWOtC,ACTAA,ARmBA,ANhBAzT,CoBdf,Cd8BiB6S,AaoBJ,Ed9BA,AepBMkD,CpBcC3V,CWYCnJ,CTqBCyN,CG3BLvB,EMMD,CAAU,AENtB,ACTA,CdGW,AoBdf,CPoB4B,ACTA,ARmBb,ANhBa,CKMLqM,CCUf,AaoBA,GjBHyBnO,GG3BhB,EH2BK,CSrBN,CTqBwBA,AFjCzB,CWY0B,ANNN,CAAtB,ALN6B,EKMJ,ALNvB,CAAP,CEiCsCC,ASrBAmM,GTqBxB,EAA6B9G,CSrBV,CAAYiT,ITqBI7X,MAAnC,CAAN,YSrByB,GAAsCgX,GAA/D;AMhFsC,AfsGtC,ADIZjW,AUzBS,AENL,ACTA,ARmBH,ADVO,ANSRvJ,ACfI,AmBoCI,AClDZ,SAASqD,GNWG6W,CDSCgD,EZ+BErV,ADrCCrB,CaMR,CAASyT,AdSAha,EqB7BjB,ClB+CoBkH,AHlBhB,ACfiBL,CKMJ,CNSK,AoBqBJ+d,AClDI,CnBmDC/c,CCJC4E,CG3BHhL,EQAb,CZ+BO,AY/BawY,ACTApa,CdGZ,CCqCcsJ,EI/BFQ,ALLhB,CEgCI,EAAmB,EYpC3B,CTS0B3J,CJ+BnB,AY/BP,ACT+B,CKuCH+C,ClBCKqH,AY/BAqX,ARAb,CAAU,CAAV,CAAhB,CJ+BG,AkBD0Brb,CN9BjC,ARAkC3E,CJ+BtC,AY/B4CpE,CAAD,AM8B7B,EAA4B0F,EN9BQ,CRAL4G,Ec8BE9I,CnBlClC,GKIsCb,GAAN,CAAU,Ac8BzC,Cd9B+B,CAArC,Ac8BiD,Ed9BEyB,QAAQ,CAA3D,EAA8D,GLJjCiF,IAAK,KAAIF,IAAK,WAD3C,GAEI,SAHR;AiBrE8C,AfuGlCsG,ADIhB,AUzBK,AENG+U,ACTA,ARmBRpI,ADVY,ANSR,ACZH,AmBiCWhZ,AClDZ,KpBSA,GC0CI6I,CUhCqB,CAArB,CLWGzI,Ac9BAzC,CT0BC,CZGC5B,GqB7BGwI,CnBmDC2B,AUzBAsN,AGfAA,ERmBb,COVgB6N,CPUC,APDb,CAAc7hB,AqB7BX,CT0BC,AENA,ACTA,AMXWlC,CnBmDf,AUzBgBsiB,AENAhjB,ACTAmiB,ATSJ3J,CJ+BK,AY/Bb,CdSJ,AqB7BG,CrB6BgB,AqB7BA,ClB+CC,ADIpB,CkBDiB,GjBHL,AG3BQpU,EJ+BM,AkBF2B,ClBE1B,CAA/B,AI/BgB,EJ+BkB,CUzB1B,CAA4B,CNNH,ENS7B,EMTQ,ANS6B,CYHC,CGflC,ATUQoU,ANQ2B7V,CelBC,CAACia,CfkBJ,AqB7BlC,CAAP,CrB6BI,GMRoBxY,IAAR,CSV4B,EAAc,CAAd,ATUZ,CSVxB,CTUQ;AYvEnB,AfkGmB,ADIZ,AUzBI,AENA,ACTH,ARkBY,ADRLoU,ANQX,ACZD,AmBiCYgP,AClDf,KHzDqB,MjB0EXze,ICkCI,ADlCAzD,EWSElF,CENC2C,EZ+BV,CUzBI,CAAU,EXTlB,CaGqB,GRCDqB,EQDM0W,ERCd,EMKJ,ANLkBzV,EMKM,CENX,CRCT,CQDJ,ARCuB;AH2BlB,ADIZ,AUzBWtC,AENJ,ACTJ,ATUYuV,ANQhBzV,ACZH,AmB8B4D,AC/C7DhF,QAAQkI,MNWM4T,EDSE5W,CM2BE,CC/ClB,CDkDe2C,CN9BH,CCTS3E,AMXAgF,CT0BC,AENA,AdSAjI,EoBqBFqgB,ELvCMnd,CHeC4V,AZGvB,EMRqB0B,ANQI,EqB7B7B,CfoBmC,Ac2BjB,CRrBI,AQqBV,CRrBsBwC,CGfb,CAAelB,KHed,EADc,IGdf,CAA2B,KAAKhD,MAAhC,CAAb;AGrEc,Af0GT,ADITxK,AUzBYgN,AENA9a,ACTR,ARiBA,ADPYsa,ANQZ,ACZR,AmBiCY,AClDZ,SpBiBSnP,GcNG,ARiBAjG,CQjBCmW,AfkBAxa,CEsBC2L,GaxCN,EACI,EfiBJ,CAAclI,CYHC,AENA9B,EPQE0B,ANXzB,CDYQ,ACZkBH,CCkCC4J,AFtBA,CYHC2K,EXT5B,CKI2B6B,CLJK,EWST,ALEf,CKF2BqJ,CVyBCvY,AY/BpB,APSJ,COTyBxI,KAAKC,CZ+Bf,AUzBJ,CVyBqB,CI9BHsL,ANQjC,EAAuC,EAAExO,EcTZ,ARCU+a,CQDK5X,EZ+BzB,AFtBoB,EEsBS,AY/BnB,ARCV,ANQnB,CcTiD8B,CZ+B9B,AI9B2BuV,CJ8BxC,EAA+CtN,AY/BxB,ARCV,EQDoC,GRCD,KJ8BhD,EAA2DC,WAA3D,CAAV;AgB9GkB,Af2GVwC,ADIRpB,AU5BgC,AEHhBuQ,ACRZjD,ARiBA,ADX2B,ANW9B,ACZD,AmBiCI,UnBjCE5Q,EMYE,CKNA,AGXC0R,GdKGrb,CMYCib,AaqBJ,ClBCKjO,GIjCF,GCWR,CQjBA,AdKiB/M,CCkCC6L,AavCA,ARkBd,EJiBgBV,AiBGpB,GLtCuBoM,CbuC3B,AKrBc,CJiBN,EAAuBhM,CIjBbhC,CQlBd,CZmCI,AF9BI,CAAuB,EMarB,CAAU,ENbZ,CAAZ,uBMac,CAAN;AW1FU,Af4GV4B,ADIR,AUzBK,AERsD,ACNvDmP,ATSK,ANQT7W,ACZAiG,AmBwBA,QlBUIsD,ADlCA/G,CWII,CAPJ,EAYI,CGdC+c,GfiBGtf,CYHC6T,AERoB,AbDjC,CE8Bc/H,AW7BF,EX6BJ,AHlBR,ACZgBxM,CE8BC2N,AYnCb,CbuCczD,AFtBA,CYHV,CAAY0W,AXTpB,GE8BQ,CAAgBhT,CDIC/E,MAAzB,ECJQ,ADIyB,CCJCV,ISrB1B,CTqBA,ASrBgCuX,OAAD,IAAa;AMvFlC,Af6Gb,ADID,AUzBI,AENC,ACRR,ARYgB,ADHZ,ANQD,ACZJhZ,AmBiCH,MF1GE,EjByEKC,CiB/Ec,CAAtB,GJ8EY,AdaC7J,EEsBE,EUzBEiB,EELA,CZ8BT,CUzBI,AZGJ,CYHc,AZGAwC,ECZlB,CAAqB,CMYKG,APAtB,CAAmB,IOAQ6Q,KAAL,CKHlB,ALG6BpQ,CNZrC,CWSmCue,CXTC9Y,EDYhC,EAAoC,COAd,CALT,APKyBlG,CYHCif,AXT3C,CAA6C9Y,EDYL,EAApC,ACZwC,IWSpC,AXT8C;AiBxE1D,AfuGQ,ADIH,AUzBI,AELOnI,ACTZuhB,ATSI,ANQH,ACZGpZ,SiBzECud,ANgFG,CAZJ,ETmCI,ASrBA,CTqBChX,AF9BAtN,IWSIyU,CTqBT,AG1BMkC,CY7Ed,AjByEQ,CiBzEYpZ,AfuGA,CW1BCkE,EI7ErB,ANkFY,CAAYsf,ANLJzK,CY7EKiF,AHoEA,KGpEzB,EAAgC,EJ6EhB,CAAmBV,CFKvB,CAAyB,CNLH1Q,KMKS,CNLHuM,CQAxB,CAA8B,GRA1B,EAA2BP,GAA3B,CAAZ,qCQAQ;AI5EZ,AfuGQ9N,ADIR,AUzBQ,AELC,ACTL,ARUa,ADDbiO,ANQJha,ACZC,KAFD,GCoCIuN,CFtBChJ,EkBrFE,EHoEEpE,CbuCT,AKxBYyd,ELwBA,CUzBCna,AZGb,CGkBcuI,AIzBG,CPOFxH,CoBOJ4kB,CjBWH,EevGW,CfuGC/Z,ASrBZ,AGdJ,CAAiBvO,CTSH+M,ESTd,CZmCI,AYnCiBvL,AfiBzB,EAA2B,CMRH8X,CCMZwD,CQfkBrb,GRUb,ADDb,EAA2BsX,GAA3B,CSTqB,CAAe8M,ETSFtM,MAAMA,MAAM,CAAZ,GAAgB,CAAlD,QSTqB,CAA4CuM,EAAD,IAAQ;AGnExE,AfuGI,ADIJ,AUzBI,AELH,ACTG,ARSS,ADAhB,ANQG,ACZJ,SaPI,EbOGtc,EDYE5J,CkBrFC+M,AXkFQ4H,CLyBP,ADlCAxO,CWSChH,AGdAA,CRSK,CW7EH6nB,CfuGC,ADIX,EFtBA,CAAcvjB,CYHCmD,AGdAA,CZmCX,AF9BR,EDYI,CAAmB,KkBrFKrG,AXkFVoU,CKAN,AGdA,AfiBR,EkBrFU,AX6EG,APQc,CkBrF3B,ANkF4B8H,AGdAA,CfiBC5Y,QAAF,EAAYC,EYH/B,AGdA,CHckCkgB,AGdAmC,OfiBf,EAA3B,aYHI,EAA8D,CGd9D,EAAiE;AGnErE,AfuGC,ADIJ,AUzBW,AELX,ACTW,AT3Bc,AN4CzB,ACZJ,YiBzEW,CAACpZ,CAAL,EACI,IHmEQmZ,CHcCjlB,IAAL,CAAU,CGdC,KAAKwW,GHchB,EAAqBpU,CGdrB,EAAwB,MHcxB;AMhFR,AfsGAgI,ADIJ8B,AUzBS,AELTgW,ACTgB,ARaZ,ADzCsB,AN6C1Bpf,ACZJ,SAAS2F,GiBxEG6U,AhB0GAlT,AK1BAsJ,EJsBEnF,GHlBGxL,CEsBCkC,ECJV,AItBY,EWhFE,AhB0GV,ADlCZ,CE8BuBmF,ADIA,ADlCAnI,EaIE,CCTCsX,ARalB,APIJ,CCZJ,CMQ4B,APIAvW,CGkBCqH,AF9BAjF,CiBxEjB,EfsGJ,CYnCyBzE,CGnECzC,ChB0GtB,AFtBR,EEsBiC,AFtBA,CejBC0C,CdKtC,EiBxEyColB,AjBwEA,GCkC7B,EAAkC,CAAlC,AavCqB,CbuC7B,AavC4CxM,GGnEd,CAAkBla,GAAlB,CAA1B,EAAkD,CHmEzB,CAA2B,IAA3B,CAAb;AGlERwM,AfsGJ1B,ADIJ8B,AUzBK,AELD,ACTY,ARaR,AD1CkB,AN8CtB,ACZJ,QAAI9G,CWII,CV8BF7C,AU5CF,EAmBI,CVyBR,AY9BS/D,AdQAO,CkBpFCiE,AfsGAqH,EDIEgC,CCJR,ASrBSmK,ALDA+D,CNRb,EE8BgB7M,AF9BA,CiBxER,AlBoFJ,CAAclL,CYHV,CMjFYyjB,ANiFA1D,AELhB,ACTgB,ARaZ,COJapjB,ACTAoa,ARaApW,CPIjB,CAAmB,CGkBCuM,AW1BpB,CI5EqBwW,AhB0GA,AY9BA,ACTT,CbuCUxa,CatCN,CGpEA,CNiFZ,AELqBmY,CI5ErB,AfsGsB/Y,AItBtB,CAAuB1H,CKCC4f,GVyBP,AY9BUlD,CX0B/B,CDIiC,CAAZ,AFtBrB,CEsBJ,AK1BQ,CPIgC,CYHhC,CAAkC,KELjB,CFKuB,AELA,KAAKb,QAA5B,EAAsC,KAAK3I,QAA3C,EAAqD;AI3EzE,AfsGDpK,ADIJA,AUzBQ,AELAoY,ACRQ,ARYX,AD3CqB,AN+ClBrhB,ACZJhB,SiB1EA,AXgFA,GL4BImI,GgBzGC,AXgFA,ANTE1B,CE8BC0B,ASrBA,CAAClM,CVyBC+G,EFtBElC,EGkBEkC,ADIV,CAAW,CUzBCU,AELCR,EX0BT,AYlCUggB,AdIAljB,CE8BC,CW1BH,CdOoB,CCX7B,CAAP,CaI0B,EFKjB,CVyBL,AatCuBtB,EbsCE,AUzBA6a,GTqBrB,AYlCwB5a,EZkCE,EDI9B,EAAkC,CAAlC,CCJI,ADIZ,CatC+B,CZkCe,ASrBjC,AGbiC4Y,CZkClC,ASrBmCiJ,CTqB3C,SSrBI,AGbuB,CAA2BwC,CHaC,CGb5B,CAAf;AGlERnZ,AfqGJI,ADIJA,AUzBY,AELA,ACRI,ARaRhO,AD7CkB,ANgDlBgF,ACZP,UCkCKX,GAAN,CgBzGU4jB,AfqGAtZ,CHlBC7J,CEsBC,CAAC0I,EKzBEhL,EWhFP,AfqGJ,ASrBaV,AELAmF,CI3ECrD,EfqGEsI,AYlCAmP,CHaR,AELA,CZ8BA,AUzBU,EVyBE7N,AY9BAvG,CI3EhB,CfqGkB7F,EW1Bd,APKJ,CJqBY,AYlCS6lB,ARaA,CJqBC5X,AiBJlC,IRjBgB,ALAsB2O,CJqBd,AYlCJ,CZkCoB9R,ADIA,AUzBA,CVyBxB,AarCQ,CbqCpB,GUzByCoM,AQiBZ7N,CjBIa0B,EiBJ9C,CjBIwB,CiBJcjH,CjBIagH,ASrBX,ALAP,CKAmByX,ALAAze,KJqBKmL,CiBJzD,CRjBwC,CLAP,AaiBevB,CRjBhC,CLA8CmP,CJqBtC,CAAhB,EIrByB,CaiBjC,EAAyD4B,QAAzD,EAAmE;AFhGvD,AfqGJ7R,ADIJA,AUzBS,AELG,ACPIqN,ARWa,AD7CH,AN8Cc,ACTxC,AmByB+D,QnBzB3Drb,CDSA,GEyBIkM,ECJE0F,CF9BCnK,GCkCGV,CgBzGC8gB,CfqGX,CW1Ba7L,CZ8BT,CCJWrZ,ADIA,EarCEwZ,AdGjB,EE8BA,CF9BoBzU,ICkChB,CgBzGqBtG,ChByGC,AY9BlB,EI3EG,AEiGSqB,CFjGhB,AHoEQ,CbqCR,AarC0B,EbqCE,ADlChC,CCkCI,ADlC6B2I,AmB0BRtC,ClBQ7B,AarCgB,GRW+C,GakBvC,CAAaihB,OblBiChmB,IAAP,EAAgB,CNR/E,AmB0BwB,CAA4BmB,CnB1BS,WmB0BG,EAAxC,CADuC;AF/F1D,AfqGDgH,ADIJ8B,AUzBK,AELI,ACPI,ARWD,AD9Cc,ANkDzB,ACZGjK,AmBwB2D,AGxHnE,SXqGY,CV6BFM,AUhDF,EAuBI,CVyBR,AYlC8E,CX8BpE8H,CF9BChB,CCkCC,CCJR,ADISqC,AUzBA8K,GTqBGpM,GSrBR,CAAYmY,ETqBEhU,ADIV,AK1BM6N,EL0BM1Q,ICJR,AF9BYzJ,CWSpB,ETqBuByN,CSrBCuT,AXTrB,CMQkBtJ,ANRzB,GCkCgC,CCJC7O,ADIzB,CAAZ,AK1BkCiO,KJsB9B,ASrBI,CAAoC,ALDf,CAAYkD,IAAZ,CKCqB,CLDHha,IAAlB,EAAwB,OAAKC,WAA7B,EAA0CvB,KAAK4G,MAAL,CAAYjH,GAAZ,CAAgB,sCAAhB,CAA1C,GAAmG,MAAM,OAAKia,OAAL,CAAa7V,YAAb,EAAzG,EAAjB;AW9ERxG,AfqGAkM,ADIJ,AUzBQ,AELAsS,ACPC,ARWG7e,AD/Cc,ANmD1BsF,ACZC,AsBhGL,SrBkIS2I,IAAI,CCJCyC,ADIV,AFtBUnL,CkBnFC1C,ChByGCoL,AUzBA,CAAC5N,GTqBT,ADIY8N,EFtBhB,CGkBmBxB,AItBJ1G,CKCK6B,AZGA,CcRE0E,CX0BlB,EerGA,AhByGoBS,AY9BH,CI3EIuQ,GJ2EK,EZ8B9B,AUzBa,EVyBmBvP,AK1BpB,CKCqB0P,ALDJpY,EL0B7B,EAAqC,EgBzGE9D,EX+E3B,CW/Ea,CAArB,AX+EmC8c,GKC1B,CAAkCqG,ILDnC,MKCJ,EAAmD;AM/E1D,AfqGG,ADIAvW,AUzBQ,AELA,ACPP,ARWO,ADhDc,ANoDtB,ACZJ,AmBsB+D,AGtHnE,KLaI,IHoEyB,CAArB,CdeGjK,CcHC,CfeClD,CoBWFmpB,CjBOI,AF9BX,CCkCY9d,CarCCoM,EZiCT,ESrBaxW,AELA0c,AdQb,CEsBczX,AFtBA5B,CefV,CAAYkf,CHYR,CVyBA,AUzBU,CVyBC,AK1BJ5hB,Aac4C,KNlBnD,APIYC,APIpB,CcRyByJ,ACPrB,AfeqB,EAAzB,CEsBQ,AY9BA,ACPoBmY,CfeC,CEsBC,AUzBtB,AZGsBlf,EYHE,CLDjB,CL0BP,AK1BsBzC,CPID,CEsBO,CAA5B,AUzB6B2V,AZGAjT,CEsBrC,AK1Be,CAAoBH,EPIN,EYHG,CAAYye,CGZxC,CAA0C,AfeA,COJ/B,CAAP,GKCwB,CGZoB,CHY5C;AM/Ef,AfqGI,ADIG3V,AUzBK,AELA,ACPD,ARWC,ADjDiB,ANqDlB,ACZX,AsBhGD,KpByEI,QWoB8E,CZqCpE3J,EarCErE,AfeAoF,CEsBR,AK9ByB,GL8Bb,CAACoI,AFtBT,EefW/F,AfeA,OEsBH,EAAY+F,CarChB,GAAoB8P,QbqCQ,CAAxB,CAAZ,GarCQ,CAAkCiH,UAAtC,EAAkD;AGnE9D,AfqGC,ADIO,AUzBC,AELG8B,ACPI,ATvCc,ANsDd5jB,ACZhB,AmBsBI,AEnHJ,ACHA,IDGA,KJsBSsa,AN4EG,AXLHhV,CWlBD,CU3ER,CpB+HYkG,AUzBAxL,EQaFwnB,GRbOjF,EMhFjB,AhByGmBpX,AoB/HnB,CJsBoBwZ,AhByGR,CAAJ,AarCapL,AfeA1W,CYHT,AQaM4kB,ClBYK,AUzBAjF,AXTvB,CiBvEA,AJ2EwB,AbJA7f,CaIC,AQjGzB,CJsB0B,AItB1B,CRiG2B0V,EbJ3B,CWSY,CAAmB,AXTA/W,CaIN,EAASU,ACPlB,AfeA,CAAmBc,ACZnC,CWSoC+S,AQaJqQ,CnBtBKzhB,CaIZ,EAAD,EFKZ,CZGI,CYH4Bge,AZGA,AoBU1B,CNlB2B,AMkBJza,EnBtBzC,CmBsBkB,CnBtB+B,AmBsB7C,eRbQ,CAAqD,CZGjD,EAAoD,GYHG;AM/EnEod,AfqGJ,ADIY7Z,AUzBA,AELI,ACPH,ARKoB,AD7CH,ANuDVxI,ACZhB,AmBsBA,AEnHJ,ACHA,IDGA,IrB6FQJ,CE8BCyM,EmB3HT,ErB6FI,CmBsBMrO,CnBtBK,CWSC,CAACgf,CVyBC9T,CoB/HlB,CJsBoBtG,CJ2EC0S,CI3EC2N,AE6FJ0B,CjBQlB,ADIY,CCJYpZ,CiBRd,ClBYgB,AY9BV,AMkBMgI,ClBYK,AoB/H3B,CpB+H4B,AoB/H5B,CRiG6B+B,CX0B7B,CerGoB,CAAY+M,AfqGA,AiBRJve,CpBVKlE,CcRjB,CZ8BW,CkBZL,ClBYe,AkBZJ6kB,CRbKhI,CZGCxc,GoBUjB,EAAkBpB,CF7FpB,EAA2B,AlBmFd,AoBUX,EpBX8C,IEuBf4J,CUzBpC,CAAsC,EMhFE2Z,GhByGGha,CAAP,CgBzGN,AhByGpB,CAAD,AUzBT,CMhF+C,AhByGpD,AUzBA,EACI;AMhFR,AfqGJ,ADIK,AY9BO,ACPJ,ARIqB,AD7CH,ANwDVlI,ACZZ,AmBqBc,AElHtB,ACHA,IDGA,KAAA,EnB2HW,CerGC,CAACkiB,EjBuEExd,CcHCpK,CO1FhB,CJsBQ,EACI,AfoGQ8R,CW1BCrN,AQjGrB,CAAA,CP0FuBgD,EDOP,EI1EGmgB,AjBsEQxiB,CaICX,EX0BjB,CAAoByH,CepGnB,AJ0EI,AbJD,CcHC,AfeiB,CCZCnI,EE8BvB,AYjCyBoe,CfagC,CGoB9B3U,AF9BvB,EAAyBtG,EmBqBI,ILxB5B,CZiCL,AYjCoCsd,EZiCE/W,CF9BlC,CAAP,EmBqBoD2c,GjBSjD,AiBTiC,EjBSc1c,AiBTO,MjBStD,EAAuD,AYjCtD,EAAwD;AGlE5Dka,AfoGA,ADIA5Z,AU5B+D,AEFvD,ACPAhO,ARGiB,AD7CH,ANyDV2F,ACZf,AmBqBG,AElHR,ACHA,IDGA,CrB2FI,MAGK,CE6BGoM,CmB3HZ,CJuBcwW,CfoGN,CDIQrc,GgBxGR,CE2FI9K,CNjBShB,AQjGrB,CJuBsBgI,AhBwGArB,CarCCvE,CGnECkmB,EhBwGR,AkBbE0B,ClBaS,AFtBAhlB,CcRX,CAAatD,AQjG7B,CFkHsBuoB,AElHtB,CJuBsB,CAAUzC,CJ0EhB,AdQiBjiB,CcRC,CZ8BlB,CarCA,CbqCqB,AarCA,CGnEC4iB,ChBwGtB,CUzBkB,CVyBO,CAAzB,AarC0B7B,AKwBxB,CF3FI,AhBwGd,AkBb2B,EF3FUU,AN+EN9O,GQYrB,CF3FI,AE2Fd,CF3FA,CN+E0B,CAAY6M,AEL9B,OCPqB,EAArB,SHYkB,EAHqC;AM3E/DyC,AfoGA,ADIA5Z,AU7B+D,AED1D,ACPA,AREoB,APSmC,ACP5D,AmBoBA,AI7HR,AFWA,ACHA,ICRA,AFWA,QnB2HYH,AqBtIZ,CVgGkF,AQrFlF,CJuBc0a,AhBwGA5Z,CDjCCpE,CuBzGf,CjBuGY,APSI,EkB9ER,CfoGA,AiBTInJ,ClBaJ,AoB/HR,CJuBsBgH,CE2Fd,CF3FgBsB,AhBwGAoE,CkBbP,InBpBY/J,CiBvEP,CAAS6jB,ChBwGCha,CAAR,ADjCT,CqB9Ff,CpB+HmCa,ADjCAvH,AqB9FnC,EJuBqCqhB,EhBwGb,EAAhB,CgBxGc,EAAsBvoB,CjBuE7B,CAAP,KiBvE2C8nB,UAA7B,CAAd;AACA,AfoGA,ADIA9Z,AY9BIsY,ACPH,ARMA,ADdL,ANuBY,ACXX,AmBoBO,AEjHZ,ACJA,IDIM,KPkFM,CAZJ,CTWGpM,CY3DC9R,AfoGA4F,AYjCA,AOzFK,EJsBHtC,AhBwGArH,GCJN,ADIA,AarCSiU,CTRb,CgBjFoB,CpB8HJ,CgBxGR,AhBwGS9K,CgBxGCoa,CHmEV,CAAYlD,AKwBR1kB,EEjHC,CRgGWumB,AQhGI,CJsBJgC,EhBwGR,CkBbG9gB,ClBaS+F,CgBxGpB,CAAJ,AItBS,CACf,CJqBkC,EJ0ET,CCPf,CAA4B,CKwBxB,CNjB4B,EZ8BA,AkBbRgG,AEjHnB,CpB8HG,CAAZ,AarCsC,EOvF7C,IF+Ge,KAAiC,QAArC,EAA+C,YEjH3D;AJuBYoU,AfoGJ,ADIA5Z,AU/B+D,AECvD,ACPJ,ARMP,ADdJ,ANuBY,ACXZ,AmBoBe5M,AI/HhB,AFgBA,ACNA,ICVA,AFgBM,QnBwHM6E,EDIE2I,GarCGxO,ASvGjB,CNoCkBkoB,AN4EClD,GTwBX,AW1Ba3B,CZ8Bb,AoB5HiC,CV6F8B,CGN3D,CGnEA,AhBwGa,AarCA3hB,ASvGzB,EtB4IQ,CgBxGoB,AJ0EZ,CCPJ,CAAkB,AKwBRwoB,CNjBS7nB,CQ9F/B,CJoBY,EMpCZ,CV8GoCoc,AU9GpC,IJ+HgCzd,GAAV,CNjBS,AMiBf,CNjB6BykB,GCPjC,gBDOmB,CAAkCU,WAAlC,CAAf;AIzEJqB,AfoGJ,ADIA5Z,AUhC+D,AEEvD,ACPP,ARML6O,ADdJtd,ANuBYI,AoBSC,AI/Hb,AFiBA,ACPA,ICVA,IlB+FQsa,CSMI,CAnBJ,EZsDI/T,AYjCA,GfeGN,CEsBCsG,CarCCoM,CGnEC2P,AN2EQ5C,ETyBlB,AGzCR,CQeqBjlB,APDA+d,CL+BCpX,AUhCiD,CGL3D,ATRWkT,AkB/FvB,CTuGwB2K,CGnEZ,AXyER,CWzEsBhhB,AhBwGV,CAAW,AK/BAwa,COCX,AdQJ,CcRiBtc,AdQAoD,EOTzB,AiB7GJ,ENoCY,AJ0EI,APDiB,COCC,APA7B,CDfL,CSQY,CbqCI,AarCqB,AfezB,EEsB2B,AFtBAG,IEsBvB,AarC2B,Afe/B,EEsBiC,CAAC,CAA9B,CAAR,CsB5IR,CAAA,EV8GgB;AIzEP,AfoGD,ADIH,AY9BQ,ACPD,ARORgZ,ADfJ,ANuBS,ACWT9e,AmBFY,AI/HZ,AFiBA,ACPA,ICVA,IvBiIQ4I,CKlCCsS,ANaD,GG4BIzI,CW1CsE,EPgBnEsM,CQPCte,Id0BhB,EKlCA,CHyCQ,AYjCeyH,ATRAiT,ALkCAvS,AuBjIvB,CJ+HgB/G,EbjBZ,EAAwB,AaiBRmpB,GI/HpB,ClB+FA,CSQgB,AKwBA,CdhCkB,AcgCR,CnBE1B,Cc1BoCjN,aAApB,ASvGhB,CTuGkDuH,ASvGlD,MJ+HgB,CAAJ,EAAuC,aLxBvC,EAA8D;AGlElE,AfoGA,ADIJ7W,AU9BQ,AEAArK,ACPI8X,AROR,ADfJ,ANuBC,ACWL,AmBFgB,AI/HhB,AFiBA,ACPA,ICVA,KvBiIS7T,EKlCG,AkB/FZ,CrBwIYwJ,ADIAlF,EK9BEzH,CW1ECmjB,GhBwGG7gB,AU9BAd,EM1EV,CJ0Ea,ACPAtC,AROA,ANmBrB,CEOQ,ADII,ADXU0H,CCWC,CsB5IvB,EjB8G0BmR,COAC,AbmB3B,Cc1BgB,CAAa,Ad0BA,CWnBC,EY9G9B,CtB4IY,AarCI,AROK,EL8Bc,AU9BAlE,ALA3B,IL8BI,CsB5IZ,CtB4IyC,AU9BX,AY9G9B,CtB4I0C,AU9BAgN,AY9G1C,CtB4IY,CAAR,mBU9B0B,CAAkCF,KAAlC,CAAlB;AMzEP,AfoGG,ADIJpX,AU9BQ,AEAIyN,ACPH,AROL,APQJ5V,ACWA,AmBFS,AI/Hb,AFiBA,ACPA,ICVA,CN0BoB,CAAhB,GlB4FKC,CCWC/D,EEOEkQ,ADIA/F,AK9BAzH,CPQR,EAAW,ECWE2D,CCWCrB,AU9BAb,CXmBCoF,CuBjInB,CV8GqB3H,APAAO,CL8BT,CAAW,EDXN,CAASmH,EEOE,AW1BZ,AU9GhB,CZ8G6B,AEAA,CPArB,CNmBS,CMlBL,CJyBJ,AW1BQ,AbmBiB,CWnBCiN,EV8BtB,EAA0B,EU9BT,CAAYgN,EXmBE/Z,ECW/B,CDXqB,CCWc,CAAC,ADXAC,AuBjIhD,CtB4IY,AsB5IZ,CtB4II,CDX6B,EAAoBC,GAApB,EAAyB,IWnB7B,CAAkC4Z,IAAlC,CAAjB;AMzEX,AfoGO,ADIJrX,AU9BQ,AEAC,ACPJ,ARQDhO,APOA,ACWA,AmBFI,AI9HZ,AFgBA,ACPA,SRyFY,ASlGZ,CT6EQ,EZ0DIkS,ADIAhG,AarCA,Ad0BAV,CatCsE,Ad2BrE3K,EOPE2B,EKDEV,AGPAwW,CbqCCvR,CDXC,CAACqB,CWnBR,AZQJ,AwBrHR,CtB2IY,AU9BU,AZQA9D,ACWAoH,CCWC,AarCX,CAAY2Y,AKwBRmG,AI9HhB,ExBqHQ,CAAmB,COPnB,CAAqB/nB,ANkBT,CAAU+I,EmBFNif,CLxBZ,AfeJ,ACWY,CWnBR,ALCsB/nB,ANkB1B,CEO2B,ADIvB,AFtBuB,CYRC,AGPAoiB,Ad0BA,CCWC,AU9BA7e,AZQAH,GGkB7B,CHlB2B,EOPN,APOrB,CEsBI,AK7BgCnD,CQRhC,AKwBI,ClBa8B,AU9BV,AGPU,CbqClC,CAAR,AU9B4CuD,ALCnB,CAAoBzB,AagBRrD,GLxBW,CRQvB,AagBgBmB,EbhBU,CKDnB,CAAxB,MQiB6B,CAAeioB,QAAQC,aAAvB,CAA7B,EAAoE;AF1FhFlrB,AfoGQ,ADIJyO,AU9BK,AEAGhI,ACPA,ARQAsY,APOP,ACWO,AmBFI,AI9Hd,AFgBF,ACPA,QL0BQvB,AMnCF,CZsGM,CVqCF1Y,AUhEF,ET4DI8H,AS1BA1J,CV8BR,AsB3IF,GtB2Ic2L,AarCA,CHOC6Q,AGPAjf,CGnEjB,AfoGkBkM,AFPAP,GiB7FGoR,EX0EkC,CJ0B/B3Q,AW1BA,ACPA3E,CHOZ,AEAa,AbmBAW,CWnBCnH,AEAAgF,CbmBC2F,ECWE,AU9BjB,CT0BM,ADIY4B,AU9BA/K,CM1E9B,AfoG+B+K,GYjCd,Ad0BQ,CWnBUwX,AEAV,AbmBU,CAACxZ,CanBCtF,ACPAoX,Ed0BF,CEOjB,AS1BY,AXmBL,CWnBgB2H,AXmB7B,CCW8B,CAAb,CCJe/Y,CDIC,AY9BpB,CZ8BI,AY9BL,CZ8BpB,CU9B0B,CAAmB,CT0BCoC,AYjCjC,CDOkC,ACPAiW,GHOGjM,ET0BV,CAAa9K,GS1B3B,CAAlB,AGPA,EHOmD,AGPA,GZiCnB,CAApC;AACA,ADIJ,AU9BQ,AEAI,ACPA,ARQJ+Q,APOFxY,ACWEqC,AmBFC,AI9HX,AFgBF,ACPA,QCTQ,CtB2ICyF,GCJGvB,AqBvIA,ExBqHR,ACWU3B,EuBhIE,CxBqHO,CGkBLuB,EDIEsB,CY9BC6O,ACPAL,Ad0BT,CAAUrQ,CuBhIV,CrBuIYY,AqBvIG,EvBgIf,EanBI,APCY,ANkBA,CanBCvG,CX0BX,CAAawH,CDIC,CAA5B,CarCY,AStGY,CtB2IOK,GDXG7I,CanBtB,AbmBY,CEOV,AW1BsBiB,CX0BhC,AFPiC,AuBhId,EAAQ,GtB2IWwH,GY9B9B,CFAkC,CEACvH,EZ8B/C,EAAmD2H,CU9BC,GEAxC,MZ8BZ,EAA+D;AgBvEnEtO,AfoEQ,ADIA,AU9BQ,AEAH,ACPA,ARK0C,APShC,ACYP,AmBFJ,AI/H4B,AFiBxC,ACPA,QL0DQ6d,CXwCqB,Ae3F7B,Cf2FQ,CDbGzC,CJ6CCzO,ECJEmF,CqBxI2B,ClB+FzBuJ,EY3BhB,AhBwEkBvM,EDXE,CiB7DC+O,AN0CAtb,AXmBAsG,CqBhHrB,CrBgHuBsD,AuBjI0B,AFkB/C,CpB0HU,AkBbItK,ClBaSyM,AU9BT,ANfL,CMee,ANfA6M,EHyCE3J,AiBTRxO,EnBEC,AuBjImB,CNoExC,AjB6D+ByC,CAAV,CCWT,ADXI,AqBhHhB,EnBuHmCsM,AGzCxB,ALkCwB,AqB9GjC,EpByHmCpF,AI7CAhI,CcgCrB,CjBSY,AS1BZ,AQiBewmB,CjBSS,CS1BC,EV8BEre,AoB3H3C,EAE2B,CV2FmBiM,ANfnC,EAAqC,CAArC,CHyCuC1K,AGzCC,CHyCX,AiBTxB,ClBaR,AU9BiC,AQiB7B,CjBSyC,AS1BA6W,CV8BC,AkBbR,sBRjBL,GAAsCb,GAA/D;AMzChB,AfoEY,ADIA,AU9BC,AEvBqE,ACgBzE,ARQJ,ANkBerY,AmBFJ,AIhIyC,ADWzD,KCXY,CAAV,GVwF2B,ACYjB,CDZJ,ACbA,EA6BI,KAAK+M,CZiCC3V,KYjCN,CAAY0hB,Ad0BAtd,CEOC6G,EAAE,CAAF,AFPL,CEOR,AFPkB,Ic1BlB,Cd0BsBnC,Ec1BEsZ,Cd0BE,IAAG/f,CAAE,EAAvB,Gc1BR,CAAoC,MAAM;AZkC1C,ADIH,AUlCsD,AEI1D,ACPO,ARQRwZ,APImB,ACcN,AmBFJ,AI9HX,ADSF,MCTI,GZyGQ,CAlCJ,GYvEN,GTsGc,ARQA1Y,AiB9GF,CTsGG9F,CZiCCuR,EIzBd,CiB9GF,CjB8GoB,EQRE9J,MZiCMyE,IYjCb,EZiCmB9K,CYjCCkc,EZiCP,CAAUjO,KAAV,CAAgBlD,GAAhB,CYjCb,CZiCkCA,AYjCAoY,MZiCM5hB,IYjC7C,CZiCkDiK,CYjCC,KZiCjC,CAAlB;AACA,ADIJe,AU9BH,AEjHqF,AC0G1E,ARQR,APIA,ACcK,AmBFD,AI9HV,ADSF,WCTS,CAAP,CjB8GW0O,ANcD,MEWO9K,ADIAtF,AFzBJ,COJP,CQRa+P,ARQAnW,GagBLzE,CbhBR,CAAkB0E,APIN3B,CEyBO+H,CkBbP3J,EbhBZ,EL6BW,CCJcI,CDICkL,AarClB,EfYD,CGqBH,AHrBmB,CoBYf,CAAe8c,GlBaZ,EAAyBlc,IAAzB,EAAX,AFzBO,AoBYC,CAAJ,CpBZkC,CoBYD,CpBZ9B,CAAP;AGsBC,ADID,AU9BJ3M,AEAJvC,ACPa,ARQR,APEkB,ACgBd,AmBFO,AI9Hf,ADSD,IAAA,IToGQqmB,CXsBoB,AStBnBxG,CTsBD,EDQIzR,AqBlIZ,EXoGI,EAAY0T,GAAZ,CWpGJ,CrBkIqBrW,AU9BA,OV8BT,CAAiB,CqBlI7B,CAAA,CrBkIY,MAA0B,CAAC,AY9BvC,CZ8BQ,EAAkC,AY9BA4a,+BAA1C,sCRxBI;AHmDI,ADII,AU9BJ9lB,AEAR,ACPS,ARQL2e,ADhBH,ANmBI,ACeG,AmBFK,AI7Hb,AFcE,ACNF,IAAA,GCRO,EV4GEsH,ACXG,CA7BJ,EZkEI,AYjCAtjB,CZiCC4O,EW1Bb,AbmBe9F,AuB/Hf,ETqGiByZ,CDOC,AbmBV,AuB/HU,CZ4GC9D,AEClB,CPAmB,AgBrGpB,ER6FY,CAAW+D,CZiCf,CS1BA,CT0BkB,AS1BAxD,CU9FxB,CAAA,ACNF,CDME,CPuFU,AOvFV,CPuF6B,EHOvB,CAA0B3f,EGPEwW,EHO5B,CAA+B,AU9FrC,EAAM,CPuFI,EAAgC4M,EQ7F5C,CAAA,ODME,CAAA,SPuFU,CAAqD,MAAM,IHO/D,EAAqE;AT2BjE,ADIH,AU9BG9M,AECZ,ACRY,ARQJ,ADhBR,ANmBIpS,ACeC,AmBFO,AI7HV,ADSF,IAAA,CtB4GiB,EAUV,EKlCE6U,ALwBQ,CAAb,AuBrHI,IjB6GMpW,CDhBd,ANmBewB,CeXC,ATRA6U,CSQC,EZiCE,CoB7HnB,ChBoGqB,ADhBrB,CMesB,AGPAmH,CTRCle,CHyCX,AHtBR,AoBaY3C,AI9HE,EjB8GQob,APGAtW,CYJCoS,ANf3B,CcgCoB,CdhCStU,AcgCb,IRjBM,ALCD,AgBpGrB,CXmGkChC,AZI9B,COHI,AagBmB,CRlBkD,AZKzC,EeXnB,AKwBL,CLxB2B,CTRvC,AcgCgC,EdhCU+Y,GiBpF1C,ER4FiB,CAAL,EACI,MTThB,EAA0DL,SAA1D,EAAqE;AH0C5D,ADID5M,AU9BIiT,ALCJ,ADhBJ,ANmBI,ACeJ,AmBFY,AI7Hd,AFYA,ACFA,UjBmFQ/F,ALkCAzP,EMlBE,CAAC9G,APGA5D,AuBtGX,GtBqHc,AuB/HF,CjB6GN,CL6BU2L,ADXd,CMlBe,EPGX,CYJc,AZIAlI,CsBpGpB,ChBiFsByW,ENmBhB,AuBtGN,CXkGyBgG,AZIA,AsBpGzB,ACFoB,CHmHF,CAAC/gB,CI/HH,ADYhB,CrBgI6B2N,CqBhIO,GXgGuC,CQmBjDma,IlBaY7c,AF1BhC,CMnBiC,CNmBC,EAAEhF,EoBavB,ClBaU,AkBbQ7E,ClBaS,EkBb3B,CAAL,EpBb0B,AoBaG,EpBbU8E,GE0BxB,EAA6B,EAA7B,CAAb,AF1BwB,EE0BuBwG,AI7CzC,ANmBhB,GMnB4D,EAAhE,KJ6Cc,EAA2DC,WAA3D,CAAV;ACHA,ADIAqB,AU9BIoR,AGV2D,ARW3D3c,ADhBR,ANmBC,ACEwB,AmBWT,AI7HlB,AFYA,ACHoB,QjBoFdwY,KiBpFc,CpB6HRtY,CFPQ,CCWNuJ,ADXO,AsBtHD,CXgGuD,ALI5D5G,ENkBSvD,AuB/HT,ADSK,EpB6HDsP,CDICtK,AqBjIA,CtBsHA,AuB/HD,EvB+HW,CCWhB,AI7CZ,AkB7Fa,CtB0IU,AoB9HzB,CrBmHiC/G,AuBlIjB,AFehB,CAAA,CfiGU,AejGV,CfiG6B0e,CagBP,CjBSS,CAAZ,CAAb,AFPkCjX,CCW1B,EAAsB,CoB9HpC,CPyFgC,CRQtB,AejGJ,CpB8HQ,AK7B0B,EL6BE,CAA5B,AarCuB6Q,Ad0BJ,CCW3B,EDX+C5Q,Gc1BrB,CAAYyd,EOzFzB,MrBmHc,CAAiCtZ,GqBnH5D,EAAyB,IPyFC,EAHqC,EOtF/D,CAAN,CrBmHoB,AqBnHpB,CrBsG2B,oBMLjB;AJ0BJ,ADIA,AU9BIwV,AGX2D,ARY3D,ADhBR,ANmBAzf,ACcA,AmBDoB,AI7HtB,ADSE,QjBoFIoC,IHyCIwN,CDIC5D,AF1BA,IE0BI,CAAT,AsB1IQ,ClB6FZ,CHyCgByD,ADIAzD,CI7CC,CkB7FD,EtB0IIG,KsB1IR,GrBsIgB,CAAZ,CAAZ,CDIA,CkBboBic,ClBaSpc,GAA7B,EAAkC,GDZ4C,SmBDxC,IAAtB,EAA4B;AjBU5C,ADIII,AUnCiE,ALMpE,ADhBDiN,ANmBA,ACaC,AmBAmB7Z,AIlIV,AFehB,ACDC,CCdH,QZ4GQ,GT+BIoQ,CHtBC/Q,CCaE+K,IESG,CAAN,CDIQU,EF1BZ,CsBtGN,EnB4HuB,CDICnF,AF1BA,CsBtGxB,CrBmHO,CESD,AGzCqB0T,ANmBrB,CE0BY,CCJW,ADIA,SAAX,EAAsB,AkBbRhW,CdhCSiW,GJ6CvB,CkBbmBhS,ClBaS,CAA5B,CAAR,CkBbsB,CdhCL,AcgCeshB,CdhCpC,YcgC0B,EAAyB5oB,IAAIkM,SAAJ,CAAc,CAAd,CAAzB,CAAN;AjBUhB4E,ADIA,AU9BP,AGbkE,ARc/DzP,ADhBH,ANmBG,ACaA,AmBAiB,AI5HzB,ADSe,KjBiFX,MAGK,AkB7FT,EjB4GaE,APGA9B,CCaCiL,ECaEmC,CK7BR,CQXWmX,ARWD,AgBnGH,GvBsGP,CAAchiB,AwB/GtB,CtByIuBwK,Aa3CgD,Ad8BhDpC,AuB5HX,CtByII,CAAJ,AsBzIZ,CAAuB,CtByII,ADbAP,AsBnHZ,CAAA,ICTf,ExB+GQ,ACae,AuB5HQ,ADShB,CpB4HoB,AHtBA,ACaA,EsBnHjC,EpB4HU,CHtB4BxK,IwB/GR,GDU5B,CCV2B,CxB+GvB,CwB/G8B,EAAP,CDS7B,CCT4D,CDW1D,EtBiHmB,EAAoC,OAApC,AsBnHrB,CtBmHM,CsBhHJ,UAHF,EAG6B;ApB0HnB+Q,ADIIxD,AUzJS,AG6G8C,ARe3D2Q,ADfJ1D,ANkBH,ACaG,AmBAa,QI7HmB,IvB6H5BnP,Mc5BcuZ,Cd4BPtZ,AuB7HqB,CrBsIpByF,EDIE9C,Aa5CiD,AS9F/B,GjB6Gf,ANgBb,CEScW,AIzBC,ANgBD,CCaV,ADbJ,EK/BiB,AL+BA,AmBJT,ClBiBU,ADblB,AmBCQ,CjBQA,ADIW,AI5CvB,CHwCwB,ADIA,CCJZ,CAAR,EFTwB,CmBCT3N,CAAP,ClBYW,ADbvB,CmBCsB,ClBYW,ADbA,AmBEpB,gBlBWoCuM,CK7BCxJ,IAAK,EL6BCmJ,AK7BvC,CL6BgC,AK9BvC,CL8Ba,CAAD,CAAd;ACHP,ADII,AU9Bb6U,ALCY7D,ADfP,ANkBD/c,ACaQ0J,AmBEK,QIhIiC,MxBiHpC,ECaExE,GWjBGmd,CXiBP,CAASpY,AuB9H6B,EjB8G3B,CiB9G2B,GvB8HtC,CWjBZ,GAA+B,IAAI+U,OAAJ,EAA/B;AT2BQ,ADII7S,AU9BZzO,AGZY,ARUM,ADZd,ANkBI,ACaC,AmBEI,AIhIX,QZ6GMkjB,CLFA,EDZI,AkB/FH,CrBuIGtW,CHtBC1L,IehBI4b,CZsCC1Z,CqBvIhB,CtB2IkBuJ,AsB3IF,CJsHN,CpBLJ,CGsBeU,CYtCX,ASjGV,CTiGuB5G,ASjGF,CtB2IGe,AU9B1B,AZI0B,CoBgBT,EjBML,AS1BiB0b,AZIrB,CE0BY,CAAW,AkBVVvd,CjBMWoH,AqBvI9B,CAA6B,ETiGnB,CAAwB,EZsCE,CAA9B,ADIY,AkBVH,EjBMwB,ADIA,Aa1CAgM,AKgCV,AIjI7B,EtB2IkB,EAAyB,CAAzB,CAAR,AU9BZ,AGZoC,CAAYgN,qBAAZ,CAAkCF,KAAlC,CAAxB,EAAkE,KAAK9M,MAAL,CAAYgN,qBAAZ,CAAkCD,IAAlC,CAAlE;AZuCA,ADIArX,AU9BZ,AGZS,ARaDyN,APGA,ACaH,AmBGWra,AIjId,AFOD,ACKS,SRgFE,CAjCJ,CS3DC,CTiGGqB,CRaCkB,APGA9C,IehBIoe,Cb0CCtQ,CCJC,AqBvIjB,CjB8GM,AiB9GU,CjB8GG,APGb,CAAcvL,EGsBV,CDIA,Aa1CA,ARaJ,CQbkBnC,Eb0CE6M,Ca1ChB,CAAkBrL,AKgCRgC,AIjIpB,CAA2B,EDavB,CvBoGE,CehB2BugB,AfgBA,AoBgBRvhB,ClBUSmK,CAAR,CsB3I1B,ADaS,CCb0B,CTiGP,AfgBUnN,CE0BCqN,Aa1CAmX,CKgCnB,CAAaxgB,KLhCL,AKgCU0E,ClBUSyE,Aa1CA,AfgBzC,AwBjHN,CtB2IuC,EAAWa,Ea1CE6J,AQpFhD,CHoH6B,ClBUM,AkBVOpT,ElBUpB,CqB9HI,CRoFF,Cb0C+B,Aa1CjD,Eb0CA,Aa1CmD,CKgC5B,CAAb,EAAqC9D,CGpHrD,EHoHgB,CAAN,AGpH4B,UAAtC,GAAmD,KAAK,gBADpD;ApB4HD,ADIG4M,Aa1CA,ARaP,APGA,ACaD,AmBGS,AIjIZ,AFAD,ACaI,CChBJ,OFGA,GrB8HWzC,GAAP,ICacqD,GoB3IlB,ACaS,GDbT,EpB2IY,GAAiB,EAAjB,MoB3IZ,ACaI,GAAwB,URoFsB,AQpF9C,KRoFmD8X;AZuC/Cva,ADII6B,Aa5CmD,ARe3D0O,APGAvW,ACaH,AmBGW,AIhIZ,AFMA,SPwFY,CAtCJ,CSxDR,IrBsIexD,CHtBC,GOHG,CJyBCiK,ADIAV,EsB1IpB,CAAY,CJgII4C,CIhIhB,CrBsIQ,ADIkB/H,AsB1IO,ItB0Ib,CAAW,CkBVPmiB,SlBUJ,CkBVJ,AIhIhB,CtB0I2C,AqB7H5B,CCboC,EDanC,CrB6HI,AkBTHhkB,ElBSgC,CAAC,CAA9B,CAAR,EsB1IwC,IAAD,EJiIrBhB,AIjI4B,EAAP,EAAc,KJiIhD,IAA0B2b,aAAa3b,SADxC,CAAJ,EACwD;AjBM5D+B,ADIC,Aa1CJ,ARYc,APIX,ACaR1G,AmBIgB,AE3HhB,ACOM,QtBgHEyM,AuB9HoD,KxBiH/CvL,CwBjH+C,CvB8H5D,EuB9H4D,CvB8H1C,EESEyL,EHtBZ,EuBnGI,CvBmGa,CGsBC9K,AHtBlB,GGsBY,CAAUiO,AiBLRub,CGpHH,EAAE,EpByHD,AiBLO/K,CjBKS1T,GAAhB,EAAqBG,GAArB,CAAZ,GiBLgCpI,EGpHlC,OHoHqB,GAAyB2b,QAAzB,GAAoC3a,QAA/C;AjBMR,ADIA8I,Aa1CJiU,AfgBI,ACaJ9a,AmBIY/F,AIlId,AFOF,ACOM,QCdE,IrBuIIsM,CGxCCoN,ANkBAja,EwBjHE,CtB2ICqL,ECJR,AGxCW,EHwCC,AFVF,Cc5BGgW,AfgBb,CE0Bcnb,AF1BA3D,EwBjHE,ADcd,CAAC,CrB6HK,CAAW,EI5CE6X,AiBjFnB,CHoHYxW,GLjClB,AQnFe,CvBmGX,CehB2B,AfgBA,AoBiBRomB,ElBSX,AsB3ID,CAAuB,ADcd,CrB6He,CF1BCpqB,GE0BxB,AkBTM,CAAcgE,ClBSS,CAAC,AqB7H3B,CrB6HH,AI5CgC,CJ4CxC,CF1BA,AoBiBiC0E,EGpHJ,KHoHD,CAAayhB,CIlIlC,CJkIqB,AIlIlC,ADcI,CHoHgB,EAAgCxpB,GAAhC,CAAN;AjBMJ,ADIP,Aa1CG,ARWA,APKH,ACaDwG,AmBIS,AIlIX,AFOF,ACOM,QCdA,CAAC,IjB4GMtH,ADbA4Y,AkB/FX,CTiGY7P,CSjGD,CvB4HK,GEWC,EqBvIA,CDcX,CpByHI,AYtCWrJ,CRWf,CAAiBiB,AiB5GF,GjB4Gf,CAAqBwB,CQXCgF,ASjGX,CAAU,CDcvB,EhB8F4BoX,CgB9Fb,CjBiFgB,ISEd,ERWM,CQXcsD,ARWArD,EgB9Fb,ICdX,CAAN,CDcQ,ERmFb,AQnFkC,KhB8Fb,CAA8B,MAAM1W,EAAE2W,QAAF,CAAW,MAAM;AJ4BzE,ADIL/Q,Aa1CI,ARWIhO,APKRoG,ACaAmC,AmBIQ,AIlIV,AFOF,ACOQ,EjBiFNxE,KAAKmX,CkB/FC,GlB+FN,CJ4CUhP,Aa1CA7C,ATFArC,ANkBA,GwBjHG,GtB2IGD,Ca1CCqb,ARWA5f,AiB5GA,ElB+FG,CJ4CV,AsB3IG,CtB2IQ,CkBTPsM,AIlId,IDcU,IhB8FA,AasBYhK,CbtBS,GL+BrB,EAA0B,AK/BAmX,CasB1B,EAAqB,GLjCrB,Cb0CA,EAAmC,AqB7HhB,CrB6HiB,Aa1CA5S,Cb0CpC,CAAR,EK/B6B,EAArB,CQX2CgZ,EQnF/C,EAAmC,OAAO,KAAP,SRmFnC,EAA0E;AZuC1E,ADIJrU,Aa1CQ,ARWH,APKD,ACSU,AmBQF,AIlId,AFOF,ACOQ,CtB4GR,OuB1HQ,CjB0GyD,EAEtD,CJ2BC/H,ADIAiG,CF1BCrL,COPoD,AiB1GnD,CjB0Ge,CAArB,ELiCUkG,Aa1CAqU,ARWA3Y,AiB5GA,GxBiHV,CGsBcgM,ADIV,AF1BUrI,CE0BC,AK/BAyY,EQXEqD,ASjGX,CrBuIF,CHtBJ,AwBjHN,CDcU,CpByHiB7S,CiBLPrK,CbtBJ,CAAcga,EJ2BpB,AiBLc,CjBKS,AoBzHhB,CpByHiBxN,ADIxB,EAA0B,EkBTNgK,EjBKU5O,AYtCA,CQnF9B,ErB6HA,EAAmC,CCJnC,ADIoC,AqB7HhB,CrB6HpB,CAAR,Aa1CqB,ARWP,CAAiCxE,EQXE,ARWA2W,AasBR3B,CjBKS5L,AoBzH9C,EAAgC,ERmFkB8G,CZsClD,EAAqD,AI3BV,CAAW,CasB9B,AGpHe,CRmFtB,AKiC+BlX,GLjCW,AKiCnC,CbtBoC,AgB9F5B,CHoHqB8D,ELjCjD,MKiCoB,CAAhB;AjBMJe,ADIRkI,Aa1CQ,ARWAnO,APKP,ACaL,AmBIgB,AIlId,AFOF,ACOQ,SCdc,IAAA,EtB2IP,CAAX,Ea1Ccqb,ASjGI,CjB4GH7Y,AiB5GG,CtB2IF4L,CsB3IE,GrBuIEnI,CYtCCxD,CSjGH,EJkIFuC,AGpHN,CHoHE,CLjCctC,Cb0CC,AkBTR,ClBSH,AK/BR,CAAqB,AiB5GJ,ADcV,CpByHe+L,EDIEZ,CsB3Id,CrBuIE,AI3BcoO,AiB5GJ,CTiGT,AQnFjB,CRmFgCX,CZsCCjM,AqBvInB,CAApB,EtB2IE,AI5CwC2L,AkB/FtB,ErBuIE,CAAuB,CAAvB,CqBvIF,CrBuI4B,CAACxJ,AYtC1B,CAA2B4J,ARWnB,AiB5GX,EjB4GV,CDb4C,CSE/B,CZsCgCxO,AYtC7C,CSjGV,EAAoB,GrBuIE,CAAZ,AqBvIV,EAAoC;ArBwI1BqF,ADIR/F,Aa1CQ,ARWH,APKL7F,AoBiBgBjF,AInIb,AFQP,ACOQ,MjBiFF2C,GCW6C,AenGnD,CpBoIU+B,CK/BC,ADbAqV,CkBhGE,EtB4IT,AKjC+C,CAAjC,ADXZ,CCSE,ADTQnU,CJ4CC6G,Ea1CEwN,AfgBA,CwBlHD,GAAA,EtB4Id,AI5CsB,AkBhGR,CAAX,AFQP,CP0F2BA,AO1Fa,CnBgIZ,AoBzHhB,CAAC,GpByHD,AYtCoB6L,AQnFhB,EHoHW,AE3H3B,EAAwD,CF2H3B9lB,GLjCF,AKiCM,CGpHpB,CRmFD,AQnFc,IHoHY4D,CAAE,EAApB,CGpHP,CAAsB,MAAtB,CAAL,EAAoC,OAAO,KAAP;ApB0HnC,ADIL,Aa1CK,ARWD,APKA,AoBiBS,AInIb,ADeI,SR+EA,Eb8CG,CsB5ID,CjB6GG1E,APKAO,EE0BT,AazCS,ISnGI,ExBkHT,CAAcwF,EOLd,CAAiBpF,GAAjB,AiB7GkB,ADeZ,ChB8FewB,IiB7GZ,CjB6GiBwc,APK1B,AuBnGY,CCfa,EAAhB,ADeM,CCfnB,IjB6GyB,CAAche,GAAd,CAAkB,GgB9F3B,CAAiB,ChB8FeoC,OAAvB,AgB9FT,CAAZ,ChB8FqD;AJ4BrDwK,ADIP,AazCW,ARUA,APKP,AoBiBQ,AInIT,ADeI,YCfE,OrBwISL,AYrCEnE,ASnGJ,IAAI,GTmGO+Y,CSnGX,CrBwIT,AI3BoB,AiB7GxB,ADeQ,CAAC,GAAL,EhB8F0B,AgB9FhB,KhB8FqB/e,EgB9Fd,KhB8FS,AgB9FhB,ChB8F6B6b,IQV1B,IAAoCgD,ARUvB,CAAsB,EAAE/C,KAAK,CAAC,EAAR,EAAtB,CAD2B,GQTa,SAAtD,IACH9V,OAAOgZ,yBAAP,IAAoCH,iBAAiB,QAD1D;AZsCJ,ADIR,AaxCS,ARSG,APKF5b,AoBiBE8jB,AInIR,ADeI,CjBoEJ,QJyDKvb,CF1BL,EwBlHM,CxBkHS,IGsBF,CDIjB,CAAmBC,AsB5IF,KJmID1N,AInIM,EtB4ItB,CkBTY,ClBSgB,EK/BE,AasBRA,CGpHP,EHoHH,GbtBwB,AgB9FhB,ECfH,CAAoB,EjB6GIiC,EiB7GxB,EAA0B,ADe5B,GhB8FqB,CAAa6b,AiB7GhC,CAAb,ADe8B,IAAI,GhB8FF,CAAsB,EAAEC,GgB9FpD,EhB8FyD,EAAP,EAAtB,CAFyB;AJ8BjD,ADIR,AaxCC,ARSO,ADbX,ANiBkB,AoBkBV,AInIL,AFKI,ACUD,UrB6HGzS,EsB5IF,IrBwIQuF,AqBxIZ,EAAU,EFKE,CCEV,ErBqIiBnD,EK/BGsQ,IJ2Bd,AmBnIa,CfwGA,CJ2BM,ADIArQ,GK/BK,QL+Bb,CAAoB1K,AoBvI3B,CAAwB,EpBuIjB,CAAyBuJ,CAAD,IAAOA,EAAE,CAAF,CAA/B,CAAnB,OoBvIY,CAAR;AnBoIQ,ADIZ,AazKgF,AR0IpE,ADbhBrO,AcmCQ,AInIF,AFKE,ACUH,QjBiFGsb,EJ4CElO,II5CV,GAAiBkO,AkBhGN,GjB6GS,AiB7Gd,CAAS,ElBgGf,CJ4CwB/L,AoBvIJ,CfwGKuQ,AiB7GnB,EAAe,IAAf,CtB4I0BtQ,CoBvIH,MAAM,CfwGf,EAAJ,CL+BQ,CAAoB1K,AK9BxB+a,GL8BI,CAAyBxR,CAAD,CK9BtB0R,EezGlB,CpBuI+C1R,EAAE,CAAF,CAA/B,CAApB,OK9BgB;AJ2BP,ADITlB,AaxCJ+Z,ARUa,ADdb,ANemB,AoBoBd,AInIC,AFKJ,ACHE,SjB8FK9iB,ICQoD,AanBvC,ElBuDPqL,CI5Cf,AkBhGY,AFKN,ChB2FWoM,IAAjB,AiB9FI,CrB0IA,CAAmB,AI5CA,CkBhGH,EtB4IhB,AaxCsB8I,AQlGtB,CAAA,CCFoB,CDEJ,CDGA,CELA,CAAQ,EFK1B,ACHkB,CRkGpB,CSpGoB,AFKM,CELpB,CToGgC,EQlGZ,ERkGgBrD,EQlGtB,CAAW,IRkGO,EAAtC,CQlGsC,gBAAP,CAAwB,WAAxB,CAAX,CAAhB,EAAgB,KAAA,GAAA,MAAhB,EAAgB,IAAhB,EAAgE;ApBuIxDhT,ADIRlB,AaxCJpN,ARUY,ADdR,ANeI,AwB/GF,AFKF,ACJW,QRmGPknB,ETJEpL,MJ4CMrM,AsB5IN,ClBgGOvM,CNeH,GwB/GR,ClBgGgBC,CJ4ClB,AsB5Ia,AFKb,CpBuIoB,AoBvIpB,ACJY,CvB8GGyB,AsB1Gf,CAAA,CpBuIA,AqB3IY,ECDO,ADCP,CAAD,CjB+FE,CAAemX,CSIhC,ASpGiB,CAAW,CxB+Gd,CeXsBmL,AfWN,AsB1G1B,EELa,AFKN,EELL,GlBgGW,CAA2BrL,ANe9B,CwB9GH,CxB8G6B,EMfvB,ANeH,AsB1GO,ChB2FjB,ANeI,AwB9GO,GjB6GqC,AiB7GzC,CAAQ,IAAR,AFIA,CfyG+C,CiB7GjC,CAAC,AFIO,CP+FjC,GSnGyB,CAAd,GFI8B,SAArC,CAAA;AnBoIQ,ADIR,AaxCJ,ARUgB,ADdZ,ANeI,AoB5Bc,AIlFjB,AFIF,QhB2FKC,GJ4CG9N,CI5CP,CgB7FF,ChB8FMvN,EHuCQ6N,CDICoB,EF7BJpO,AsB1GJ,EpBuIE,AK9BUwb,ADbN7Z,CJ2CO,IAAX,CF7BH,CGyBoBiL,ADIAf,AK9BZ,APCMpG,AuB/GP,ChB8GcD,KDbrB,ANcA,CGyBI,AGvCiBgV,EHuCQ,CDI1B,EAA6B1O,AI3CN4O,CCalB,UL8BL,AI3CkB,CJ2CzB,AI3C0CH,IAAjB,CAArB;AHwCQ,ADIf,AK9BY,ADbZ,ANWkB,AoB1BG,AIjFnB,AFIC,ACMC,ahB0FwD,UehGzD,CAAA,CAAA,CAAA,UAAA,EAAO,QAAQ,SAAf,CAAA;AnBoIS,ADIb7b,AK9BY,ADbZA,ANaK,AoB7BiB,AIhFpB,AFIC,ACOC,QrBgIIsP,AI3CAlL,GkBhGC,IlBgGT,EJ2CA,CI3CkBA,CkBhGhB,CtB2IkBkL,AsB3IF,EDWR,GjBqFV,EiBrFe,ErBgIf,CqBhII,EAAgB,CCXlB,GAAgC,EDW9B,ECXF,ADW0B,QhBkGoB,MAAM;AJ2B1C1C,ADIZ,AK9BgB,ADbhB,ANaI/G,AoB9BkB,AI/EpB,ADWI,UvBkGImB,CwB7GD,ExB6GL,AoB9BM,CAAN,CpB8BW,GG0BG2F,CqBvIhB,CAAgB,CjB6GGuS,GJ0BGrS,MAAN,CAAayB,CqBvI7B,EjB6Gc,AgBlGI,CCXa,GAA/B,ADU0B,CpB6HV,IAAyB3B,MAAMoC,MAAN,CAAaT,QAAb,CAA/B;AACAvB,AI1BC,APAL,AoBgBP,AI7HA,ADWK,CC7BN,YjBmH6D,APYhDzL,KG0BKqL,GH1BV,CAAc5H,EG0BEiI,EH1BhB,CAAmB,GG0BT,CAAasB,EoB5HZ,CvBkGX,EAA4B,EAAEtH,CG0BpB,CAAN,CH1BwB,EAA5B,WuBlGoB,EAAT,EAAW;ApB6HlB,AI1BA,APAP,AwB5GL,ADUQ,WCVR,KrBsIgB4F,MAAMG,AqBtItB,CAAY,ErBsII,AqBtIhB,CACE,EDSU,CpB4HiBJ,EoB5Hd,IpB4HoBoC,GoB5HvB,CCVZ,ErBsI6B,AqBpI3B,CrBoIwCT,CI1BC,AgBlGhB,IAAnB,EhBkGyC,AgBlGhB,CpB4HJ,CqBpI1B,CDQiC,EpB4HkB3B,CqBpIpD,EAAO,EAAP,CrBoI0DG,CqBpI5B,ADQC,GAAe,GAAG,EpB4HvC,EAA2D,KoB5HtC,CADH,CAC+B;ApB6H7C,AI1BA,APAN7F,AsB5GT,ACUM,QCTI,QxB2GP,GAAqB,CoBpCVyiB,AIvEJ,CjB2GU5M,EiB3GV,KjB2GK,CAAajW,KAAb;AJ2BH,AI1BA,APDY,AsBpHzB,ACc4B,QCLN,AFTtB,KfsG6D,IgBxFzD,ECLkB,GAAA,GFTtB,GAAA,iBAAA;AnBgJYgL,AI1BA,AiB5GR,AFAJ,ACWI,QCXM,OAAO,KAAK,ADWd,KpB2HiBc,AqBtIR,CAAW,KDWxB,ECX+B,ADWd,YhBiGwB,AiB5GE,GrBuI7BhG,GI3BiC,EiB5GvB,CrBuIJ9K,AqBvIP,CAAb,ErBuIc,CAAUiO,KAAV,CAAgBlD,GAAhB,EAAqBG,GAArB,EAA0BmC,IAA1B,EADO,GAEPvC,MAAM9K,GAAN,CACGiO,KADH,CACSlD,GADT,EACcG,GADd,EAEGmC,IAFH,GAGGY,KAHH,CAGS,CAACmC,MAAM5E,MAHhB,CAFN;AAMA,AI/BI,APHS,AwBzGrB,AFAJ,ACWM,QCXI,MAAM,ErB2IAwE,KI/BKiL,AiB5GE,MDWjB,ChBiGU,AgBjGV,ChBiGuBza,AiB5Gb,ADWV,CCX0B,ADW1B,CpBgIyB4P,II/Bf,CJ+BJ,EAA0B,EoBhIhC,EAAO,CCXT,aDWuB,aAAd,CAA4B,KAAK,GAAjC,EAAsC,UAAtC,CAAP,CAAA;ApBiIU,AI/BH,APHL,AwBzGJ,AFAJ,ACWK,QCXG,KjB0FqD,EiB1FzD,IxByGW,OAAKrN,UAAL,CAAgB,gBAAhB,EAAkC,EAAlC,CAAP;AGmCK,AI/BD,APLa,AwBvGrB,AFAJ,QEAQ,QAAJ,8BjB4G0C,MAAM;AJgCxC,AI/BI,APJX,AwBxGD,AFAJ,SEAS,OrB2IO+H,GqB3IG,EjB4GEmQ,CJ+BC/N,CqB3IlB,EAAqB,GrB2IT,AI/BA,CJ+BaT,AI/BAhM,OAAb,AiB5GoB,CrB2IpB,AqB3IZ,EAAmC,ErB2IEqK,MAAMG,GqB3IG,CAA9C,EAAiD,GrB2IrC,IAA4C,CAAhD,EAAmD;AAC/C,AI/BH,APJHlI,AoB9JV9E,AIsDM,AFAN,OFtDOC,Mb6IsD,CPiBzD,CAAiB2C,IwBxGJ,EJtDjB,CpB8JI,AoB9JkB1C,CIsDD,CxBwGSwC,EwBxGb,CAAQ,CxBwGrB,CoB9JJ,CpB8JoC,CoB9JL,GIsDd,CAAX,QJtDN,EAA6C,EAAEvC,OAAO,IAAT,EAA7C;AjBkMa,AI/BD,APLwB,AoB7JpC,AIsDM,AFAN,ACQG,IDRC,CCzBW,CH7BTiF,MIsDI,CJtDG/E,AEsDb,OEAM,CJtDe,CIsDD,KJtDP,CAAb,oBbkKgD,MAAM;AJgC1CsS,AI/BI,AalKhB,AIsDK,AFAL,ACQA,MH9DM8Y,GEsDN,ECQA,OH9DkBprB,EEsDlB,Cf4GqB2c,Ee5GrB,CCQA,EpBmI0BnQ,AiBjMA,EbkKV,CAAa/F,GJ+BG/E,GAAN,CAAUiO,EI/BpB,GJ+BU,CAAgB,AiBjMxB,CjBiMQ,AiBjM1B,EjBiM6C/C,GAAnB,EAAwB6F,WAAxB,CAAoCX,KAApC,CAAd;AACAtL,AI/BC,APPuB,AoB3JpC,AIsDI,ADjCJ,CAAA,EAAA,GHrBM0iB,EIsDE,CAAC,IjBoFoD,IiBpFzD,EAAe,EJtDElpB,EjBiMEwM,MAAM9K,AiBjMA,GjBiMN,CAAUiO,KAAV,CAAgBlD,GAAhB,EAAqB6F,EiBjMvB,CAArB,QjBiMuB,CAAX;AACA7F,AI/BA,APPJ,AoB3JR,AIuDI,ADnCS,MHpBPgJ,EIuDI,ADnCG,MCmCG,IxBoGFnT,CGsCKkE,AiBjMAxG,AIuDE,EDnCR,CCmCG,CxBoGG,AwBpGK,CDnCX,GHpBc,CjBiMCkN,AqB1IZ,CAAA,CxBoGQhM,GwBpGR,CrB0IG,CqB1IS,ErB0IS4Q,AoB7KxB,ICmCqB,ErB0IS5E,EHtCxB,AwBpGS,CAAW,CxBoG/B,EGsCI,AiBjMO,CAAnB,AIuD2C,IAAJ,EAAX,CAAZ,CAAZ;ArB2IQT,AIhCA,APNJ,AoB3JR,AIuDI,AFHF,MFpDI4e,EIuDE,QFHF,EnB6IY7e,AqB1Id,CxBoGW,IAAI1I,CGsCK4O,CmB7ItB,EFpDyB1S,AEoDV,GtBuGF,CAAY,GGsCT,AmB7ID,CnB6IkByM,AiBjMA,AEoDlB,CAAA,CAAA,CnB6IC,CAAN,EHtCgB1I,KOMqB,Ce7GhC,CtBuGU,CsBvGH,CtBuGgB,KoB3Jb,CAA3B,CbiKwD8b,Ce7GvC,CAAA,If6GgC,EAAkB;AJiCvD,AIhCI,APNJ,AoB3JZ,AIuDI,AFHF,MFpDI/D,EIuDE,QrB0IQrP,GqB1IZ,EJvDiBzM,CjBiMC4M,CHtCL5L,CsBvGH,CnB6IF,CIhCUoF,CJgCK,EiBjME,IbiKA,IPNjB,CAAoBW,COMG,Ae7GjC,EtBuGU,CAAwBzE,EAAxB,EOM4Bqa,APNA,KoB3JnB,CAArB,CbiKmC,CAAatW,UAAb,EAAnB;AJiCA,AIhCA,APNA9D,AoB3JhB,AIuDI,AFHF,MFpDIjC,GIuDG,MJvDMN,IEoDb,CAAA,CAAA,CEGoB,AFHpB,CFpDqB,IbiKF2e,EPNIpc,AwBpGI,CAAzB,CJvDW,CAAf,AIuDgC,AFH9B,EAAO,EtBsG+B,COOxB,CAAgB6D,IAAhB,Ce7Gd,CAAA,CEG2C,GAAzC,EAA8C,cAAc,CAA5D,EAA+D;ArB2ItD,AIhCA,APNGzD,AoB3JhB,AIuDM,MJvDA6nB,Wb8JM,Ka9JUxqB,AIuDF,IAAI,GAAJ,CxBoGM,AoB3JI,AIuDF,UAAR,CAAd,IJvDgB,CAAtB,EpB2J2BwC,MAAD,EAAY;AGuC1B+P,AHtCQ,AwBpGd,YAAI,WAAJ,EAAiB,GrB0IK,GHtCHvR,CGsCb,aHtCQ,CAAoBgG,MAApB,CAA2B1E,EAA3B;AGuCX,AIrCG,APDQyB,AwBpGf,AFLJ,4BFnDwBhB,IpB4JGP,CoB5JE8oB,KpB4JV,UoB5JK;AjBmMjBjZ,AItCI,APAK,AwBpGb,AFJJ,QEIQ,CAAC,KrB0IK7F,MAAMoC,AqB1IhB,EAAkB,IrB0IR,CAAad,SAAb,CAAN;AACAtB,AIvCI,APL4B,AwB9FpC,AFJJ,MFtDQwe,EI0DE,CFJV,KnB8Ic5kB,GH5CF,CG4CJ,EqB1Ic,CrB0ID+H,CmB9IrB,GAAA,IEI+B,IrB0IEoE,UiBpMzByY,MjBoMyC,CAAhB,AqB1IX,GrB0I+B,AqB1IE,CrB0IlC,CAAb,CqB1IJ;ArB2II1c,AIxCI,APEA,AwBpGR,AFJF,QEIQ,QrB0IM9B,AmB9IF,MnB8IQnF,AHtCJJ,CwBpGO,EFJvB,CnB8Ic,CAAW,KHtCCtH,GwBpGS,IrB0IrB,AHtCmBuH,EGsCM,IHtCb,CAAc,CGsC1B,CHtC4B5E,CGsCK,CAAjC,AHtC0B,CGsClC,CHtCoB,EAAsBD,EwBpGzB,ExBoGG,CAAhB,AwBpGiD,GAAzD;ArB2IIiM,AIlEqD,AP4BjD,AoB/JZ,AI2DI,AFJF,MFvDI2c,EI2DI,AFJF,Cf4EqB,CAArB,IJkEMtY,CqB1IG,CAAC,CFJD,EnB8IT,CiBrMY5N,EjBqME,CHtCL5D,AwBpGQ,EJ3DAsI,CjBqMjB,AmB9IkB,IAAT,CtBwGL,AsBxGmB,CtBwGL7E,AoB/JN,AI2DH,CJ3DgBjD,GpB+JrB,CAAmBY,AwBpGQ,KJ3DnB,CAApB,CpB+JY,AsBxGK,CAA4B,CtBwGL0E,EwBpGU,KxBoGtC,IwBpGK,CAAb,IFJwD,KAAf,GAAoB,IAAhD,CAAf;AnB+IMqH,AIrCA,APDC,AwBpGL,AFJF,QEIQ,AFJJ,KfyGO1N,APXE,CGgDDqO,AHhDN,AsB9FN,EAAY,CEIK,IrB0IX,EmB9Ia,CnB+IT,AItCJ,CJsCK1I,AItCYhF,CiBrGG,EjBqGpB,CAAqBwB,AezGf,KfyGoB4G,IJsCRpD,EItCG,CAAYuZ,AiBrGtB,CAAyB,MrB2IR/Q,GqB3IhC,CrB2IsB,AItCG,CAAwB,CJsCxC,GAAgCxI,YAAY,IAA5C,GAAmD,EAApD,IACIiG,MAAMoG,KIvCO,EAAkE,CJuC/E,CAAe9E,IIvCsE,QJuC1D,CAA3B,EAA8BK,QAA9B,EAAwCkE,GAAxC,EAA6C,IAA7C,CADJ,IAEK7L,YAAYA,SAASuI,IAAT,EAAZ,GAA8BvI,QAA9B,GAAyC,EAF9C,CADJ;AAIA8H,AIxCI,APdwB,AoBxFpCzO,AICI,AFJH,QFGOyW,AICE,MrB6II3R,AiB9Id,EbsGgBrE,CJwCR,AiB9ISgW,GjB8IG,CAACxI,EIxCE/F,AatGvB,AICyB,OrB6IL,EAAYyE,AqB7IE,CjBqGlB,GAAoBsH,EJwCE1N,IAAlB,CAAZ,CIxCQ,GiBrGS,CAAyB,CjBqGD,WiBrG7C,EjBqGQ,EACI,KAAKkW,aAAL;AJwCRhO,AIvCC,APHJ,AoBpGL,AICI,AFTJ,QESU,AFTV,Cf4G6B,AapGpBsb,CboGD,EAGI7mB,EJuCEmP,AqB5IR,GjBqGWvI,GJuCT,AiB9IR,CAAqB0B,AERrB,EnBsJuBpI,AIvCX,AiBrGG,CjBqGS6c,Ae/GxB,CFQA,EjB8IQ,AiB9ImB,QbuGf,CAAwB,Ce/GpC,CEU8B,CAAxB,GAA4B,SAA5B,GAAwC,QAAQ,UjBqG1C,EAA8D,GiBrGL,GjBqGW,MiBrGlC,CAD1C;ArB8II,AIvCI,APHRxc,AoBpGA,AIEA,AFLJ,SAAA,EFGW,AIEA,IrB4II,AiB9IAsH,CbuGCtK,CiBrGZ,CAAc,CrB4IV,AH1CW,CoBpGR,AIES,CJFE,AEHtB,Ef0GuByH,Ce1GvB,CEKuB,GAAL,EAAd,GjBqGY,GAAoB+L,QAApB,AavG4BzI,IAAK,CbuGA,CavGtC,CAAP,MbuGQ,EACI,KAAKiR,aAAL;AJuCX,AItCI,APJD,AoBpGP,AIEE,CA7BH,IrBqFI,II2CQ,CAHJ,EAMIvZ,EPJEK,GOIGuG,MAAL,APJW,COICmW,CPJhB,UOII,CAAwB,gDAAxB,EAA0E,KAAKxD,aAA/E,CANJ,EAMmGvZ,KAAK4G,MAAL,CAAYmW,WAAZ,CAAwB,kDAAxB,EAA4E,MAAM;AJuC5L,AItCWxf,APNO,AoBlGnB,AIIA,SJJSgpB,EIIT,MJJA,CAAkBve,CbwGCjI,EaxGnB,CIIA,CJJuB,AIIX,EAAZ,CAAwB,MjBoGZ,CAAqB,AiBpGjC,EAAiC,GjBoGK6Z,OAAL,AiBpGC,CjBoGY/V,KiBpGb,CjBoGA,CiBpGS,CjBoG9B,CiBpGqB,EAAmB;ArB2IpD,AItCS,APPU,AoBjGfmE,QAAIC,AIGoC,CrB2InC6H,AIxCkG,CANnG,EAQI9P,KAAK4G,AiBrG2B,GAAA,GjBqGhC,CAAYmW,AaxGpB,CjB8IJ,AiB9IyB,CjB8IChN,SItCd,CAAwB,SJsCS,EAA7C,EAAiD,QiB9I7C,EAAuD7H,OAAvD,CAAgEC,CbwGxD,EAA0D,CaxGH,IbwGQoR,AaxGE,abwGjE,CARJ,EAQmFvZ,KAAK4G,MAAL,CAAYmW,WAAZ,CAAwB,sCAAxB,EAAgE,CAAC,EAAEC,QAAF,EAAD,KAAkB;AJuCzK,AItCQ,APRO,AoBhGX7U,AIGN,QAAI,GrB2IK4H,EiB9IE3O,IbwGIwY,EaxGT,CIGU,IjBqGN,CAAa9X,GJsCGkO,CqB3ID,IAAT,CAAc,CrB2IrB,KAA6B,EItC5B,CAA+BgN,IJsChC,AqB3IO,CAA4B,ErB4IpC,CIvCE,SJuCQ/M,MAAV,CqB5IQ,CrB4IUC,AqB5I1B,GrB4IQ,EAAuB;AACrB,AIvCH,AaxGJ,AIGH,KJLE,GIKE,CjBmGqF,AiBnGpF,CjB2FC,KJiDW,GqB5IjB,EAAgB,wBrB4I8BD,OAAOC,GAAP,EAAYhE,OAAzC,GAAmD,UAA1D;AACH,AIvCJ,APVc,AoB9Ff,AIGA,AFXe,KnBoJR,GAID,EiBhJAsc,QjBgJUvY,EqB7IJ,IrB6IN,EAAkBC,CmBxJT,CAAA,CnBwJT,AqB7Ie,AFXN,CAAA,CnBwJc,AiBhJF,CACvB,OETW,EFQY,AERN,CEWT,CJDR,AIC+B,OAAvB,CJHe,AIG3B,EJAI,IEXW,CAAA,KFQY,EAIvB,SAJuB,EAKvB,WALuB,EAMvB,SANuB,EAOvB,SAPuB,EAQvB,WARuB,EASvB,YATuB,EAUvB,SAVuB,EAWvB,QAXuB,EAYvB,aAZuB,EAavB,aAbuB,EAcvB,aAduB,EAevB,YAfuB,EAgBvB,WAhBuB,EAiBvB,SAjBuB,EAkBvB,UAlBuB,EAmBvB,UAnBuB,EAoBvB,UApBuB,EAqBvB,UArBuB,EAsBvB,UAtBuB,CAA3B;AjBiJQ,AIxCFsJ,APTF,AoBxEJxR,AIpBA,QJoBIC,OjByHW,GIxCf,AiBrGU,EAAV,CjBqGuB,EiBrGR,CJoBf,CAAqB,GAArB,EAA0BC,GpBwELlI,GwB5FrB,CJoBA,CpBwE0BK,AoBxES8H,IAAD,EpBwEb,CAAY/D,CGiDa6L,AiBzHFuY,OjByHStY,GAAP,EAAYhE,GHjDrC,EAAjB,EGiDW,AiBzHgDtK,GjByHK,AiBzHxB,CAAwB6mB,QjByH5D,CiBzH2D,IAAe,2GpBwE7B;AGkDhD,AIzCkB,APT8B,AoBvEjDtgB,AIpBJ,AFbE,KnBoJF,QiBnHSugB,IIpBA,IAAT,CxB2FerkB,AwB3FD,ExB2FuC,IoBvEjD,CAAqBokB,IIpBzB,AFbe,CEaW,EFbX,EFiCX,EEjCW,EAAb,CEaF;ArB8IH,AiBzHI,AIpBF,AFbD,KF+B8C,CAA5C,kBE/BE,UAAJ,EAAgB;AnB2JlB,AI3C2B,APRfpoB,AoBtEX,AIpBC,AFbE,SnB0JK8P,KqB7IG,MrB6IZ,CAAqBrC,EAArB,AHnDmBxJ,AwB1FjB,ErB6IuB+H,CqB7ID,CxB0FZ,CAAYhI,GAAGE,EwB1FI,ErB6II,EAAnC,AqB7IwB,AFbP,CEamB,CrB6IG,CHnD3B,EwB1FY,CAAtB,MFb2B,UAAZ,CAAb;AnB2JA,AI3CI,APRC,AwB1FR,AFbE,CEKH,SrBqJU+H,QI3CI2Q,GejHZ,GnB4JsB5Q,GI3CD,Ae/Gd,KnB0JuBC,CI3CH,OAAK4Q,GJ2CV,IAAuB,CAAC,CAAC,IAAD,EAAO,EI3C1B,EJ2CmB,AI3CxC,CJ2CuC,CAA3C;AACA,AI3CI,APbW,AoBFnB,AIlFA,AFdI,SFgGK+J,CjB0DC7W,CqB5IV,OjBiGc,IiBjGd,CrB4IuB/D,AqB5IX,EjBiGO8Q,AiBjGnB,CAAgC,EJkFhC,CAA6BwL,EjB0DEvY,MmB1Jd,EAAb,CFgGJ,CjB0DuB,AqB5IvB,CJkF0CwY,Cbe5B,AiBjGmC,CjBiGX3L,CJ2CO,CAAC,CAAC,GI3CjC,CAAN,CJ2CsC,CqB5II,CrB4II,GiB1DtD,EjB0D8C,AiB1Da4L,AIlFV,CrB4IJ,CAAzC,AqB5IsD,EAAT,EAAsB,EJkFvE,EAAqE;AjB2DjE,AI9CuB,APXR,AoBDf,AEhGD,QEayD,ErB6IlDxY,AiB1DAyY,OInFkD,GAAA,GJmFrC9oB,KjB0DKqM,AiB1DAzF,MAAL,CAAYjH,CjB0DC2Q,EiB1Db,CAAgB,WjB0DnC,QiB1DmB,CAAnB;AjB2DA,AI5CC,APdc,AoBAf,AEhGiB,QFgGbwY,AIpF4D,ErB8I1DvY,EqB9I0D,GAAA,GJoFhE,EAAgB,OjB0DOlE,AmB1JN,CAAA,CAAA,CAAA,KnB0JcmE,ImB1Jd,EAAM,OnB0JvB,AmB1J8B,QAAP,CAAgB,UAAtB,CAAA;AnB2JjB,AI5CM+K,APfS,AoBAC,AInFlB,QAAM,ErB8IEjL,KqB9IK,EjBkGX,CAAoB8M,QAApB,CJ4CuB/M,CI5CO,CiBlGnB,QAAA,CAAS,OrB+Id,CqB/IK,CAAb,QrB+IkBJ,MAAV,EAAkBC,GAAlB,EAAuB;AACrB,AI9CsB,APff,AoBAC,AIlFlB,AFdM,SEcY,IAAA,ErB+IDG,GqB/IC,CAAA,EAAA,KAAA,KrB+IeJ,CqB/IT,CFdL,GEcD,AFdC,CEcU,CrB+IWC,EmB7JrB,CnB6Jc,AqB/If,CAAlB,AFdM,CnB6JuChE,CqB/I3B,KAAA,CrB+ID,CAAP,CqB/IQ,MAAlB,EAAkB,IAAlB,EAAkC;ArBgJ3B,AH9DU,AoBAC,AIlFb,KrB6IoB,GAIjB4D,IqBjJG,MAAG,GAAA,EAAA,CAAT,CrBiJoBzD,QAAQ0D,gBAAzB,CAJN;AAKA,AIjD8B,APff,AwBjFf,AFZY,UnB6JNS,EqBjJF,MAAG,KAAA,CAAP,ErBiJsBD,CmB7JV,CAAA,CAAA,CAAA,SAAA,EAAM,EnB8JZ,KmB9JY,KnB8JFN,KmB9JE,CnB8JZ,EAAkBC,AmB9JO,GnB8JzB,EAAuB,KmB9JX,CAAwB,aAA9B,CAAA;AnB+JJ,AIlDJ,APhBW,AoBAC,AIhFhB,YAAI,GrBkJWK,EqBlJT,CjBgGI0M,IiBhGJ,CAAN,IjBgGmB,GJkDWhN,GIlDL,IJkDYC,GAAP,AIlDAgN,EJkDYhR,OAA3B,IAAsC,IAA7C,AIlDiB,EAArB;AJmDC,AIlDD,APjBW,AoBCX,AIhFJ,AFfF,KnB8JwB,GAIhB4D,IqBnJF,MAAM,CjBgGCiB,GiBhGG,GrBmJSnU,EmBlKzB,Cf+GsB2W,Ae/GtB,CAAA,CAAA,EnBkKgCpP,CiBnEAmS,CbgBnB,AiBhGD,CjBgGiB2G,AiBhGA,GrBmJJ,CAAc,AiBnEDpW,CIhF1B,AFfZ,CnBkKyCmJ,AInD5B,AiBhGX,EjBgGmC,AahBL,AE9F9B,CF8FyC2Y,EE9FzC,InBiKgD,AInDR5O,MahBa9R,AE9FrD,CnBiKqC,AInDF,EJmDZ,AInDZ,Ae9GC,EnBiK+CoE,AInDR,Ce9GvC,IAAA,Ef8G4CgR,Ae9GxD,CnBiKmEtN,CmBhKnE,EF6FyC,CAA6B,AE7FtE,Kf6GmD,CahBV,AE7FzC,Cf6GW,AahBmB,CAA1B,CbgBkE,Ae7G9D,GnBgKe,CAAjB,CAJN,EI/C2ExO,Ge9G3E,EAEA,GAAA,Gf4GW,EAA6E,MAA7E,EAAqF6b,Ee5GhG,GAAiB,Gf4GN,CAAP,Se3GA,+EF2F4E;AjBoEhF,AItD8B,APff,AoBCiE,AI/EhF,AFXM,UnB8JA3M,EqBnJA,QAAQ,EJ+ECsY,CjBoEIxa,CqBnJD,KAAJ,CAAU,GJ+EwD,GE1F9D,GnB8JiBjC,EmB/J/B,MEYU,CAAd,ErBmJmB,CAAnB;AACA,AIpDC,APlBc,AwB7Ef,AFXM,UnB8JAoE,EqBnJF,KAAJ,EAAc,GrBmJItB,GqBnJJ,MAAA,CAAA,CAAA,EAAK,ErBmJcgB,AmB9Jd,IEWA,MrBmJD,AqBnJC,CrBmJnB,AqBnJmB,CAAL;ArBoJdtC,AIpDMqP,APnBS,AoBEP4L,AI9ER,AFdI,OnBiKD9Z,KqBnJC,CrBmJJ,CAAU0B,KAAV,CAAgBC,AqBnJJ,CFfK,Cf8GjB,CAAyBpM,CezGrB,EnB6JJ,AqBnJA,AFjBA,CnBoKuB,AIpDvB,CajBoB3F,AI9EA,CjB+FW,CejHjC,EAAA,CFgGU,CAAkBiqB,CjBqE1B,EAAiC,OiBrEzB,GAA+BA,GjBqEvC,EAAgDrY,KiBrExC,KjBqER;AACA3C,AIrD+B,APnBhB,AoBGV,AI9EH,OrBmJC8B,KAAH,CAASe,GqBnJH,ErBmJN,CAAeE,KAAf,AqBnJc,CrBmJO,QqBnJnB,EAAuB,ErBmJzB,EAAmC,CqBnJL,SAAS,ErBmJvC,CqBnJ8B,CrBmJmBH,CqBnJL,EAAd,CAAL,KrBmJzB,EAA4D;AACxDI,AHzEW,AoBAC,AI1Ed,arBmJO,CAAC,EqBnJJ,MAAM,EAAV,CrBmJO,CqBnJO,CrBmJO,GqBnJH,GAAJ,GAAU,ErBmJjB,EAA2B,AqBnJH,MAAG,KAAH,CrBmJxB,EAAyC,AqBnJR,CAAhB,GAAsB,ErBmJvC,GqBnJ0C,GAAnC;ArBkJ4C,AIrD7B,AanBf,AIzEf,KrBiJD;AAGAhD,AIvDI,APfA,AoBLY,AIxEjB,AFZF,OnB+JMiD,MHtEM3S,EGsET,CAAY4S,AIvDJ,KJuDR,AHtEI,CGsEcxC,AHtEA3M,IAAd,CAAmB,MGsEvB,CHtEI,EGsE4ByO,AHtEA,EAAEjQ,MAAF,EAA5B,IGsEJ;AACAyN,AIvDQ,APfP,AoBNe,AIvEnB,AFhCD,CEmBA,MrBgKOiD,CmBnLP,OnBmLI,CAAYC,ImBnLhB,CnBmLI,CAAkB3B,AIvDJiO,Ce5HlB,SnBmLI,GAA+B9M,AmBnLnC,Cf4HgC,MAAMO,MJuDlC,GIvD2CwC,MAAT,CAAgB/O,IAAhB,EAAsB,OAAKuV,OAAL,EAAtB,EAAsC,OAAKsD,UAAL,EAAtC,EAAyD,OAAK9b,WAA9D,EAA2E,OAAK4X,iBAAhF,CAA1B;AJwDR,AIvDQ,AP3LS,AoBqKD,AIrEpB,AFbA,UnB+JUlI,CqBlJV,SjB2FgB,EiB3FhB,CrBkJuBxE,AqBlJX,EAAZ,CAAuB,CjB2FF1O,IJuDUqO,CqBlJ/B,EAA+B,EjB2FnB,EACI,EJsDO,CAAkB,GqBlJT,MAAD,EAAS,EAAT,EAAiB;ArBmJxCE,AItDI,APhBZxP,AoBRoB,AEhFpB,QtBwFQU,AwB7EkC,CFX1C,MEW0C,GAAA,CrBkJD,GHrEzC,COgBiB8b,EPhBQ9b,CsBxFzB,GAAA,CfwGY,GAAe,KAAf,CPhBZ;AGuEQ4S,AItDI7S,APhBZ,AoBToB,AIpElB,QAAM,OAAO,QjB6FIwC,CiB7FK,YjB6FZ,CAAqB,AiB7FlB,CAAuB,MjB6FA6Z,OAAL,CAAavY,MAAb,AiB7FlB,CjB6FsCic,AiB7FnD,YjB6F+DC,eAAZ,CAA4B9U,SAAhD,EAA2D,OAAKlH,WAAhE,EAA6EhE,OAAOyH,UAAP,GAAoBoU,UAApB,CAA+BoE,aAA5G,CAArB;AJoD6B,AInD7B,Aa1BQ,AInElB,KrBgJqB,CAAnB,EqBhJE,CAAC,IAAL,EAAW,QjB6FI5D,OAAL,CAAajY,YAAb,CAA0BqX,KAAKxB,YAAL,CAAkB9E,WAAWc,SAAX,CAAqBhP,IAArB,EAA2B,OAAKjD,WAAhC,CAAlB,CAA1B;AJuDRuM,AItDQ,Aa3BQ,AIjElB,OrBkJK8B,CqBlJD,IrBkJF,CAASe,KAAT,AqBlJY,CrBkJGO,EAAf,CAAkB,CItDLvT,EiB5FM,IrBkJnB,CItDQ,CJsDmBsT,AItDN5R,EiB5FT,CAAgB,CjB4FpB,CAAkB,KJsD1B,EAAuC,IqBlJ3B,CAA8B,GAA9B,CAAkC,IAAlC,CjB4FJ,AiB5FV;ArBmJMyR,AItDC,Aa5BW,AI/DlB,QAAI,CAAC,IrBiJM,AI9DL,CJ8DM,AIrDN,EiB5FN,EAAc,GjB4FDnO,IJqDF,CIrDL,CJqDmB,CIrDL,UJqDT;AAD8B,AInD/B,Aa9BQ,AI9DhB,KrB+IA,QqB/IK,IAAI,IAAI,EjB4FA8a,KiB5FO,CAApB,EAAuB,CjB4Ff,CAAe9a,GiB5FK,CAA5B,CjB4FQ,CiB5FuB,KAAK,CAApC,EAAuC;ArBkJ1C,AIrDQ,Aa/BW,AI7Dd,AFlBS,sBEkBC,KFlBD,CAAA,CEkBQ,AFlBR,CAAA,OEkBC,CAAgB,CFlBjB,EAAM,OAAO,GEkBZ,CAA8B,GAA9B,CAAkC,AFlB7B,CAAgB,GEkBrB,CAAV,AFlBS,CAAA;AnBoKf7F,AIlEmC,AanBf,AI5Dd,QrBiJEqT,QqBjJE,GrBiJV,GAAsBA,CqBjJhB,EAAa,QrBiJnB;AACA,AItDK,AahCe,AI3Df,AFpBG,2BAAO,GAAA,IAAA,EAAP;AfgHJsN,Aa7BC,AI9DF,AFpBK,cf+GM9a,KAAV,EAAiB,gBe/G+B,KAAK,OAAL,CAChD,KAAK,IAAL,CAAU,IAAV,EAAgB,uBAAhB,CADgD,CAA5C;AfgHA,AapC6D,AItDnE,AFnBA,QEmBI,CAAC,GjB0FK,IiB1FV,CjB0Fe5E,CiB1FD,QjB0FR,Ce7GN,Cf6G0B,Ae7G1B,CAAA,CAAA,UAAA,EAAO,kBAAkB,IAAlB,GACH,cADG,GAEH,KAAK,IAAL,CAAU,IAAV,EAAgB,4BAAhB,CAFJ,CAAA;Af8GUiC,AarCyD,AIpDnE,YAAQ,KjByFO6C,aAAL,CAAmB6a,GiBzF7B,CAA+B,IAA/B,KjByFU,CAAiC,0DAAjC,EAA6F;AACzFza,AatCqD,AIlDnE,YAAQ,SAAR,CAAkB,GAAlB,CAAsB,GjBwFK,IAD4E,AiBvFvG;AjByFcC,AiBxFd,eAAW,QjBwFUP,IiBxFV,EjBwFgBO,KAF4E;AAGzFya,AaxCqD,AIjDlD,AFrBlB,eEqBkB,QAAS,CjByFJhb,MAAMib,EiBzFX,CAAmB,MAAnB,CAA0B,OAA1B,CAAA;AjBsFsF,Aa9BrG,AIxDiD,AFnBrD,KEmBE,EAAqD,EFnBvD,EEmBE,EjBsFU,UezGZ,CAAwB,MF2EKtH,EE3E7B,EAAwC,EF2ELzP,IAAN,CAAW8hB,YAAY1gB,gBAAZ,CAA6B,KAA7B,CAAX,CAAzB,mIAA0E;AbmClE,AanCkE,AIvD7E,AFnBC,CEAF,OFAM,CAAC,KAAK,IF0EG+gB,QE1ER,CAAkB,CF0EqD,OE1EvE,CAAL,EAAkC;Af8G3B,AiBzFT,AFpBI,WEoBJ,IFpBW,EAAP,KEoBJ,CAAY,EAAZ,CAAmC,kBAAnC,EAAuD,UAAC,MAAD,EAAS,EAAT,EAAkB;AjB0FjE,AapCA,AEzEL,QEmB+D,KjB0FrDpP,GiB1FqD,EJsDpDqP,CItDoD,CjB0F1D,CAAatmB,KAAb,CAAmBA,GapCDqmB,GboCOpL,OAAzB,CapC6ByJ,iBAAX,KAAiC,IAAjC,GACZ2B,WAAW3B,iBADC,GAEZ2B,UAFN;AbqCH,AalCG,AIxDN,AFnBA,QEmBM,GFnBC,IEmBM,CFnBD,EF2EAE,MIxDU,IJwDAD,AE3Ef,CAAkB,QEmBZ,AFnBN,CF2EyBE,AIxDI,CFnBD,QF2E7B,EE3EsC,KAAT,EAAwB,MAAxB,EAAuC,EEmB7D,CAAb;AjB2FEvM,AalCI,AIxDN,AFnBE,QEmBE,CAAC,GFnBC,CEmBN,EAAW,GJwDCrH,GIxDK,CjB0FG,Ce7GH,EEmBI,KJwDG2T,AIxDP,CAAU,CFnBzB,EAA0B,MF4EhBA,QAAQ1gB,IIzDH,CAAN,EJyDC,CAAgB,sBAAhB,EAAwC,EAAxC,CADY,GAEZogB,eAFN;AbkCc,Aa/Bd,AI1DN,AFnBI,QEmBA,KAAJ,EAAW,GJ0DCQ,GE7EC,EAAT,MF6EmBP,WAAW,gBAAX,GAA8B,EAA/C;AACAG,AI1DJ,AFnBC,aEmBI,UJ0DUvgB,EI1Df,CAAkB,MJ0Dd,GAAuB4f,UAAU,II1DrC,EAA2C,EAA3C;AjByFI,Aa9BIgB,AI1DT,AFnBC,KEiBF,MAEO,CjBwFG,Ae3GJ,Kf2GS/P,Ke3GC,Ef2GV,EAAkB,Ia9BA2P,CE7EtB,EAAyB,OF6EOK,WAAV,CAAsB9gB,OAAtB,CAA8B,KAA9B,EAAqC,EAArC,CADe;AbgC7B,Aa9BAyY,AI1DR,AFnBE,aEmBG,MjBwFU,Ce3GL,If2GF,Ae3GN,CACE,EF4EeqH,CI1DnB,CAAqB,iBJ0DiBhT,MI1DtC,WJ0DmB,AE5EqB,CF4EgBC,OE5EpD,EF4Ee,CAFkB,AE1EW,KAA5C,IACE,MAAM,KAAN,KAAgB,SAAhB,GAA4B,MAAM,KAAlC,GAA0C,KAD5C,CADF;Af4GG,Aa9BGgU,AI1DT,AFfG,oBAAQ,EFyEI,GEzEZ,CAAc,CFsEqB,sCEtEgB,QAArC,GAA6C,GAA3D,EAAgE;AfwG9D,Aa9BIC,AI1DX,AFfO,CEOR,ajBgGc3L,UevGE,EfuGUC,Aa9BJ+K,IEzEA,GfuGW9K,Ia9BA,AE1EqC,KF0EhD,Gb8BI,Aa9Be,Eb8BjC,EalCiC;AbmCjC,Aa9BI0L,AIzDZ,AFhBQ,IEgBJ,UjBuFUzL,GiBvFd,UJyDuB,Eb8BMH,AevGR,EFoEoB,QbmCF7a,QAAV,EAArB;AACA,Aa9BI0mB,AIxDZ,AFpBsE,WEoBtE,EFpBM,Cf0GQzL,QiBtFd,CAAY,EAAZ,CACE,GjBqF2BJ,Ca9BHgL,Sb8Ba3K,Ea9BF,CIxDrC,EAEE,EJsDwB,Cb8BlB,Ea9BqC,KItD1C,MAAD,EAAS,EAAT,EAA8C,CJgDP;AbqCjC,Aa9BIyL,AEzEP,QEkBQ,IjBqFD3L,CiBrFC,GAAA,YjBsFDC,Ia/BgB1I,Yb+BA,Aa/Ba,GAAE6T,Cb8BnC,EAC0B,Ka/BkB,QAAO7T,SAAU,EAAzC,GAA6C6T;AbgC7D,AavC6B,AEjErC,QEiBa,KJgDc,CAAvB,CIhDS,AFjBN,GEiBM,CjBuFE,EexGf,GfwGQ;AACH,Aa/BJ,AEzEF,KAhBM,CAAP,EEgCqB,cAAA,GAAA;AjByFf7rB,AazD6D,AE/CpE,QEemC,OjByFrBwC,MiBzFqB,GAAA,IjByF5B,CAAqB,KAAKmd,iBAAL,GAAyB1B,IAAzB;AAAA,AazDwC,AI/BjE,AFdJ,SAAA,cAAA,GAAA,gBfsG2D,WAAO7c,GAAP;AAAA,AazDU,AI9BjE,uBjBuFsEpB,OAAO4gB,QAAP,CAAgBxf,GAAhB,EAAqB,OAAKob,OAAL,EAArB,EAAqC,OAAKxY,WAA1C,CAAf;AAAA,AazDU,AI7BjE,QAAM,KjBsFmB,KiBtFT,SAAS,aAAT,CAAuB,oBAAvB,CAAhB;AJ6BiE,AI5BjE,QAAI,CAAC,OAAL,EAAc;AjBqFW,AazDwC,AI3BjE,QAAI,CAAC,aAAL,EAAoB;AjBoFK,AazDwC,AI1B/D,wBAAgB,IAAI,iBAAA,aAAJ,CAAkB,OAAlB,CAAhB;AjBmFuB,AazDwC,AIzBhE,AFnBoB,2BAAA,CAAA,CAAA,CAAA,SAAA,EAAM,mBAAN,CAAA;AfqGI,AazDwC,AIxBjE,QAAM,KjBiFF,IiBjFW,IAAI,SAAJ,EAAf;AjBkFI,Aa1D6D,AIvBjE,AFrBI,QEqBE,OjBiFK,IAAP,GiBjFgB,OAAO,QFrBN,GAAA,IEqBD,AFrBC,CEqBsB,CFrBvC,GEqBgB,EAA6B,WAA7B,CAApB;AjBkFC,Aa3DgE,AItBjE,AFrBF,SEqBO,aAAL,CACE,CFtBA,OAAA,MEuBG,IFvBH,CAAW,CEsBX,CACU,YAAY,AFvBtB,CAAJ,EAAgC,CEsB5B,EAC4B,WAD5B,EACyC,UADzC,EAEG,IAFH,CAEQ,YAAA;AjB3IY,Aa8J2C,AInBvD,AFvBV,eEuBU,UAAA,KAAA,CFvBV,CEuBU,AFvBV,CAAA,CAAA,GEuBU,CAAA,EAAA,IFvBV,CEuBU,CAAA,AFvBH,EEuBG,YAAA,CFvBY,cAAf,CAAP,CAAA;AfuGJ2X,Aa7DqE,AEzClE,oBfsGiBc,CexGlB,MAEO,GfsGT,GAAiC,IAAIoE,OAAJ,EAAjC;AACAthB,Aa9DqE,AExCjE,QfsGIoc,mBAAR,GAA8BA,EetGlB,KAAR,CACE,WfqGN,yDetGI;AfuGJ,AepGI,6CAAqB,cAArB;AF+DA,AE9DA,WF8DOyP,WAAP,SE9DA,CAAA,CAAA,CAAA,UAAA,EAAO,eAAe,cAAf,CAAP,CAAA;AF+DH,AI7CS,AFjBP,6BEiBO,CAAA,KAAA,WAAA,WAAA,EAAY,UAAZ;AJ8CV,8BI9CkD;;AACtC,gCAAE;AACF,qCAAS;AFlBpB;AEmBmB,AFjBpB,SAAA,oBAAA,CAA8B,CEiBV,CAAA,CAAA,CAAA,IFjBpB,EAA8C,GEiB1B,EAAM,iBAAA,iBAAA,CAAkB,OAAlB,CAAN,CAAA;AFhBlB,QAAM,eAAe,KAAK,IAAL,CAAU,SAAV,EAAqB,gCAArB,CAArB;AEaQ,AFZR,QAAM,eAAe,GAAG,CEYhB,KAAA,CAAA,EAAA,EAAA,CFZa,CAAgB,CEY7B,MAAA,CAAA,EAGE,EFfW,CEeX,CFfyC,KEezC,CFfW,CAArB,CEekB,GAAA,IAAA,EAAR,IAHF,EAAA,CAAA;AFXR,OAAG,aAAH,CAAiB,QAAjB,EAA2B,YAA3B;AACD;AAED,SAAA,WAAA,CAAqB,YAArB,EAAyC;AACvC,QAAM,CEMM,CAAA,YFNQ,6BAApB,CADuC,CACW;AEY3C,AFXP,KEGI,CADF,GFFG,IAAM,IAAX,IAAmB,YAAnB,EAAiC;AEa/B,AFZA,QEYM,IFZA,EEYM,MFZE,EEYd,WFZ2B,IAAb,CAAd;AEaA,AFZA,QEYI,IFZA,CAAC,EEYM,GFZD,KAAL,CAAW,GEYO,IAAZ,CAAiB,GFZvB,CAAD,IAA4B,CAAC,IEYjC,EAA2C,cFZU,KAApB,CAAjC,EAA6D;AEa3D,AFZA,YEYI,OFZG,KEYS,IAAI,IAAJ,AFZI,CEYK,GFZlB,CAAP,SEYgB,CAAuB,mBAAvB,CAAhB;AACA,AFZA,YEYI,CAAC,OFZG,EEYR,EAAgB,CFZhB,CACE,uCAAqC,IAArC,GAAyC,+HAD3C;AEaE,AFVH,wBEUe,IAAI,aAAJ,CAAkB,mBAAlB,CAAZ;AACA,AFVL,gBEUS,IAAJ,CAAS,WAAT,CAAqB,SAArB;AACD,AFVL,WAAO,YAAP;AEWI,AFVL,kBEUe,SAAV,GAAsB,EAAtB;AACA,AFTN,SAAA,IESgC,IAAA,KAAA,CAAA,EAAA,GFThC,CAA6B,CESG,IFThC,EESsC,AFTC,IESP,CAAW,YAAY,IAAZ,CAAiB,UAA5B,CAA1B,EAA0B,KAAA,GAAA,MAA1B,EAA0B,IAA1B,EAAiE;AAA5D,AFRT,gBEQe,cAAW,GAAA,EAAA,CAAjB;AACH,AFRN,QAAI,MAAM,OAAN,CEQY,AFRE,KAAd,CAAJ,EAA0B,GEQpB,CAAsB,WAAtB;AACD,AFRH,YAAM,kBAAkB,MAAM,CAAN,CAAxB;AESC,AFRD,YAAM,eAAe,MAAM,CAAN,CAArB;AESD,AFRC,CE3BJ,WF2BQ,OAAO,YAAP,KAAwB,QAA5B,EAAsC;AEW1C,AFVM,IEUA,cAAc,CFVP,QEUgB,OFVD,CAAf,KEUO,AFVc,CEUS,AFV9B,IAA0B,EEUnB,CAApB,IFV8C,eAAP,KAA2B,QAA5D;AEWN,AFVK,SEUI,AFZL,IEYJ,CAAc,CFVH,UEUX,CAA0B,WAA1B;AAEA,AFXM,WEWN,QFXa,GEWb,CAAY,CFXN,CEWN,CAAgC,eAAhC,EAAiD,UAAC,IAAD,EAAO,EAAP,EAAe;AFV3D,QEUqD,OAAA,GAAA;AACxD,AFVC,KARD,GEkBI,GFVG,CEUP,EAAU,CFVC,OAAO,IEUI,CFVX,GEUD,EFVkB,CEUC,IAAnB,CAAV,EFVO,EAA+B,CEWjC,YAAY,IAAZ,GAAmB,EAAnB;AACN,AFXG,CEQJ,cFRW,IAAP;AEaJ,AFZG,KAFM,MEcT,AFZS,WEYT,CAAY,EAAZ,CAAwB,OAAxB,EAAiC,UAAC,IAAD,EAAO,EAAP,EAAc;AFX3C,QEWsC,MAAA,CFX/B,EEW+B,GFXtC;AEYF,AFXC,QEWK,UAAU,SAAS,aAAT,CAAuB,oBAAvB,CAAhB;AACA,AFXD,QEWK,CAAC,OAAL,EAAc;AACd,AFVF,QEUQ,WAAW,SAAS,aAAT,CAAuB,KAAvB,CAAjB;AACA,AFVF,aEUW,SAAT,GAAqB,4CAA0C,GAA1C,GAA6C,OAAlE;AACA,AFVF,YEUU,WAAR,CAAoB,QAApB;AACD,AFVD,CEIA,QFJA,gBAAA,GAAA;AEYA,SAAS,gBAAT,CAA0B,YAA1B,EAAwC,UAAC,KAAD,EAAM;AAC5C,QAAI,MAAM,OAAV,EAAmB;AACjB,YAAI,MAAM,WAAN,GAAoB,CAAxB,EAA2B;AACzB,uBAAA,WAAA,CAAY,UAAZ,CAAkC,SAAlC,EAA6C,SAA7C;AACD,SAFD,MAEO,IAAI,MAAM,WAAN,GAAoB,CAAxB,EAA2B;AAChC,AFhBJ,uBEgBI,EFhBJ,CAAA,KAAA,GEgBI,CAAY,IFhBR,GAAR,EAAY,CEgBR,CAAmC,IFhBvC,MEgBI,EAA+C,SAA/C;AACD;AACD,AFjBA,cEiBM,cAAN,CFjBK,CAAC,WAAD,EAAc,YAAU,eAAxB;AEkBL,AFjBA,cEiBM,eAAN,OFjBY;AEkBb;AACF,AFlBQ,CEQT,0BFRS,CAAA,CAAA,CAAA,SAAA,EAAM,cAAN,CAAA;AEoBT,SAAS,gBAAT,CAA0B,QAA1B,EAAoC,UAAC,MAAD,EAAO;AACzC,AFrBE,QEqBI,KAAK,SAAS,CFrBlB,GAAA,GAAK,GAAA,IAAA,CEqBP,CFrBE;AEsBF,AFrBE,QEqBI,SAAS,GAAG,KFrBhB,OEqBF,GFrBE;AEsBF,QAAM,UAAU,MAAM,IAAN,CAAW,OAAO,QAAP,CAAgB,aAAhB,CAA8B,OAA9B,EAAX,EACb,MADa,CACN,UAAC,EAAD,EAAc;AFtBpB,YEsBQ,QAAA,GAAA,CAAA,gBFtBQ;AAChB,YEqBe,OAAA,GAAA,CAAA,UFrBN;AEsBH,AFrBN,YEqBM,KAAA,KAAA,aFrBK,QEqBL,EAAA;AAAA,AFpBN,YEoBQ,MAAA,GAAA,GAAF,kBFpBY;AEoBZ,YAAO,SAAA,GAAA,MAAP;AACN,AFpBiB,eEoBV,MAAM,CAAN,IAAW,CFpBD,CAAA,CAAA,CAAA,KEoBU,IFpBV,EEoBjB,AFpBuB,OAAA,UAAA,GAAa,UAAb,CAAwB,kBAA9B,CAAA;AEqBlB,KAJa,EAKb,GALa,CAKT,UAAC,EAAD,EAAc;AF/BrB,YE+BS,OAAA,GAAA,CAAA,AF/BT,KAAA,CAAA,EAAA,EAAA,EAIE,GAAA,EAAA,KAKE,GAAA,eAAA,GAAiB,GAAA,IAAA,EAAjB,IALF,GAOA,GAAA,YAAA,GAAc,MAPd,EAQA,GAAA,YAAA,GAAc,KARd,EASA,GAAA,kBAAA,GAAoB,IATpB,IAJF,EAAA;AAeA,YEgBe,QAAA,GAAA,CAAA,IFhBP,GAAR,CAAY,UAAZ;AEgB0B,AFd1B,eEc0B,IAAA;AAAI,AFb9B,KEQgB,CAAhB,sBFRQ,GAAR,CAAY,uCAAZ;AEcA,eAAA,WAAA,CAAY,UAAZ,CAA6C,oBAA7C,EAAmE;AACjE,aAAK,KAAK,GAAL,CAAQ,KAAR,CAAA,IAAA,EAAY,OAAZ,CAD4D;AAEjE,aAAK,KAAK,GAAL,CAAQ,KAAR,CAAA,IAAA,EAAY,OAAZ;AAF4D,KAAnE;AAID,AFjBA,CEID;AAeA,AFjBA,IEiBI,qBAAJ;AACA,AFjBA,SEiBS,gBAAT,CAA0B,aAA1B,EAAyC,UAAC,CAAD,EAAE;AACzC,AFjBF,4BEiB0B,EAAE,MAA1B;AACD,AFjBD,CEeA,QFfA,aAAA,GAAA;AEmBA,WAAA,WAAA,CAAY,EAAZ,CAA8B,aAA9B,EAA6C,UAAC,CAAD,EAAI,EAAJ,EAAU;QAAJ,KAAA,GAAA;AACjD,QAAI,UAAU,qBAAd;AACA,QAAM,MAAM,OAAO,QAAP,CAAgB,YAA5B;AACA,AFrBA,QEqBI,QAAQ,IAAI,GAAJ,CAAQ,IFrBZ,GEqBI,AFrBZ,CEqBA,AFrBY,wCAAZ;AEuBA,AFrBA,WEqBO,CAAC,KAAD,IAAU,QAAQ,aAAzB,EAAwC;AACtC,AFrBF,kBEqBY,QAAQ,CFrBpB,CAAA,CAAA,CAAA,SEqBE,AFrBF,EAAM,QAAQ,GAAR,CAAY,CAAC,aAAa,KAAb,CAAD,CAAZ,CAAN,CAAA;AEsBE,gBAAQ,IAAI,GAAJ,CAAQ,OAAR,CAAR;AACD,AFxBD;AEyBA,AFxBA,QEwBI,CAAC,KAAL,EAAY,OFxBZ,IAAA;AE0BA,AFzBA,eEyBA,WAAA,CAAY,AFzBZ,CAAA,CAAA,CAAA,OEyBA,CAAwC,CFzBxC,EAAM,YEyBN,EAAyD,IFzBzD,CAAA;AE0BE,YAAE,EADqD;AAEvD,AF3BF,iBE2BW,MF3BX,IAAA,GEyByD;AAGvD,gBAAQ,KAAK,GAAL,CAAQ,KAAR,CAAA,IAAA,EAAY,KAAZ;AAH+C,KAAzD;AAKD,CAhBD;AAkBA,WAAA,WAAA,CAAY,EAAZ,CAAyB,QAAzB,EAAmC,UAAC,CAAD,EAAI,EAAJ,EAAU;AF/B5C,QE+BwC,KAAA,GAAA;AACvC,AF9BF,SAAA,EE8BS,UF9BT,CAA4B,GE8B1B,GAAwB,GF9B1B,CE8BE,CF9B2C;AE+B3C,eAAA,WAAA,CAAY,UAAZ,CAAwC,eAAxC,EAAyD;AACvD,YAAE,EADqD;AAEvD,iBAAS,QAF8C;AAGvD,AFjCI,gBEiCI,KFjCK,SAAS,aAAT,CAAuB,QAAvB,CAAT;AE8BmD,AF7BzD,KE6BA,cF7BO,GAAP,GAAa,SAAb;AEkCD,AFjCC,CE0BF,kBF1BS,IAAP,GAAc,iBAAd;AEmCF,AFlCE,OEkCK,cAAP,AFlCW,GEkCa,CFlCtB,CAAc,UEkCQ,CFlCtB,CAA0B,MAA1B;AEmCA,AFlCA,WEkCO,KAAP,GFlCA,CAAA,CAAA,CAAA,UAAA,EAAO,IAAI,OAAJ,CAAkB,UAAC,OAAD,EAAQ;AEmClC,AFlCG,CEgCJ,sBFhCW,gBAAP,CAAwB,MAAxB,EAAgC,YAAA;AEoCpC,AFpC0C,WEoC1C,WAAA,CAAY,EAAZ,CAAiC,CFpCS,SAAA,MEoC1C,EAAmD,UAAO,CAAP,EAAU,EAAV,EAAgB;AFpChB,QEoCY,KAAA,GAAA,CFpC3D;AACD,aAFM,CAAP,CAAA;;;AAGD;AAED,SAAA,YAAA,CAA4B,UAA5B,EAA8C,QAA9C,EAAuE;AEiCrE,yBAAA,CAAA,KAAA,WAAA,WAAA,EAAY,UAAZ;0BAAwC;;AACtC,4BAAE;AACF,iCAAS;AFlCL,yCAAqB,MAAM,IAAN,CACzB,SAAS,gBAAT,CAA0B,0BAA1B,CADyB,EAEzB,IAFyB,CAEpB,UAAC,CAAD,EAAE;AEiCC,AFjCI,2BEiCJ,CAAA,CAAA,CAAA,CFjCI,CAAC,EAAE,EAAH,GEiCJ,EAAM,iBAAA,YAAA,EAAN,CAAA;AFjCS,qBAFQ,CAArB;AEgCN,AF7BA,uBE6BA,CF7BI,CAAC,GE6BL,CAAA,EAAA,EAAA,GAAA,MAAA,CAAA,AF7BA,EEgCE,AFhCuB,GEgCvB,IFhCuB,CAAA,CEgCvB,AFhCuB,CAAA,EEgCf,GAAA,IAAA,CFhCe,CEgCvB,AFhCuB,IE6BzB,EAAA,CAAA;AF5BmB,2BAAA,CAAA,CAAA,CAAA,SAAA,EAAM,OAAO,QAAP,CAAgB,UAAtB,CAAA;;AAAb,iCAAa,GAAA,IAAA,EAAb;AACN,2BAAA,CAAA,CAAA,CAAA,UAAA,EAAO,IAAI,OAAJ,CAAkB,UAAC,OAAD,EAAQ;AEgClC,AF/BG,CEyBJ,2BFzBQ,QAAQ,QAAR,CAAiB,GAArB,EAA0B;AACxB,oCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,sBAAD,EAAyB,QAAQ,QAAR,CAAiB,GAA1C,CAAlB;AACA,gCAAI,UAAJ,EAAgB;AACd,wCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,YAAD,EAAe,QAAQ,GAAvB,CAAlB;AACA,wCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,WAAD,EAAc,QAAQ,GAAtB,CAAlB;AACD;AACF;AAED,gCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,aAAD,EAAgB,QAAQ,GAAxB,EAA6B,QAA7B,CAAlB;AACA,gCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,SAAD,EAAY,QAAQ,GAApB,EAAyB,UAAzB,CAAlB;AACA,gCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,aAAD,EAAgB,QAAQ,GAAxB,EAA6B,eAA7B,CAAlB;AACA,gCAAQ,GAAR,CAAY,KAAZ,CAAkB,CAAC,OAAD,CAAlB;AACD,qBAbM,CAAP,CAAA;;;;AAcD","file":"main.0a6e71c8.map","sourceRoot":"..\\src-client","sourcesContent":["export function handlePromise(promise: Promise<any>): void {\r\n  if (!promise) return\r\n  promise.catch((error: Error) => {\r\n    console.error(error)\r\n  })\r\n}\r\nimport { lstatSync, existsSync } from 'fs'\r\nexport function isFileSync(filePath: string) {\r\n  if (!existsSync(filePath)) return false\r\n  return lstatSync(filePath).isFile()\r\n}\r\n\r\nexport function resolveElement(\r\n  root: Element,\r\n  pathToToken: Array<{ tag: string; index: number }>,\r\n): Element | undefined {\r\n  let element = root\r\n  for (const token of pathToToken) {\r\n    const candidateElement: HTMLElement | null = element\r\n      .querySelectorAll(`:scope > ${token.tag}`)\r\n      .item(token.index) as HTMLElement\r\n    if (candidateElement) {\r\n      element = candidateElement\r\n    } else {\r\n      break\r\n    }\r\n  }\r\n\r\n  if (element === root) return undefined // Do not jump to the top of the preview for bad syncs\r\n  return element\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst fs = tslib_1.__importStar(require(\"fs\"));\r\nconst atom_1 = require(\"atom\");\r\nconst electron_1 = require(\"electron\");\r\nconst fileUriToPath = require(\"file-uri-to-path\");\r\nconst util_1 = require(\"../util\");\r\nclass WebviewHandler {\r\n    constructor(init) {\r\n        this.emitter = new atom_1.Emitter();\r\n        this.disposables = new atom_1.CompositeDisposable();\r\n        this.destroyed = false;\r\n        this.zoomLevel = 0;\r\n        this.replyCallbacks = new Map();\r\n        this.replyCallbackId = 0;\r\n        this._element = document.createElement('webview');\r\n        this._element.classList.add('markdown-preview-plus', 'native-key-bindings');\r\n        this._element.disablewebsecurity = 'true';\r\n        this._element.nodeintegration = 'true';\r\n        this._element.src = `file:///${__dirname}/../../client/template.html`;\r\n        this._element.style.width = '100%';\r\n        this._element.style.height = '100%';\r\n        this._element.addEventListener('ipc-message', (e) => {\r\n            switch (e.channel) {\r\n                case 'zoom-in':\r\n                    this.zoomIn();\r\n                    break;\r\n                case 'zoom-out':\r\n                    this.zoomOut();\r\n                    break;\r\n                case 'did-scroll-preview':\r\n                    this.emitter.emit('did-scroll-preview', e.args[0]);\r\n                    break;\r\n                case 'request-reply': {\r\n                    const { id, request, result } = e.args[0];\r\n                    const cb = this.replyCallbacks.get(id);\r\n                    if (cb && request === cb.request) {\r\n                        const callback = cb.callback;\r\n                        callback(result);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        this._element.addEventListener('will-navigate', async (e) => {\r\n            if (e.url.startsWith('file://')) {\r\n                util_1.handlePromise(atom.workspace.open(fileUriToPath(e.url)));\r\n            }\r\n            else {\r\n                electron_1.shell.openExternal(e.url);\r\n            }\r\n        });\r\n        this.disposables.add(atom.styles.onDidAddStyleElement(() => {\r\n            this.updateStyles();\r\n        }), atom.styles.onDidRemoveStyleElement(() => {\r\n            this.updateStyles();\r\n        }), atom.styles.onDidUpdateStyleElement(() => {\r\n            this.updateStyles();\r\n        }));\r\n        const onload = () => {\r\n            if (this.destroyed)\r\n                return;\r\n            this._element.setZoomLevel(this.zoomLevel);\r\n            this.updateStyles();\r\n            init();\r\n        };\r\n        this._element.addEventListener('dom-ready', onload);\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    async runJS(js) {\r\n        return new Promise((resolve) => this._element.executeJavaScript(js, false, resolve));\r\n    }\r\n    destroy() {\r\n        if (this.destroyed)\r\n            return;\r\n        this.destroyed = true;\r\n        this.disposables.dispose();\r\n        this._element.remove();\r\n    }\r\n    async update(html, renderLaTeX, mjrenderer) {\r\n        if (this.destroyed)\r\n            return undefined;\r\n        return this.runRequest('update-preview', {\r\n            html,\r\n            renderLaTeX,\r\n            mjrenderer,\r\n        });\r\n    }\r\n    setSourceMap(map) {\r\n        this._element.send('set-source-map', { map });\r\n    }\r\n    setUseGitHubStyle(value) {\r\n        this._element.send('use-github-style', { value });\r\n    }\r\n    setBasePath(path) {\r\n        this._element.send('set-base-path', { path });\r\n    }\r\n    init(atomHome, numberEqns) {\r\n        this._element.send('init', { atomHome, numberEqns });\r\n    }\r\n    updateImages(oldSource, version) {\r\n        this._element.send('update-images', {\r\n            oldsrc: oldSource,\r\n            v: version,\r\n        });\r\n    }\r\n    saveToPDF(filePath) {\r\n        this._element.printToPDF({}, (error, data) => {\r\n            if (error) {\r\n                atom.notifications.addError('Failed saving to PDF', {\r\n                    description: error.toString(),\r\n                    dismissable: true,\r\n                    stack: error.stack,\r\n                });\r\n                return;\r\n            }\r\n            fs.writeFileSync(filePath, data);\r\n        });\r\n    }\r\n    sync(line) {\r\n        this._element.send('sync', { line });\r\n    }\r\n    async syncSource() {\r\n        return this.runRequest('sync-source', {});\r\n    }\r\n    scrollSync(firstLine, lastLine) {\r\n        this._element.send('scroll-sync', { firstLine, lastLine });\r\n    }\r\n    zoomIn() {\r\n        this.zoomLevel += 0.1;\r\n        this._element.setZoomLevel(this.zoomLevel);\r\n    }\r\n    zoomOut() {\r\n        this.zoomLevel -= 0.1;\r\n        this._element.setZoomLevel(this.zoomLevel);\r\n    }\r\n    resetZoom() {\r\n        this.zoomLevel = 0;\r\n        this._element.setZoomLevel(this.zoomLevel);\r\n    }\r\n    print() {\r\n        this._element.print();\r\n    }\r\n    openDevTools() {\r\n        this._element.openDevTools();\r\n    }\r\n    async reload() {\r\n        await this.runRequest('reload', {});\r\n        this._element.reload();\r\n    }\r\n    error(msg) {\r\n        this._element.send('error', { msg });\r\n    }\r\n    async getTeXConfig() {\r\n        return this.runRequest('get-tex-config', {});\r\n    }\r\n    async runRequest(request, args) {\r\n        const id = this.replyCallbackId++;\r\n        return new Promise((resolve) => {\r\n            this.replyCallbacks.set(id, {\r\n                request: request,\r\n                callback: (result) => {\r\n                    this.replyCallbacks.delete(id);\r\n                    resolve(result);\r\n                },\r\n            });\r\n            const newargs = Object.assign({ id }, args);\r\n            this._element.send(request, newargs);\r\n        });\r\n    }\r\n    updateStyles() {\r\n        const styles = [];\r\n        for (const se of atom.styles.getStyleElements()) {\r\n            styles.push(se.innerHTML);\r\n        }\r\n        this._element.send('style', { styles });\r\n    }\r\n}\r\nexports.WebviewHandler = WebviewHandler;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vidmlldy1oYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLXByZXZpZXctdmlldy93ZWJ2aWV3LWhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsK0NBQXdCO0FBQ3hCLCtCQUFtRDtBQUNuRCx1Q0FBNEM7QUFDNUMsa0RBQWtEO0FBRWxELGtDQUF1QztBQVl2QztJQWNFLFlBQVksSUFBZ0I7UUFiWixZQUFPLEdBQUcsSUFBSSxjQUFPLEVBS2xDLENBQUE7UUFDTyxnQkFBVyxHQUFHLElBQUksMEJBQW1CLEVBQUUsQ0FBQTtRQUV6QyxjQUFTLEdBQUcsS0FBSyxDQUFBO1FBQ2pCLGNBQVMsR0FBRyxDQUFDLENBQUE7UUFDYixtQkFBYyxHQUFHLElBQUksR0FBRyxFQUErQixDQUFBO1FBQ3ZELG9CQUFlLEdBQUcsQ0FBQyxDQUFBO1FBR3pCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNqRCxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLEVBQUUscUJBQXFCLENBQUMsQ0FBQTtRQUMzRSxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQTtRQUN6QyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUE7UUFDdEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsV0FBVyxTQUFTLDZCQUE2QixDQUFBO1FBQ3JFLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUE7UUFDbEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUM1QixhQUFhLEVBQ2IsQ0FBQyxDQUFpQyxFQUFFLEVBQUU7WUFDcEMs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QTtnQkFDakIsQ0FBQzthQUN3QixDQUFDLENBQUE7WUFDNUIsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFBO1lBQzNDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFJLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUN6QyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTyxZQUFZO1FBQ2xCLE1BQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQTtRQUMzQixLQUFLLE1BQU0sRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtZQUMvQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQTtTQUMxQjtRQUNELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFVLE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUE7SUFDbEQsQ0FBQztDQUNGO0FBM05ELHdDQTJOQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgeyBFbWl0dGVyLCBDb21wb3NpdGVEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSdcclxuaW1wb3J0IHsgV2Vidmlld1RhZywgc2hlbGwgfSBmcm9tICdlbGVjdHJvbidcclxuaW1wb3J0IGZpbGVVcmlUb1BhdGggPSByZXF1aXJlKCdmaWxlLXVyaS10by1wYXRoJylcclxuXHJcbmltcG9ydCB7IGhhbmRsZVByb21pc2UgfSBmcm9tICcuLi91dGlsJ1xyXG5pbXBvcnQgeyBSZXF1ZXN0UmVwbHlNYXAsIENoYW5uZWxNYXAgfSBmcm9tICcuLi8uLi9zcmMtY2xpZW50L2lwYydcclxuXHJcbmV4cG9ydCB0eXBlIFJlcGx5Q2FsbGJhY2tTdHJ1Y3Q8XHJcbiAgVCBleHRlbmRzIGtleW9mIFJlcXVlc3RSZXBseU1hcCA9IGtleW9mIFJlcXVlc3RSZXBseU1hcFxyXG4+ID0ge1xyXG4gIFtLIGluIGtleW9mIFJlcXVlc3RSZXBseU1hcF06IHtcclxuICAgIHJlcXVlc3Q6IEtcclxuICAgIGNhbGxiYWNrOiAocmVwbHk6IFJlcXVlc3RSZXBseU1hcFtLXSkgPT4gdm9pZFxyXG4gIH1cclxufVtUXVxyXG5cclxuZXhwb3J0IGNsYXNzIFdlYnZpZXdIYW5kbGVyIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgZW1pdHRlciA9IG5ldyBFbWl0dGVyPFxyXG4gICAge30sXHJcbiAgICB7XHJcbiAgICAgICdkaWQtc2Nyb2xsLXByZXZpZXcnOiB7IG1pbjogbnVtYmVyOyBtYXg6IG51bWJlciB9XHJcbiAgICB9XHJcbiAgPigpXHJcbiAgcHJvdGVjdGVkIGRpc3Bvc2FibGVzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IFdlYnZpZXdUYWdcclxuICBwcml2YXRlIGRlc3Ryb3llZCA9IGZhbHNlXHJcbiAgcHJpdmF0ZSB6b29tTGV2ZWwgPSAwXHJcbiAgcHJpdmF0ZSByZXBseUNhbGxiYWNrcyA9IG5ldyBNYXA8bnVtYmVyLCBSZXBseUNhbGxiYWNrU3RydWN0PigpXHJcbiAgcHJpdmF0ZSByZXBseUNhbGxiYWNrSWQgPSAwXHJcblxyXG4gIGNvbnN0cnVjdG9yKGluaXQ6ICgpID0+IHZvaWQpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd3ZWJ2aWV3JylcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWFya2Rvd24tcHJldmlldy1wbHVzJywgJ25hdGl2ZS1rZXktYmluZGluZ3MnKVxyXG4gICAgdGhpcy5fZWxlbWVudC5kaXNhYmxld2Vic2VjdXJpdHkgPSAndHJ1ZSdcclxuICAgIHRoaXMuX2VsZW1lbnQubm9kZWludGVncmF0aW9uID0gJ3RydWUnXHJcbiAgICB0aGlzLl9lbGVtZW50LnNyYyA9IGBmaWxlOi8vLyR7X19kaXJuYW1lfS8uLi8uLi9jbGllbnQvdGVtcGxhdGUuaHRtbGBcclxuICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSdcclxuICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnXHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdpcGMtbWVzc2FnZScsXHJcbiAgICAgIChlOiBFbGVjdHJvbi5JcGNNZXNzYWdlRXZlbnRDdXN0b20pID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGUuY2hhbm5lbCkge1xyXG4gICAgICAgICAgY2FzZSAnem9vbS1pbic6XHJcbiAgICAgICAgICAgIHRoaXMuem9vbUluKClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ3pvb20tb3V0JzpcclxuICAgICAgICAgICAgdGhpcy56b29tT3V0KClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2RpZC1zY3JvbGwtcHJldmlldyc6XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5lbWl0KCdkaWQtc2Nyb2xsLXByZXZpZXcnLCBlLmFyZ3NbMF0pXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAvLyByZXBsaWVzXHJcbiAgICAgICAgICBjYXNlICdyZXF1ZXN0LXJlcGx5Jzoge1xyXG4gICAgICAgICAgICBjb25zdCB7IGlkLCByZXF1ZXN0LCByZXN1bHQgfSA9IGUuYXJnc1swXVxyXG4gICAgICAgICAgICBjb25zdCBjYiA9IHRoaXMucmVwbHlDYWxsYmFja3MuZ2V0KGlkKVxyXG4gICAgICAgICAgICBpZiAoY2IgJiYgcmVxdWVzdCA9PT0gY2IucmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrOiAocjogYW55KSA9PiB2b2lkID0gY2IuY2FsbGJhY2tcclxuICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICApXHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dpbGwtbmF2aWdhdGUnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS51cmwuc3RhcnRzV2l0aCgnZmlsZTovLycpKSB7XHJcbiAgICAgICAgaGFuZGxlUHJvbWlzZShhdG9tLndvcmtzcGFjZS5vcGVuKGZpbGVVcmlUb1BhdGgoZS51cmwpKSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzaGVsbC5vcGVuRXh0ZXJuYWwoZS51cmwpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoXHJcbiAgICAgIGF0b20uc3R5bGVzLm9uRGlkQWRkU3R5bGVFbGVtZW50KCgpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpXHJcbiAgICAgIH0pLFxyXG4gICAgICBhdG9tLnN0eWxlcy5vbkRpZFJlbW92ZVN0eWxlRWxlbWVudCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKVxyXG4gICAgICB9KSxcclxuICAgICAgYXRvbS5zdHlsZXMub25EaWRVcGRhdGVTdHlsZUVsZW1lbnQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKClcclxuICAgICAgfSksXHJcbiAgICApXHJcblxyXG4gICAgY29uc3Qgb25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVyblxyXG4gICAgICB0aGlzLl9lbGVtZW50LnNldFpvb21MZXZlbCh0aGlzLnpvb21MZXZlbClcclxuICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKVxyXG4gICAgICBpbml0KClcclxuICAgIH1cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZG9tLXJlYWR5Jywgb25sb2FkKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgcnVuSlM8VD4oanM6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlKSA9PlxyXG4gICAgICB0aGlzLl9lbGVtZW50LmV4ZWN1dGVKYXZhU2NyaXB0KGpzLCBmYWxzZSwgcmVzb2x2ZSksXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLmRlc3Ryb3llZCkgcmV0dXJuXHJcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWVcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgdXBkYXRlKFxyXG4gICAgaHRtbDogc3RyaW5nLFxyXG4gICAgcmVuZGVyTGFUZVg6IGJvb2xlYW4sXHJcbiAgICBtanJlbmRlcmVyOiBNYXRoSmF4UmVuZGVyZXIsXHJcbiAgKSB7XHJcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybiB1bmRlZmluZWRcclxuICAgIHJldHVybiB0aGlzLnJ1blJlcXVlc3QoJ3VwZGF0ZS1wcmV2aWV3Jywge1xyXG4gICAgICBodG1sLFxyXG4gICAgICByZW5kZXJMYVRlWCxcclxuICAgICAgbWpyZW5kZXJlcixcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0U291cmNlTWFwKG1hcDoge1xyXG4gICAgW2xpbmU6IG51bWJlcl06IHsgdGFnOiBzdHJpbmc7IGluZGV4OiBudW1iZXIgfVtdXHJcbiAgfSkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5zZW5kPCdzZXQtc291cmNlLW1hcCc+KCdzZXQtc291cmNlLW1hcCcsIHsgbWFwIH0pXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0VXNlR2l0SHViU3R5bGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuc2VuZDwndXNlLWdpdGh1Yi1zdHlsZSc+KCd1c2UtZ2l0aHViLXN0eWxlJywgeyB2YWx1ZSB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldEJhc2VQYXRoKHBhdGg/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuc2VuZDwnc2V0LWJhc2UtcGF0aCc+KCdzZXQtYmFzZS1wYXRoJywgeyBwYXRoIH0pXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaW5pdChhdG9tSG9tZTogc3RyaW5nLCBudW1iZXJFcW5zOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnNlbmQ8J2luaXQnPignaW5pdCcsIHsgYXRvbUhvbWUsIG51bWJlckVxbnMgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVJbWFnZXMob2xkU291cmNlOiBzdHJpbmcsIHZlcnNpb246IG51bWJlciB8IGZhbHNlKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnNlbmQ8J3VwZGF0ZS1pbWFnZXMnPigndXBkYXRlLWltYWdlcycsIHtcclxuICAgICAgb2xkc3JjOiBvbGRTb3VyY2UsXHJcbiAgICAgIHY6IHZlcnNpb24sXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNhdmVUb1BERihmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByaW50VG9QREYoe30sIChlcnJvciwgZGF0YSkgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRXJyb3IoJ0ZhaWxlZCBzYXZpbmcgdG8gUERGJywge1xyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICBkaXNtaXNzYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGRhdGEpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN5bmMobGluZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnNlbmQ8J3N5bmMnPignc3luYycsIHsgbGluZSB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHN5bmNTb3VyY2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ydW5SZXF1ZXN0KCdzeW5jLXNvdXJjZScsIHt9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNjcm9sbFN5bmMoZmlyc3RMaW5lOiBudW1iZXIsIGxhc3RMaW5lOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuc2VuZDwnc2Nyb2xsLXN5bmMnPignc2Nyb2xsLXN5bmMnLCB7IGZpcnN0TGluZSwgbGFzdExpbmUgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyB6b29tSW4oKSB7XHJcbiAgICB0aGlzLnpvb21MZXZlbCArPSAwLjFcclxuICAgIHRoaXMuX2VsZW1lbnQuc2V0Wm9vbUxldmVsKHRoaXMuem9vbUxldmVsKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHpvb21PdXQoKSB7XHJcbiAgICB0aGlzLnpvb21MZXZlbCAtPSAwLjFcclxuICAgIHRoaXMuX2VsZW1lbnQuc2V0Wm9vbUxldmVsKHRoaXMuem9vbUxldmVsKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0Wm9vbSgpIHtcclxuICAgIHRoaXMuem9vbUxldmVsID0gMFxyXG4gICAgdGhpcy5fZWxlbWVudC5zZXRab29tTGV2ZWwodGhpcy56b29tTGV2ZWwpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcHJpbnQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByaW50KClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvcGVuRGV2VG9vbHMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50Lm9wZW5EZXZUb29scygpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgcmVsb2FkKCkge1xyXG4gICAgYXdhaXQgdGhpcy5ydW5SZXF1ZXN0KCdyZWxvYWQnLCB7fSlcclxuICAgIHRoaXMuX2VsZW1lbnQucmVsb2FkKClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlcnJvcihtc2c6IHN0cmluZykge1xyXG4gICAgdGhpcy5fZWxlbWVudC5zZW5kPCdlcnJvcic+KCdlcnJvcicsIHsgbXNnIH0pXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgZ2V0VGVYQ29uZmlnKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucnVuUmVxdWVzdCgnZ2V0LXRleC1jb25maWcnLCB7fSlcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhc3luYyBydW5SZXF1ZXN0PFQgZXh0ZW5kcyBrZXlvZiBSZXF1ZXN0UmVwbHlNYXA+KFxyXG4gICAgcmVxdWVzdDogVCxcclxuICAgIGFyZ3M6IHsgW0sgaW4gRXhjbHVkZTxrZXlvZiBDaGFubmVsTWFwW1RdLCAnaWQnPl06IENoYW5uZWxNYXBbVF1bS10gfSxcclxuICApIHtcclxuICAgIGNvbnN0IGlkID0gdGhpcy5yZXBseUNhbGxiYWNrSWQrK1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFJlcXVlc3RSZXBseU1hcFtUXT4oKHJlc29sdmUpID0+IHtcclxuICAgICAgdGhpcy5yZXBseUNhbGxiYWNrcy5zZXQoaWQsIHtcclxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxyXG4gICAgICAgIGNhbGxiYWNrOiAocmVzdWx0OiBSZXF1ZXN0UmVwbHlNYXBbVF0pID0+IHtcclxuICAgICAgICAgIHRoaXMucmVwbHlDYWxsYmFja3MuZGVsZXRlKGlkKVxyXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgICAgfSxcclxuICAgICAgfSBhcyBSZXBseUNhbGxiYWNrU3RydWN0PFQ+KVxyXG4gICAgICBjb25zdCBuZXdhcmdzID0gT2JqZWN0LmFzc2lnbih7IGlkIH0sIGFyZ3MpXHJcbiAgICAgIHRoaXMuX2VsZW1lbnQuc2VuZDxUPihyZXF1ZXN0LCBuZXdhcmdzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlU3R5bGVzKCkge1xyXG4gICAgY29uc3Qgc3R5bGVzOiBzdHJpbmdbXSA9IFtdXHJcbiAgICBmb3IgKGNvbnN0IHNlIG9mIGF0b20uc3R5bGVzLmdldFN0eWxlRWxlbWVudHMoKSkge1xyXG4gICAgICBzdHlsZXMucHVzaChzZS5pbm5lckhUTUwpXHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbGVtZW50LnNlbmQ8J3N0eWxlJz4oJ3N0eWxlJywgeyBzdHlsZXMgfSlcclxuICB9XHJcbn1cclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _ = require(\"lodash\");\r\nconst CP = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst path = require(\"path\");\r\nconst util_1 = require(\"./util\");\r\nconst getMathJaxPath = (function () {\r\n    let cached = null;\r\n    return function () {\r\n        if (cached !== null) {\r\n            return cached;\r\n        }\r\n        try {\r\n            return (cached = require.resolve('mathjax'));\r\n        }\r\n        catch (e) {\r\n            return '';\r\n        }\r\n    };\r\n})();\r\nfunction findFileRecursive(filePath, fileName) {\r\n    const bibFile = path.join(filePath, '../', fileName);\r\n    if (fs.existsSync(bibFile)) {\r\n        return bibFile;\r\n    }\r\n    else {\r\n        const newPath = path.join(bibFile, '..');\r\n        if (newPath !== filePath && !_.includes(atom.project.getPaths(), newPath)) {\r\n            return findFileRecursive(newPath, fileName);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\nfunction setPandocOptions(filePath, renderMath) {\r\n    const opts = { maxBuffer: Infinity };\r\n    if (filePath !== undefined) {\r\n        opts.cwd = path.dirname(filePath);\r\n    }\r\n    const mathjaxPath = getMathJaxPath();\r\n    const config = util_1.atomConfig().pandocConfig;\r\n    const args = {\r\n        from: config.pandocMarkdownFlavor,\r\n        to: 'html',\r\n        mathjax: renderMath ? mathjaxPath : undefined,\r\n        filter: config.pandocFilters,\r\n    };\r\n    if (config.pandocBibliography) {\r\n        args.filter.push('pandoc-citeproc');\r\n        let bibFile = filePath && findFileRecursive(filePath, config.pandocBIBFile);\r\n        if (!bibFile) {\r\n            bibFile = config.pandocBIBFileFallback;\r\n        }\r\n        args.bibliography = bibFile ? bibFile : undefined;\r\n        let cslFile = filePath && findFileRecursive(filePath, config.pandocCSLFile);\r\n        if (!cslFile) {\r\n            cslFile = config.pandocCSLFileFallback;\r\n        }\r\n        args.csl = cslFile ? cslFile : undefined;\r\n    }\r\n    return { args, opts };\r\n}\r\nfunction handleError(error, html, renderMath) {\r\n    const err = new Error(error);\r\n    err.html = handleSuccess(html, renderMath);\r\n    throw err;\r\n}\r\nfunction handleMath(html) {\r\n    const doc = document.createElement('div');\r\n    doc.innerHTML = html;\r\n    doc.querySelectorAll('.math').forEach(function (elem) {\r\n        let math = elem.innerText;\r\n        const mode = math.indexOf('\\\\[') > -1 ? '; mode=display' : '';\r\n        math = math.replace(/\\\\[[()\\]]/g, '');\r\n        return (elem.outerHTML =\r\n            '<span class=\"math\">' +\r\n                `<script type='math/tex${mode}'>${math}</script>` +\r\n                '</span>');\r\n    });\r\n    return doc.innerHTML;\r\n}\r\nfunction removeReferences(html) {\r\n    const doc = document.createElement('div');\r\n    doc.innerHTML = html;\r\n    doc.querySelectorAll('.references').forEach((elem) => {\r\n        elem.remove();\r\n    });\r\n    return doc.innerHTML;\r\n}\r\nfunction handleSuccess(html, renderMath) {\r\n    if (renderMath) {\r\n        html = handleMath(html);\r\n    }\r\n    if (util_1.atomConfig().pandocConfig.pandocRemoveReferences) {\r\n        html = removeReferences(html);\r\n    }\r\n    return html;\r\n}\r\nfunction handleResponse(error, html, renderMath) {\r\n    if (error) {\r\n        return handleError(error, html, renderMath);\r\n    }\r\n    else {\r\n        return handleSuccess(html, renderMath);\r\n    }\r\n}\r\nasync function renderPandoc(text, filePath, renderMath) {\r\n    const { args, opts } = setPandocOptions(filePath, renderMath);\r\n    return new Promise((resolve, reject) => {\r\n        const cp = CP.execFile(util_1.atomConfig().pandocConfig.pandocPath, getArguments(args), opts, function (error, stdout, stderr) {\r\n            if (error) {\r\n                atom.notifications.addError(error.toString(), {\r\n                    stack: error.stack,\r\n                    dismissable: true,\r\n                });\r\n                reject(error);\r\n            }\r\n            try {\r\n                const result = handleResponse(stderr || '', stdout || '', renderMath);\r\n                resolve(result);\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n        cp.stdin.write(text);\r\n        cp.stdin.end();\r\n    });\r\n}\r\nexports.renderPandoc = renderPandoc;\r\nfunction getArguments(iargs) {\r\n    const args = _.reduce(iargs, function (res, val, key) {\r\n        if (val && !_.isEmpty(val)) {\r\n            const nval = _.flatten([val]);\r\n            _.forEach(nval, function (v) {\r\n                if (!_.isEmpty(v)) {\r\n                    res.push(`--${key}=${v}`);\r\n                }\r\n            });\r\n        }\r\n        return res;\r\n    }, []);\r\n    const res = [];\r\n    for (const val of [...args, ...util_1.atomConfig().pandocConfig.pandocArguments]) {\r\n        const newval = val.replace(/^(--[\\w\\-]+)\\s(.+)$/i, '$1=$2');\r\n        if (newval.substr(0, 1) === '-') {\r\n            res.push(newval);\r\n        }\r\n    }\r\n    return res;\r\n}\r\nexports.testing = {\r\n    setPandocOptions,\r\n    getArguments,\r\n    findFileRecursive,\r\n};\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuZG9jLWhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYW5kb2MtaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNEJBQTRCO0FBQzVCLG9DQUFvQztBQUNwQyx5QkFBeUI7QUFDekIsNkJBQTZCO0FBQzdCLGlDQUFtQztBQUtuQyxNQUFNLGNBQWMsR0FBRyxDQUFDO0lBQ3RCLElBQUksTUFBTSxHQUFrQixJQUFJLENBQUE7SUFDaEMsT0FBTztRQUNMLElBQUksTUFBTSxLQUFLLElBQUksRUFBRTtZQUNuQixPQUFPLE1BQU0sQ0FBQTtTQUNkO1FBQ0QsSUFBSTtZQUNGLE9BQU8sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFBO1NBQzdDO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixPQUFPLEVBQUUsQ0FBQTtTQUNWO0lBQ0gsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtBQUVKLDJCQUEyQixRQUFnQixFQUFFLFFBQWdCO0lBQzNELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUNwRCxJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDMUIsT0FBTyxPQUFPLENBQUE7S0FDZjtTQUFNO1FBQ0wsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDeEMsSUFBSSxPQUFPLEtBQUssUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFO1lBQ3pFLE9BQU8saUJBQWlCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFBO1NBQzVDO2FBQU07WUFDTCxPQUFPLEtB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LElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUNqQixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7aUJBQzFCO1lBQ0gsQ0FBQyxDQUFDLENBQUE7U0FDSDtRQUNELE9BQU8sR0FBRyxDQUFBO0lBQ1osQ0FBQyxFQUNELEVBQUUsQ0FDSCxDQUFBO0lBQ0QsTUFBTSxHQUFHLEdBQWEsRUFBRSxDQUFBO0lBQ3hCLEtBQUssTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksRUFBRSxHQUFHLGlCQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDekUsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUMzRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUMvQixHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1NBQ2pCO0tBQ0Y7SUFDRCxPQUFPLEdBQUcsQ0FBQTtBQUNaLENBQUM7QUFFWSxRQUFBLE9BQU8sR0FBRztJQUNyQixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGlCQUFpQjtDQUNsQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKVxyXG5pbXBvcnQgQ1AgPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJylcclxuaW1wb3J0IGZzID0gcmVxdWlyZSgnZnMnKVxyXG5pbXBvcnQgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxyXG5pbXBvcnQgeyBhdG9tQ29uZmlnIH0gZnJvbSAnLi91dGlsJ1xyXG5cclxuLyoqXHJcbiAqIFNldHMgbG9jYWwgbWF0aGpheFBhdGggaWYgYXZhaWxhYmxlXHJcbiAqL1xyXG5jb25zdCBnZXRNYXRoSmF4UGF0aCA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgY2FjaGVkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIGlmIChjYWNoZWQgIT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGNhY2hlZFxyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIChjYWNoZWQgPSByZXF1aXJlLnJlc29sdmUoJ21hdGhqYXgnKSlcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuICcnXHJcbiAgICB9XHJcbiAgfVxyXG59KSgpXHJcblxyXG5mdW5jdGlvbiBmaW5kRmlsZVJlY3Vyc2l2ZShmaWxlUGF0aDogc3RyaW5nLCBmaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHwgZmFsc2Uge1xyXG4gIGNvbnN0IGJpYkZpbGUgPSBwYXRoLmpvaW4oZmlsZVBhdGgsICcuLi8nLCBmaWxlTmFtZSlcclxuICBpZiAoZnMuZXhpc3RzU3luYyhiaWJGaWxlKSkge1xyXG4gICAgcmV0dXJuIGJpYkZpbGVcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgbmV3UGF0aCA9IHBhdGguam9pbihiaWJGaWxlLCAnLi4nKVxyXG4gICAgaWYgKG5ld1BhdGggIT09IGZpbGVQYXRoICYmICFfLmluY2x1ZGVzKGF0b20ucHJvamVjdC5nZXRQYXRocygpLCBuZXdQYXRoKSkge1xyXG4gICAgICByZXR1cm4gZmluZEZpbGVSZWN1cnNpdmUobmV3UGF0aCwgZmlsZU5hbWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIGV4cG9ydGVkIGZvciB0ZXN0c1xyXG5leHBvcnQgaW50ZXJmYWNlIEFyZ3Mge1xyXG4gIGZyb206IHN0cmluZ1xyXG4gIHRvOiAnaHRtbCdcclxuICBtYXRoamF4Pzogc3RyaW5nXHJcbiAgZmlsdGVyOiBzdHJpbmdbXVxyXG4gIGJpYmxpb2dyYXBoeT86IHN0cmluZ1xyXG4gIGNzbD86IHN0cmluZ1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQYW5kb2NPcHRpb25zKGZpbGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQsIHJlbmRlck1hdGg6IGJvb2xlYW4pIHtcclxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F0b20tY29tbXVuaXR5L21hcmtkb3duLXByZXZpZXctcGx1cy9pc3N1ZXMvMzE2XHJcbiAgY29uc3Qgb3B0czogQ1AuRXhlY0ZpbGVPcHRpb25zID0geyBtYXhCdWZmZXI6IEluZmluaXR5IH1cclxuICBpZiAoZmlsZVBhdGggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgb3B0cy5jd2QgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpXHJcbiAgfVxyXG4gIGNvbnN0IG1hdGhqYXhQYXRoID0gZ2V0TWF0aEpheFBhdGgoKVxyXG4gIGNvbnN0IGNvbmZpZyA9IGF0b21Db25maWcoKS5wYW5kb2NDb25maWdcclxuICBjb25zdCBhcmdzOiBBcmdzID0ge1xyXG4gICAgZnJvbTogY29uZmlnLnBhbmRvY01hcmtkb3duRmxhdm9yLFxyXG4gICAgdG86ICdodG1sJyxcclxuICAgIG1hdGhqYXg6IHJlbmRlck1hdGggPyBtYXRoamF4UGF0aCA6IHVuZGVmaW5lZCxcclxuICAgIGZpbHRlcjogY29uZmlnLnBhbmRvY0ZpbHRlcnMsXHJcbiAgfVxyXG4gIGlmIChjb25maWcucGFuZG9jQmlibGlvZ3JhcGh5KSB7XHJcbiAgICBhcmdzLmZpbHRlci5wdXNoKCdwYW5kb2MtY2l0ZXByb2MnKVxyXG4gICAgbGV0IGJpYkZpbGUgPSBmaWxlUGF0aCAmJiBmaW5kRmlsZVJlY3Vyc2l2ZShmaWxlUGF0aCwgY29uZmlnLnBhbmRvY0JJQkZpbGUpXHJcbiAgICBpZiAoIWJpYkZpbGUpIHtcclxuICAgICAgYmliRmlsZSA9IGNvbmZpZy5wYW5kb2NCSUJGaWxlRmFsbGJhY2tcclxuICAgIH1cclxuICAgIGFyZ3MuYmlibGlvZ3JhcGh5ID0gYmliRmlsZSA/IGJpYkZpbGUgOiB1bmRlZmluZWRcclxuICAgIGxldCBjc2xGaWxlID0gZmlsZVBhdGggJiYgZmluZEZpbGVSZWN1cnNpdmUoZmlsZVBhdGgsIGNvbmZpZy5wYW5kb2NDU0xGaWxlKVxyXG4gICAgaWYgKCFjc2xGaWxlKSB7XHJcbiAgICAgIGNzbEZpbGUgPSBjb25maWcucGFuZG9jQ1NMRmlsZUZhbGxiYWNrXHJcbiAgICB9XHJcbiAgICBhcmdzLmNzbCA9IGNzbEZpbGUgPyBjc2xGaWxlIDogdW5kZWZpbmVkXHJcbiAgfVxyXG4gIHJldHVybiB7IGFyZ3MsIG9wdHMgfVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlIGVycm9yIHJlc3BvbnNlIGZyb20gUGFuZG9jXHJcbiAqIEBwYXJhbSB7ZXJyb3J9IFJldHVybmVkIGVycm9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBSZXR1cm5lZCBIVE1MXHJcbiAqIEByZXR1cm4ge2FycmF5fSB3aXRoIEFyZ3VtZW50cyBmb3IgY2FsbGJhY2tGdW5jdGlvbiAoZXJyb3Igc2V0IHRvIG51bGwpXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcjogc3RyaW5nLCBodG1sOiBzdHJpbmcsIHJlbmRlck1hdGg6IGJvb2xlYW4pOiBuZXZlciB7XHJcbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yKSBhcyBFcnJvciAmIHsgaHRtbDogc3RyaW5nIH1cclxuICBlcnIuaHRtbCA9IGhhbmRsZVN1Y2Nlc3MoaHRtbCwgcmVuZGVyTWF0aClcclxuICB0aHJvdyBlcnJcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkanVzdHMgYWxsIG1hdGggZW52aXJvbm1lbnRzIGluIEhUTUxcclxuICogQHBhcmFtIHtzdHJpbmd9IEhUTUwgdG8gYmUgYWRqdXN0ZWRcclxuICogQHJldHVybiB7c3RyaW5nfSBIVE1MIHdpdGggYWRqdXN0ZWQgbWF0aCBlbnZpcm9ubWVudHNcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZU1hdGgoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBkb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIGRvYy5pbm5lckhUTUwgPSBodG1sXHJcbiAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXRoJykuZm9yRWFjaChmdW5jdGlvbihlbGVtKSB7XHJcbiAgICBsZXQgbWF0aCA9IChlbGVtIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHRcclxuICAgIC8vIFNldCBtb2RlIGlmIGl0IGlzIGJsb2NrIG1hdGhcclxuICAgIGNvbnN0IG1vZGUgPSBtYXRoLmluZGV4T2YoJ1xcXFxbJykgPiAtMSA/ICc7IG1vZGU9ZGlzcGxheScgOiAnJ1xyXG5cclxuICAgIC8vIFJlbW92ZSBzb3Vycm91bmRpbmcgXFxbIFxcXSBhbmQgXFwoIFxcKVxyXG4gICAgbWF0aCA9IG1hdGgucmVwbGFjZSgvXFxcXFtbKClcXF1dL2csICcnKVxyXG4gICAgcmV0dXJuIChlbGVtLm91dGVySFRNTCA9XHJcbiAgICAgICc8c3BhbiBjbGFzcz1cIm1hdGhcIj4nICtcclxuICAgICAgYDxzY3JpcHQgdHlwZT0nbWF0aC90ZXgke21vZGV9Jz4ke21hdGh9PC9zY3JpcHQ+YCArXHJcbiAgICAgICc8L3NwYW4+JylcclxuICB9KVxyXG5cclxuICByZXR1cm4gZG9jLmlubmVySFRNTFxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVSZWZlcmVuY2VzKGh0bWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgZG9jLmlubmVySFRNTCA9IGh0bWxcclxuICBkb2MucXVlcnlTZWxlY3RvckFsbCgnLnJlZmVyZW5jZXMnKS5mb3JFYWNoKChlbGVtKSA9PiB7XHJcbiAgICBlbGVtLnJlbW92ZSgpXHJcbiAgfSlcclxuICByZXR1cm4gZG9jLmlubmVySFRNTFxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgZnJvbSBQYW5kb2NcclxuICogQHBhcmFtIFJldHVybmVkIEhUTUxcclxuICogQHJldHVybiBQb3NzaWJseSBtb2RpZmllZCByZXR1cm5lZCBIVE1MXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVTdWNjZXNzKGh0bWw6IHN0cmluZywgcmVuZGVyTWF0aDogYm9vbGVhbik6IHN0cmluZyB7XHJcbiAgaWYgKHJlbmRlck1hdGgpIHtcclxuICAgIGh0bWwgPSBoYW5kbGVNYXRoKGh0bWwpXHJcbiAgfVxyXG4gIGlmIChhdG9tQ29uZmlnKCkucGFuZG9jQ29uZmlnLnBhbmRvY1JlbW92ZVJlZmVyZW5jZXMpIHtcclxuICAgIGh0bWwgPSByZW1vdmVSZWZlcmVuY2VzKGh0bWwpXHJcbiAgfVxyXG4gIHJldHVybiBodG1sXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgcmVzcG9uc2UgZnJvbSBQYW5kb2NcclxuICogQHBhcmFtIHtPYmplY3R9IGVycm9yIGlmIHRocm93blxyXG4gKiBAcGFyYW0ge3N0cmluZ30gUmV0dXJuZWQgSFRNTFxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoZXJyb3I6IHN0cmluZywgaHRtbDogc3RyaW5nLCByZW5kZXJNYXRoOiBib29sZWFuKSB7XHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IsIGh0bWwsIHJlbmRlck1hdGgpXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBoYW5kbGVTdWNjZXNzKGh0bWwsIHJlbmRlck1hdGgpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVycyBtYXJrZG93biB3aXRoIHBhbmRvY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnQgaW4gbWFya2Rvd25cclxuICogQHBhcmFtIHtib29sZWFufSB3aGV0aGVyIHRvIHJlbmRlciB0aGUgbWF0aCB3aXRoIG1hdGhqYXhcclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tGdW5jdGlvblxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlclBhbmRvYyhcclxuICB0ZXh0OiBzdHJpbmcsXHJcbiAgZmlsZVBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuICByZW5kZXJNYXRoOiBib29sZWFuLFxyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IHsgYXJncywgb3B0cyB9ID0gc2V0UGFuZG9jT3B0aW9ucyhmaWxlUGF0aCwgcmVuZGVyTWF0aClcclxuICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBjcCA9IENQLmV4ZWNGaWxlKFxyXG4gICAgICBhdG9tQ29uZmlnKCkucGFuZG9jQ29uZmlnLnBhbmRvY1BhdGgsXHJcbiAgICAgIGdldEFyZ3VtZW50cyhhcmdzKSxcclxuICAgICAgb3B0cyxcclxuICAgICAgZnVuY3Rpb24oZXJyb3IsIHN0ZG91dCwgc3RkZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRXJyb3IoZXJyb3IudG9TdHJpbmcoKSwge1xyXG4gICAgICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXHJcbiAgICAgICAgICAgIGRpc21pc3NhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIHJlamVjdChlcnJvcilcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZVJlc3BvbnNlKHN0ZGVyciB8fCAnJywgc3Rkb3V0IHx8ICcnLCByZW5kZXJNYXRoKVxyXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgcmVqZWN0KGUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgKVxyXG4gICAgY3Auc3RkaW4ud3JpdGUodGV4dClcclxuICAgIGNwLnN0ZGluLmVuZCgpXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QXJndW1lbnRzKGlhcmdzOiBBcmdzKSB7XHJcbiAgY29uc3QgYXJncyA9IF8ucmVkdWNlKFxyXG4gICAgaWFyZ3MsXHJcbiAgICBmdW5jdGlvbihyZXM6IHN0cmluZ1tdLCB2YWwsIGtleSkge1xyXG4gICAgICBpZiAodmFsICYmICFfLmlzRW1wdHkodmFsKSkge1xyXG4gICAgICAgIGNvbnN0IG52YWw6IHN0cmluZ1tdID0gXy5mbGF0dGVuKFt2YWxdKVxyXG4gICAgICAgIF8uZm9yRWFjaChudmFsLCBmdW5jdGlvbih2OiBzdHJpbmcpIHtcclxuICAgICAgICAgIGlmICghXy5pc0VtcHR5KHYpKSB7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKGAtLSR7a2V5fT0ke3Z9YClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgIH0sXHJcbiAgICBbXSxcclxuICApXHJcbiAgY29uc3QgcmVzOiBzdHJpbmdbXSA9IFtdXHJcbiAgZm9yIChjb25zdCB2YWwgb2YgWy4uLmFyZ3MsIC4uLmF0b21Db25maWcoKS5wYW5kb2NDb25maWcucGFuZG9jQXJndW1lbnRzXSkge1xyXG4gICAgY29uc3QgbmV3dmFsID0gdmFsLnJlcGxhY2UoL14oLS1bXFx3XFwtXSspXFxzKC4rKSQvaSwgJyQxPSQyJylcclxuICAgIGlmIChuZXd2YWwuc3Vic3RyKDAsIDEpID09PSAnLScpIHtcclxuICAgICAgcmVzLnB1c2gobmV3dmFsKVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB0ZXN0aW5nID0ge1xyXG4gIHNldFBhbmRvY09wdGlvbnMsXHJcbiAgZ2V0QXJndW1lbnRzLFxyXG4gIGZpbmRGaWxlUmVjdXJzaXZlLFxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction getLine(state, line) {\r\n    const pos = state.bMarks[line] + state.blkIndent;\r\n    const max = state.eMarks[line];\r\n    return state.src.substr(pos, max - pos);\r\n}\r\nfunction escapedSplit(str, openDelims, closeDelims) {\r\n    const result = [];\r\n    let pos = 0;\r\n    const max = str.length;\r\n    let ch;\r\n    let escapes = 0;\r\n    let lastPos = 0;\r\n    let lastDelim = 0;\r\n    let delimed = false;\r\n    let delimMaskMap;\r\n    let openDelimIdx = -1;\r\n    let closeDelimIdx = -1;\r\n    ch = str.charCodeAt(pos);\r\n    delimMaskMap = function (e) {\r\n        return str.substring(pos, pos + e.length) === e;\r\n    };\r\n    while (pos < max) {\r\n        openDelimIdx = openDelims.map(delimMaskMap).indexOf(true);\r\n        closeDelimIdx = closeDelims.map(delimMaskMap).indexOf(true);\r\n        if (openDelimIdx > -1 && escapes % 2 === 0 && !delimed) {\r\n            delimed = !delimed;\r\n            lastDelim = pos + openDelims[openDelimIdx].length - 1;\r\n            pos += openDelims[openDelimIdx].length - 1;\r\n        }\r\n        else if (closeDelimIdx > -1 && escapes % 2 === 0 && delimed) {\r\n            delimed = !delimed;\r\n            lastDelim = pos + closeDelims[closeDelimIdx].length - 1;\r\n            pos += closeDelims[closeDelimIdx].length - 1;\r\n        }\r\n        else if (ch === 0x7c && escapes % 2 === 0 && !delimed) {\r\n            result.push(str.substring(lastPos, pos));\r\n            lastPos = pos + 1;\r\n        }\r\n        else if (ch === 0x5c) {\r\n            escapes++;\r\n        }\r\n        else {\r\n            escapes = 0;\r\n        }\r\n        pos++;\r\n        if (pos === max && delimed) {\r\n            delimed = false;\r\n            pos = lastDelim + 1;\r\n        }\r\n        ch = str.charCodeAt(pos);\r\n    }\r\n    result.push(str.substring(lastPos));\r\n    return result;\r\n}\r\nfunction table(openDelims, closeDelims, state, startLine, endLine, silent) {\r\n    let ch;\r\n    let lineText;\r\n    let pos;\r\n    let i;\r\n    let nextLine;\r\n    let columns;\r\n    let columnCount;\r\n    let token;\r\n    let aligns;\r\n    let t;\r\n    let tableLines;\r\n    let tbodyLines;\r\n    if (startLine + 2 > endLine) {\r\n        return false;\r\n    }\r\n    nextLine = startLine + 1;\r\n    if (state.sCount[nextLine] < state.blkIndent) {\r\n        return false;\r\n    }\r\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\r\n    if (pos >= state.eMarks[nextLine]) {\r\n        return false;\r\n    }\r\n    ch = state.src.charCodeAt(pos);\r\n    if (ch !== 0x7c && ch !== 0x2d && ch !== 0x3a) {\r\n        return false;\r\n    }\r\n    lineText = getLine(state, startLine + 1);\r\n    if (!/^[-:| ]+$/.test(lineText)) {\r\n        return false;\r\n    }\r\n    columns = lineText.split('|');\r\n    aligns = [];\r\n    for (i = 0; i < columns.length; i++) {\r\n        t = columns[i].trim();\r\n        if (!t) {\r\n            if (i === 0 || i === columns.length - 1) {\r\n                continue;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        if (!/^:?-+:?$/.test(t)) {\r\n            return false;\r\n        }\r\n        if (t.charCodeAt(t.length - 1) === 0x3a) {\r\n            aligns.push(t.charCodeAt(0) === 0x3a ? 'center' : 'right');\r\n        }\r\n        else if (t.charCodeAt(0) === 0x3a) {\r\n            aligns.push('left');\r\n        }\r\n        else {\r\n            aligns.push('');\r\n        }\r\n    }\r\n    lineText = getLine(state, startLine).trim();\r\n    if (lineText.indexOf('|') === -1) {\r\n        return false;\r\n    }\r\n    columns = escapedSplit(lineText.replace(/^\\||\\|$/g, ''), openDelims, closeDelims);\r\n    columnCount = columns.length;\r\n    if (columnCount > aligns.length) {\r\n        return false;\r\n    }\r\n    if (silent) {\r\n        return true;\r\n    }\r\n    token = state.push('table_open', 'table', 1);\r\n    token.map = tableLines = [startLine, 0];\r\n    token = state.push('thead_open', 'thead', 1);\r\n    token.map = [startLine, startLine + 1];\r\n    token = state.push('tr_open', 'tr', 1);\r\n    token.map = [startLine, startLine + 1];\r\n    for (i = 0; i < columns.length; i++) {\r\n        token = state.push('th_open', 'th', 1);\r\n        token.map = [startLine, startLine + 1];\r\n        if (aligns[i]) {\r\n            token.attrs = [['style', 'text-align:' + aligns[i]]];\r\n        }\r\n        token = state.push('inline', '', 0);\r\n        token.content = columns[i].trim();\r\n        token.map = [startLine, startLine + 1];\r\n        token.children = [];\r\n        token = state.push('th_close', 'th', -1);\r\n    }\r\n    token = state.push('tr_close', 'tr', -1);\r\n    token = state.push('thead_close', 'thead', -1);\r\n    token = state.push('tbody_open', 'tbody', 1);\r\n    token.map = tbodyLines = [startLine + 2, 0];\r\n    for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\r\n        if (state.sCount[nextLine] < state.blkIndent) {\r\n            break;\r\n        }\r\n        lineText = getLine(state, nextLine).trim();\r\n        if (lineText.indexOf('|') === -1) {\r\n            break;\r\n        }\r\n        columns = escapedSplit(lineText.replace(/^\\||\\|$/g, ''), openDelims, closeDelims);\r\n        token = state.push('tr_open', 'tr', 1);\r\n        for (i = 0; i < columnCount; i++) {\r\n            token = state.push('td_open', 'td', 1);\r\n            if (aligns[i]) {\r\n                token.attrs = [['style', 'text-align:' + aligns[i]]];\r\n            }\r\n            token = state.push('inline', '', 0);\r\n            token.content = columns[i] ? columns[i].trim() : '';\r\n            token.children = [];\r\n            token = state.push('td_close', 'td', -1);\r\n        }\r\n        token = state.push('tr_close', 'tr', -1);\r\n    }\r\n    token = state.push('tbody_close', 'tbody', -1);\r\n    token = state.push('table_close', 'table', -1);\r\n    tableLines[1] = tbodyLines[1] = nextLine;\r\n    state.line = nextLine;\r\n    return true;\r\n}\r\nfunction makeTable(options) {\r\n    const openDelims = options.inlineDelim.map((i) => i[0]);\r\n    const closeDelims = options.inlineDelim.map((i) => i[1]);\r\n    openDelims.unshift('`');\r\n    closeDelims.unshift('`');\r\n    return table.bind(null, openDelims, closeDelims);\r\n}\r\nexports.makeTable = makeTable;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24taXQtbWF0aC9saWIvdGFibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSxpQkFBaUIsS0FBVSxFQUFFLElBQVk7SUFDdkMsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFBO0lBQ2hELE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFFOUIsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFBO0FBQ3pDLENBQUM7QUFrQkQsc0JBQ0UsR0FBVyxFQUNYLFVBQW9CLEVBQ3BCLFdBQXFCO0lBRXJCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQTtJQUNqQixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUE7SUFDWCxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFBO0lBQ3RCLElBQUksRUFBRSxDQUFBO0lBQ04sSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFBO0lBQ2YsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFBO0lBQ2YsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFBO0lBQ2pCLElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUNuQixJQUFJLFlBQVksQ0FBQTtJQUNoQixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQTtJQUNyQixJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQTtJQUV0QixFQUFFLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUd4QixZQUFZLEdBQUcsVUFBUyxDQUFTO1FBQy9CLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDakQsQ0FBQyxDQUFBO0lBRUQsT0FBTyxHQUFHLEdBQUcsR0FBRyxFQUFFO1FBRWhCLFlBQVksR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN6RCxhQUFhLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUE7UUFHM0QsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDdEQsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFBO1lBQ2xCLFNBQVMsR0FBRyxHQUFHLEdBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUE7WUFDckQsR0FBRyxJQUFJLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO1NBRTNDO2FBQU0sSUFBSSxhQUFhLEdBQUcsQ0FBQyxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksT0FBTyxFQUFFO1lBQzdELE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQTtZQUNsQixTQUFTLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO1lBQ3ZELEdBQUcsSUFBSSxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQTtTQUM3QzthQUFNLElBQUksRUFBRSxLQUFLLElBQUksSUFBWSxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUMvRCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDeEMsT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUE7U0FDbEI7YUFBTSxJQUFJLEVBQUUsS0FBSyxJQUFJLEVBQVU7WUFDOUIsT0FBTyxFQUFFLENBQUE7U0FDVjthQUFNO1lBQ0wsT0FBTyxHQUFHLENBQUMsQ0FBQTtTQUNaO1FBRUQsR0FBRyxFQUFFLENBQUE7UUFJTCxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksT0FBTyxFQUFFO1lBQzFCLE9BQU8sR0FBRyxLQUFLLENBQUE7WUFDZixHQUFHLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQTtTQUNwQjtRQUVELEVBQUUsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0tBQ3pCO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7SUFFbkMsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDO0FBZUQsZUFDRSxVQUFvQixFQUNwQixXQUFxQixFQUNyQixLQUFVLEVBQ1YsU0FBaUIsRUFDakIsT0FBZSxFQUNmLE1BQWU7SUFFZixJQUFJLEVBQUUsQ0FBQTtJQUNOLElBQUksUUFBUSxDQUFBO0lBQ1osSUFBSSxHQUFHLENBQUE7SUFDUCxJQUFJLENBQUMsQ0FBQTtJQUNMLElBQUksUUFBUSxDQUFBO0lBQ1osSUFBSSxPQUFPLENBQUE7SUFDWCxJQUFJLFdBQVcsQ0FBQTtJQUNmLElBQUksS0FBSyxDQUFBO0lBQ1QsSUFBSSxNQUFNLENBQUE7SUFDVixJQUFJLENBQUMsQ0FBQTtJQUNMLElBQUksVUFBVSxDQUFBO0lBQ2QsSUFBSSxVQUFVLENBQUE7SUFHZCxJQUFJLFNBQVMsR0FBRyxDQUFDLEdBQUcsT0FBTyxFQUFFO1FBQzNCLE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFFRCxRQUFRLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQTtJQUV4QixJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsRUFBRTtRQUM1QyxPQUFPLEtBQUssQ0FBQTtLQUNiO0lBSUQsR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUNyRCxJQUFJLEdBQUcsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQ2pDLE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFFRCxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDOUIsSUFBSSxFQUFFLEtBQUssSUFBSSxJQUFZLEVBQUUsS0FBSyxJQUFJLElBQVksRUFBRSxLQUFLLElBQUksRUFBVTtRQUNyRSxPQUFPLEtBQUssQ0FBQTtLQUNiO0lBRUQsUUFBUSxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQ3hDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQy9CLE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFFRCxPQUFPLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUM3QixNQUFNLEdBQUcsRUFBRSxDQUFBO0lBQ1gsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ25DLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDckIsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUdOLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3ZDLFNBQVE7YUFDVDtpQkFBTTtnQkFDTCxPQUFPLEtBQUssQ0FBQTthQUNiO1NBQ0Y7UUFFRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN2QixPQUFPLEtBQUssQ0FBQTtTQUNiO1FBQ0QsSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFVO1lBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDbkU7YUFBTSxJQUFJLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFVO1lBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7U0FDcEI7YUFBTTtZQUNMLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7U0FDaEI7S0FDRjtJQUVELFFBQVEsR0FBRyxPQUFPLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzNDLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtRQUNoQyxPQUFPLEtBQUssQ0FBQTtLQUNiO0lBQ0QsT0FBTyxHQUFHLFlBQVksQ0FDcEIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLEVBQ2hDLFVBQVUsRUFDVixXQUFXLENBQ1osQ0FBQTtJQUlELFdBQVcsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFBO0lBQzVCLElBQUksV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUU7UUFDL0IsT0FBTyxLQUFLLENBQUE7S0FDYjtJQUVELElBQUksTUFBTSxFQUFFO1FBQ1YsT0FBTyxJQUFJLENBQUE7S0FDWjtJQUVELEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDNUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxVQUFVLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFFdkMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUM1QyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQTtJQUV0QyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ3RDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBRXRDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNuQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3RDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFBO1FBQ3RDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ2IsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLGFBQWEsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQ3JEO1FBRUQsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNuQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUNqQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUN0QyxLQUFLLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQTtRQUVuQixLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDekM7SUFFRCxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDeEMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBRTlDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDNUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxVQUFVLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBRTNDLEtBQUssUUFBUSxHQUFHLFNBQVMsR0FBRyxDQUFDLEVBQUUsUUFBUSxHQUFHLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRTtRQUM3RCxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsRUFBRTtZQUM1QyxNQUFLO1NBQ047UUFFRCxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUMxQyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDaEMsTUFBSztTQUNOO1FBQ0QsT0FBTyxHQUFHLFlBQVksQ0FDcEIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLEVBQ2hDLFVBQVUsRUFDVixXQUFXLENBQ1osQ0FBQTtRQUVELEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDdEMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDaEMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUN0QyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDYixLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsYUFBYSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7YUFDckQ7WUFFRCxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQ25DLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUNuRCxLQUFLLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQTtZQUVuQixLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FDekM7UUFDRCxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDekM7SUFDRCxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDOUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBRTlDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFBO0lBQ3hDLEtBQUssQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFBO0lBQ3JCLE9BQU8sSUFBSSxDQUFBO0FBQ2IsQ0FBQztBQWtCRCxtQkFBMEIsT0FBZ0I7SUFDeEMsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ3ZELE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUV4RCxVQUFVLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZCLFdBQVcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUE7SUFFeEIsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7QUFDbEQsQ0FBQztBQVJELDhCQVFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbWFya2Rvd24taXQtbWF0aEA0ODAyNDM5OmxpYi9ydWxlc19ibG9jay90YWJsZS5qc1xyXG4vLyBHRk0gdGFibGUsIG5vbi1zdGFuZGFyZFxyXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby11bnNhZmUtYW55XHJcblxyXG5mdW5jdGlvbiBnZXRMaW5lKHN0YXRlOiBhbnksIGxpbmU6IG51bWJlcikge1xyXG4gIGNvbnN0IHBvcyA9IHN0YXRlLmJNYXJrc1tsaW5lXSArIHN0YXRlLmJsa0luZGVudFxyXG4gIGNvbnN0IG1heCA9IHN0YXRlLmVNYXJrc1tsaW5lXVxyXG5cclxuICByZXR1cm4gc3RhdGUuc3JjLnN1YnN0cihwb3MsIG1heCAtIHBvcylcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGEgdGFibGUgcm93IGZvciBjb2x1bW5zL2NlbGxzXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHJpbmcgc3RyXHJcbiAqICAgVGhlIHRhYmxlIHJvdyB0byBwYXJzZSBmb3IgY29sdW1ucy5cclxuICogQHBhcmFtICBhcnJheSBvZiBzdHJpbmcgb3BlbkRlbGltc1xyXG4gKiAgIFRoZSBvcGVuaW5nIGRlbGltaXRlciBzZXF1ZW5jZXMgZm9yIGlubGluZXMgdGhhdCBwcmV2ZW50cyBhbnkgY29udGFpbmVkXHJcbiAqICAgcGlwZXMgZnJvbSBkZWxpbWl0aW5nIGNvbHVtbnMgb2YgdGhlIHBhcmVudCB0YWJsZSBibG9jay5cclxuICogQHBhcmFtICBhcnJheSBvZiBzdHJpbmcgY2xvc2VEZWxpbXNcclxuICogICBUaGUgY2xvc2luZyBkZWxpbWl0ZXIgc2VxdWVuY2UgZm9yIGFuIGlubGluZSB0aGF0IHByZXZlbnRzIGFueSBjb250YWluaW5nXHJcbiAqICAgcGlwZXMgZnJvbSBkZWxpbWl0aW5nIGNvbHVtbnMgb2YgdGhlIHBhcmVudCB0YWJsZSBibG9jay5cclxuICogQHJldHVybiBhcnJheSBvZiBzdHJpbmdcclxuICogICBUaGUgdW5wYXJzZWQgY29udGVudCBvZiB0aGUgY2VsbHMvY29sdW1ucyBpZGVudGlmaWVkIGluIHN0ciByZXR1cm5lZCBhc1xyXG4gKiAgIGluZGl2aWR1YWwgZWxlbWVudHMgb2YgYW4gYXJyYXkuIFRoZSBjb250ZW50IGlzIHN0aWxsIHRvIGJlIHBhcnNlZCBieSB0aGVcclxuICogICBpbmxpbmUgcnVsZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBlc2NhcGVkU3BsaXQoXHJcbiAgc3RyOiBzdHJpbmcsXHJcbiAgb3BlbkRlbGltczogc3RyaW5nW10sXHJcbiAgY2xvc2VEZWxpbXM6IHN0cmluZ1tdLFxyXG4pIHtcclxuICBjb25zdCByZXN1bHQgPSBbXVxyXG4gIGxldCBwb3MgPSAwXHJcbiAgY29uc3QgbWF4ID0gc3RyLmxlbmd0aFxyXG4gIGxldCBjaFxyXG4gIGxldCBlc2NhcGVzID0gMFxyXG4gIGxldCBsYXN0UG9zID0gMFxyXG4gIGxldCBsYXN0RGVsaW0gPSAwXHJcbiAgbGV0IGRlbGltZWQgPSBmYWxzZVxyXG4gIGxldCBkZWxpbU1hc2tNYXBcclxuICBsZXQgb3BlbkRlbGltSWR4ID0gLTFcclxuICBsZXQgY2xvc2VEZWxpbUlkeCA9IC0xXHJcblxyXG4gIGNoID0gc3RyLmNoYXJDb2RlQXQocG9zKVxyXG5cclxuICAvLyBEZWYgbWFwIGZvciBtYXRjaGluZyBvcGVuL2Nsb3NlIGRlbGltaXRlciBzZXF1ZW5jZSB3aXRoIHN0ckBwb3NcclxuICBkZWxpbU1hc2tNYXAgPSBmdW5jdGlvbihlOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKHBvcywgcG9zICsgZS5sZW5ndGgpID09PSBlXHJcbiAgfVxyXG5cclxuICB3aGlsZSAocG9zIDwgbWF4KSB7XHJcbiAgICAvLyBEZXRlcm1pbmUgSUQgb2YgZmlyc3QgbWF0Y2hpbmcgb3Blbi9jbG9zZSBkZWxpbWl0ZXIgc2VxdWVuY2VcclxuICAgIG9wZW5EZWxpbUlkeCA9IG9wZW5EZWxpbXMubWFwKGRlbGltTWFza01hcCkuaW5kZXhPZih0cnVlKVxyXG4gICAgY2xvc2VEZWxpbUlkeCA9IGNsb3NlRGVsaW1zLm1hcChkZWxpbU1hc2tNYXApLmluZGV4T2YodHJ1ZSlcclxuXHJcbiAgICAvLyBEb2VzIHN0ckBwb3MgbWF0Y2ggYW55IG9wZW5pbmcgZGVsaW1pdGVyP1xyXG4gICAgaWYgKG9wZW5EZWxpbUlkeCA+IC0xICYmIGVzY2FwZXMgJSAyID09PSAwICYmICFkZWxpbWVkKSB7XHJcbiAgICAgIGRlbGltZWQgPSAhZGVsaW1lZFxyXG4gICAgICBsYXN0RGVsaW0gPSBwb3MgKyBvcGVuRGVsaW1zW29wZW5EZWxpbUlkeF0ubGVuZ3RoIC0gMVxyXG4gICAgICBwb3MgKz0gb3BlbkRlbGltc1tvcGVuRGVsaW1JZHhdLmxlbmd0aCAtIDFcclxuICAgICAgLy8gRG9lcyBzdHJAcG9zIG1hdGNoIGFueSBjbG9zaW5nIGRlbGltaXRlcj9cclxuICAgIH0gZWxzZSBpZiAoY2xvc2VEZWxpbUlkeCA+IC0xICYmIGVzY2FwZXMgJSAyID09PSAwICYmIGRlbGltZWQpIHtcclxuICAgICAgZGVsaW1lZCA9ICFkZWxpbWVkXHJcbiAgICAgIGxhc3REZWxpbSA9IHBvcyArIGNsb3NlRGVsaW1zW2Nsb3NlRGVsaW1JZHhdLmxlbmd0aCAtIDFcclxuICAgICAgcG9zICs9IGNsb3NlRGVsaW1zW2Nsb3NlRGVsaW1JZHhdLmxlbmd0aCAtIDFcclxuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4N2MgLyogfCAqLyAmJiBlc2NhcGVzICUgMiA9PT0gMCAmJiAhZGVsaW1lZCkge1xyXG4gICAgICByZXN1bHQucHVzaChzdHIuc3Vic3RyaW5nKGxhc3RQb3MsIHBvcykpXHJcbiAgICAgIGxhc3RQb3MgPSBwb3MgKyAxXHJcbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDVjIC8qIFxcICovKSB7XHJcbiAgICAgIGVzY2FwZXMrK1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXNjYXBlcyA9IDBcclxuICAgIH1cclxuXHJcbiAgICBwb3MrK1xyXG5cclxuICAgIC8vIElmIHRoZXJlIHdhcyBhbiB1bi1jbG9zZWQgZGVsaW1pdGVyIHNlcXVlbmNlLCBnbyBiYWNrIHRvIGp1c3QgYWZ0ZXJcclxuICAgIC8vIHRoZSBsYXN0IGRlbGltaXRlciBzZXF1ZW5jZSwgYnV0IGFzIGlmIGl0IHdhcyBhIG5vcm1hbCBjaGFyYWN0ZXJcclxuICAgIGlmIChwb3MgPT09IG1heCAmJiBkZWxpbWVkKSB7XHJcbiAgICAgIGRlbGltZWQgPSBmYWxzZVxyXG4gICAgICBwb3MgPSBsYXN0RGVsaW0gKyAxXHJcbiAgICB9XHJcblxyXG4gICAgY2ggPSBzdHIuY2hhckNvZGVBdChwb3MpXHJcbiAgfVxyXG5cclxuICByZXN1bHQucHVzaChzdHIuc3Vic3RyaW5nKGxhc3RQb3MpKVxyXG5cclxuICByZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHRhYmxlIHBsb2NrIHBhcnNlciB3aXRoIHJlc3RyaWN0aW9ucyBvbiBwaXBlIHBsYWNlbWVudFxyXG4gKlxyXG4gKiBQYXJ0aWFsbHkgcG91bGF0ZWQgZG9jc3RyaW5nIGRlc2NyaWJpbmcgcGFyYW1ldGVycyBhZGRlZCB0b1xyXG4gKiBgbWFya2Rvd24taXQtbWF0aEA0ODAyNDM5OmxpYi9ydWxlc19ibG9jay90YWJsZS5qc2AuXHJcbiAqXHJcbiAqIEBwYXJhbSAgYXJyYXkgb2Ygc3RyaW5nIG9wZW5EZWxpbXNcclxuICogICBUaGUgb3BlbmluZyBkZWxpbWl0ZXIgc2VxdWVuY2VzIGZvciBpbmxpbmVzIHRoYXQgcHJldmVudHMgYW55IGNvbnRhaW5lZFxyXG4gKiAgIHBpcGVzIGZyb20gZGVsaW1pdGluZyBjb2x1bW5zIG9mIHRoZSBwYXJlbnQgdGFibGUgYmxvY2suXHJcbiAqIEBwYXJhbSAgYXJyYXkgb2Ygc3RyaW5nIGNsb3NlRGVsaW1zXHJcbiAqICAgVGhlIGNsb3NpbmcgZGVsaW1pdGVyIHNlcXVlbmNlIGZvciBhbiBpbmxpbmUgdGhhdCBwcmV2ZW50cyBhbnkgY29udGFpbmluZ1xyXG4gKiAgIHBpcGVzIGZyb20gZGVsaW1pdGluZyBjb2x1bW5zIG9mIHRoZSBwYXJlbnQgdGFibGUgYmxvY2suXHJcbiAqL1xyXG5mdW5jdGlvbiB0YWJsZShcclxuICBvcGVuRGVsaW1zOiBzdHJpbmdbXSxcclxuICBjbG9zZURlbGltczogc3RyaW5nW10sXHJcbiAgc3RhdGU6IGFueSxcclxuICBzdGFydExpbmU6IG51bWJlcixcclxuICBlbmRMaW5lOiBudW1iZXIsXHJcbiAgc2lsZW50OiBib29sZWFuLFxyXG4pIHtcclxuICBsZXQgY2hcclxuICBsZXQgbGluZVRleHRcclxuICBsZXQgcG9zXHJcbiAgbGV0IGlcclxuICBsZXQgbmV4dExpbmVcclxuICBsZXQgY29sdW1uc1xyXG4gIGxldCBjb2x1bW5Db3VudFxyXG4gIGxldCB0b2tlblxyXG4gIGxldCBhbGlnbnNcclxuICBsZXQgdFxyXG4gIGxldCB0YWJsZUxpbmVzXHJcbiAgbGV0IHRib2R5TGluZXNcclxuXHJcbiAgLy8gc2hvdWxkIGhhdmUgYXQgbGVhc3QgdGhyZWUgbGluZXNcclxuICBpZiAoc3RhcnRMaW5lICsgMiA+IGVuZExpbmUpIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgbmV4dExpbmUgPSBzdGFydExpbmUgKyAxXHJcblxyXG4gIGlmIChzdGF0ZS5zQ291bnRbbmV4dExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIC8vIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgc2Vjb25kIGxpbmUgc2hvdWxkIGJlICd8JyBvciAnLSdcclxuXHJcbiAgcG9zID0gc3RhdGUuYk1hcmtzW25leHRMaW5lXSArIHN0YXRlLnRTaGlmdFtuZXh0TGluZV1cclxuICBpZiAocG9zID49IHN0YXRlLmVNYXJrc1tuZXh0TGluZV0pIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpXHJcbiAgaWYgKGNoICE9PSAweDdjIC8qIHwgKi8gJiYgY2ggIT09IDB4MmQgLyogLSAqLyAmJiBjaCAhPT0gMHgzYSAvKiA6ICovKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGxpbmVUZXh0ID0gZ2V0TGluZShzdGF0ZSwgc3RhcnRMaW5lICsgMSlcclxuICBpZiAoIS9eWy06fCBdKyQvLnRlc3QobGluZVRleHQpKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGNvbHVtbnMgPSBsaW5lVGV4dC5zcGxpdCgnfCcpXHJcbiAgYWxpZ25zID0gW11cclxuICBmb3IgKGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgdCA9IGNvbHVtbnNbaV0udHJpbSgpXHJcbiAgICBpZiAoIXQpIHtcclxuICAgICAgLy8gYWxsb3cgZW1wdHkgY29sdW1ucyBiZWZvcmUgYW5kIGFmdGVyIHRhYmxlLCBidXQgbm90IGluIGJldHdlZW4gY29sdW1ucztcclxuICAgICAgLy8gZS5nLiBhbGxvdyBgIHwtLS18IGAsIGRpc2FsbG93IGAgLS0tfHwtLS0gYFxyXG4gICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSBjb2x1bW5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEvXjo/LSs6PyQvLnRlc3QodCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBpZiAodC5jaGFyQ29kZUF0KHQubGVuZ3RoIC0gMSkgPT09IDB4M2EgLyogOiAqLykge1xyXG4gICAgICBhbGlnbnMucHVzaCh0LmNoYXJDb2RlQXQoMCkgPT09IDB4M2EgLyogOiAqLyA/ICdjZW50ZXInIDogJ3JpZ2h0JylcclxuICAgIH0gZWxzZSBpZiAodC5jaGFyQ29kZUF0KDApID09PSAweDNhIC8qIDogKi8pIHtcclxuICAgICAgYWxpZ25zLnB1c2goJ2xlZnQnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxpZ25zLnB1c2goJycpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsaW5lVGV4dCA9IGdldExpbmUoc3RhdGUsIHN0YXJ0TGluZSkudHJpbSgpXHJcbiAgaWYgKGxpbmVUZXh0LmluZGV4T2YoJ3wnKSA9PT0gLTEpIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBjb2x1bW5zID0gZXNjYXBlZFNwbGl0KFxyXG4gICAgbGluZVRleHQucmVwbGFjZSgvXlxcfHxcXHwkL2csICcnKSxcclxuICAgIG9wZW5EZWxpbXMsXHJcbiAgICBjbG9zZURlbGltcyxcclxuICApXHJcblxyXG4gIC8vIGhlYWRlciByb3cgd2lsbCBkZWZpbmUgYW4gYW1vdW50IG9mIGNvbHVtbnMgaW4gdGhlIGVudGlyZSB0YWJsZSxcclxuICAvLyBhbmQgYWxpZ24gcm93IHNob3VsZG4ndCBiZSBzbWFsbGVyIHRoYW4gdGhhdCAodGhlIHJlc3Qgb2YgdGhlIHJvd3MgY2FuKVxyXG4gIGNvbHVtbkNvdW50ID0gY29sdW1ucy5sZW5ndGhcclxuICBpZiAoY29sdW1uQ291bnQgPiBhbGlnbnMubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGlmIChzaWxlbnQpIHtcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RhYmxlX29wZW4nLCAndGFibGUnLCAxKVxyXG4gIHRva2VuLm1hcCA9IHRhYmxlTGluZXMgPSBbc3RhcnRMaW5lLCAwXVxyXG5cclxuICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RoZWFkX29wZW4nLCAndGhlYWQnLCAxKVxyXG4gIHRva2VuLm1hcCA9IFtzdGFydExpbmUsIHN0YXJ0TGluZSArIDFdXHJcblxyXG4gIHRva2VuID0gc3RhdGUucHVzaCgndHJfb3BlbicsICd0cicsIDEpXHJcbiAgdG9rZW4ubWFwID0gW3N0YXJ0TGluZSwgc3RhcnRMaW5lICsgMV1cclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHtcclxuICAgIHRva2VuID0gc3RhdGUucHVzaCgndGhfb3BlbicsICd0aCcsIDEpXHJcbiAgICB0b2tlbi5tYXAgPSBbc3RhcnRMaW5lLCBzdGFydExpbmUgKyAxXVxyXG4gICAgaWYgKGFsaWduc1tpXSkge1xyXG4gICAgICB0b2tlbi5hdHRycyA9IFtbJ3N0eWxlJywgJ3RleHQtYWxpZ246JyArIGFsaWduc1tpXV1dXHJcbiAgICB9XHJcblxyXG4gICAgdG9rZW4gPSBzdGF0ZS5wdXNoKCdpbmxpbmUnLCAnJywgMClcclxuICAgIHRva2VuLmNvbnRlbnQgPSBjb2x1bW5zW2ldLnRyaW0oKVxyXG4gICAgdG9rZW4ubWFwID0gW3N0YXJ0TGluZSwgc3RhcnRMaW5lICsgMV1cclxuICAgIHRva2VuLmNoaWxkcmVuID0gW11cclxuXHJcbiAgICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RoX2Nsb3NlJywgJ3RoJywgLTEpXHJcbiAgfVxyXG5cclxuICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RyX2Nsb3NlJywgJ3RyJywgLTEpXHJcbiAgdG9rZW4gPSBzdGF0ZS5wdXNoKCd0aGVhZF9jbG9zZScsICd0aGVhZCcsIC0xKVxyXG5cclxuICB0b2tlbiA9IHN0YXRlLnB1c2goJ3Rib2R5X29wZW4nLCAndGJvZHknLCAxKVxyXG4gIHRva2VuLm1hcCA9IHRib2R5TGluZXMgPSBbc3RhcnRMaW5lICsgMiwgMF1cclxuXHJcbiAgZm9yIChuZXh0TGluZSA9IHN0YXJ0TGluZSArIDI7IG5leHRMaW5lIDwgZW5kTGluZTsgbmV4dExpbmUrKykge1xyXG4gICAgaWYgKHN0YXRlLnNDb3VudFtuZXh0TGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHtcclxuICAgICAgYnJlYWtcclxuICAgIH1cclxuXHJcbiAgICBsaW5lVGV4dCA9IGdldExpbmUoc3RhdGUsIG5leHRMaW5lKS50cmltKClcclxuICAgIGlmIChsaW5lVGV4dC5pbmRleE9mKCd8JykgPT09IC0xKSB7XHJcbiAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICBjb2x1bW5zID0gZXNjYXBlZFNwbGl0KFxyXG4gICAgICBsaW5lVGV4dC5yZXBsYWNlKC9eXFx8fFxcfCQvZywgJycpLFxyXG4gICAgICBvcGVuRGVsaW1zLFxyXG4gICAgICBjbG9zZURlbGltcyxcclxuICAgIClcclxuXHJcbiAgICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RyX29wZW4nLCAndHInLCAxKVxyXG4gICAgZm9yIChpID0gMDsgaSA8IGNvbHVtbkNvdW50OyBpKyspIHtcclxuICAgICAgdG9rZW4gPSBzdGF0ZS5wdXNoKCd0ZF9vcGVuJywgJ3RkJywgMSlcclxuICAgICAgaWYgKGFsaWduc1tpXSkge1xyXG4gICAgICAgIHRva2VuLmF0dHJzID0gW1snc3R5bGUnLCAndGV4dC1hbGlnbjonICsgYWxpZ25zW2ldXV1cclxuICAgICAgfVxyXG5cclxuICAgICAgdG9rZW4gPSBzdGF0ZS5wdXNoKCdpbmxpbmUnLCAnJywgMClcclxuICAgICAgdG9rZW4uY29udGVudCA9IGNvbHVtbnNbaV0gPyBjb2x1bW5zW2ldLnRyaW0oKSA6ICcnXHJcbiAgICAgIHRva2VuLmNoaWxkcmVuID0gW11cclxuXHJcbiAgICAgIHRva2VuID0gc3RhdGUucHVzaCgndGRfY2xvc2UnLCAndGQnLCAtMSlcclxuICAgIH1cclxuICAgIHRva2VuID0gc3RhdGUucHVzaCgndHJfY2xvc2UnLCAndHInLCAtMSlcclxuICB9XHJcbiAgdG9rZW4gPSBzdGF0ZS5wdXNoKCd0Ym9keV9jbG9zZScsICd0Ym9keScsIC0xKVxyXG4gIHRva2VuID0gc3RhdGUucHVzaCgndGFibGVfY2xvc2UnLCAndGFibGUnLCAtMSlcclxuXHJcbiAgdGFibGVMaW5lc1sxXSA9IHRib2R5TGluZXNbMV0gPSBuZXh0TGluZVxyXG4gIHN0YXRlLmxpbmUgPSBuZXh0TGluZVxyXG4gIHJldHVybiB0cnVlXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmVwYXJlIGEgdGFibGUgcGxvY2sgcGFyc2VyIHdpdGggcmVzdHJpY3Rpb25zIG9uIHBpcGUgcGxhY2VtZW50XHJcbiAqXHJcbiAqIEBwYXJhbSAgc3RyaW5nIG9wZW5cclxuICogICBUaGUgb3BlbmluZyBkZWxpbWl0ZXIgc2VxdWVuY2UgZm9yIGFuIGlubGluZSB0aGF0IHByZXZlbnRzIGFueSBjb250YWluZWRcclxuICogICBwaXBlcyBmcm9tIGRlbGltaXRpbmcgY29sdW1ucyBvZiB0aGUgcGFyZW50IHRhYmxlIGJsb2NrLlxyXG4gKiBAcGFyYW0gIHN0cmluZyBjbG9zZVxyXG4gKiAgIFRoZSBjbG9zaW5nIGRlbGltaXRlciBzZXF1ZW5jZSBmb3IgYW4gaW5saW5lIHRoYXQgcHJldmVudHMgYW55IGNvbnRhaW5pbmdcclxuICogICBwaXBlcyBmcm9tIGRlbGltaXRpbmcgY29sdW1ucyBvZiB0aGUgcGFyZW50IHRhYmxlIGJsb2NrLlxyXG4gKiBAcmV0dXJuIGZ1bmN0aW9uXHJcbiAqICAgVGhlIHRhYmxlIGJsb2NrIHBhcnNlciB0aGF0IHNob3VsZCBiZSB1c2VkIGluIHBsYWNlIG9mIHRoZSBleGlzdGluZyB0YWJsZVxyXG4gKiAgIGJsb2NrIHBhcnNlciBzdWNoIHRoYXQgdGhlIHNwZWNpZmllZCBpbmxpbmUgYnkgYG9wZW5gIGFuZCBgY2xvc2VgIGlzXHJcbiAqICAgcmVzcGVjdGVkLiBUaGUgZGVsaW1pdGVycyBhcmUgYWRkZWQgdG8gZXhpc3RpbmcgbGlzdCBvZiBkZWxpbWl0ZXIgcGFpcnMgaW5cclxuICogICBgZXNjYXBlZFNwbGl0RGVsaW1pdGVyc2AgYWxsb3dpbmcgYG1hcmtkb3duLWl0LW1hdGhgIHRvIGJlIGB1c2VgJ2QgbXVsdGlwbGVcclxuICogICB0aW1lcyBsZWFkaW5nIHRvIG11bHRpcGxlIGlubGluZSBkZWxpbWl0ZXJzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VUYWJsZShvcHRpb25zOiBPcHRpb25zKSB7XHJcbiAgY29uc3Qgb3BlbkRlbGltcyA9IG9wdGlvbnMuaW5saW5lRGVsaW0ubWFwKChpKSA9PiBpWzBdKVxyXG4gIGNvbnN0IGNsb3NlRGVsaW1zID0gb3B0aW9ucy5pbmxpbmVEZWxpbS5tYXAoKGkpID0+IGlbMV0pXHJcblxyXG4gIG9wZW5EZWxpbXMudW5zaGlmdCgnYCcpXHJcbiAgY2xvc2VEZWxpbXMudW5zaGlmdCgnYCcpXHJcblxyXG4gIHJldHVybiB0YWJsZS5iaW5kKG51bGwsIG9wZW5EZWxpbXMsIGNsb3NlRGVsaW1zKVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbnMge1xyXG4gIGlubGluZURlbGltOiBbW3N0cmluZywgc3RyaW5nXV1cclxuICBibG9ja0RlbGltOiBbW3N0cmluZywgc3RyaW5nXV1cclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst table_1 = require(\"./lib/table\");\r\nfunction skipTextCommand(state, max) {\r\n    const textCommand = state.src.slice(state.pos, state.pos + 5);\r\n    const curPos = state.pos;\r\n    if (textCommand === '\\\\text') {\r\n        state.pos += 5;\r\n        while (state.src[state.pos] === ' ') {\r\n            state.pos++;\r\n        }\r\n        if (state.src[state.pos] !== '{') {\r\n            state.pos = curPos;\r\n        }\r\n        else {\r\n            while (state.src[state.pos] !== '}' && state.pos < max) {\r\n                state.pos++;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction scanDelims(state, start, delimLength) {\r\n    let pos = start;\r\n    let lastChar;\r\n    let nextChar;\r\n    let count;\r\n    let canOpen;\r\n    let canClose;\r\n    let isLastWhiteSpace;\r\n    let isLastPunctChar;\r\n    let isNextWhiteSpace;\r\n    let isNextPunctChar;\r\n    let leftFlanking = true;\r\n    let rightFlanking = true;\r\n    const max = state.posMax;\r\n    const isWhiteSpace = state.md.utils.isWhiteSpace;\r\n    const isPunctChar = state.md.utils.isPunctChar;\r\n    const isMdAsciiPunct = state.md.utils.isMdAsciiPunct;\r\n    lastChar = start > 0 ? state.src.charCodeAt(start - 1) : 0x20;\r\n    if (pos >= max) {\r\n        canOpen = false;\r\n    }\r\n    pos += delimLength;\r\n    count = pos - start;\r\n    nextChar = pos < max ? state.src.charCodeAt(pos) : 0x20;\r\n    isLastPunctChar =\r\n        isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\r\n    isNextPunctChar =\r\n        isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\r\n    isLastWhiteSpace = isWhiteSpace(lastChar);\r\n    isNextWhiteSpace = isWhiteSpace(nextChar);\r\n    if (isNextWhiteSpace) {\r\n        leftFlanking = false;\r\n    }\r\n    else if (isNextPunctChar) {\r\n        if (!(isLastWhiteSpace || isLastPunctChar)) {\r\n            leftFlanking = false;\r\n        }\r\n    }\r\n    if (isLastWhiteSpace) {\r\n        rightFlanking = false;\r\n    }\r\n    else if (isLastPunctChar) {\r\n        if (!(isNextWhiteSpace || isNextPunctChar)) {\r\n            rightFlanking = false;\r\n        }\r\n    }\r\n    canOpen = leftFlanking;\r\n    canClose = rightFlanking;\r\n    return {\r\n        can_open: canOpen,\r\n        can_close: canClose,\r\n        delims: count,\r\n    };\r\n}\r\nfunction makeMath_inline(delims) {\r\n    return function math_inline(state, silent) {\r\n        let startCount;\r\n        let found;\r\n        let res;\r\n        let token;\r\n        let closeDelim;\r\n        const max = state.posMax;\r\n        const start = state.pos;\r\n        const foundDelims = delims.find(function (i) {\r\n            const open = i[0];\r\n            const openDelim = state.src.slice(start, start + open.length);\r\n            return openDelim === open;\r\n        });\r\n        if (!foundDelims) {\r\n            return false;\r\n        }\r\n        const open = foundDelims[0];\r\n        const close = foundDelims[1];\r\n        if (silent) {\r\n            return false;\r\n        }\r\n        res = scanDelims(state, start, open.length);\r\n        startCount = res.delims;\r\n        if (!res.can_open) {\r\n            state.pos += startCount;\r\n            state.pending += state.src.slice(start, state.pos);\r\n            return true;\r\n        }\r\n        state.pos = start + open.length;\r\n        while (state.pos < max) {\r\n            closeDelim = state.src.slice(state.pos, state.pos + close.length);\r\n            if (closeDelim === close) {\r\n                res = scanDelims(state, state.pos, close.length);\r\n                if (res.can_close) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            skipTextCommand(state, max);\r\n            state.md.inline.skipToken(state);\r\n        }\r\n        if (!found) {\r\n            state.pos = start;\r\n            return false;\r\n        }\r\n        state.posMax = state.pos;\r\n        state.pos = start + close.length;\r\n        token = state.push('math_inline', 'math', 0);\r\n        token.content = state.src.slice(state.pos, state.posMax);\r\n        token.markup = open;\r\n        state.pos = state.posMax + close.length;\r\n        state.posMax = max;\r\n        return true;\r\n    };\r\n}\r\nfunction makeMath_block(delims) {\r\n    return function math_block(state, startLine, endLine, silent) {\r\n        let len;\r\n        let nextLine;\r\n        let token;\r\n        let firstLine;\r\n        let lastLine;\r\n        let lastLinePos;\r\n        let closeDelim;\r\n        let haveEndMarker = false;\r\n        let closeStartsAtNewline = false;\r\n        let pos = state.bMarks[startLine] + state.tShift[startLine];\r\n        let max = state.eMarks[startLine];\r\n        const foundDelims = delims.find(function (i) {\r\n            const open = i[0];\r\n            const openDelim = state.src.slice(pos, pos + open.length);\r\n            return openDelim === open;\r\n        });\r\n        if (!foundDelims) {\r\n            return false;\r\n        }\r\n        const open = foundDelims[0];\r\n        let close = foundDelims[1];\r\n        if (close[0] === '\\n') {\r\n            closeStartsAtNewline = true;\r\n            close = close.slice(1);\r\n        }\r\n        if (pos + open.length > max + 1) {\r\n            return false;\r\n        }\r\n        pos += open.length;\r\n        firstLine = state.src.slice(pos, max);\r\n        if (silent) {\r\n            return true;\r\n        }\r\n        if (firstLine.trim().slice(-close.length) === close) {\r\n            firstLine = firstLine.trim().slice(0, -close.length);\r\n            haveEndMarker = true;\r\n        }\r\n        nextLine = startLine;\r\n        for (;;) {\r\n            if (haveEndMarker) {\r\n                break;\r\n            }\r\n            nextLine++;\r\n            if (nextLine >= endLine) {\r\n                break;\r\n            }\r\n            pos = state.bMarks[nextLine] + state.tShift[nextLine];\r\n            max = state.eMarks[nextLine];\r\n            if (pos < max && state.tShift[nextLine] < state.blkIndent) {\r\n                break;\r\n            }\r\n            closeDelim = closeStartsAtNewline\r\n                ? state.src.slice(pos, max).trim()\r\n                : state.src\r\n                    .slice(pos, max)\r\n                    .trim()\r\n                    .slice(-close.length);\r\n            if (closeDelim !== close) {\r\n                continue;\r\n            }\r\n            if (state.tShift[nextLine] - state.blkIndent >= 4) {\r\n                continue;\r\n            }\r\n            lastLinePos = state.src.slice(0, max).lastIndexOf(close);\r\n            lastLine = state.src.slice(pos, lastLinePos);\r\n            pos += lastLine.length + close.length;\r\n            pos = state.skipSpaces(pos);\r\n            if (pos < max) {\r\n                continue;\r\n            }\r\n            haveEndMarker = true;\r\n        }\r\n        len = state.tShift[startLine];\r\n        state.line = nextLine + (haveEndMarker ? 1 : 0);\r\n        token = state.push('math_block', 'math', 0);\r\n        token.block = true;\r\n        token.content =\r\n            (firstLine && firstLine.trim() ? firstLine + '\\n' : '') +\r\n                state.getLines(startLine + 1, nextLine, len, true) +\r\n                (lastLine && lastLine.trim() ? lastLine : '');\r\n        token.map = [startLine, state.line];\r\n        token.markup = open;\r\n        return true;\r\n    };\r\n}\r\nfunction makeMathRenderer(renderingOptions = {}) {\r\n    return renderingOptions.display === 'block'\r\n        ? function (tokens, idx) {\r\n            return '<div class=\"math block\">' + tokens[idx].content + '</div>\\n';\r\n        }\r\n        : function (tokens, idx) {\r\n            return '<span class=\"math inline\">' + tokens[idx].content + '</span>';\r\n        };\r\n}\r\nfunction math_plugin(md, options = {}) {\r\n    const inlineDelim = options.inlineDelim || [['$$', '$$']];\r\n    const blockDelim = options.blockDelim || [['$$$', '$$$']];\r\n    const oInlineRenderer = options.inlineRenderer;\r\n    const oBlockRenderer = options.blockRenderer;\r\n    const inlineRenderer = oInlineRenderer\r\n        ? function (tokens, idx) {\r\n            return oInlineRenderer(tokens[idx].content);\r\n        }\r\n        : makeMathRenderer(options.renderingOptions);\r\n    const blockRenderer = oBlockRenderer\r\n        ? function (tokens, idx) {\r\n            return oBlockRenderer(tokens[idx].content) + '\\n';\r\n        }\r\n        : makeMathRenderer(Object.assign({ display: 'block' }, options.renderingOptions));\r\n    const mathInline = makeMath_inline(inlineDelim);\r\n    const mathBlock = makeMath_block(blockDelim);\r\n    md.inline.ruler.before('escape', 'math_inline', mathInline);\r\n    md.block.ruler.after('blockquote', 'math_block', mathBlock, {\r\n        alt: ['paragraph', 'reference', 'blockquote', 'list'],\r\n    });\r\n    md.renderer.rules.math_inline = inlineRenderer;\r\n    md.renderer.rules.math_block = blockRenderer;\r\n    const tableBlock = table_1.makeTable({\r\n        inlineDelim,\r\n        blockDelim,\r\n    });\r\n    md.block.ruler.at('table', tableBlock, {\r\n        alt: ['paragraph', 'reference'],\r\n    });\r\n}\r\nexports.math_plugin = math_plugin;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24taXQtbWF0aC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLHVDQUF1QztBQUV2Qyx5QkFBeUIsS0FBVSxFQUFFLEdBQVc7SUFDOUMsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQzdELE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUE7SUFDeEIsSUFBSSxXQUFXLEtBQUssUUFBUSxFQUFFO1FBQzVCLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFBO1FBQ2QsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEVBQUU7WUFDbkMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFBO1NBQ1o7UUFDRCxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNoQyxLQUFLLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQTtTQUNuQjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUU7Z0JBQ3RELEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQTthQUNaO1NBQ0Y7S0FDRjtBQUNILENBQUM7QUFFRCxvQkFBb0IsS0FBVSxFQUFFLEtBQWEsRUFBRSxXQUFtQjtJQUNoRSxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUE7SUFDZixJQUFJLFFBQVEsQ0FBQTtJQUNaLElBQUksUUFBUSxDQUFBO0lBQ1osSUFBSSxLQUFLLENBQUE7SUFDVCxJQUFJLE9BQU8sQ0FBQTtJQUNYLElBQUks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QUssQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFBO0lBRzVDLE1BQU0sVUFBVSxHQUFHLGlCQUFTLENBQUM7UUFDM0IsV0FBVztRQUNYLFVBQVU7S0FDWCxDQUFDLENBQUE7SUFDRixFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRTtRQUNyQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDO0tBQ2hDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFyQ0Qsa0NBcUNDIiwic291cmNlc0NvbnRlbnQiOlsiLyogUHJvY2VzcyBpbmxpbmUgbWF0aCAqL1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby11bnNhZmUtYW55XHJcblxyXG5pbXBvcnQgKiBhcyBtZEl0IGZyb20gJ21hcmtkb3duLWl0J1xyXG5pbXBvcnQgeyBtYWtlVGFibGUgfSBmcm9tICcuL2xpYi90YWJsZSdcclxuXHJcbmZ1bmN0aW9uIHNraXBUZXh0Q29tbWFuZChzdGF0ZTogYW55LCBtYXg6IG51bWJlcikge1xyXG4gIGNvbnN0IHRleHRDb21tYW5kID0gc3RhdGUuc3JjLnNsaWNlKHN0YXRlLnBvcywgc3RhdGUucG9zICsgNSlcclxuICBjb25zdCBjdXJQb3MgPSBzdGF0ZS5wb3NcclxuICBpZiAodGV4dENvbW1hbmQgPT09ICdcXFxcdGV4dCcpIHtcclxuICAgIHN0YXRlLnBvcyArPSA1XHJcbiAgICB3aGlsZSAoc3RhdGUuc3JjW3N0YXRlLnBvc10gPT09ICcgJykge1xyXG4gICAgICBzdGF0ZS5wb3MrK1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXRlLnNyY1tzdGF0ZS5wb3NdICE9PSAneycpIHtcclxuICAgICAgc3RhdGUucG9zID0gY3VyUG9zXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3aGlsZSAoc3RhdGUuc3JjW3N0YXRlLnBvc10gIT09ICd9JyAmJiBzdGF0ZS5wb3MgPCBtYXgpIHtcclxuICAgICAgICBzdGF0ZS5wb3MrK1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzY2FuRGVsaW1zKHN0YXRlOiBhbnksIHN0YXJ0OiBudW1iZXIsIGRlbGltTGVuZ3RoOiBudW1iZXIpIHtcclxuICBsZXQgcG9zID0gc3RhcnRcclxuICBsZXQgbGFzdENoYXJcclxuICBsZXQgbmV4dENoYXJcclxuICBsZXQgY291bnRcclxuICBsZXQgY2FuT3BlblxyXG4gIGxldCBjYW5DbG9zZVxyXG4gIGxldCBpc0xhc3RXaGl0ZVNwYWNlXHJcbiAgbGV0IGlzTGFzdFB1bmN0Q2hhclxyXG4gIGxldCBpc05leHRXaGl0ZVNwYWNlXHJcbiAgbGV0IGlzTmV4dFB1bmN0Q2hhclxyXG4gIGxldCBsZWZ0RmxhbmtpbmcgPSB0cnVlXHJcbiAgbGV0IHJpZ2h0RmxhbmtpbmcgPSB0cnVlXHJcbiAgY29uc3QgbWF4ID0gc3RhdGUucG9zTWF4XHJcbiAgY29uc3QgaXNXaGl0ZVNwYWNlID0gc3RhdGUubWQudXRpbHMuaXNXaGl0ZVNwYWNlXHJcbiAgY29uc3QgaXNQdW5jdENoYXIgPSBzdGF0ZS5tZC51dGlscy5pc1B1bmN0Q2hhclxyXG4gIGNvbnN0IGlzTWRBc2NpaVB1bmN0ID0gc3RhdGUubWQudXRpbHMuaXNNZEFzY2lpUHVuY3RcclxuXHJcbiAgLy8gdHJlYXQgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIGFzIGEgd2hpdGVzcGFjZVxyXG4gIGxhc3RDaGFyID0gc3RhcnQgPiAwID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgLSAxKSA6IDB4MjBcclxuXHJcbiAgaWYgKHBvcyA+PSBtYXgpIHtcclxuICAgIGNhbk9wZW4gPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgcG9zICs9IGRlbGltTGVuZ3RoXHJcblxyXG4gIGNvdW50ID0gcG9zIC0gc3RhcnRcclxuXHJcbiAgLy8gdHJlYXQgZW5kIG9mIHRoZSBsaW5lIGFzIGEgd2hpdGVzcGFjZVxyXG4gIG5leHRDaGFyID0gcG9zIDwgbWF4ID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA6IDB4MjBcclxuXHJcbiAgaXNMYXN0UHVuY3RDaGFyID1cclxuICAgIGlzTWRBc2NpaVB1bmN0KGxhc3RDaGFyKSB8fCBpc1B1bmN0Q2hhcihTdHJpbmcuZnJvbUNoYXJDb2RlKGxhc3RDaGFyKSlcclxuICBpc05leHRQdW5jdENoYXIgPVxyXG4gICAgaXNNZEFzY2lpUHVuY3QobmV4dENoYXIpIHx8IGlzUHVuY3RDaGFyKFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dENoYXIpKVxyXG5cclxuICBpc0xhc3RXaGl0ZVNwYWNlID0gaXNXaGl0ZVNwYWNlKGxhc3RDaGFyKVxyXG4gIGlzTmV4dFdoaXRlU3BhY2UgPSBpc1doaXRlU3BhY2UobmV4dENoYXIpXHJcblxyXG4gIGlmIChpc05leHRXaGl0ZVNwYWNlKSB7XHJcbiAgICBsZWZ0RmxhbmtpbmcgPSBmYWxzZVxyXG4gIH0gZWxzZSBpZiAoaXNOZXh0UHVuY3RDaGFyKSB7XHJcbiAgICBpZiAoIShpc0xhc3RXaGl0ZVNwYWNlIHx8IGlzTGFzdFB1bmN0Q2hhcikpIHtcclxuICAgICAgbGVmdEZsYW5raW5nID0gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChpc0xhc3RXaGl0ZVNwYWNlKSB7XHJcbiAgICByaWdodEZsYW5raW5nID0gZmFsc2VcclxuICB9IGVsc2UgaWYgKGlzTGFzdFB1bmN0Q2hhcikge1xyXG4gICAgaWYgKCEoaXNOZXh0V2hpdGVTcGFjZSB8fCBpc05leHRQdW5jdENoYXIpKSB7XHJcbiAgICAgIHJpZ2h0RmxhbmtpbmcgPSBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FuT3BlbiA9IGxlZnRGbGFua2luZ1xyXG4gIGNhbkNsb3NlID0gcmlnaHRGbGFua2luZ1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY2FuX29wZW46IGNhbk9wZW4sXHJcbiAgICBjYW5fY2xvc2U6IGNhbkNsb3NlLFxyXG4gICAgZGVsaW1zOiBjb3VudCxcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VNYXRoX2lubGluZShkZWxpbXM6IFtbc3RyaW5nLCBzdHJpbmddXSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiBtYXRoX2lubGluZShzdGF0ZTogYW55LCBzaWxlbnQ6IGJvb2xlYW4pIHtcclxuICAgIGxldCBzdGFydENvdW50XHJcbiAgICBsZXQgZm91bmRcclxuICAgIGxldCByZXNcclxuICAgIGxldCB0b2tlblxyXG4gICAgbGV0IGNsb3NlRGVsaW1cclxuICAgIGNvbnN0IG1heCA9IHN0YXRlLnBvc01heCBhcyBudW1iZXJcclxuICAgIGNvbnN0IHN0YXJ0ID0gc3RhdGUucG9zIGFzIG51bWJlclxyXG4gICAgY29uc3QgZm91bmREZWxpbXMgPSBkZWxpbXMuZmluZChmdW5jdGlvbihpKSB7XHJcbiAgICAgIGNvbnN0IG9wZW4gPSBpWzBdXHJcbiAgICAgIGNvbnN0IG9wZW5EZWxpbSA9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgc3RhcnQgKyBvcGVuLmxlbmd0aCkgYXMgc3RyaW5nXHJcbiAgICAgIHJldHVybiBvcGVuRGVsaW0gPT09IG9wZW5cclxuICAgIH0pXHJcbiAgICBpZiAoIWZvdW5kRGVsaW1zKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3Qgb3BlbiA9IGZvdW5kRGVsaW1zWzBdXHJcbiAgICBjb25zdCBjbG9zZSA9IGZvdW5kRGVsaW1zWzFdXHJcbiAgICBpZiAoc2lsZW50KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfSAvLyBEb27igJl0IHJ1biBhbnkgcGFpcnMgaW4gdmFsaWRhdGlvbiBtb2RlXHJcblxyXG4gICAgcmVzID0gc2NhbkRlbGltcyhzdGF0ZSwgc3RhcnQsIG9wZW4ubGVuZ3RoKVxyXG4gICAgc3RhcnRDb3VudCA9IHJlcy5kZWxpbXNcclxuXHJcbiAgICBpZiAoIXJlcy5jYW5fb3Blbikge1xyXG4gICAgICBzdGF0ZS5wb3MgKz0gc3RhcnRDb3VudFxyXG4gICAgICAvLyBFYXJsaWVyIHdlIGNoZWNrZWQgIXNpbGVudCwgYnV0IHRoaXMgaW1wbGVtZW50YXRpb24gZG9lcyBub3QgbmVlZCBpdFxyXG4gICAgICBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgc3RhdGUucG9zKVxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRlLnBvcyA9IHN0YXJ0ICsgb3Blbi5sZW5ndGhcclxuXHJcbiAgICB3aGlsZSAoc3RhdGUucG9zIDwgbWF4KSB7XHJcbiAgICAgIGNsb3NlRGVsaW0gPSBzdGF0ZS5zcmMuc2xpY2Uoc3RhdGUucG9zLCBzdGF0ZS5wb3MgKyBjbG9zZS5sZW5ndGgpXHJcbiAgICAgIGlmIChjbG9zZURlbGltID09PSBjbG9zZSkge1xyXG4gICAgICAgIHJlcyA9IHNjYW5EZWxpbXMoc3RhdGUsIHN0YXRlLnBvcywgY2xvc2UubGVuZ3RoKVxyXG4gICAgICAgIGlmIChyZXMuY2FuX2Nsb3NlKSB7XHJcbiAgICAgICAgICBmb3VuZCA9IHRydWVcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNraXBUZXh0Q29tbWFuZChzdGF0ZSwgbWF4KVxyXG5cclxuICAgICAgc3RhdGUubWQuaW5saW5lLnNraXBUb2tlbihzdGF0ZSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvdW5kKSB7XHJcbiAgICAgIC8vIFBhcnNlciBmYWlsZWQgdG8gZmluZCBlbmRpbmcgdGFnLCBzbyBpdCBpcyBub3QgYSB2YWxpZCBtYXRoXHJcbiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvdW5kIVxyXG4gICAgc3RhdGUucG9zTWF4ID0gc3RhdGUucG9zXHJcbiAgICBzdGF0ZS5wb3MgPSBzdGFydCArIGNsb3NlLmxlbmd0aFxyXG5cclxuICAgIC8vIEVhcmxpZXIgd2UgY2hlY2tlZCAhc2lsZW50LCBidXQgdGhpcyBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdCBuZWVkIGl0XHJcbiAgICB0b2tlbiA9IHN0YXRlLnB1c2goJ21hdGhfaW5saW5lJywgJ21hdGgnLCAwKVxyXG4gICAgdG9rZW4uY29udGVudCA9IHN0YXRlLnNyYy5zbGljZShzdGF0ZS5wb3MsIHN0YXRlLnBvc01heClcclxuICAgIHRva2VuLm1hcmt1cCA9IG9wZW5cclxuXHJcbiAgICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyBjbG9zZS5sZW5ndGhcclxuICAgIHN0YXRlLnBvc01heCA9IG1heFxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTWF0aF9ibG9jayhkZWxpbXM6IFtbc3RyaW5nLCBzdHJpbmddXSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiBtYXRoX2Jsb2NrKFxyXG4gICAgc3RhdGU6IGFueSxcclxuICAgIHN0YXJ0TGluZTogbnVtYmVyLFxyXG4gICAgZW5kTGluZTogbnVtYmVyLFxyXG4gICAgc2lsZW50OiBib29sZWFuLFxyXG4gICkge1xyXG4gICAgbGV0IGxlblxyXG4gICAgbGV0IG5leHRMaW5lXHJcbiAgICBsZXQgdG9rZW5cclxuICAgIGxldCBmaXJzdExpbmU6IHN0cmluZ1xyXG4gICAgbGV0IGxhc3RMaW5lXHJcbiAgICBsZXQgbGFzdExpbmVQb3NcclxuICAgIGxldCBjbG9zZURlbGltXHJcbiAgICBsZXQgaGF2ZUVuZE1hcmtlciA9IGZhbHNlXHJcbiAgICBsZXQgY2xvc2VTdGFydHNBdE5ld2xpbmUgPSBmYWxzZVxyXG4gICAgbGV0IHBvczogbnVtYmVyID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXVxyXG4gICAgbGV0IG1heDogbnVtYmVyID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV1cclxuXHJcbiAgICBjb25zdCBmb3VuZERlbGltcyA9IGRlbGltcy5maW5kKGZ1bmN0aW9uKGkpIHtcclxuICAgICAgY29uc3Qgb3BlbiA9IGlbMF1cclxuICAgICAgY29uc3Qgb3BlbkRlbGltID0gc3RhdGUuc3JjLnNsaWNlKHBvcywgcG9zICsgb3Blbi5sZW5ndGgpXHJcbiAgICAgIHJldHVybiBvcGVuRGVsaW0gPT09IG9wZW5cclxuICAgIH0pXHJcbiAgICBpZiAoIWZvdW5kRGVsaW1zKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3Qgb3BlbiA9IGZvdW5kRGVsaW1zWzBdXHJcbiAgICBsZXQgY2xvc2UgPSBmb3VuZERlbGltc1sxXVxyXG5cclxuICAgIGlmIChjbG9zZVswXSA9PT0gJ1xcbicpIHtcclxuICAgICAgY2xvc2VTdGFydHNBdE5ld2xpbmUgPSB0cnVlXHJcbiAgICAgIGNsb3NlID0gY2xvc2Uuc2xpY2UoMSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAocG9zICsgb3Blbi5sZW5ndGggPiBtYXggKyAxKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHBvcyArPSBvcGVuLmxlbmd0aFxyXG4gICAgZmlyc3RMaW5lID0gc3RhdGUuc3JjLnNsaWNlKHBvcywgbWF4KVxyXG5cclxuICAgIC8vIFNpbmNlIHN0YXJ0IGlzIGZvdW5kLCB3ZSBjYW4gcmVwb3J0IHN1Y2Nlc3MgaGVyZSBpbiB2YWxpZGF0aW9uIG1vZGVcclxuICAgIGlmIChzaWxlbnQpIHtcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmlyc3RMaW5lLnRyaW0oKS5zbGljZSgtY2xvc2UubGVuZ3RoKSA9PT0gY2xvc2UpIHtcclxuICAgICAgLy8gU2luZ2xlIGxpbmUgZXhwcmVzc2lvblxyXG4gICAgICBmaXJzdExpbmUgPSBmaXJzdExpbmUudHJpbSgpLnNsaWNlKDAsIC1jbG9zZS5sZW5ndGgpXHJcbiAgICAgIGhhdmVFbmRNYXJrZXIgPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2VhcmNoIGVuZCBvZiBibG9ja1xyXG4gICAgbmV4dExpbmUgPSBzdGFydExpbmVcclxuXHJcbiAgICBmb3IgKDs7KSB7XHJcbiAgICAgIGlmIChoYXZlRW5kTWFya2VyKSB7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG5cclxuICAgICAgbmV4dExpbmUrK1xyXG5cclxuICAgICAgaWYgKG5leHRMaW5lID49IGVuZExpbmUpIHtcclxuICAgICAgICAvLyB1bmNsb3NlZCBibG9jayBzaG91bGQgYmUgYXV0b2Nsb3NlZCBieSBlbmQgb2YgZG9jdW1lbnQuXHJcbiAgICAgICAgLy8gYWxzbyBibG9jayBzZWVtcyB0byBiZSBhdXRvY2xvc2VkIGJ5IGVuZCBvZiBwYXJlbnRcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwb3MgPSBzdGF0ZS5iTWFya3NbbmV4dExpbmVdICsgc3RhdGUudFNoaWZ0W25leHRMaW5lXVxyXG4gICAgICBtYXggPSBzdGF0ZS5lTWFya3NbbmV4dExpbmVdXHJcblxyXG4gICAgICBpZiAocG9zIDwgbWF4ICYmIHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHtcclxuICAgICAgICAvLyBub24tZW1wdHkgbGluZSB3aXRoIG5lZ2F0aXZlIGluZGVudCBzaG91bGQgc3RvcCB0aGUgbGlzdDpcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjbG9zZURlbGltID0gY2xvc2VTdGFydHNBdE5ld2xpbmVcclxuICAgICAgICA/IHN0YXRlLnNyYy5zbGljZShwb3MsIG1heCkudHJpbSgpXHJcbiAgICAgICAgOiBzdGF0ZS5zcmNcclxuICAgICAgICAgICAgLnNsaWNlKHBvcywgbWF4KVxyXG4gICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgIC5zbGljZSgtY2xvc2UubGVuZ3RoKVxyXG5cclxuICAgICAgaWYgKGNsb3NlRGVsaW0gIT09IGNsb3NlKSB7XHJcbiAgICAgICAgY29udGludWVcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gLSBzdGF0ZS5ibGtJbmRlbnQgPj0gNCkge1xyXG4gICAgICAgIC8vIGNsb3NpbmcgYmxvY2sgbWF0aCBzaG91bGQgYmUgaW5kZW50ZWQgbGVzcyB0aGVuIDQgc3BhY2VzXHJcbiAgICAgICAgY29udGludWVcclxuICAgICAgfVxyXG5cclxuICAgICAgbGFzdExpbmVQb3MgPSBzdGF0ZS5zcmMuc2xpY2UoMCwgbWF4KS5sYXN0SW5kZXhPZihjbG9zZSlcclxuICAgICAgbGFzdExpbmUgPSBzdGF0ZS5zcmMuc2xpY2UocG9zLCBsYXN0TGluZVBvcylcclxuXHJcbiAgICAgIHBvcyArPSBsYXN0TGluZS5sZW5ndGggKyBjbG9zZS5sZW5ndGhcclxuXHJcbiAgICAgIC8vIG1ha2Ugc3VyZSB0YWlsIGhhcyBzcGFjZXMgb25seVxyXG4gICAgICBwb3MgPSBzdGF0ZS5za2lwU3BhY2VzKHBvcylcclxuXHJcbiAgICAgIGlmIChwb3MgPCBtYXgpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBmb3VuZCFcclxuICAgICAgaGF2ZUVuZE1hcmtlciA9IHRydWVcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBtYXRoIGJsb2NrIGhhcyBoZWFkaW5nIHNwYWNlcywgdGhleSBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIGl0cyBpbm5lciBibG9ja1xyXG4gICAgbGVuID0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV1cclxuXHJcbiAgICBzdGF0ZS5saW5lID0gbmV4dExpbmUgKyAoaGF2ZUVuZE1hcmtlciA/IDEgOiAwKVxyXG5cclxuICAgIHRva2VuID0gc3RhdGUucHVzaCgnbWF0aF9ibG9jaycsICdtYXRoJywgMClcclxuICAgIHRva2VuLmJsb2NrID0gdHJ1ZVxyXG4gICAgdG9rZW4uY29udGVudCA9XHJcbiAgICAgIChmaXJzdExpbmUgJiYgZmlyc3RMaW5lLnRyaW0oKSA/IGZpcnN0TGluZSArICdcXG4nIDogJycpICtcclxuICAgICAgc3RhdGUuZ2V0TGluZXMoc3RhcnRMaW5lICsgMSwgbmV4dExpbmUsIGxlbiwgdHJ1ZSkgK1xyXG4gICAgICAobGFzdExpbmUgJiYgbGFzdExpbmUudHJpbSgpID8gbGFzdExpbmUgOiAnJylcclxuICAgIHRva2VuLm1hcCA9IFtzdGFydExpbmUsIHN0YXRlLmxpbmVdXHJcbiAgICB0b2tlbi5tYXJrdXAgPSBvcGVuXHJcblxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyaW5nT3B0aW9ucyB7XHJcbiAgZGlzcGxheT86ICdibG9jaydcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU1hdGhSZW5kZXJlcihyZW5kZXJpbmdPcHRpb25zOiBSZW5kZXJpbmdPcHRpb25zID0ge30pIHtcclxuICByZXR1cm4gcmVuZGVyaW5nT3B0aW9ucy5kaXNwbGF5ID09PSAnYmxvY2snXHJcbiAgICA/IGZ1bmN0aW9uKHRva2VuczogbWRJdC5Ub2tlbltdLCBpZHg6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm1hdGggYmxvY2tcIj4nICsgdG9rZW5zW2lkeF0uY29udGVudCArICc8L2Rpdj5cXG4nXHJcbiAgICAgIH1cclxuICAgIDogZnVuY3Rpb24odG9rZW5zOiBtZEl0LlRva2VuW10sIGlkeDogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cIm1hdGggaW5saW5lXCI+JyArIHRva2Vuc1tpZHhdLmNvbnRlbnQgKyAnPC9zcGFuPidcclxuICAgICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbk9wdGlvbnMge1xyXG4gIGlubGluZURlbGltPzogW1tzdHJpbmcsIHN0cmluZ11dXHJcbiAgYmxvY2tEZWxpbT86IFtbc3RyaW5nLCBzdHJpbmddXVxyXG4gIGlubGluZVJlbmRlcmVyPzogKGRhdGE6IHN0cmluZykgPT4gc3RyaW5nXHJcbiAgYmxvY2tSZW5kZXJlcj86IChkYXRhOiBzdHJpbmcpID0+IHN0cmluZ1xyXG4gIHJlbmRlcmluZ09wdGlvbnM/OiBSZW5kZXJpbmdPcHRpb25zXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXRoX3BsdWdpbihtZDogbWRJdC5NYXJrZG93bkl0LCBvcHRpb25zOiBQbHVnaW5PcHRpb25zID0ge30pIHtcclxuICAvLyBEZWZhdWx0IG9wdGlvbnNcclxuICBjb25zdCBpbmxpbmVEZWxpbSA9IG9wdGlvbnMuaW5saW5lRGVsaW0gfHwgW1snJCQnLCAnJCQnXV1cclxuICBjb25zdCBibG9ja0RlbGltID0gb3B0aW9ucy5ibG9ja0RlbGltIHx8IFtbJyQkJCcsICckJCQnXV1cclxuICBjb25zdCBvSW5saW5lUmVuZGVyZXIgPSBvcHRpb25zLmlubGluZVJlbmRlcmVyXHJcbiAgY29uc3Qgb0Jsb2NrUmVuZGVyZXIgPSBvcHRpb25zLmJsb2NrUmVuZGVyZXJcclxuICBjb25zdCBpbmxpbmVSZW5kZXJlciA9IG9JbmxpbmVSZW5kZXJlclxyXG4gICAgPyBmdW5jdGlvbih0b2tlbnM6IG1kSXQuVG9rZW5bXSwgaWR4OiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gb0lubGluZVJlbmRlcmVyKHRva2Vuc1tpZHhdLmNvbnRlbnQpXHJcbiAgICAgIH1cclxuICAgIDogbWFrZU1hdGhSZW5kZXJlcihvcHRpb25zLnJlbmRlcmluZ09wdGlvbnMpXHJcbiAgY29uc3QgYmxvY2tSZW5kZXJlciA9IG9CbG9ja1JlbmRlcmVyXHJcbiAgICA/IGZ1bmN0aW9uKHRva2VuczogbWRJdC5Ub2tlbltdLCBpZHg6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBvQmxvY2tSZW5kZXJlcih0b2tlbnNbaWR4XS5jb250ZW50KSArICdcXG4nXHJcbiAgICAgIH1cclxuICAgIDogbWFrZU1hdGhSZW5kZXJlcihcclxuICAgICAgICBPYmplY3QuYXNzaWduKHsgZGlzcGxheTogJ2Jsb2NrJyB9LCBvcHRpb25zLnJlbmRlcmluZ09wdGlvbnMpLFxyXG4gICAgICApXHJcblxyXG4gIGNvbnN0IG1hdGhJbmxpbmUgPSAobWFrZU1hdGhfaW5saW5lKGlubGluZURlbGltKSBhcyBhbnkpIGFzIG1kSXQuUnVsZVxyXG4gIGNvbnN0IG1hdGhCbG9jayA9IChtYWtlTWF0aF9ibG9jayhibG9ja0RlbGltKSBhcyBhbnkpIGFzIG1kSXQuUnVsZVxyXG5cclxuICBtZC5pbmxpbmUucnVsZXIuYmVmb3JlKCdlc2NhcGUnLCAnbWF0aF9pbmxpbmUnLCBtYXRoSW5saW5lKVxyXG4gIG1kLmJsb2NrLnJ1bGVyLmFmdGVyKCdibG9ja3F1b3RlJywgJ21hdGhfYmxvY2snLCBtYXRoQmxvY2ssIHtcclxuICAgIGFsdDogWydwYXJhZ3JhcGgnLCAncmVmZXJlbmNlJywgJ2Jsb2NrcXVvdGUnLCAnbGlzdCddLFxyXG4gIH0pXHJcbiAgbWQucmVuZGVyZXIucnVsZXMubWF0aF9pbmxpbmUgPSBpbmxpbmVSZW5kZXJlclxyXG4gIG1kLnJlbmRlcmVyLnJ1bGVzLm1hdGhfYmxvY2sgPSBibG9ja1JlbmRlcmVyXHJcblxyXG4gIC8vIFJlcGxhY2UgZXhpc3RpbmcgdGFibGUgcGFyc2VyIHdpdGggcGFyc2VyIHRoYXQgcmVzcGVjdHMgbmV3IGlubGluZSBkZWxpbXNcclxuICBjb25zdCB0YWJsZUJsb2NrID0gbWFrZVRhYmxlKHtcclxuICAgIGlubGluZURlbGltLFxyXG4gICAgYmxvY2tEZWxpbSxcclxuICB9KVxyXG4gIG1kLmJsb2NrLnJ1bGVyLmF0KCd0YWJsZScsIHRhYmxlQmxvY2ssIHtcclxuICAgIGFsdDogWydwYXJhZ3JhcGgnLCAncmVmZXJlbmNlJ10sXHJcbiAgfSlcclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst markdownItModule = require(\"markdown-it\");\r\nconst twemoji = tslib_1.__importStar(require(\"twemoji\"));\r\nconst path = tslib_1.__importStar(require(\"path\"));\r\nconst util_1 = require(\"./util\");\r\nconst _ = tslib_1.__importStar(require(\"lodash\"));\r\nfunction mathInline(text) {\r\n    return `<span class='math'><script type='math/tex'>${text}</script></span>`;\r\n}\r\nfunction mathBlock(text) {\r\n    return `<span class='math'><script type='math/tex; mode=display'>${text}</script></span>`;\r\n}\r\nfunction getOptions(breaks) {\r\n    return {\r\n        html: true,\r\n        xhtmlOut: false,\r\n        breaks,\r\n        langPrefix: 'lang-',\r\n        linkify: true,\r\n        typographer: true,\r\n    };\r\n}\r\nfunction currentConfig(rL) {\r\n    const config = util_1.atomConfig().markdownItConfig;\r\n    return {\r\n        renderLaTeX: rL,\r\n        lazyHeaders: config.useLazyHeaders,\r\n        checkBoxes: config.useCheckBoxes,\r\n        toc: config.useToc,\r\n        emoji: config.useEmoji,\r\n        breaks: config.breakOnSingleNewline,\r\n        inlineMathSeparators: config.inlineMathSeparators,\r\n        blockMathSeparators: config.blockMathSeparators,\r\n    };\r\n}\r\nfunction init(initState) {\r\n    const markdownIt = markdownItModule(getOptions(initState.breaks));\r\n    if (initState.renderLaTeX) {\r\n        const inlineDelim = util_1.pairUp(initState.inlineMathSeparators, 'inlineMathSeparators');\r\n        const blockDelim = util_1.pairUp(initState.blockMathSeparators, 'blockMathSeparators');\r\n        markdownIt.use(require('./markdown-it-math').math_plugin, {\r\n            inlineDelim,\r\n            blockDelim,\r\n            inlineRenderer: mathInline,\r\n            blockRenderer: mathBlock,\r\n        });\r\n    }\r\n    if (initState.lazyHeaders)\r\n        markdownIt.use(require('markdown-it-lazy-headers'));\r\n    if (initState.checkBoxes)\r\n        markdownIt.use(require('markdown-it-task-lists'));\r\n    if (initState.toc)\r\n        markdownIt.use(require('markdown-it-table-of-contents'));\r\n    if (initState.emoji) {\r\n        markdownIt.use(require('markdown-it-emoji'));\r\n        markdownIt.renderer.rules.emoji = function (token, idx) {\r\n            return twemoji.parse(token[idx].content, {\r\n                folder: 'svg',\r\n                ext: '.svg',\r\n                base: path.dirname(require.resolve('twemoji')) + path.sep,\r\n            });\r\n        };\r\n    }\r\n    return markdownIt;\r\n}\r\nfunction wrapInitIfNeeded(initf) {\r\n    let markdownIt = null;\r\n    let initState = null;\r\n    return function (newState) {\r\n        if (markdownIt === null || !_.isEqual(initState, newState)) {\r\n            initState = newState;\r\n            markdownIt = initf(newState);\r\n        }\r\n        return markdownIt;\r\n    };\r\n}\r\nconst initIfNeeded = wrapInitIfNeeded(init);\r\nfunction render(text, rL) {\r\n    const markdownIt = initIfNeeded(currentConfig(rL));\r\n    return markdownIt.render(text);\r\n}\r\nexports.render = render;\r\nfunction getTokens(text, rL) {\r\n    const markdownIt = initIfNeeded(currentConfig(rL));\r\n    return markdownIt.parse(text, {});\r\n}\r\nexports.getTokens = getTokens;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Rvd24taXQtaGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLWl0LWhlbHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxnREFBZ0Q7QUFDaEQseURBQWtDO0FBQ2xDLG1EQUE0QjtBQUM1QixpQ0FBMkM7QUFDM0Msa0RBQTJCO0FBSTNCLG9CQUFvQixJQUFZO0lBQzlCLE9BQU8sOENBQThDLElBQUksa0JBQWtCLENBQUE7QUFDN0UsQ0FBQztBQUVELG1CQUFtQixJQUFZO0lBQzdCLE9BQU8sNERBQTRELElBQUksa0JBQWtCLENBQUE7QUFDM0YsQ0FBQztBQUVELG9CQUFvQixNQUFlO0lBQ2pDLE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLFFBQVEsRUFBRSxLQUFLO1FBQ2YsTUFBTTtRQUNOLFVBQVUsRUFBRSxPQUFPO1FBQ25CLE9BQU8sRUFBRSxJQUFJO1FBQ2IsV0FBVyxFQUFFLElBQUk7S0FDbEIsQ0FBQTtBQUNILENBQUM7QUFFRCx1QkFBdUIsRUFBVztJQUNoQyxNQUFNLE1BQU0sR0FBRyxpQkFBVSxFQUFFLENBQUMsZ0JBQWdCLENBQUE7SUFDNUMsT0FBTztRQUNMLFdBQVcsRUFBRSxFQUFFO1FBQ2YsV0FBVyxFQUFFLE1BQU0sQ0FBQyxjQUFjO1FBQ2xDLFVBQVUsRUFBRSxNQUFNLENBQUMsYUFBYTtRQUNoQyxHQUFHLEVBQUUsTUFBTSxDQUFDLE1BQU07UUFDbEIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRO1FBQ3RCLE1BQU0sRUFBRSxNQUFNLENBQUMsb0JBQW9CO1FBQ25DLG9CQUFvQixFQUFFLE1BQU0sQ0FBQyxvQkFBb0I7UUFDakQsbUJBQW1CLEVBQUUsTUFBTSxDQUFDLG1CQUFtQjtLQUNoRCxDQUFBO0FBQ0gsQ0FBQztBQUVELGNBQWMsU0FBb0I7SUFDaEMsTUFBTSxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO0lBRWpFLElBQUksU0FBUyxDQUFDLFdBQVcsRUFBRTtRQUN6QixNQUFNLFdBQVcsR0FBRyxhQUFNLENBQ3hCLFNBQVMsQ0FBQyxvQkFBb0IsRUFDOUIsc0JBQXNCLENBQ3ZCLENBQUE7UUFDRCxNQUFNLFVBQVUsR0FBRyxhQUFNLENBQ3ZCLFNBQVMsQ0FBQyxtQkFBbUIsRUFDN0IscUJBQXFCLENBQ3RCLENBQUE7UUFFRCxVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVcsRUFBRTtZQUN4RCxXQUFXO1lBQ1gsVUFBVTtZQUNWLGNBQWMsRUFBRSxVQUFVO1lBQzFCLGFBQWEsRUFBRSxTQUFTO1NBQ3pCLENBQUMsQ0FBQTtLQUNIO0lBRUQsSUFBSSxTQUFTLENBQUMsV0FBVztRQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQTtJQUM5RSxJQUFJLFNBQVMsQ0FBQyxVQUFVO1FBQUUsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFBO0lBQzNFLElBQUksU0FBUyxDQUFDLEdBQUc7UUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUE7SUFFM0UsSUFBSSxTQUFTLENBQUMsS0FBSyxFQUFFO1FBQ25CLFVBQVUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQTtRQUM1QyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsVUFBUyxLQUFLLEVBQUUsR0FBRztZQUNuRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRTtnQkFDdkMsTUFBTSxFQUFFLEtBQUs7Z0JBQ2IsR0FBRyxFQUFFLE1BQU07Z0JBQ1gsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHO2FBQzFELENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQTtLQUNGO0lBRUQsT0FBTyxVQUFVLENBQUE7QUFDbkIsQ0FBQztBQUVELDBCQUEwQixLQUFrQjtJQUMxQyxJQUFJLFVBQVUsR0FBdUMsSUFBSSxDQUFBO0lBQ3pELElBQUksU0FBUyxHQUFxQixJQUFJLENBQUE7SUFFdEMsT0FBTyxVQUFTLFFBQW1CO1FBQ2pDLElBQUksVUFBVSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxFQUFFO1lBQzFELFNBQVMsR0FBRyxRQUFRLENBQUE7WUFDcEIsVUFBVSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQTtTQUM3QjtRQUNELE9BQU8sVUFBVSxDQUFBO0lBQ25CLENBQUMsQ0FBQTtBQUNILENBQUM7QUFFRCxNQUFNLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUUzQyxnQkFBdUIsSUFBWSxFQUFFLEVBQVc7SUFDOUMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ2xELE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNoQyxDQUFDO0FBSEQsd0JBR0M7QUFFRCxtQkFBMEIsSUFBWSxFQUFFLEVBQVc7SUFDakQsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ2xELE9BQU8sVUFBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUE7QUFDcEMsQ0FBQztBQUhELDhCQUdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hcmtkb3duSXRNb2R1bGUgPSByZXF1aXJlKCdtYXJrZG93bi1pdCcpXHJcbmltcG9ydCAqIGFzIHR3ZW1vamkgZnJvbSAndHdlbW9qaSdcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgeyBwYWlyVXAsIGF0b21Db25maWcgfSBmcm9tICcuL3V0aWwnXHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJ1xyXG5cclxudHlwZSBJbml0U3RhdGUgPSBSZWFkb25seTxSZXR1cm5UeXBlPHR5cGVvZiBjdXJyZW50Q29uZmlnPj5cclxuXHJcbmZ1bmN0aW9uIG1hdGhJbmxpbmUodGV4dDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGA8c3BhbiBjbGFzcz0nbWF0aCc+PHNjcmlwdCB0eXBlPSdtYXRoL3RleCc+JHt0ZXh0fTwvc2NyaXB0Pjwvc3Bhbj5gXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hdGhCbG9jayh0ZXh0OiBzdHJpbmcpIHtcclxuICByZXR1cm4gYDxzcGFuIGNsYXNzPSdtYXRoJz48c2NyaXB0IHR5cGU9J21hdGgvdGV4OyBtb2RlPWRpc3BsYXknPiR7dGV4dH08L3NjcmlwdD48L3NwYW4+YFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRPcHRpb25zKGJyZWFrczogYm9vbGVhbikge1xyXG4gIHJldHVybiB7XHJcbiAgICBodG1sOiB0cnVlLFxyXG4gICAgeGh0bWxPdXQ6IGZhbHNlLFxyXG4gICAgYnJlYWtzLFxyXG4gICAgbGFuZ1ByZWZpeDogJ2xhbmctJyxcclxuICAgIGxpbmtpZnk6IHRydWUsXHJcbiAgICB0eXBvZ3JhcGhlcjogdHJ1ZSxcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGN1cnJlbnRDb25maWcockw6IGJvb2xlYW4pIHtcclxuICBjb25zdCBjb25maWcgPSBhdG9tQ29uZmlnKCkubWFya2Rvd25JdENvbmZpZ1xyXG4gIHJldHVybiB7XHJcbiAgICByZW5kZXJMYVRlWDogckwsXHJcbiAgICBsYXp5SGVhZGVyczogY29uZmlnLnVzZUxhenlIZWFkZXJzLFxyXG4gICAgY2hlY2tCb3hlczogY29uZmlnLnVzZUNoZWNrQm94ZXMsXHJcbiAgICB0b2M6IGNvbmZpZy51c2VUb2MsXHJcbiAgICBlbW9qaTogY29uZmlnLnVzZUVtb2ppLFxyXG4gICAgYnJlYWtzOiBjb25maWcuYnJlYWtPblNpbmdsZU5ld2xpbmUsXHJcbiAgICBpbmxpbmVNYXRoU2VwYXJhdG9yczogY29uZmlnLmlubGluZU1hdGhTZXBhcmF0b3JzLFxyXG4gICAgYmxvY2tNYXRoU2VwYXJhdG9yczogY29uZmlnLmJsb2NrTWF0aFNlcGFyYXRvcnMsXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0KGluaXRTdGF0ZTogSW5pdFN0YXRlKTogbWFya2Rvd25JdE1vZHVsZS5NYXJrZG93bkl0IHtcclxuICBjb25zdCBtYXJrZG93bkl0ID0gbWFya2Rvd25JdE1vZHVsZShnZXRPcHRpb25zKGluaXRTdGF0ZS5icmVha3MpKVxyXG5cclxuICBpZiAoaW5pdFN0YXRlLnJlbmRlckxhVGVYKSB7XHJcbiAgICBjb25zdCBpbmxpbmVEZWxpbSA9IHBhaXJVcChcclxuICAgICAgaW5pdFN0YXRlLmlubGluZU1hdGhTZXBhcmF0b3JzLFxyXG4gICAgICAnaW5saW5lTWF0aFNlcGFyYXRvcnMnLFxyXG4gICAgKVxyXG4gICAgY29uc3QgYmxvY2tEZWxpbSA9IHBhaXJVcChcclxuICAgICAgaW5pdFN0YXRlLmJsb2NrTWF0aFNlcGFyYXRvcnMsXHJcbiAgICAgICdibG9ja01hdGhTZXBhcmF0b3JzJyxcclxuICAgIClcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bnNhZmUtYW55XHJcbiAgICBtYXJrZG93bkl0LnVzZShyZXF1aXJlKCcuL21hcmtkb3duLWl0LW1hdGgnKS5tYXRoX3BsdWdpbiwge1xyXG4gICAgICBpbmxpbmVEZWxpbSxcclxuICAgICAgYmxvY2tEZWxpbSxcclxuICAgICAgaW5saW5lUmVuZGVyZXI6IG1hdGhJbmxpbmUsXHJcbiAgICAgIGJsb2NrUmVuZGVyZXI6IG1hdGhCbG9jayxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBpZiAoaW5pdFN0YXRlLmxhenlIZWFkZXJzKSBtYXJrZG93bkl0LnVzZShyZXF1aXJlKCdtYXJrZG93bi1pdC1sYXp5LWhlYWRlcnMnKSlcclxuICBpZiAoaW5pdFN0YXRlLmNoZWNrQm94ZXMpIG1hcmtkb3duSXQudXNlKHJlcXVpcmUoJ21hcmtkb3duLWl0LXRhc2stbGlzdHMnKSlcclxuICBpZiAoaW5pdFN0YXRlLnRvYykgbWFya2Rvd25JdC51c2UocmVxdWlyZSgnbWFya2Rvd24taXQtdGFibGUtb2YtY29udGVudHMnKSlcclxuXHJcbiAgaWYgKGluaXRTdGF0ZS5lbW9qaSkge1xyXG4gICAgbWFya2Rvd25JdC51c2UocmVxdWlyZSgnbWFya2Rvd24taXQtZW1vamknKSlcclxuICAgIG1hcmtkb3duSXQucmVuZGVyZXIucnVsZXMuZW1vamkgPSBmdW5jdGlvbih0b2tlbiwgaWR4KSB7XHJcbiAgICAgIHJldHVybiB0d2Vtb2ppLnBhcnNlKHRva2VuW2lkeF0uY29udGVudCwge1xyXG4gICAgICAgIGZvbGRlcjogJ3N2ZycsXHJcbiAgICAgICAgZXh0OiAnLnN2ZycsXHJcbiAgICAgICAgYmFzZTogcGF0aC5kaXJuYW1lKHJlcXVpcmUucmVzb2x2ZSgndHdlbW9qaScpKSArIHBhdGguc2VwLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hcmtkb3duSXRcclxufVxyXG5cclxuZnVuY3Rpb24gd3JhcEluaXRJZk5lZWRlZChpbml0ZjogdHlwZW9mIGluaXQpOiB0eXBlb2YgaW5pdCB7XHJcbiAgbGV0IG1hcmtkb3duSXQ6IG1hcmtkb3duSXRNb2R1bGUuTWFya2Rvd25JdCB8IG51bGwgPSBudWxsXHJcbiAgbGV0IGluaXRTdGF0ZTogSW5pdFN0YXRlIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uKG5ld1N0YXRlOiBJbml0U3RhdGUpIHtcclxuICAgIGlmIChtYXJrZG93bkl0ID09PSBudWxsIHx8ICFfLmlzRXF1YWwoaW5pdFN0YXRlLCBuZXdTdGF0ZSkpIHtcclxuICAgICAgaW5pdFN0YXRlID0gbmV3U3RhdGVcclxuICAgICAgbWFya2Rvd25JdCA9IGluaXRmKG5ld1N0YXRlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcmtkb3duSXRcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGluaXRJZk5lZWRlZCA9IHdyYXBJbml0SWZOZWVkZWQoaW5pdClcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIodGV4dDogc3RyaW5nLCByTDogYm9vbGVhbikge1xyXG4gIGNvbnN0IG1hcmtkb3duSXQgPSBpbml0SWZOZWVkZWQoY3VycmVudENvbmZpZyhyTCkpXHJcbiAgcmV0dXJuIG1hcmtkb3duSXQucmVuZGVyKHRleHQpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlbnModGV4dDogc3RyaW5nLCByTDogYm9vbGVhbikge1xyXG4gIGNvbnN0IG1hcmtkb3duSXQgPSBpbml0SWZOZWVkZWQoY3VycmVudENvbmZpZyhyTCkpXHJcbiAgcmV0dXJuIG1hcmtkb3duSXQhLnBhcnNlKHRleHQsIHt9KVxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst scopesByFenceName = {\r\n    sh: 'source.shell',\r\n    bash: 'source.shell',\r\n    c: 'source.c',\r\n    'c++': 'source.cpp',\r\n    cpp: 'source.cpp',\r\n    coffee: 'source.coffee',\r\n    coffeescript: 'source.coffee',\r\n    'coffee-script': 'source.coffee',\r\n    cs: 'source.cs',\r\n    csharp: 'source.cs',\r\n    css: 'source.css',\r\n    scss: 'source.css.scss',\r\n    sass: 'source.sass',\r\n    erlang: 'source.erl',\r\n    go: 'source.go',\r\n    html: 'text.html.basic',\r\n    java: 'source.java',\r\n    js: 'source.js',\r\n    javascript: 'source.js',\r\n    json: 'source.json',\r\n    less: 'source.less',\r\n    mustache: 'text.html.mustache',\r\n    objc: 'source.objc',\r\n    'objective-c': 'source.objc',\r\n    php: 'text.html.php',\r\n    py: 'source.python',\r\n    python: 'source.python',\r\n    rb: 'source.ruby',\r\n    ruby: 'source.ruby',\r\n    text: 'text.plain',\r\n    toml: 'source.toml',\r\n    xml: 'text.xml',\r\n    yaml: 'source.yaml',\r\n    yml: 'source.yaml',\r\n};\r\nfunction scopeForFenceName(fenceName) {\r\n    const lcfn = fenceName.toLowerCase();\r\n    return scopesByFenceName[lcfn] || `source.${lcfn}`;\r\n}\r\nexports.scopeForFenceName = scopeForFenceName;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0ZW5zaW9uLWhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leHRlbnNpb24taGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxpQkFBaUIsR0FBRztJQUN4QixFQUFFLEVBQUUsY0FBYztJQUNsQixJQUFJLEVBQUUsY0FBYztJQUNwQixDQUFDLEVBQUUsVUFBVTtJQUNiLEtBQUssRUFBRSxZQUFZO0lBQ25CLEdBQUcsRUFBRSxZQUFZO0lBQ2pCLE1BQU0sRUFBRSxlQUFlO0lBQ3ZCLFlBQVksRUFBRSxlQUFlO0lBQzdCLGVBQWUsRUFBRSxlQUFlO0lBQ2hDLEVBQUUsRUFBRSxXQUFXO0lBQ2YsTUFBTSxFQUFFLFdBQVc7SUFDbkIsR0FBRyxFQUFFLFlBQVk7SUFDakIsSUFBSSxFQUFFLGlCQUFpQjtJQUN2QixJQUFJLEVBQUUsYUFBYTtJQUNuQixNQUFNLEVBQUUsWUFBWTtJQUNwQixFQUFFLEVBQUUsV0FBVztJQUNmLElBQUksRUFBRSxpQkFBaUI7SUFDdkIsSUFBSSxFQUFFLGFBQWE7SUFDbkIsRUFBRSxFQUFFLFdBQVc7SUFDZixVQUFVLEVBQUUsV0FBVztJQUN2QixJQUFJLEVBQUUsYUFBYTtJQUNuQixJQUFJLEVBQUUsYUFBYTtJQUNuQixRQUFRLEVBQUUsb0JBQW9CO0lBQzlCLElBQUksRUFBRSxhQUFhO0lBQ25CLGFBQWEsRUFBRSxhQUFhO0lBQzVCLEdBQUcsRUFBRSxlQUFlO0lBQ3BCLEVBQUUsRUFBRSxlQUFlO0lBQ25CLE1BQU0sRUFBRSxlQUFlO0lBQ3ZCLEVBQUUsRUFBRSxhQUFhO0lBQ2pCLElBQUksRUFBRSxhQUFhO0lBQ25CLElBQUksRUFBRSxZQUFZO0lBQ2xCLElBQUksRUFBRSxhQUFhO0lBQ25CLEdBQUcsRUFBRSxVQUFVO0lBQ2YsSUFBSSxFQUFFLGFBQWE7SUFDbkIsR0FBRyxFQUFFLGFBQWE7Q0FDNEIsQ0FBQTtBQUVoRCwyQkFBa0MsU0FBaUI7SUFDakQsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBQ3BDLE9BQU8saUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksVUFBVSxJQUFJLEVBQUUsQ0FBQTtBQUNwRCxDQUFDO0FBSEQsOENBR0MiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzY29wZXNCeUZlbmNlTmFtZSA9IHtcclxuICBzaDogJ3NvdXJjZS5zaGVsbCcsXHJcbiAgYmFzaDogJ3NvdXJjZS5zaGVsbCcsXHJcbiAgYzogJ3NvdXJjZS5jJyxcclxuICAnYysrJzogJ3NvdXJjZS5jcHAnLFxyXG4gIGNwcDogJ3NvdXJjZS5jcHAnLFxyXG4gIGNvZmZlZTogJ3NvdXJjZS5jb2ZmZWUnLFxyXG4gIGNvZmZlZXNjcmlwdDogJ3NvdXJjZS5jb2ZmZWUnLFxyXG4gICdjb2ZmZWUtc2NyaXB0JzogJ3NvdXJjZS5jb2ZmZWUnLFxyXG4gIGNzOiAnc291cmNlLmNzJyxcclxuICBjc2hhcnA6ICdzb3VyY2UuY3MnLFxyXG4gIGNzczogJ3NvdXJjZS5jc3MnLFxyXG4gIHNjc3M6ICdzb3VyY2UuY3NzLnNjc3MnLFxyXG4gIHNhc3M6ICdzb3VyY2Uuc2FzcycsXHJcbiAgZXJsYW5nOiAnc291cmNlLmVybCcsXHJcbiAgZ286ICdzb3VyY2UuZ28nLFxyXG4gIGh0bWw6ICd0ZXh0Lmh0bWwuYmFzaWMnLFxyXG4gIGphdmE6ICdzb3VyY2UuamF2YScsXHJcbiAganM6ICdzb3VyY2UuanMnLFxyXG4gIGphdmFzY3JpcHQ6ICdzb3VyY2UuanMnLFxyXG4gIGpzb246ICdzb3VyY2UuanNvbicsXHJcbiAgbGVzczogJ3NvdXJjZS5sZXNzJyxcclxuICBtdXN0YWNoZTogJ3RleHQuaHRtbC5tdXN0YWNoZScsXHJcbiAgb2JqYzogJ3NvdXJjZS5vYmpjJyxcclxuICAnb2JqZWN0aXZlLWMnOiAnc291cmNlLm9iamMnLFxyXG4gIHBocDogJ3RleHQuaHRtbC5waHAnLFxyXG4gIHB5OiAnc291cmNlLnB5dGhvbicsXHJcbiAgcHl0aG9uOiAnc291cmNlLnB5dGhvbicsXHJcbiAgcmI6ICdzb3VyY2UucnVieScsXHJcbiAgcnVieTogJ3NvdXJjZS5ydWJ5JyxcclxuICB0ZXh0OiAndGV4dC5wbGFpbicsXHJcbiAgdG9tbDogJ3NvdXJjZS50b21sJyxcclxuICB4bWw6ICd0ZXh0LnhtbCcsXHJcbiAgeWFtbDogJ3NvdXJjZS55YW1sJyxcclxuICB5bWw6ICdzb3VyY2UueWFtbCcsXHJcbn0gYXMgeyBbZmVuY2VOYW1lOiBzdHJpbmddOiBzdHJpbmcgfCB1bmRlZmluZWQgfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlRm9yRmVuY2VOYW1lKGZlbmNlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBsY2ZuID0gZmVuY2VOYW1lLnRvTG93ZXJDYXNlKClcclxuICByZXR1cm4gc2NvcGVzQnlGZW5jZU5hbWVbbGNmbl0gfHwgYHNvdXJjZS4ke2xjZm59YFxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst path = tslib_1.__importStar(require(\"path\"));\r\nconst fs = tslib_1.__importStar(require(\"fs\"));\r\nconst util_1 = require(\"../util\");\r\nfunction editorForId(editorId) {\r\n    for (const editor of atom.workspace.getTextEditors()) {\r\n        if (editor.id === editorId) {\r\n            return editor;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.editorForId = editorForId;\r\nlet getStylesOverride = undefined;\r\nfunction __setGetStylesOverride(f) {\r\n    getStylesOverride = f;\r\n}\r\nexports.__setGetStylesOverride = __setGetStylesOverride;\r\nfunction getStyles(context) {\r\n    if (getStylesOverride)\r\n        return getStylesOverride(context);\r\n    const textEditorStyles = document.createElement('atom-styles');\r\n    textEditorStyles.initialize(atom.styles);\r\n    textEditorStyles.setAttribute('context', context);\r\n    return Array.from(textEditorStyles.childNodes).map((styleElement) => styleElement.innerText);\r\n}\r\nexports.getStyles = getStyles;\r\nfunction getMarkdownPreviewCSS() {\r\n    const markdowPreviewRules = ['body { padding: 0; margin: 0; }'];\r\n    const cssUrlRefExp = /url\\(atom:\\/\\/markdown-preview-plus\\/assets\\/(.*)\\)/;\r\n    return markdowPreviewRules\r\n        .concat(getStyles('markdown-preview-plus'))\r\n        .concat(getStyles('atom-text-editor'))\r\n        .join('\\n')\r\n        .replace(/\\batom-text-editor\\b/g, 'pre.editor-colors')\r\n        .replace(/\\bmarkdown-preview-plus-view\\b/g, '.markdown-preview-plus-view')\r\n        .replace(/\\b\\.\\.markdown-preview-plus-view\\b/g, '.markdown-preview-plus-view')\r\n        .replace(cssUrlRefExp, function (_match, assetsName, _offset, _string) {\r\n        const assetPath = path.join(__dirname, '../../assets', assetsName);\r\n        const originalData = fs.readFileSync(assetPath, 'binary');\r\n        const base64Data = new Buffer(originalData, 'binary').toString('base64');\r\n        return `url('data:image/jpeg;base64,${base64Data}')`;\r\n    });\r\n}\r\nfunction decodeTag(token) {\r\n    if (token.tag === 'math') {\r\n        return 'span';\r\n    }\r\n    if (token.tag === 'code') {\r\n        return 'atom-text-editor';\r\n    }\r\n    if (token.tag === '') {\r\n        return null;\r\n    }\r\n    return token.tag;\r\n}\r\nfunction buildLineMap(tokens) {\r\n    const lineMap = {};\r\n    const tokenTagCount = {};\r\n    tokenTagCount[0] = {};\r\n    for (const token of tokens) {\r\n        if (token.hidden)\r\n            continue;\r\n        if (token.map == null)\r\n            continue;\r\n        const tag = decodeTag(token);\r\n        if (tag === null)\r\n            continue;\r\n        if (token.nesting === 1) {\r\n            for (let line = token.map[0]; line < token.map[1]; line += 1) {\r\n                if (lineMap[line] == null)\r\n                    lineMap[line] = [];\r\n                lineMap[line].push({\r\n                    tag: tag,\r\n                    index: tokenTagCount[token.level][tag] || 0,\r\n                });\r\n            }\r\n            tokenTagCount[token.level + 1] = {};\r\n        }\r\n        else if (token.nesting === 0) {\r\n            for (let line = token.map[0]; line < token.map[1]; line += 1) {\r\n                if (lineMap[line] == null)\r\n                    lineMap[line] = [];\r\n                lineMap[line].push({\r\n                    tag: tag,\r\n                    index: tokenTagCount[token.level][tag] || 0,\r\n                });\r\n            }\r\n        }\r\n        const ttc = tokenTagCount[token.level][tag];\r\n        tokenTagCount[token.level][tag] = ttc ? ttc + 1 : 1;\r\n    }\r\n    return lineMap;\r\n}\r\nexports.buildLineMap = buildLineMap;\r\nfunction mathJaxScript(texConfig) {\r\n    return `\\\r\n<script type=\"text/x-mathjax-config\">\r\n  MathJax.Hub.Config({\r\n    jax: [\"input/TeX\",\"output/HTML-CSS\"],\r\n    extensions: [\"[a11y]/accessibility-menu.js\"],\r\n    TeX: ${JSON.stringify(texConfig, undefined, 2)},\r\n    showMathMenu: true\r\n  });\r\n</script>\r\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js\"></script>`;\r\n}\r\nfunction mkHtml(title, html, renderLaTeX, useGithubStyle, texConfig) {\r\n    const githubStyle = useGithubStyle ? ' data-use-github-style' : '';\r\n    let maybeMathJaxScript;\r\n    if (renderLaTeX) {\r\n        maybeMathJaxScript = mathJaxScript(texConfig);\r\n    }\r\n    else {\r\n        maybeMathJaxScript = '';\r\n    }\r\n    return `\\\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset=\"utf-8\" />\r\n    <title>${title}</title>${maybeMathJaxScript}\r\n    <style>${getMarkdownPreviewCSS()}</style>\r\n${html.head.innerHTML}\r\n  </head>\r\n  <body class=\"markdown-preview-plus-view\"${githubStyle}>\r\n    ${html.body.innerHTML}\r\n  </body>\r\n</html>\r\n`;\r\n}\r\nexports.mkHtml = mkHtml;\r\nfunction destroy(item) {\r\n    const pane = atom.workspace.paneForItem(item);\r\n    if (pane)\r\n        util_1.handlePromise(pane.destroyItem(item));\r\n}\r\nexports.destroy = destroy;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYXJrZG93bi1wcmV2aWV3LXZpZXcvdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxtREFBNEI7QUFDNUIsK0NBQXdCO0FBRXhCLGtDQUF1QztBQUV2QyxxQkFBNEIsUUFBZ0I7SUFDMUMsS0FBSyxNQUFNLE1BQU0sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsRUFBRSxFQUFFO1FBQ3BELElBQUksTUFBTSxDQUFDLEVBQUUsS0FBSyxRQUFRLEVBQUU7WUFDMUIsT0FBTyxNQUFNLENBQUE7U0FDZDtLQUNGO0lBQ0QsT0FBTyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQVBELGtDQU9DO0FBR0QsSUFBSSxpQkFBaUIsR0FBaUMsU0FBUyxDQUFBO0FBRS9ELGdDQUF1QyxDQUFvQjtJQUN6RCxpQkFBaUIsR0FBRyxDQUFDLENBQUE7QUFDdkIsQ0FBQztBQUZELHdEQUVDO0FBRUQsbUJBQTBCLE9BQWU7SUFDdkMsSUFBSSxpQkFBaUI7UUFBRSxPQUFPLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3hELE1BQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FDN0MsYUFBYSxDQUM4QyxDQUFBO0lBQzdELGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDeEMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUdqRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUNoRCxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUUsWUFBaUMsQ0FBQyxTQUFTLENBQy9ELENBQUE7QUFDSCxDQUFDO0FBWkQsOEJBWUM7QUFFRDtJQUNFLE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFBO0lBQy9ELE1BQU0s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QUFFLENBQUE7S0FDeEI7SUFDRCxPQUFPOzs7OzthQUtJLEtBQUssV0FBVyxrQkFBa0I7YUFDbEMscUJBQXFCLEVBQUU7RUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTOzs0Q0FFdUIsV0FBVztNQUNqRCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVM7OztDQUd4QixDQUFBO0FBQ0QsQ0FBQztBQTVCRCx3QkE0QkM7QUFFRCxpQkFBd0IsSUFBWTtJQUNsQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM3QyxJQUFJLElBQUk7UUFBRSxvQkFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtBQUNqRCxDQUFDO0FBSEQsMEJBR0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXh0RWRpdG9yLCBTdHlsZU1hbmFnZXIgfSBmcm9tICdhdG9tJ1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnXHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgeyBUb2tlbiB9IGZyb20gJ21hcmtkb3duLWl0J1xyXG5pbXBvcnQgeyBoYW5kbGVQcm9taXNlIH0gZnJvbSAnLi4vdXRpbCdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlZGl0b3JGb3JJZChlZGl0b3JJZDogbnVtYmVyKTogVGV4dEVkaXRvciB8IHVuZGVmaW5lZCB7XHJcbiAgZm9yIChjb25zdCBlZGl0b3Igb2YgYXRvbS53b3Jrc3BhY2UuZ2V0VGV4dEVkaXRvcnMoKSkge1xyXG4gICAgaWYgKGVkaXRvci5pZCA9PT0gZWRpdG9ySWQpIHtcclxuICAgICAgcmV0dXJuIGVkaXRvclxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdW5kZWZpbmVkXHJcbn1cclxuXHJcbi8vIHRoaXMgd2VpcmRuZXNzIGFsbG93cyBvdmVycmlkaW5nIGluIHRlc3RzXHJcbmxldCBnZXRTdHlsZXNPdmVycmlkZTogdHlwZW9mIGdldFN0eWxlcyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0R2V0U3R5bGVzT3ZlcnJpZGUoZj86IHR5cGVvZiBnZXRTdHlsZXMpIHtcclxuICBnZXRTdHlsZXNPdmVycmlkZSA9IGZcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlcyhjb250ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgaWYgKGdldFN0eWxlc092ZXJyaWRlKSByZXR1cm4gZ2V0U3R5bGVzT3ZlcnJpZGUoY29udGV4dClcclxuICBjb25zdCB0ZXh0RWRpdG9yU3R5bGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcclxuICAgICdhdG9tLXN0eWxlcycsXHJcbiAgKSBhcyBIVE1MRWxlbWVudCAmIHsgaW5pdGlhbGl6ZShzdHlsZXM6IFN0eWxlTWFuYWdlcik6IHZvaWQgfVxyXG4gIHRleHRFZGl0b3JTdHlsZXMuaW5pdGlhbGl6ZShhdG9tLnN0eWxlcylcclxuICB0ZXh0RWRpdG9yU3R5bGVzLnNldEF0dHJpYnV0ZSgnY29udGV4dCcsIGNvbnRleHQpXHJcblxyXG4gIC8vIEV4dHJhY3Qgc3R5bGUgZWxlbWVudHMgY29udGVudFxyXG4gIHJldHVybiBBcnJheS5mcm9tKHRleHRFZGl0b3JTdHlsZXMuY2hpbGROb2RlcykubWFwKFxyXG4gICAgKHN0eWxlRWxlbWVudCkgPT4gKHN0eWxlRWxlbWVudCBhcyBIVE1MU3R5bGVFbGVtZW50KS5pbm5lclRleHQsXHJcbiAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXJrZG93blByZXZpZXdDU1MoKSB7XHJcbiAgY29uc3QgbWFya2Rvd1ByZXZpZXdSdWxlcyA9IFsnYm9keSB7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgfSddXHJcbiAgY29uc3QgY3NzVXJsUmVmRXhwID0gL3VybFxcKGF0b206XFwvXFwvbWFya2Rvd24tcHJldmlldy1wbHVzXFwvYXNzZXRzXFwvKC4qKVxcKS9cclxuXHJcbiAgcmV0dXJuIG1hcmtkb3dQcmV2aWV3UnVsZXNcclxuICAgIC5jb25jYXQoZ2V0U3R5bGVzKCdtYXJrZG93bi1wcmV2aWV3LXBsdXMnKSlcclxuICAgIC5jb25jYXQoZ2V0U3R5bGVzKCdhdG9tLXRleHQtZWRpdG9yJykpXHJcbiAgICAuam9pbignXFxuJylcclxuICAgIC5yZXBsYWNlKC9cXGJhdG9tLXRleHQtZWRpdG9yXFxiL2csICdwcmUuZWRpdG9yLWNvbG9ycycpXHJcbiAgICAucmVwbGFjZSgvXFxibWFya2Rvd24tcHJldmlldy1wbHVzLXZpZXdcXGIvZywgJy5tYXJrZG93bi1wcmV2aWV3LXBsdXMtdmlldycpXHJcbiAgICAucmVwbGFjZShcclxuICAgICAgL1xcYlxcLlxcLm1hcmtkb3duLXByZXZpZXctcGx1cy12aWV3XFxiL2csXHJcbiAgICAgICcubWFya2Rvd24tcHJldmlldy1wbHVzLXZpZXcnLFxyXG4gICAgKVxyXG4gICAgLnJlcGxhY2UoY3NzVXJsUmVmRXhwLCBmdW5jdGlvbihcclxuICAgICAgX21hdGNoLFxyXG4gICAgICBhc3NldHNOYW1lOiBzdHJpbmcsXHJcbiAgICAgIF9vZmZzZXQsXHJcbiAgICAgIF9zdHJpbmcsXHJcbiAgICApIHtcclxuICAgICAgLy8gYmFzZTY0IGVuY29kZSBhc3NldHNcclxuICAgICAgY29uc3QgYXNzZXRQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL2Fzc2V0cycsIGFzc2V0c05hbWUpXHJcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGF0YSA9IGZzLnJlYWRGaWxlU3luYyhhc3NldFBhdGgsICdiaW5hcnknKVxyXG4gICAgICBjb25zdCBiYXNlNjREYXRhID0gbmV3IEJ1ZmZlcihvcmlnaW5hbERhdGEsICdiaW5hcnknKS50b1N0cmluZygnYmFzZTY0JylcclxuICAgICAgcmV0dXJuIGB1cmwoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtiYXNlNjREYXRhfScpYFxyXG4gICAgfSlcclxufVxyXG5cclxuLy9cclxuLy8gRGVjb2RlIHRhZ3MgdXNlZCBieSBtYXJrZG93bi1pdFxyXG4vL1xyXG4vLyBAcGFyYW0ge21hcmtkb3duLWl0LlRva2VufSB0b2tlbiBEZWNvZGUgdGhlIHRhZyBvZiB0b2tlbi5cclxuLy8gQHJldHVybiB7c3RyaW5nfG51bGx9IERlY29kZWQgdGFnIG9yIGBudWxsYCBpZiB0aGUgdG9rZW4gaGFzIG5vIHRhZy5cclxuLy9cclxuZnVuY3Rpb24gZGVjb2RlVGFnKHRva2VuOiBUb2tlbik6IHN0cmluZyB8IG51bGwge1xyXG4gIGlmICh0b2tlbi50YWcgPT09ICdtYXRoJykge1xyXG4gICAgcmV0dXJuICdzcGFuJ1xyXG4gIH1cclxuICBpZiAodG9rZW4udGFnID09PSAnY29kZScpIHtcclxuICAgIHJldHVybiAnYXRvbS10ZXh0LWVkaXRvcidcclxuICB9XHJcbiAgaWYgKHRva2VuLnRhZyA9PT0gJycpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG4gIHJldHVybiB0b2tlbi50YWdcclxufVxyXG5cclxuLy9cclxuLy8gRGV0ZXJtaW5lIHBhdGggdG8gYSB0YXJnZXQgdG9rZW4uXHJcbi8vXHJcbi8vIEBwYXJhbSB7KG1hcmtkb3duLWl0LlRva2VuKVtdfSB0b2tlbnMgQXJyYXkgb2YgdG9rZW5zIGFzIHJldHVybmVkIGJ5XHJcbi8vICAgYG1hcmtkb3duLWl0LnBhcnNlKClgLlxyXG4vLyBAcGFyYW0ge251bWJlcn0gbGluZSBMaW5lIHJlcHJlc2VudGluZyB0aGUgdGFyZ2V0IHRva2VuLlxyXG4vLyBAcmV0dXJuIHsodGFnOiA8dGFnPiwgaW5kZXg6IDxpbmRleD4pW119IEFycmF5IHJlcHJlc2VudGluZyBhIHBhdGggdG8gdGhlXHJcbi8vICAgdGFyZ2V0IHRva2VuLiBUaGUgcm9vdCB0b2tlbiBpcyByZXByZXNlbnRlZCBieSB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGVcclxuLy8gICBhcnJheSBhbmQgdGhlIHRhcmdldCB0b2tlbiBieSB0aGUgbGFzdCBlbG1lbnQuIEVhY2ggZWxlbWVudCBjb25zaXN0cyBvZiBhXHJcbi8vICAgYHRhZ2AgYW5kIGBpbmRleGAgcmVwcmVzZW50aW5nIGl0cyBpbmRleCBhbW9uZ3N0IGl0cyBzaWJsaW5nIHRva2VucyBpblxyXG4vLyAgIGB0b2tlbnNgIG9mIHRoZSBzYW1lIGB0YWdgLiBgbGluZWAgd2lsbCBsaWUgYmV0d2VlbiB0aGUgcHJvcGVydGllc1xyXG4vLyAgIGBtYXBbMF1gIGFuZCBgbWFwWzFdYCBvZiB0aGUgdGFyZ2V0IHRva2VuLlxyXG4vL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRMaW5lTWFwKHRva2VuczogUmVhZG9ubHlBcnJheTxSZWFkb25seTxUb2tlbj4+KSB7XHJcbiAgY29uc3QgbGluZU1hcDogeyBbbGluZTogbnVtYmVyXTogQXJyYXk8eyB0YWc6IHN0cmluZzsgaW5kZXg6IG51bWJlciB9PiB9ID0ge31cclxuICBjb25zdCB0b2tlblRhZ0NvdW50OiB7IFtsaW5lOiBudW1iZXJdOiB7IFt0YWc6IHN0cmluZ106IG51bWJlciB9IH0gPSB7fVxyXG4gIHRva2VuVGFnQ291bnRbMF0gPSB7fVxyXG5cclxuICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xyXG4gICAgaWYgKHRva2VuLmhpZGRlbikgY29udGludWVcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpzdHJpY3QtdHlwZS1wcmVkaWNhdGVzIC8vIFRPRE86IGNvbXBsYWluIG9uIERUXHJcbiAgICBpZiAodG9rZW4ubWFwID09IG51bGwpIGNvbnRpbnVlXHJcblxyXG4gICAgY29uc3QgdGFnID0gZGVjb2RlVGFnKHRva2VuKVxyXG4gICAgaWYgKHRhZyA9PT0gbnVsbCkgY29udGludWVcclxuXHJcbiAgICBpZiAodG9rZW4ubmVzdGluZyA9PT0gMSkge1xyXG4gICAgICAvLyBvcGVuaW5nIHRhZ1xyXG4gICAgICBmb3IgKGxldCBsaW5lID0gdG9rZW4ubWFwWzBdOyBsaW5lIDwgdG9rZW4ubWFwWzFdOyBsaW5lICs9IDEpIHtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6c3RyaWN0LXR5cGUtcHJlZGljYXRlc1xyXG4gICAgICAgIGlmIChsaW5lTWFwW2xpbmVdID09IG51bGwpIGxpbmVNYXBbbGluZV0gPSBbXVxyXG4gICAgICAgIGxpbmVNYXBbbGluZV0ucHVzaCh7XHJcbiAgICAgICAgICB0YWc6IHRhZyxcclxuICAgICAgICAgIGluZGV4OiB0b2tlblRhZ0NvdW50W3Rva2VuLmxldmVsXVt0YWddIHx8IDAsXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICB0b2tlblRhZ0NvdW50W3Rva2VuLmxldmVsICsgMV0gPSB7fVxyXG4gICAgfSBlbHNlIGlmICh0b2tlbi5uZXN0aW5nID09PSAwKSB7XHJcbiAgICAgIC8vIHNlbGYtY2xvc2luZyB0YWdcclxuICAgICAgZm9yIChsZXQgbGluZSA9IHRva2VuLm1hcFswXTsgbGluZSA8IHRva2VuLm1hcFsxXTsgbGluZSArPSAxKSB7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnN0cmljdC10eXBlLXByZWRpY2F0ZXNcclxuICAgICAgICBpZiAobGluZU1hcFtsaW5lXSA9PSBudWxsKSBsaW5lTWFwW2xpbmVdID0gW11cclxuICAgICAgICBsaW5lTWFwW2xpbmVdLnB1c2goe1xyXG4gICAgICAgICAgdGFnOiB0YWcsXHJcbiAgICAgICAgICBpbmRleDogdG9rZW5UYWdDb3VudFt0b2tlbi5sZXZlbF1bdGFnXSB8fCAwLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHR0YyA9IHRva2VuVGFnQ291bnRbdG9rZW4ubGV2ZWxdW3RhZ11cclxuICAgIHRva2VuVGFnQ291bnRbdG9rZW4ubGV2ZWxdW3RhZ10gPSB0dGMgPyB0dGMgKyAxIDogMVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGxpbmVNYXBcclxufVxyXG5cclxuZnVuY3Rpb24gbWF0aEpheFNjcmlwdCh0ZXhDb25maWc6IE1hdGhKYXguVGVYSW5wdXRQcm9jZXNzb3IpIHtcclxuICByZXR1cm4gYFxcXHJcbjxzY3JpcHQgdHlwZT1cInRleHQveC1tYXRoamF4LWNvbmZpZ1wiPlxyXG4gIE1hdGhKYXguSHViLkNvbmZpZyh7XHJcbiAgICBqYXg6IFtcImlucHV0L1RlWFwiLFwib3V0cHV0L0hUTUwtQ1NTXCJdLFxyXG4gICAgZXh0ZW5zaW9uczogW1wiW2ExMXldL2FjY2Vzc2liaWxpdHktbWVudS5qc1wiXSxcclxuICAgIFRlWDogJHtKU09OLnN0cmluZ2lmeSh0ZXhDb25maWcsIHVuZGVmaW5lZCwgMil9LFxyXG4gICAgc2hvd01hdGhNZW51OiB0cnVlXHJcbiAgfSk7XHJcbjwvc2NyaXB0PlxyXG48c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tYXRoamF4LzIuNy40L01hdGhKYXguanNcIj48L3NjcmlwdD5gXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBta0h0bWwoXHJcbiAgdGl0bGU6IHN0cmluZyxcclxuICBodG1sOiBIVE1MRG9jdW1lbnQsXHJcbiAgcmVuZGVyTGFUZVg6IGJvb2xlYW4sXHJcbiAgdXNlR2l0aHViU3R5bGU6IGJvb2xlYW4sXHJcbiAgdGV4Q29uZmlnOiBNYXRoSmF4LlRlWElucHV0UHJvY2Vzc29yLFxyXG4pIHtcclxuICBjb25zdCBnaXRodWJTdHlsZSA9IHVzZUdpdGh1YlN0eWxlID8gJyBkYXRhLXVzZS1naXRodWItc3R5bGUnIDogJydcclxuICBsZXQgbWF5YmVNYXRoSmF4U2NyaXB0OiBzdHJpbmdcclxuICBpZiAocmVuZGVyTGFUZVgpIHtcclxuICAgIG1heWJlTWF0aEpheFNjcmlwdCA9IG1hdGhKYXhTY3JpcHQodGV4Q29uZmlnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYXliZU1hdGhKYXhTY3JpcHQgPSAnJ1xyXG4gIH1cclxuICByZXR1cm4gYFxcXHJcbjwhRE9DVFlQRSBodG1sPlxyXG48aHRtbD5cclxuICA8aGVhZD5cclxuICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiIC8+XHJcbiAgICA8dGl0bGU+JHt0aXRsZX08L3RpdGxlPiR7bWF5YmVNYXRoSmF4U2NyaXB0fVxyXG4gICAgPHN0eWxlPiR7Z2V0TWFya2Rvd25QcmV2aWV3Q1NTKCl9PC9zdHlsZT5cclxuJHtodG1sLmhlYWQuaW5uZXJIVE1MfVxyXG4gIDwvaGVhZD5cclxuICA8Ym9keSBjbGFzcz1cIm1hcmtkb3duLXByZXZpZXctcGx1cy12aWV3XCIke2dpdGh1YlN0eWxlfT5cclxuICAgICR7aHRtbC5ib2R5LmlubmVySFRNTH1cclxuICA8L2JvZHk+XHJcbjwvaHRtbD5cclxuYCAvLyBFbnN1cmUgdHJhaWxpbmcgbmV3bGluZVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveShpdGVtOiBvYmplY3QpIHtcclxuICBjb25zdCBwYW5lID0gYXRvbS53b3Jrc3BhY2UucGFuZUZvckl0ZW0oaXRlbSlcclxuICBpZiAocGFuZSkgaGFuZGxlUHJvbWlzZShwYW5lLmRlc3Ryb3lJdGVtKGl0ZW0pKVxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst path = require(\"path\");\r\nconst atom_1 = require(\"atom\");\r\nconst _ = require(\"lodash\");\r\nconst fs = require(\"fs\");\r\nconst renderer = require(\"../renderer\");\r\nconst markdownIt = require(\"../markdown-it-helper\");\r\nconst imageWatcher = require(\"../image-watch-helper\");\r\nconst util_1 = require(\"../util\");\r\nconst util = tslib_1.__importStar(require(\"./util\"));\r\nconst webview_handler_1 = require(\"./webview-handler\");\r\nclass MarkdownPreviewView {\r\n    constructor(defaultRenderMode = 'normal', renderLaTeX = util_1.atomConfig().mathConfig\r\n        .enableLatexRenderingByDefault) {\r\n        this.defaultRenderMode = defaultRenderMode;\r\n        this.renderLaTeX = renderLaTeX;\r\n        this.emitter = new atom_1.Emitter();\r\n        this.disposables = new atom_1.CompositeDisposable();\r\n        this.destroyed = false;\r\n        this.loading = true;\r\n        this.changeHandler = () => {\r\n            util_1.handlePromise(this.renderMarkdown());\r\n            const pane = atom.workspace.paneForItem(this);\r\n            if (pane !== undefined && pane !== atom.workspace.getActivePane()) {\r\n                pane.activateItem(this);\r\n            }\r\n        };\r\n        this.renderPromise = new Promise((resolve) => {\r\n            this.handler = new webview_handler_1.WebviewHandler(() => {\r\n                this.handler.init(atom.getConfigDirPath(), util_1.atomConfig().mathConfig.numberEquations);\r\n                this.handler.setUseGitHubStyle(atom.config.get('markdown-preview-plus.useGitHubStyle'));\r\n                this.handler.setBasePath(this.getPath());\r\n                this.emitter.emit('did-change-title');\r\n                resolve(this.renderMarkdown());\r\n            });\r\n            MarkdownPreviewView.elementMap.set(this.element, this);\r\n        });\r\n        this.runJS = this.handler.runJS.bind(this.handler);\r\n        this.handleEvents();\r\n        this.handler.emitter.on('did-scroll-preview', ({ min, max }) => {\r\n            this.didScrollPreview(min, max);\r\n        });\r\n    }\r\n    get element() {\r\n        return this.handler.element;\r\n    }\r\n    static viewForElement(element) {\r\n        return MarkdownPreviewView.elementMap.get(element);\r\n    }\r\n    destroy() {\r\n        if (this.destroyed)\r\n            return;\r\n        this.destroyed = true;\r\n        const path = this.getPath();\r\n        path && imageWatcher.removeFile(path);\r\n        this.disposables.dispose();\r\n        this.handler.destroy();\r\n        MarkdownPreviewView.elementMap.delete(this.element);\r\n    }\r\n    onDidChangeTitle(callback) {\r\n        return this.emitter.on('did-change-title', callback);\r\n    }\r\n    onDidChangeMarkdown(callback) {\r\n        return this.emitter.on('did-change-markdown', callback);\r\n    }\r\n    toggleRenderLatex() {\r\n        this.renderLaTeX = !this.renderLaTeX;\r\n        this.changeHandler();\r\n    }\r\n    async refreshImages(oldsrc) {\r\n        const v = await imageWatcher.getVersion(oldsrc, this.getPath());\r\n        this.handler.updateImages(oldsrc, v);\r\n    }\r\n    getDefaultLocation() {\r\n        return util_1.atomConfig().previewConfig.previewDock;\r\n    }\r\n    getIconName() {\r\n        return 'markdown';\r\n    }\r\n    getSaveDialogOptions() {\r\n        let defaultPath = this.getPath();\r\n        if (defaultPath === undefined) {\r\n            const projectPath = atom.project.getPaths()[0];\r\n            defaultPath = 'untitled.md';\r\n            if (projectPath) {\r\n                defaultPath = path.join(projectPath, defaultPath);\r\n            }\r\n        }\r\n        defaultPath += '.' + util_1.atomConfig().saveConfig.defaultSaveFormat;\r\n        return { defaultPath };\r\n    }\r\n    saveAs(filePath) {\r\n        if (filePath === undefined)\r\n            return;\r\n        if (this.loading)\r\n            throw new Error('Preview is still loading');\r\n        const { name, ext } = path.parse(filePath);\r\n        if (ext === '.pdf') {\r\n            this.handler.saveToPDF(filePath);\r\n        }\r\n        else {\r\n            util_1.handlePromise(this.getHTMLToSave(filePath).then(async (html) => {\r\n                const fullHtml = util.mkHtml(name, html, this.renderLaTeX, atom.config.get('markdown-preview-plus.useGitHubStyle'), await this.handler.getTeXConfig());\r\n                fs.writeFileSync(filePath, fullHtml);\r\n                return atom.workspace.open(filePath);\r\n            }));\r\n        }\r\n    }\r\n    didScrollPreview(_min, _max) {\r\n    }\r\n    openSource(initialLine) {\r\n        const path = this.getPath();\r\n        if (path === undefined)\r\n            return;\r\n        util_1.handlePromise(atom.workspace.open(path, {\r\n            initialLine,\r\n            searchAllPanes: true,\r\n        }));\r\n    }\r\n    syncPreview(line) {\r\n        this.handler.sync(line);\r\n    }\r\n    openNewWindow() {\r\n        const path = this.getPath();\r\n        if (!path) {\r\n            atom.notifications.addWarning('Can not open this preview in new window: no file path');\r\n            return;\r\n        }\r\n        atom.open({\r\n            pathsToOpen: [`markdown-preview-plus://file/${path}`],\r\n            newWindow: true,\r\n        });\r\n        util.destroy(this);\r\n    }\r\n    handleEvents() {\r\n        this.disposables.add(atom.grammars.onDidAddGrammar(() => _.debounce(() => {\r\n            util_1.handlePromise(this.renderMarkdown());\r\n        }, 250)), atom.grammars.onDidUpdateGrammar(_.debounce(() => {\r\n            util_1.handlePromise(this.renderMarkdown());\r\n        }, 250)));\r\n        this.disposables.add(atom.commands.add(this.element, {\r\n            'core:move-up': () => this.element.scrollBy({ top: -10 }),\r\n            'core:move-down': () => this.element.scrollBy({ top: 10 }),\r\n            'core:copy': (event) => {\r\n                if (this.copyToClipboard())\r\n                    event.stopPropagation();\r\n            },\r\n            'markdown-preview-plus:open-dev-tools': () => {\r\n                this.handler.openDevTools();\r\n            },\r\n            'markdown-preview-plus:new-window': () => {\r\n                this.openNewWindow();\r\n            },\r\n            'markdown-preview-plus:print': () => {\r\n                this.handler.print();\r\n            },\r\n            'markdown-preview-plus:zoom-in': () => {\r\n                this.handler.zoomIn();\r\n            },\r\n            'markdown-preview-plus:zoom-out': () => {\r\n                this.handler.zoomOut();\r\n            },\r\n            'markdown-preview-plus:reset-zoom': () => {\r\n                this.handler.resetZoom();\r\n            },\r\n            'markdown-preview-plus:sync-source': async (_event) => {\r\n                const line = await this.handler.syncSource();\r\n                this.openSource(line);\r\n            },\r\n        }));\r\n        this.disposables.add(atom.config.onDidChange('markdown-preview-plus.markdownItConfig', () => {\r\n            if (util_1.atomConfig().renderer === 'markdown-it')\r\n                this.changeHandler();\r\n        }), atom.config.onDidChange('markdown-preview-plus.pandocConfig', () => {\r\n            if (util_1.atomConfig().renderer === 'pandoc')\r\n                this.changeHandler();\r\n        }), atom.config.onDidChange('markdown-preview-plus.mathConfig.latexRenderer', this.changeHandler), atom.config.onDidChange('markdown-preview-plus.mathConfig.numberEquations', () => {\r\n            util_1.handlePromise(this.handler.reload());\r\n        }), atom.config.onDidChange('markdown-preview-plus.renderer', this.changeHandler), atom.config.onDidChange('markdown-preview-plus.useGitHubStyle', ({ newValue }) => {\r\n            this.handler.setUseGitHubStyle(newValue);\r\n        }));\r\n    }\r\n    async renderMarkdown() {\r\n        const source = await this.getMarkdownSource();\r\n        await this.renderMarkdownText(source);\r\n    }\r\n    async getHTMLToSave(savePath) {\r\n        const source = await this.getMarkdownSource();\r\n        return renderer.render(source, this.getPath(), this.getGrammar(), this.renderLaTeX, 'save', savePath);\r\n    }\r\n    async renderMarkdownText(text) {\r\n        try {\r\n            const domDocument = await renderer.render(text, this.getPath(), this.getGrammar(), this.renderLaTeX, this.defaultRenderMode);\r\n            if (this.destroyed)\r\n                return;\r\n            this.loading = false;\r\n            util_1.handlePromise(this.handler.update(domDocument.documentElement.outerHTML, this.renderLaTeX, util_1.atomConfig().mathConfig.latexRenderer));\r\n            this.handler.setSourceMap(util.buildLineMap(markdownIt.getTokens(text, this.renderLaTeX)));\r\n            this.emitter.emit('did-change-markdown');\r\n        }\r\n        catch (error) {\r\n            this.showError(error);\r\n        }\r\n    }\r\n    showError(error) {\r\n        if (this.destroyed) {\r\n            atom.notifications.addFatalError('Error reported on a destroyed Markdown Preview Plus view', {\r\n                dismissable: true,\r\n                stack: error.stack,\r\n                detail: error.message,\r\n            });\r\n            return;\r\n        }\r\n        this.handler.error(error.message);\r\n    }\r\n    copyToClipboard() {\r\n        if (this.loading) {\r\n            return false;\r\n        }\r\n        const selection = window.getSelection();\r\n        const selectedText = selection.toString();\r\n        const selectedNode = selection.baseNode;\r\n        if (selectedText &&\r\n            selectedNode != null) {\r\n            return false;\r\n        }\r\n        util_1.handlePromise(this.getMarkdownSource().then(async (src) => util_1.copyHtml(src, this.getPath(), this.renderLaTeX)));\r\n        return true;\r\n    }\r\n}\r\nMarkdownPreviewView.elementMap = new WeakMap();\r\nexports.MarkdownPreviewView = MarkdownPreviewView;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Rvd24tcHJldmlldy12aWV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLXByZXZpZXctdmlldy9tYXJrZG93bi1wcmV2aWV3LXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkJBQTZCO0FBQzdCLCtCQU1hO0FBQ2IsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQUV6Qix3Q0FBd0M7QUFDeEMsb0RBQW9EO0FBQ3BELHNEQUFzRDtBQUN0RCxrQ0FBNkQ7QUFDN0QscURBQThCO0FBQzlCLHVEQUFrRDtBQVFsRDtJQWlCRSxZQUNVLG9CQUEwRCxRQUFRLEVBQ2xFLGNBQXVCLGlCQUFVLEVBQUUsQ0FBQyxVQUFVO1NBQ25ELDZCQUE2QjtRQUZ4QixzQkFBaUIsR0FBakIsaUJBQWlCLENBQWlEO1FBQ2xFLGdCQUFXLEdBQVgsV0FBVyxDQUNhO1FBWHhCLFlBQU8sR0FHWixJQUFJLGNBQU8sRUFBRSxDQUFBO1FBQ1IsZ0JBQVcsR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7UUFDdkMsY0FBUyxHQUFHLEtBQUssQ0FBQTtRQUNuQixZQUFPLEdBQVksSUFBSSxDQUFBO1FBeUhyQixrQkFBYSxHQUFHLEdBQUcsRUFBRTtZQUM3QixvQkFBYSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFBO1lBRXBDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQzdDLElBQUksSUFBSSxLQUFLLFNBQVMsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsRUFBRTtnQkFDakUsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTthQUN4QjtRQUNILENBQUMsQ0FBQTtRQXpIQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDM0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdDQUFjLENBQUMsR0FBRyxFQUFFO2dCQUNyQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FDZixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFDdkIsaUJBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQ3hDLENBQUE7Z0JBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsc0NBQXNDLENBQUMsQ0FDeEQsQ0FBQTtnQkFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQTtnQkFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtnQkFDckMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFBO1lBQ2hDLENBQUMsQ0FBQyxDQUFBO1lBQ0YsbUJBQW1CLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3hELENBQUMsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ2xELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUNuQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO1lBQzdELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDakMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBckNELElBQVcsT0FBTztRQUNoQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFBO0lBQzdCLENBQUM7SUFxQ00sTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFvQjtRQUMvQyxPQUFPLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDcEQsQ0FBQztJQUlNLE9BQU87UUFDWixJQUFJLElBQUksQ0FBQyxTQUFTO1lBQUUsT0FBTTtRQUMxQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtRQUNyQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDM0IsSUFBSSxJQUFJLFlBQVksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDckMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3RCLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JELENBQUM7SUFFTSxnQkFBZ0IsQ0FBQyxRQUFvQjtRQUMxQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFFTSxtQkFBbUIsQ0FBQyxRQUFvQjtRQUM3QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3pELENBQUM7SUFFTSxpQkFBaUI7UUFDdEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUE7UUFDcEMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO0lBQ3RCLENBQUM7SUFFTSxLQUFLLENBQUMsYUFBYSxDQUFDLE1BQWM7UUFDdkMsTUFBTSxDQUFDLEdBQUcsTUFBTSxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQTtRQUMvRCxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDdEMsQ0FBQztJQUlNLGtCQUFrQjtRQUN2QixPQUFPLGlCQUFVLEVBQUUsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFBO0lBQy9DLENBQUM7SUFFTSxXQUFXO1FBQ2hCLE9BQU8sVUFBVSxDQUFBO0lBQ25CLENBQUM7SUFNTSxvQkFBb0I7UUFDekIsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ2hDLElBQUksV0FBVyxLQUFLLFNBQVMsRUFBRTtZQUM3QixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQzlDLFdBQVcsR0FBRyxhQUFhLENBQUE7WUFDM0IsSUFBSSxXQUFXLEVBQUU7Z0JBQ2YsV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFBO2FBQ2xEO1NBQ0Y7UUFDRCxXQUFXLElBQUksR0FBRyxHQUFHLGlCQUFVLEVBQUUsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUE7UUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFBO0lBQ3hCLENBQUM7SUFFTSxNQUFNLENBQUMsUUFBNEI7UUFDeEMsSUFBSSxRQUFRLEtBQUssU0FBUztZQUFFLE9BQU07UUFDbEMsSUFBSSxJQUFJLENBQUMsT0FBTztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtRQUU3RCxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUE7UUFFMUMsSUFBSSxHQUFHLEtBQUssTUFBTSxFQUFFO1lBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1NBQ2pDO2FBQU07WUFDTCxvQkFBYSxDQUNYLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRTtnQkFDL0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FDMUIsSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLENBQUMsV0FBVyxFQUNoQixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQ0FBc0MsQ0FBQyxFQUN2RCxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQ2xDLENBQUE7Z0JBRUQsRUFBRSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUE7Z0JBQ3BDLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDdEMsQ0FBQyxDQUFDLENBQ0gsQ0FBQTtTQUNGO0lBQ0gsQ0FBQztJQUVTLGdCQUFnQixDQUFDLElBQVksRUFBRSxJQUFZO0lBRXJELENBQUM7SUFlUyxVQUFVLENBQUMsV0FBb0I7UUFDdkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQzNCLElBQUksSUFBSSxLQUFLLFNBQVM7WUFBRSxPQUFNO1FBQzlCLG9CQUFhLENBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ3hCLFdBQVc7WUFDWCxjQUFjLEVBQUUsSUFBSTtTQUNyQixDQUFDLENBQ0gsQ0FBQTtJQUNILENBQUM7SUFFUyxXQUFXLENBQUMsSUFBWTtRQUNoQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN6QixDQUFDO0lBRVMsYUFBYTtRQUNyQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDM0IsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUMzQix1REFBdUQsQ0FDeEQsQ0FBQTtZQUNELE9BQU07U0FDUDtRQUNELElBQUksQ0FBQyxJQUFJLENBQUM7WUFDUixXQUFXLEVBQUUsQ0FBQyxnQ0FBZ0MsSUFBSSxFQUFFLENBQUM7WUFDckQsU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNwQixDQUFDO0lBRU8sWUFBWTtRQUNsQixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLENBQ2pDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFO1lBQ2Qsb0JBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQTtRQUN0QyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQ1IsRUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUM5QixDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTtZQUNkLG9CQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUE7UUFDdEMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUNSLENBQ0YsQ0FBQTtRQUVELElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQzlCLGNBQWMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3pELGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzFELFdBQVcsRUFBRSxDQUFDLEtBQW1CLEVBQUUsRUFBRTtnQkFDbkMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO29CQUFFLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQTtZQUNyRCxDQUFDO1lBQ0Qsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO2dCQUMzQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQzdCLENBQUM7WUFDRCxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtZQUN0QixDQUFDO1lBQ0QsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO2dCQUNsQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3RCLENBQUM7WUFDRCwrQkFBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3BDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUE7WUFDdkIsQ0FBQztZQUNELGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtnQkFDckMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtZQUN4QixDQUFDO1lBQ0Qsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO2dCQUN2QyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1lBQzFCLENBQUM7WUFDRCxtQ0FBbUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQ3BELE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtnQkFDNUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN2QixDQUFDO1NBQ0YsQ0FBQyxDQUNILENBQUE7UUFFRCxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1lBQ3JFLElBQUksaUJBQVUsRUFBRSxDQUFDLFFBQVEsS0FBSyxhQUFhO2dCQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtRQUNuRSxDQUFDLENBQUMsRUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDakUsSUFBSSxpQkFBVSxFQUFFLENBQUMsUUFBUSxLQUFLLFFBQVE7Z0JBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1FBQzlELENBQUMsQ0FBQyxFQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUNyQixnREFBZ0QsRUFDaEQsSUFBSSxDQUFDLGFBQWEsQ0FDbkIsRUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FDckIsa0RBQWtELEVBQ2xELEdBQUcsRUFBRTtZQUNILG9CQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1FBQ3RDLENBQUMsQ0FDRixFQUNELElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUNyQixnQ0FBZ0MsRUFDaEMsSUFBSSxDQUFDLGFBQWEsQ0FDbkIsRUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FDckIsc0NBQXNDLEVBQ3RDLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUMxQyxDQUFDLENBQ0YsQ0FDRixDQUFBO0lBQ0gsQ0FBQztJQUVPLEtBQUssQ0FBQyxjQUFjO1FBQzFCLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDN0MsTUFBTSxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDdkMsQ0FBQztJQUVPLEtBQUssQ0FBQyxhQUFhLENBQUMsUUFBZ0I7UUFDMUMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUM3QyxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQ3BCLE1BQU0sRUFDTixJQUFJLENBQUMsT0FBTyxFQUFFLEVBQ2QsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUNqQixJQUFJLENBQUMsV0FBVyxFQUNoQixNQUFNLEVBQ04sUUFBUSxDQUNULENBQUE7SUFDSCxDQUFDO0lBRU8sS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQVk7UUFDM0MsSUFBSTtZQUNGLE1BQU0sV0FBVyxHQUFHLE1BQU0sUUFBUSxDQUFDLE1BQU0sQ0FDdkMsSUFBSSxFQUNKLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFDZCxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQ2pCLElBQUksQ0FBQyxXQUFXLEVBQ2hCLElBQUksQ0FBQyxpQkFBaUIsQ0FDdkIsQ0FBQTtZQUNELElBQUksSUFBSSxDQUFDLFNBQVM7Z0JBQUUsT0FBTTtZQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNwQixvQkFBYSxDQUNYLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUNqQixXQUFXLENBQUMsZUFBZSxDQUFDLFNBQVMsRUFDckMsSUFBSSxDQUFDLFdBQVcsRUFDaEIsaUJBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQ3RDLENBQ0YsQ0FBQTtZQUNELElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUN2QixJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUNoRSxDQUFBO1lBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQTtTQUN6QztRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFjLENBQUMsQ0FBQTtTQUMvQjtJQUNILENBQUM7SUFFTyxTQUFTLENBQUMsS0FBWTtRQUM1QixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQzlCLDBEQUEwRCxFQUMxRDtnQkFDRSxXQUFXLEVBQUUsSUFBSTtnQkFDakIsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO2dCQUNsQixNQUFNLEVBQUUsS0FBSyxDQUFDLE9BQU87YUFDdEIsQ0FDRixDQUFBO1lBQ0QsT0FBTTtTQUNQO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTyxlQUFlO1FBQ3JCLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixPQUFPLEtBQUssQ0FBQTtTQUNiO1FBRUQsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ3ZDLE1BQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUN6QyxNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsUUFBdUIsQ0FBQTtRQUd0RCxJQUNFLFlBQVk7WUFFWixZQUFZLElBQUksSUFBSSxFQUVwQjtZQUNBLE9BQU8sS0FBSyxDQUFBO1NBQ2I7UUFFRCxvQkFBYSxDQUNYLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FDMUMsZUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUNoRCxDQUNGLENBQUE7UUFFRCxPQUFPLElBQUksQ0FBQTtJQUNiLENBQUM7O0FBblZjLDhCQUFVLEdBQUcsSUFBSSxPQUFPLEVBQW9DLENBQUE7QUFEN0Usa0RBcVZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcclxuaW1wb3J0IHtcclxuICBDb21tYW5kRXZlbnQsXHJcbiAgRW1pdHRlcixcclxuICBEaXNwb3NhYmxlLFxyXG4gIENvbXBvc2l0ZURpc3Bvc2FibGUsXHJcbiAgR3JhbW1hcixcclxufSBmcm9tICdhdG9tJ1xyXG5pbXBvcnQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpXHJcbmltcG9ydCBmcyA9IHJlcXVpcmUoJ2ZzJylcclxuXHJcbmltcG9ydCByZW5kZXJlciA9IHJlcXVpcmUoJy4uL3JlbmRlcmVyJylcclxuaW1wb3J0IG1hcmtkb3duSXQgPSByZXF1aXJlKCcuLi9tYXJrZG93bi1pdC1oZWxwZXInKVxyXG5pbXBvcnQgaW1hZ2VXYXRjaGVyID0gcmVxdWlyZSgnLi4vaW1hZ2Utd2F0Y2gtaGVscGVyJylcclxuaW1wb3J0IHsgaGFuZGxlUHJvbWlzZSwgY29weUh0bWwsIGF0b21Db25maWcgfSBmcm9tICcuLi91dGlsJ1xyXG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCdcclxuaW1wb3J0IHsgV2Vidmlld0hhbmRsZXIgfSBmcm9tICcuL3dlYnZpZXctaGFuZGxlcidcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXplZE1QViB7XHJcbiAgZGVzZXJpYWxpemVyOiAnbWFya2Rvd24tcHJldmlldy1wbHVzL01hcmtkb3duUHJldmlld1ZpZXcnXHJcbiAgZWRpdG9ySWQ/OiBudW1iZXJcclxuICBmaWxlUGF0aD86IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTWFya2Rvd25QcmV2aWV3VmlldyB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgZWxlbWVudE1hcCA9IG5ldyBXZWFrTWFwPEhUTUxFbGVtZW50LCBNYXJrZG93blByZXZpZXdWaWV3PigpXHJcblxyXG4gIHB1YmxpYyByZWFkb25seSByZW5kZXJQcm9taXNlOiBQcm9taXNlPHZvaWQ+XHJcbiAgcHVibGljIHJlYWRvbmx5IHJ1bkpTOiBNYXJrZG93blByZXZpZXdWaWV3WydoYW5kbGVyJ11bJ3J1bkpTJ11cclxuICBwcm90ZWN0ZWQgaGFuZGxlciE6IFdlYnZpZXdIYW5kbGVyXHJcbiAgcHVibGljIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLmhhbmRsZXIuZWxlbWVudFxyXG4gIH1cclxuICBwcm90ZWN0ZWQgZW1pdHRlcjogRW1pdHRlcjx7XHJcbiAgICAnZGlkLWNoYW5nZS10aXRsZSc6IHVuZGVmaW5lZFxyXG4gICAgJ2RpZC1jaGFuZ2UtbWFya2Rvd24nOiB1bmRlZmluZWRcclxuICB9PiA9IG5ldyBFbWl0dGVyKClcclxuICBwcm90ZWN0ZWQgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXHJcbiAgcHJvdGVjdGVkIGRlc3Ryb3llZCA9IGZhbHNlXHJcbiAgcHJpdmF0ZSBsb2FkaW5nOiBib29sZWFuID0gdHJ1ZVxyXG5cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGRlZmF1bHRSZW5kZXJNb2RlOiBFeGNsdWRlPHJlbmRlcmVyLlJlbmRlck1vZGUsICdzYXZlJz4gPSAnbm9ybWFsJyxcclxuICAgIHByaXZhdGUgcmVuZGVyTGFUZVg6IGJvb2xlYW4gPSBhdG9tQ29uZmlnKCkubWF0aENvbmZpZ1xyXG4gICAgICAuZW5hYmxlTGF0ZXhSZW5kZXJpbmdCeURlZmF1bHQsXHJcbiAgKSB7XHJcbiAgICB0aGlzLnJlbmRlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZXIgPSBuZXcgV2Vidmlld0hhbmRsZXIoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlci5pbml0KFxyXG4gICAgICAgICAgYXRvbS5nZXRDb25maWdEaXJQYXRoKCksXHJcbiAgICAgICAgICBhdG9tQ29uZmlnKCkubWF0aENvbmZpZy5udW1iZXJFcXVhdGlvbnMsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC8vIFRPRE86IG9ic2VydmVcclxuICAgICAgICB0aGlzLmhhbmRsZXIuc2V0VXNlR2l0SHViU3R5bGUoXHJcbiAgICAgICAgICBhdG9tLmNvbmZpZy5nZXQoJ21hcmtkb3duLXByZXZpZXctcGx1cy51c2VHaXRIdWJTdHlsZScpLFxyXG4gICAgICAgIClcclxuICAgICAgICB0aGlzLmhhbmRsZXIuc2V0QmFzZVBhdGgodGhpcy5nZXRQYXRoKCkpXHJcbiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtdGl0bGUnKVxyXG4gICAgICAgIHJlc29sdmUodGhpcy5yZW5kZXJNYXJrZG93bigpKVxyXG4gICAgICB9KVxyXG4gICAgICBNYXJrZG93blByZXZpZXdWaWV3LmVsZW1lbnRNYXAuc2V0KHRoaXMuZWxlbWVudCwgdGhpcylcclxuICAgIH0pXHJcbiAgICB0aGlzLnJ1bkpTID0gdGhpcy5oYW5kbGVyLnJ1bkpTLmJpbmQodGhpcy5oYW5kbGVyKVxyXG4gICAgdGhpcy5oYW5kbGVFdmVudHMoKVxyXG4gICAgdGhpcy5oYW5kbGVyLmVtaXR0ZXIub24oJ2RpZC1zY3JvbGwtcHJldmlldycsICh7IG1pbiwgbWF4IH0pID0+IHtcclxuICAgICAgdGhpcy5kaWRTY3JvbGxQcmV2aWV3KG1pbiwgbWF4KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgdmlld0ZvckVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIHJldHVybiBNYXJrZG93blByZXZpZXdWaWV3LmVsZW1lbnRNYXAuZ2V0KGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWJzdHJhY3Qgc2VyaWFsaXplKCk6IFNlcmlhbGl6ZWRNUFZcclxuXHJcbiAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVyblxyXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXHJcbiAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKClcclxuICAgIHBhdGggJiYgaW1hZ2VXYXRjaGVyLnJlbW92ZUZpbGUocGF0aClcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXHJcbiAgICB0aGlzLmhhbmRsZXIuZGVzdHJveSgpXHJcbiAgICBNYXJrZG93blByZXZpZXdWaWV3LmVsZW1lbnRNYXAuZGVsZXRlKHRoaXMuZWxlbWVudClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbkRpZENoYW5nZVRpdGxlKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogRGlzcG9zYWJsZSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyLm9uKCdkaWQtY2hhbmdlLXRpdGxlJywgY2FsbGJhY2spXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25EaWRDaGFuZ2VNYXJrZG93bihjYWxsYmFjazogKCkgPT4gdm9pZCk6IERpc3Bvc2FibGUge1xyXG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlci5vbignZGlkLWNoYW5nZS1tYXJrZG93bicsIGNhbGxiYWNrKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZVJlbmRlckxhdGV4KCkge1xyXG4gICAgdGhpcy5yZW5kZXJMYVRlWCA9ICF0aGlzLnJlbmRlckxhVGVYXHJcbiAgICB0aGlzLmNoYW5nZUhhbmRsZXIoKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIHJlZnJlc2hJbWFnZXMob2xkc3JjOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHYgPSBhd2FpdCBpbWFnZVdhdGNoZXIuZ2V0VmVyc2lvbihvbGRzcmMsIHRoaXMuZ2V0UGF0aCgpKVxyXG4gICAgdGhpcy5oYW5kbGVyLnVwZGF0ZUltYWdlcyhvbGRzcmMsIHYpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGl0bGUoKTogc3RyaW5nXHJcblxyXG4gIHB1YmxpYyBnZXREZWZhdWx0TG9jYXRpb24oKTogJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdib3R0b20nIHwgJ2NlbnRlcicge1xyXG4gICAgcmV0dXJuIGF0b21Db25maWcoKS5wcmV2aWV3Q29uZmlnLnByZXZpZXdEb2NrXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SWNvbk5hbWUoKSB7XHJcbiAgICByZXR1cm4gJ21hcmtkb3duJ1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFic3RyYWN0IGdldFVSSSgpOiBzdHJpbmdcclxuXHJcbiAgcHVibGljIGFic3RyYWN0IGdldFBhdGgoKTogc3RyaW5nIHwgdW5kZWZpbmVkXHJcblxyXG4gIHB1YmxpYyBnZXRTYXZlRGlhbG9nT3B0aW9ucygpIHtcclxuICAgIGxldCBkZWZhdWx0UGF0aCA9IHRoaXMuZ2V0UGF0aCgpXHJcbiAgICBpZiAoZGVmYXVsdFBhdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCBwcm9qZWN0UGF0aCA9IGF0b20ucHJvamVjdC5nZXRQYXRocygpWzBdXHJcbiAgICAgIGRlZmF1bHRQYXRoID0gJ3VudGl0bGVkLm1kJ1xyXG4gICAgICBpZiAocHJvamVjdFBhdGgpIHtcclxuICAgICAgICBkZWZhdWx0UGF0aCA9IHBhdGguam9pbihwcm9qZWN0UGF0aCwgZGVmYXVsdFBhdGgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGRlZmF1bHRQYXRoICs9ICcuJyArIGF0b21Db25maWcoKS5zYXZlQ29uZmlnLmRlZmF1bHRTYXZlRm9ybWF0XHJcbiAgICByZXR1cm4geyBkZWZhdWx0UGF0aCB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2F2ZUFzKGZpbGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcclxuICAgIGlmIChmaWxlUGF0aCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cclxuICAgIGlmICh0aGlzLmxvYWRpbmcpIHRocm93IG5ldyBFcnJvcignUHJldmlldyBpcyBzdGlsbCBsb2FkaW5nJylcclxuXHJcbiAgICBjb25zdCB7IG5hbWUsIGV4dCB9ID0gcGF0aC5wYXJzZShmaWxlUGF0aClcclxuXHJcbiAgICBpZiAoZXh0ID09PSAnLnBkZicpIHtcclxuICAgICAgdGhpcy5oYW5kbGVyLnNhdmVUb1BERihmaWxlUGF0aClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhhbmRsZVByb21pc2UoXHJcbiAgICAgICAgdGhpcy5nZXRIVE1MVG9TYXZlKGZpbGVQYXRoKS50aGVuKGFzeW5jIChodG1sKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmdWxsSHRtbCA9IHV0aWwubWtIdG1sKFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBodG1sLFxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxhVGVYLFxyXG4gICAgICAgICAgICBhdG9tLmNvbmZpZy5nZXQoJ21hcmtkb3duLXByZXZpZXctcGx1cy51c2VHaXRIdWJTdHlsZScpLFxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZXIuZ2V0VGVYQ29uZmlnKCksXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgZnVsbEh0bWwpXHJcbiAgICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2Uub3BlbihmaWxlUGF0aClcclxuICAgICAgICB9KSxcclxuICAgICAgKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGRpZFNjcm9sbFByZXZpZXcoX21pbjogbnVtYmVyLCBfbWF4OiBudW1iZXIpIHtcclxuICAgIC8qIG5vb3AsIGltcGxlbWVudGF0aW9uIGluIGVkaXRvciBwcmV2aWV3ICovXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgY2hhbmdlSGFuZGxlciA9ICgpID0+IHtcclxuICAgIGhhbmRsZVByb21pc2UodGhpcy5yZW5kZXJNYXJrZG93bigpKVxyXG5cclxuICAgIGNvbnN0IHBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzKVxyXG4gICAgaWYgKHBhbmUgIT09IHVuZGVmaW5lZCAmJiBwYW5lICE9PSBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lKCkpIHtcclxuICAgICAgcGFuZS5hY3RpdmF0ZUl0ZW0odGhpcylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBhc3luYyBnZXRNYXJrZG93blNvdXJjZSgpOiBQcm9taXNlPHN0cmluZz5cclxuXHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEdyYW1tYXIoKTogR3JhbW1hciB8IHVuZGVmaW5lZFxyXG5cclxuICBwcm90ZWN0ZWQgb3BlblNvdXJjZShpbml0aWFsTGluZT86IG51bWJlcikge1xyXG4gICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpXHJcbiAgICBpZiAocGF0aCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cclxuICAgIGhhbmRsZVByb21pc2UoXHJcbiAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4ocGF0aCwge1xyXG4gICAgICAgIGluaXRpYWxMaW5lLFxyXG4gICAgICAgIHNlYXJjaEFsbFBhbmVzOiB0cnVlLFxyXG4gICAgICB9KSxcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzeW5jUHJldmlldyhsaW5lOiBudW1iZXIpIHtcclxuICAgIHRoaXMuaGFuZGxlci5zeW5jKGxpbmUpXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb3Blbk5ld1dpbmRvdygpIHtcclxuICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgoKVxyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKFxyXG4gICAgICAgICdDYW4gbm90IG9wZW4gdGhpcyBwcmV2aWV3IGluIG5ldyB3aW5kb3c6IG5vIGZpbGUgcGF0aCcsXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBhdG9tLm9wZW4oe1xyXG4gICAgICBwYXRoc1RvT3BlbjogW2BtYXJrZG93bi1wcmV2aWV3LXBsdXM6Ly9maWxlLyR7cGF0aH1gXSxcclxuICAgICAgbmV3V2luZG93OiB0cnVlLFxyXG4gICAgfSlcclxuICAgIHV0aWwuZGVzdHJveSh0aGlzKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVFdmVudHMoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcclxuICAgICAgYXRvbS5ncmFtbWFycy5vbkRpZEFkZEdyYW1tYXIoKCkgPT5cclxuICAgICAgICBfLmRlYm91bmNlKCgpID0+IHtcclxuICAgICAgICAgIGhhbmRsZVByb21pc2UodGhpcy5yZW5kZXJNYXJrZG93bigpKVxyXG4gICAgICAgIH0sIDI1MCksXHJcbiAgICAgICksXHJcbiAgICAgIGF0b20uZ3JhbW1hcnMub25EaWRVcGRhdGVHcmFtbWFyKFxyXG4gICAgICAgIF8uZGVib3VuY2UoKCkgPT4ge1xyXG4gICAgICAgICAgaGFuZGxlUHJvbWlzZSh0aGlzLnJlbmRlck1hcmtkb3duKCkpXHJcbiAgICAgICAgfSwgMjUwKSxcclxuICAgICAgKSxcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcclxuICAgICAgYXRvbS5jb21tYW5kcy5hZGQodGhpcy5lbGVtZW50LCB7XHJcbiAgICAgICAgJ2NvcmU6bW92ZS11cCc6ICgpID0+IHRoaXMuZWxlbWVudC5zY3JvbGxCeSh7IHRvcDogLTEwIH0pLFxyXG4gICAgICAgICdjb3JlOm1vdmUtZG93bic6ICgpID0+IHRoaXMuZWxlbWVudC5zY3JvbGxCeSh7IHRvcDogMTAgfSksXHJcbiAgICAgICAgJ2NvcmU6Y29weSc6IChldmVudDogQ29tbWFuZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jb3B5VG9DbGlwYm9hcmQoKSkgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICB9LFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6b3Blbi1kZXYtdG9vbHMnOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZXIub3BlbkRldlRvb2xzKClcclxuICAgICAgICB9LFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6bmV3LXdpbmRvdyc6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdygpXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnbWFya2Rvd24tcHJldmlldy1wbHVzOnByaW50JzogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVyLnByaW50KClcclxuICAgICAgICB9LFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6em9vbS1pbic6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlci56b29tSW4oKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ21hcmtkb3duLXByZXZpZXctcGx1czp6b29tLW91dCc6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlci56b29tT3V0KClcclxuICAgICAgICB9LFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6cmVzZXQtem9vbSc6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlci5yZXNldFpvb20oKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ21hcmtkb3duLXByZXZpZXctcGx1czpzeW5jLXNvdXJjZSc6IGFzeW5jIChfZXZlbnQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGxpbmUgPSBhd2FpdCB0aGlzLmhhbmRsZXIuc3luY1NvdXJjZSgpXHJcbiAgICAgICAgICB0aGlzLm9wZW5Tb3VyY2UobGluZSlcclxuICAgICAgICB9LFxyXG4gICAgICB9KSxcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcclxuICAgICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UoJ21hcmtkb3duLXByZXZpZXctcGx1cy5tYXJrZG93bkl0Q29uZmlnJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChhdG9tQ29uZmlnKCkucmVuZGVyZXIgPT09ICdtYXJrZG93bi1pdCcpIHRoaXMuY2hhbmdlSGFuZGxlcigpXHJcbiAgICAgIH0pLFxyXG4gICAgICBhdG9tLmNvbmZpZy5vbkRpZENoYW5nZSgnbWFya2Rvd24tcHJldmlldy1wbHVzLnBhbmRvY0NvbmZpZycsICgpID0+IHtcclxuICAgICAgICBpZiAoYXRvbUNvbmZpZygpLnJlbmRlcmVyID09PSAncGFuZG9jJykgdGhpcy5jaGFuZ2VIYW5kbGVyKClcclxuICAgICAgfSksXHJcbiAgICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXMubWF0aENvbmZpZy5sYXRleFJlbmRlcmVyJyxcclxuICAgICAgICB0aGlzLmNoYW5nZUhhbmRsZXIsXHJcbiAgICAgICksXHJcbiAgICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXMubWF0aENvbmZpZy5udW1iZXJFcXVhdGlvbnMnLFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIGhhbmRsZVByb21pc2UodGhpcy5oYW5kbGVyLnJlbG9hZCgpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICksXHJcbiAgICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKFxyXG4gICAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXMucmVuZGVyZXInLFxyXG4gICAgICAgIHRoaXMuY2hhbmdlSGFuZGxlcixcclxuICAgICAgKSxcclxuICAgICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UoXHJcbiAgICAgICAgJ21hcmtkb3duLXByZXZpZXctcGx1cy51c2VHaXRIdWJTdHlsZScsXHJcbiAgICAgICAgKHsgbmV3VmFsdWUgfSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVyLnNldFVzZUdpdEh1YlN0eWxlKG5ld1ZhbHVlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICksXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHJlbmRlck1hcmtkb3duKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5nZXRNYXJrZG93blNvdXJjZSgpXHJcbiAgICBhd2FpdCB0aGlzLnJlbmRlck1hcmtkb3duVGV4dChzb3VyY2UpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldEhUTUxUb1NhdmUoc2F2ZVBhdGg6IHN0cmluZykge1xyXG4gICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5nZXRNYXJrZG93blNvdXJjZSgpXHJcbiAgICByZXR1cm4gcmVuZGVyZXIucmVuZGVyKFxyXG4gICAgICBzb3VyY2UsXHJcbiAgICAgIHRoaXMuZ2V0UGF0aCgpLFxyXG4gICAgICB0aGlzLmdldEdyYW1tYXIoKSxcclxuICAgICAgdGhpcy5yZW5kZXJMYVRlWCxcclxuICAgICAgJ3NhdmUnLFxyXG4gICAgICBzYXZlUGF0aCxcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyTWFya2Rvd25UZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZG9tRG9jdW1lbnQgPSBhd2FpdCByZW5kZXJlci5yZW5kZXIoXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICB0aGlzLmdldFBhdGgoKSxcclxuICAgICAgICB0aGlzLmdldEdyYW1tYXIoKSxcclxuICAgICAgICB0aGlzLnJlbmRlckxhVGVYLFxyXG4gICAgICAgIHRoaXMuZGVmYXVsdFJlbmRlck1vZGUsXHJcbiAgICAgIClcclxuICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSByZXR1cm5cclxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2VcclxuICAgICAgaGFuZGxlUHJvbWlzZShcclxuICAgICAgICB0aGlzLmhhbmRsZXIudXBkYXRlKFxyXG4gICAgICAgICAgZG9tRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTCxcclxuICAgICAgICAgIHRoaXMucmVuZGVyTGFUZVgsXHJcbiAgICAgICAgICBhdG9tQ29uZmlnKCkubWF0aENvbmZpZy5sYXRleFJlbmRlcmVyLFxyXG4gICAgICAgICksXHJcbiAgICAgIClcclxuICAgICAgdGhpcy5oYW5kbGVyLnNldFNvdXJjZU1hcChcclxuICAgICAgICB1dGlsLmJ1aWxkTGluZU1hcChtYXJrZG93bkl0LmdldFRva2Vucyh0ZXh0LCB0aGlzLnJlbmRlckxhVGVYKSksXHJcbiAgICAgIClcclxuICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtbWFya2Rvd24nKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5zaG93RXJyb3IoZXJyb3IgYXMgRXJyb3IpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNob3dFcnJvcihlcnJvcjogRXJyb3IpIHtcclxuICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xyXG4gICAgICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRmF0YWxFcnJvcihcclxuICAgICAgICAnRXJyb3IgcmVwb3J0ZWQgb24gYSBkZXN0cm95ZWQgTWFya2Rvd24gUHJldmlldyBQbHVzIHZpZXcnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpc21pc3NhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxyXG4gICAgICAgICAgZGV0YWlsOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLmhhbmRsZXIuZXJyb3IoZXJyb3IubWVzc2FnZSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29weVRvQ2xpcGJvYXJkKCkge1xyXG4gICAgaWYgKHRoaXMubG9hZGluZykge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcclxuICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IHNlbGVjdGlvbi50b1N0cmluZygpXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBzZWxlY3Rpb24uYmFzZU5vZGUgYXMgSFRNTEVsZW1lbnRcclxuXHJcbiAgICAvLyBVc2UgZGVmYXVsdCBjb3B5IGV2ZW50IGhhbmRsZXIgaWYgdGhlcmUgaXMgc2VsZWN0ZWQgdGV4dCBpbnNpZGUgdGhpcyB2aWV3XHJcbiAgICBpZiAoXHJcbiAgICAgIHNlbGVjdGVkVGV4dCAmJlxyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6c3RyaWN0LXR5cGUtcHJlZGljYXRlcyAvL1RPRE86IGNvbXBsYWluIG9uIFRTXHJcbiAgICAgIHNlbGVjdGVkTm9kZSAhPSBudWxsIC8vICYmXHJcbiAgICAgIC8vICh0aGlzLnByZXZpZXcgPT09IHNlbGVjdGVkTm9kZSB8fCB0aGlzLnByZXZpZXcuY29udGFpbnMoc2VsZWN0ZWROb2RlKSlcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVQcm9taXNlKFxyXG4gICAgICB0aGlzLmdldE1hcmtkb3duU291cmNlKCkudGhlbihhc3luYyAoc3JjKSA9PlxyXG4gICAgICAgIGNvcHlIdG1sKHNyYywgdGhpcy5nZXRQYXRoKCksIHRoaXMucmVuZGVyTGFUZVgpLFxyXG4gICAgICApLFxyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst electron_1 = require(\"electron\");\r\nclass IPCCaller {\r\n    constructor(windowId, editorId) {\r\n        this.windowId = windowId;\r\n        this.editorId = editorId;\r\n        this.ipcIdx = 0;\r\n        this.myWindowId = electron_1.remote.getCurrentWindow().id;\r\n    }\r\n    async scrollToBufferRange(arg) {\r\n        return this.ipc('scrollToBufferRange', arg);\r\n    }\r\n    async destroy() {\r\n        return this.ipc('destroy', undefined);\r\n    }\r\n    async init() {\r\n        return this.ipc('init', undefined);\r\n    }\r\n    async openSource(arg) {\r\n        return this.ipc('openSource', arg);\r\n    }\r\n    dispose() {\r\n    }\r\n    async ipc(cmd, args) {\r\n        return new Promise((resolve, reject) => {\r\n            const idx = this.ipcIdx++;\r\n            const handler = (e) => {\r\n                if (e.forWindowId === this.myWindowId &&\r\n                    e.windowId === this.windowId &&\r\n                    e.editorId === this.editorId &&\r\n                    e.idx === idx) {\r\n                    electron_1.remote.ipcMain.removeListener('markdown-preview-plus:editor-reply', handler);\r\n                    resolve(e.reply);\r\n                }\r\n            };\r\n            const res = electron_1.remote.ipcMain.emit('markdown-preview-plus:editor-request', {\r\n                windowId: this.windowId,\r\n                editorId: this.editorId,\r\n                forWindowId: this.myWindowId,\r\n                idx,\r\n                cmd,\r\n                args,\r\n            });\r\n            if (!res) {\r\n                reject(new Error('Nobody is listening for editor requests'));\r\n                return;\r\n            }\r\n            electron_1.remote.ipcMain.on('markdown-preview-plus:editor-reply', handler);\r\n        });\r\n    }\r\n}\r\nexports.IPCCaller = IPCCaller;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXBjLWNhbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYXJrZG93bi1wcmV2aWV3LXZpZXcvaXBjL2lwYy1jYWxsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx1Q0FBaUM7QUFRakM7SUFHRSxZQUFvQixRQUFnQixFQUFVLFFBQWdCO1FBQTFDLGFBQVEsR0FBUixRQUFRLENBQVE7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFRO1FBRnRELFdBQU0sR0FBRyxDQUFDLENBQUE7UUFDVixlQUFVLEdBQUcsaUJBQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsQ0FBQTtJQUNnQixDQUFDO0lBQzNELEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxHQUFxQjtRQUNwRCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxPQUFPO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUE7SUFDdkMsQ0FBQztJQUNNLEtBQUssQ0FBQyxJQUFJO1FBQ2YsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUNwQyxDQUFDO0lBQ00sS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFZO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDcEMsQ0FBQztJQUNNLE9BQU87SUFFZCxDQUFDO0lBQ08sS0FBSyxDQUFDLEdBQUcsQ0FDZixHQUFNLEVBQ04sSUFBb0I7UUFFcEIsT0FBTyxJQUFJLE9BQU8sQ0FBTSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUE7WUFDekIsTUFBTSxPQUFPLEdBQUcsQ0FBQyxDQU1oQixFQUFFLEVBQUU7Z0JBQ0gsSUFDRSxDQUFDLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxVQUFVO29CQUNqQyxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRO29CQUM1QixDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRO29CQUM1QixDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsRUFDYjtvQkFDQSxpQkFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQzNCLG9DQUFvQyxFQUNwQyxPQUFPLENBQ1IsQ0FBQTtvQkFDRCxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO2lCQUNqQjtZQUNILENBQUMsQ0FBQTtZQUNELE1BQU0sR0FBRyxHQUFHLGlCQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxzQ0FBc0MsRUFBRTtnQkFDdEUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO2dCQUN2QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7Z0JBQ3ZCLFdBQVcsRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDNUIsR0FBRztnQkFDSCxHQUFHO2dCQUNILElBQUk7YUFDTCxDQUFDLENBQUE7WUFDRixJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNSLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDLENBQUE7Z0JBQzVELE9BQU07YUFDUDtZQUNELGlCQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUNsRSxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRjtBQTVERCw4QkE0REMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJUENDbWQsIEFyZyB9IGZyb20gJy4vcmVxdWVzdC1oYW5kbGVyJ1xyXG5pbXBvcnQgeyByZW1vdGUgfSBmcm9tICdlbGVjdHJvbidcclxuXHJcbmV4cG9ydCB0eXBlIElQQ0NtZFByb21pc2UgPSB7XHJcbiAgW0sgaW4ga2V5b2YgSVBDQ21kXTogSVBDQ21kW0tdIGV4dGVuZHMgKGFyZzogaW5mZXIgQSkgPT4gaW5mZXIgUlxyXG4gICAgPyAoYXJnOiBBKSA9PiBQcm9taXNlPFI+XHJcbiAgICA6IG5ldmVyXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJUENDYWxsZXIgaW1wbGVtZW50cyBJUENDbWRQcm9taXNlIHtcclxuICBwcml2YXRlIGlwY0lkeCA9IDBcclxuICBwcml2YXRlIG15V2luZG93SWQgPSByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpLmlkXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB3aW5kb3dJZDogbnVtYmVyLCBwcml2YXRlIGVkaXRvcklkOiBudW1iZXIpIHt9XHJcbiAgcHVibGljIGFzeW5jIHNjcm9sbFRvQnVmZmVyUmFuZ2UoYXJnOiBbbnVtYmVyLCBudW1iZXJdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pcGMoJ3Njcm9sbFRvQnVmZmVyUmFuZ2UnLCBhcmcpXHJcbiAgfVxyXG4gIHB1YmxpYyBhc3luYyBkZXN0cm95KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXBjKCdkZXN0cm95JywgdW5kZWZpbmVkKVxyXG4gIH1cclxuICBwdWJsaWMgYXN5bmMgaW5pdCgpIHtcclxuICAgIHJldHVybiB0aGlzLmlwYygnaW5pdCcsIHVuZGVmaW5lZClcclxuICB9XHJcbiAgcHVibGljIGFzeW5jIG9wZW5Tb3VyY2UoYXJnPzogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pcGMoJ29wZW5Tb3VyY2UnLCBhcmcpXHJcbiAgfVxyXG4gIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgLy8gVE9ET1xyXG4gIH1cclxuICBwcml2YXRlIGFzeW5jIGlwYzxUIGV4dGVuZHMga2V5b2YgSVBDQ21kPihcclxuICAgIGNtZDogVCxcclxuICAgIGFyZ3M6IEFyZzxJUENDbWRbVF0+LFxyXG4gICk6IFByb21pc2U8UmV0dXJuVHlwZTxJUENDbWRbVF0+PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuaXBjSWR4KytcclxuICAgICAgY29uc3QgaGFuZGxlciA9IChlOiB7XHJcbiAgICAgICAgZWRpdG9ySWQ6IG51bWJlclxyXG4gICAgICAgIHdpbmRvd0lkOiBudW1iZXJcclxuICAgICAgICBmb3JXaW5kb3dJZDogbnVtYmVyXHJcbiAgICAgICAgaWR4OiBudW1iZXJcclxuICAgICAgICByZXBseTogYW55XHJcbiAgICAgIH0pID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBlLmZvcldpbmRvd0lkID09PSB0aGlzLm15V2luZG93SWQgJiZcclxuICAgICAgICAgIGUud2luZG93SWQgPT09IHRoaXMud2luZG93SWQgJiZcclxuICAgICAgICAgIGUuZWRpdG9ySWQgPT09IHRoaXMuZWRpdG9ySWQgJiZcclxuICAgICAgICAgIGUuaWR4ID09PSBpZHhcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJlbW90ZS5pcGNNYWluLnJlbW92ZUxpc3RlbmVyKFxyXG4gICAgICAgICAgICAnbWFya2Rvd24tcHJldmlldy1wbHVzOmVkaXRvci1yZXBseScsXHJcbiAgICAgICAgICAgIGhhbmRsZXIsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICByZXNvbHZlKGUucmVwbHkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHJlcyA9IHJlbW90ZS5pcGNNYWluLmVtaXQoJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItcmVxdWVzdCcsIHtcclxuICAgICAgICB3aW5kb3dJZDogdGhpcy53aW5kb3dJZCxcclxuICAgICAgICBlZGl0b3JJZDogdGhpcy5lZGl0b3JJZCxcclxuICAgICAgICBmb3JXaW5kb3dJZDogdGhpcy5teVdpbmRvd0lkLFxyXG4gICAgICAgIGlkeCxcclxuICAgICAgICBjbWQsXHJcbiAgICAgICAgYXJncyxcclxuICAgICAgfSlcclxuICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdOb2JvZHkgaXMgbGlzdGVuaW5nIGZvciBlZGl0b3IgcmVxdWVzdHMnKSlcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfSAvLyBvdGhlcndpc2UsXHJcbiAgICAgIHJlbW90ZS5pcGNNYWluLm9uKCdtYXJrZG93bi1wcmV2aWV3LXBsdXM6ZWRpdG9yLXJlcGx5JywgaGFuZGxlcilcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst electron_1 = require(\"electron\");\r\nclass EventHandler {\r\n    constructor(windowId, editorId, handlers) {\r\n        this.windowId = windowId;\r\n        this.editorId = editorId;\r\n        this.handlers = handlers;\r\n        this.handler = (e) => {\r\n            if (this.editorId !== e.editorId || this.windowId !== e.windowId)\r\n                return;\r\n            const handler = this.handlers[e.event];\r\n            handler(e.arg);\r\n        };\r\n        electron_1.remote.ipcMain.on('markdown-preview-plus:editor-event', this.handler);\r\n    }\r\n    dispose() {\r\n        electron_1.remote.ipcMain.removeListener('markdown-preview-plus:editor-event', this.handler);\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtaGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYXJrZG93bi1wcmV2aWV3LXZpZXcvaXBjL2V2ZW50LWhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBaUM7QUFzQmpDO0lBQ0UsWUFDbUIsUUFBZ0IsRUFDaEIsUUFBZ0IsRUFDaEIsUUFBbUM7UUFGbkMsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNoQixhQUFRLEdBQVIsUUFBUSxDQUFRO1FBQ2hCLGFBQVEsR0FBUixRQUFRLENBQTJCO1FBWTlDLFlBQU8sR0FBRyxDQUFDLENBQStCLEVBQUUsRUFBRTtZQUNwRCxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxRQUFRO2dCQUFFLE9BQU07WUFDeEUsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFhLENBQUE7WUFDbEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNoQixDQUFDLENBQUE7UUFkQyxpQkFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsb0NBQW9DLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3ZFLENBQUM7SUFFTSxPQUFPO1FBQ1osaUJBQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUMzQixvQ0FBb0MsRUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FDYixDQUFBO0lBQ0gsQ0FBQztDQU9GO0FBckJELG9DQXFCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbW90ZSB9IGZyb20gJ2VsZWN0cm9uJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUENFdmVudHMge1xyXG4gIHN5bmNQcmV2aWV3OiBudW1iZXJcclxuICBzY3JvbGxTeW5jOiBbbnVtYmVyLCBudW1iZXJdXHJcbiAgZGVzdHJveTogdm9pZFxyXG4gIGNoYW5nZUdyYW1tYXI6IHN0cmluZ1xyXG4gIGNoYW5nZVBhdGg6IHsgdGl0bGU6IHN0cmluZzsgcGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkIH1cclxuICBjaGFuZ2VUZXh0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSVBDRXZlbnRIYW5kbGVyID0ge1xyXG4gIFtLIGluIGtleW9mIElQQ0V2ZW50c106IChhcmc6IElQQ0V2ZW50c1tLXSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBFZGl0b3JFdmVudDxUIGV4dGVuZHMga2V5b2YgSVBDRXZlbnRzPiA9IHtcclxuICBlZGl0b3JJZDogbnVtYmVyXHJcbiAgd2luZG93SWQ6IG51bWJlclxyXG4gIGV2ZW50OiBUXHJcbiAgYXJnOiBJUENFdmVudHNbVF1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHdpbmRvd0lkOiBudW1iZXIsXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVkaXRvcklkOiBudW1iZXIsXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhhbmRsZXJzOiBSZWFkb25seTxJUENFdmVudEhhbmRsZXI+LFxyXG4gICkge1xyXG4gICAgcmVtb3RlLmlwY01haW4ub24oJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItZXZlbnQnLCB0aGlzLmhhbmRsZXIpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgIHJlbW90ZS5pcGNNYWluLnJlbW92ZUxpc3RlbmVyKFxyXG4gICAgICAnbWFya2Rvd24tcHJldmlldy1wbHVzOmVkaXRvci1ldmVudCcsXHJcbiAgICAgIHRoaXMuaGFuZGxlcixcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlciA9IChlOiBFZGl0b3JFdmVudDxrZXlvZiBJUENFdmVudHM+KSA9PiB7XHJcbiAgICBpZiAodGhpcy5lZGl0b3JJZCAhPT0gZS5lZGl0b3JJZCB8fCB0aGlzLndpbmRvd0lkICE9PSBlLndpbmRvd0lkKSByZXR1cm5cclxuICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzW2UuZXZlbnRdIGFzIEZ1bmN0aW9uXHJcbiAgICBoYW5kbGVyKGUuYXJnKVxyXG4gIH1cclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst electron_1 = require(\"electron\");\r\nclass RequestHandler {\r\n    constructor(windowId, editorId, handlers) {\r\n        this.windowId = windowId;\r\n        this.editorId = editorId;\r\n        this.handlers = handlers;\r\n        this.handleRequest = (e) => {\r\n            if (e.editorId !== this.editorId || e.windowId !== this.windowId)\r\n                return;\r\n            const func = this.handlers[e.cmd];\r\n            const reply = func(e.args);\r\n            electron_1.remote.ipcMain.emit('markdown-preview-plus:editor-reply', {\r\n                editorId: e.editorId,\r\n                windowId: e.windowId,\r\n                forWindowId: e.forWindowId,\r\n                idx: e.idx,\r\n                reply,\r\n            });\r\n        };\r\n        electron_1.remote.ipcMain.on('markdown-preview-plus:editor-request', this.handleRequest);\r\n    }\r\n    dispose() {\r\n        electron_1.remote.ipcMain.removeListener('markdown-preview-plus:editor-request', this.handleRequest);\r\n    }\r\n}\r\nexports.RequestHandler = RequestHandler;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC1oYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLXByZXZpZXctdmlldy9pcGMvcmVxdWVzdC1oYW5kbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQWlDO0FBK0JqQztJQUNFLFlBQ21CLFFBQWdCLEVBQ2hCLFFBQWdCLEVBQ2hCLFFBQWdCO1FBRmhCLGFBQVEsR0FBUixRQUFRLENBQVE7UUFDaEIsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNoQixhQUFRLEdBQVIsUUFBUSxDQUFRO1FBZTVCLGtCQUFhLEdBQUcsQ0FBQyxDQUF5QixFQUFFLEVBQUU7WUFDbkQsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTtnQkFBRSxPQUFNO1lBQ3hFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBYSxDQUFBO1lBQzdDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDMUIsaUJBQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxFQUFFO2dCQUN4RCxRQUFRLEVBQUUsQ0FBQyxDQUFDLFFBQVE7Z0JBQ3BCLFFBQVEsRUFBRSxDQUFDLENBQUMsUUFBUTtnQkFDcEIsV0FBVyxFQUFFLENBQUMsQ0FBQyxXQUFXO2dCQUMxQixHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUc7Z0JBQ1YsS0FBSzthQUNOLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQTtRQXhCQyxpQkFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQ2Ysc0NBQXNDLEVBQ3RDLElBQUksQ0FBQyxhQUFhLENBQ25CLENBQUE7SUFDSCxDQUFDO0lBRU0sT0FBTztRQUNaLGlCQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FDM0Isc0NBQXNDLEVBQ3RDLElBQUksQ0FBQyxhQUFhLENBQ25CLENBQUE7SUFDSCxDQUFDO0NBY0Y7QUEvQkQsd0NBK0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVtb3RlIH0gZnJvbSAnZWxlY3Ryb24nXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQQ0NtZCB7XHJcbiAgc2Nyb2xsVG9CdWZmZXJSYW5nZTogKGFyZzogW251bWJlciwgbnVtYmVyXSkgPT4gdm9pZFxyXG4gIGRlc3Ryb3k6IChhcmc6IHZvaWQpID0+IHZvaWRcclxuICBpbml0OiAoXHJcbiAgICBhcmc6IHZvaWQsXHJcbiAgKSA9PiB7XHJcbiAgICB0ZXh0OiBzdHJpbmdcclxuICAgIHRpdGxlOiBzdHJpbmdcclxuICAgIGdyYW1tYXI6IHN0cmluZ1xyXG4gICAgcGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkXHJcbiAgfVxyXG4gIG9wZW5Tb3VyY2U6IChhcmc/OiBudW1iZXIpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgRXZlbnRGb3IgPSB7XHJcbiAgW0sgaW4ga2V5b2YgSVBDQ21kXToge1xyXG4gICAgZWRpdG9ySWQ6IG51bWJlclxyXG4gICAgd2luZG93SWQ6IG51bWJlclxyXG4gICAgZm9yV2luZG93SWQ6IG51bWJlclxyXG4gICAgaWR4OiBudW1iZXJcclxuICAgIGNtZDogS1xyXG4gICAgYXJnczogQXJnPElQQ0NtZFtLXT5cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFyZzxUIGV4dGVuZHMgKGFyZzogYW55KSA9PiBhbnk+ID0gVCBleHRlbmRzIChhcmc6IGluZmVyIFUpID0+IGFueVxyXG4gID8gVVxyXG4gIDogbmV2ZXJcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXF1ZXN0SGFuZGxlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHdpbmRvd0lkOiBudW1iZXIsXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVkaXRvcklkOiBudW1iZXIsXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhhbmRsZXJzOiBJUENDbWQsXHJcbiAgKSB7XHJcbiAgICByZW1vdGUuaXBjTWFpbi5vbihcclxuICAgICAgJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItcmVxdWVzdCcsXHJcbiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCxcclxuICAgIClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgcmVtb3RlLmlwY01haW4ucmVtb3ZlTGlzdGVuZXIoXHJcbiAgICAgICdtYXJrZG93bi1wcmV2aWV3LXBsdXM6ZWRpdG9yLXJlcXVlc3QnLFxyXG4gICAgICB0aGlzLmhhbmRsZVJlcXVlc3QsXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlUmVxdWVzdCA9IChlOiBFdmVudEZvcltrZXlvZiBJUENDbWRdKSA9PiB7XHJcbiAgICBpZiAoZS5lZGl0b3JJZCAhPT0gdGhpcy5lZGl0b3JJZCB8fCBlLndpbmRvd0lkICE9PSB0aGlzLndpbmRvd0lkKSByZXR1cm5cclxuICAgIGNvbnN0IGZ1bmMgPSB0aGlzLmhhbmRsZXJzW2UuY21kXSBhcyBGdW5jdGlvblxyXG4gICAgY29uc3QgcmVwbHkgPSBmdW5jKGUuYXJncylcclxuICAgIHJlbW90ZS5pcGNNYWluLmVtaXQoJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItcmVwbHknLCB7XHJcbiAgICAgIGVkaXRvcklkOiBlLmVkaXRvcklkLFxyXG4gICAgICB3aW5kb3dJZDogZS53aW5kb3dJZCxcclxuICAgICAgZm9yV2luZG93SWQ6IGUuZm9yV2luZG93SWQsXHJcbiAgICAgIGlkeDogZS5pZHgsXHJcbiAgICAgIHJlcGx5LFxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst util_1 = require(\"../../util\");\r\nconst electron_1 = require(\"electron\");\r\nfunction shouldScrollSync(whatScrolled) {\r\n    const config = util_1.atomConfig().syncConfig;\r\n    if (config.syncEditorOnPreviewScroll && config.syncPreviewOnEditorScroll) {\r\n        return electron_1.remote.getCurrentWindow().isFocused();\r\n    }\r\n    else {\r\n        return ((config.syncEditorOnPreviewScroll && whatScrolled === 'preview') ||\r\n            (config.syncPreviewOnEditorScroll && whatScrolled === 'editor'));\r\n    }\r\n}\r\nexports.shouldScrollSync = shouldScrollSync;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hvdWxkLXNjcm9sbC1zeW5jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLXByZXZpZXctdmlldy9pcGMvc2hvdWxkLXNjcm9sbC1zeW5jLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXVDO0FBQ3ZDLHVDQUFpQztBQUVqQywwQkFBaUMsWUFBa0M7SUFDakUsTUFBTSxNQUFNLEdBQUcsaUJBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQTtJQUN0QyxJQUFJLE1BQU0sQ0FBQyx5QkFBeUIsSUFBSSxNQUFNLENBQUMseUJBQXlCLEVBQUU7UUFDeEUsT0FBTyxpQkFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUMsU0FBUyxFQUFFLENBQUE7S0FDN0M7U0FBTTtRQUNMLE9BQU8sQ0FDTCxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsSUFBSSxZQUFZLEtBQUssU0FBUyxDQUFDO1lBQ2hFLENBQUMsTUFBTSxDQUFDLHlCQUF5QixJQUFJLFlBQVksS0FBSyxRQUFRLENBQUMsQ0FDaEUsQ0FBQTtLQUNGO0FBQ0gsQ0FBQztBQVZELDRDQVVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbUNvbmZpZyB9IGZyb20gJy4uLy4uL3V0aWwnXHJcbmltcG9ydCB7IHJlbW90ZSB9IGZyb20gJ2VsZWN0cm9uJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFNjcm9sbFN5bmMod2hhdFNjcm9sbGVkOiAnZWRpdG9yJyB8ICdwcmV2aWV3Jykge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF0b21Db25maWcoKS5zeW5jQ29uZmlnXHJcbiAgaWYgKGNvbmZpZy5zeW5jRWRpdG9yT25QcmV2aWV3U2Nyb2xsICYmIGNvbmZpZy5zeW5jUHJldmlld09uRWRpdG9yU2Nyb2xsKSB7XHJcbiAgICByZXR1cm4gcmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKS5pc0ZvY3VzZWQoKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAoY29uZmlnLnN5bmNFZGl0b3JPblByZXZpZXdTY3JvbGwgJiYgd2hhdFNjcm9sbGVkID09PSAncHJldmlldycpIHx8XHJcbiAgICAgIChjb25maWcuc3luY1ByZXZpZXdPbkVkaXRvclNjcm9sbCAmJiB3aGF0U2Nyb2xsZWQgPT09ICdlZGl0b3InKVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst atom_1 = require(\"atom\");\r\nconst electron_1 = require(\"electron\");\r\nconst request_handler_1 = require(\"./request-handler\");\r\nconst util_1 = require(\"../../util\");\r\nconst should_scroll_sync_1 = require(\"./should-scroll-sync\");\r\nclass RemoteEditorServer {\r\n    constructor(editor) {\r\n        this.editor = editor;\r\n        this.disposables = new atom_1.CompositeDisposable();\r\n        this.windowId = electron_1.remote.getCurrentWindow().id;\r\n        this.destroyTimeoutLength = 60000;\r\n        this.usageCounter = 0;\r\n        this.eventHandlers = {\r\n            scrollToBufferRange: ([min, max]) => {\r\n                if (min === 0) {\r\n                    this.editor.scrollToBufferPosition([min, 0]);\r\n                }\r\n                else if (max >= this.editor.getLastBufferRow() - 1) {\r\n                    this.editor.scrollToBufferPosition([max, 0]);\r\n                }\r\n                else {\r\n                    const range = atom_1.Range.fromObject([[min, 0], [max, 0]]);\r\n                    this.editor.scrollToScreenRange(this.editor.screenRangeForBufferRange(range), {\r\n                        center: false,\r\n                    });\r\n                }\r\n            },\r\n            destroy: () => {\r\n                this.usageCounter -= 1;\r\n                if (this.usageCounter <= 0) {\r\n                    this.resetTimeout();\r\n                    this.destroyTimeout = window.setTimeout(() => {\r\n                        this.dispose();\r\n                    }, this.destroyTimeoutLength);\r\n                }\r\n            },\r\n            init: () => {\r\n                this.usageCounter += 1;\r\n                this.resetTimeout();\r\n                return {\r\n                    path: this.editor.getPath(),\r\n                    title: this.editor.getTitle(),\r\n                    grammar: this.editor.getGrammar().scopeName,\r\n                    text: this.editor.getText(),\r\n                };\r\n            },\r\n            openSource: (row) => {\r\n                if (row !== undefined) {\r\n                    this.editor.setCursorBufferPosition([row, 0]);\r\n                }\r\n                electron_1.remote.getCurrentWindow().focus();\r\n                const pane = atom.workspace.paneForItem(this.editor);\r\n                if (!pane)\r\n                    return;\r\n                pane.activateItem(this.editor);\r\n                pane.activate();\r\n            },\r\n        };\r\n        this.disposables.add(new request_handler_1.RequestHandler(this.windowId, editor.id, this.eventHandlers));\r\n        this.handleEditorEvents();\r\n    }\r\n    static create(editor) {\r\n        const res = RemoteEditorServer.editorMap.get(editor);\r\n        if (res)\r\n            return res;\r\n        const newRes = new RemoteEditorServer(editor);\r\n        RemoteEditorServer.editorMap.set(editor, newRes);\r\n        return newRes;\r\n    }\r\n    dispose() {\r\n        RemoteEditorServer.editorMap.delete(this.editor);\r\n        this.disposables.dispose();\r\n    }\r\n    resetTimeout() {\r\n        if (this.destroyTimeout !== undefined) {\r\n            window.clearTimeout(this.destroyTimeout);\r\n            this.destroyTimeout = undefined;\r\n        }\r\n    }\r\n    handleEditorEvents() {\r\n        this.disposables.add(this.editor.getBuffer().onDidStopChanging(() => {\r\n            if (util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.emit('changeText', this.editor.getText());\r\n            }\r\n            if (util_1.atomConfig().syncConfig.syncPreviewOnChange) {\r\n                this.emit('syncPreview', this.editor.getCursorBufferPosition().row);\r\n            }\r\n        }), this.editor.onDidChangePath(() => {\r\n            this.emit('changePath', {\r\n                path: this.editor.getPath(),\r\n                title: this.editor.getTitle(),\r\n            });\r\n        }), this.editor.onDidChangeGrammar((grammar) => {\r\n            this.emit('changeGrammar', grammar.scopeName);\r\n        }), this.editor.onDidDestroy(() => {\r\n            this.dispose();\r\n            if (util_1.atomConfig().previewConfig.closePreviewWithEditor) {\r\n                this.emit('destroy', undefined);\r\n            }\r\n        }), this.editor.getBuffer().onDidSave(() => {\r\n            if (!util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.emit('changeText', this.editor.getText());\r\n            }\r\n        }), this.editor.getBuffer().onDidReload(() => {\r\n            if (!util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.emit('changeText', this.editor.getText());\r\n            }\r\n        }), atom.views.getView(this.editor).onDidChangeScrollTop(() => {\r\n            if (!should_scroll_sync_1.shouldScrollSync('editor'))\r\n                return;\r\n            const [first, last] = this.editor.getVisibleRowRange();\r\n            const firstLine = this.editor.bufferRowForScreenRow(first);\r\n            const lastLine = this.editor.bufferRowForScreenRow(last);\r\n            this.emit('scrollSync', [firstLine, lastLine]);\r\n        }), atom.commands.add(atom.views.getView(this.editor), {\r\n            'markdown-preview-plus:sync-preview': () => {\r\n                this.emit('syncPreview', this.editor.getCursorBufferPosition().row);\r\n            },\r\n        }));\r\n    }\r\n    emit(event, arg) {\r\n        electron_1.remote.ipcMain.emit('markdown-preview-plus:editor-event', {\r\n            editorId: this.editor.id,\r\n            windowId: this.windowId,\r\n            event,\r\n            arg,\r\n        });\r\n    }\r\n}\r\nRemoteEditorServer.editorMap = new WeakMap();\r\nexports.RemoteEditorServer = RemoteEditorServer;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dXAtZWRpdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21hcmtkb3duLXByZXZpZXctdmlldy9pcGMvc2V0dXAtZWRpdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQTZEO0FBQzdELHVDQUFpQztBQUNqQyx1REFBa0Q7QUFDbEQscUNBQXVDO0FBQ3ZDLDZEQUF1RDtBQWtCdkQ7SUFzREUsWUFBcUMsTUFBa0I7UUFBbEIsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQXBEdEMsZ0JBQVcsR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7UUFDdkMsYUFBUSxHQUFHLGlCQUFNLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLENBQUE7UUFDdkMseUJBQW9CLEdBQUcsS0FBSyxDQUFBO1FBQ3JDLGlCQUFZLEdBQUcsQ0FBQyxDQUFBO1FBRWhCLGtCQUFhLEdBQUc7WUFDdEIsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQW1CLEVBQUUsRUFBRTtnQkFDcEQsSUFBSSxHQUFHLEtBQUssQ0FBQyxFQUFFO29CQUNiLElBQUksQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtpQkFDN0M7cUJBQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLENBQUMsRUFBRTtvQkFDcEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO2lCQUM3QztxQkFBTTtvQkFDTCxNQUFNLEtBQUssR0FBRyxZQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO29CQUNwRCxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFt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QUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtRQUNoRCxDQUFDLENBQUMsRUFDRixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDakQsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO2dCQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDckUsQ0FBQztTQUNGLENBQUMsQ0FDSCxDQUFBO0lBQ0gsQ0FBQztJQUVPLElBQUksQ0FBNEIsS0FBUSxFQUFFLEdBQWlCO1FBQ2pFLGlCQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsRUFBRTtZQUN4RCxRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3hCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUN2QixLQUFLO1lBQ0wsR0FBRztTQUNKLENBQUMsQ0FBQTtJQUNKLENBQUM7O0FBekljLDRCQUFTLEdBQUcsSUFBSSxPQUFPLEVBQWtDLENBQUE7QUFEMUUsZ0RBMklDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGV4dEVkaXRvciwgQ29tcG9zaXRlRGlzcG9zYWJsZSwgUmFuZ2UgfSBmcm9tICdhdG9tJ1xyXG5pbXBvcnQgeyByZW1vdGUgfSBmcm9tICdlbGVjdHJvbidcclxuaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuL3JlcXVlc3QtaGFuZGxlcidcclxuaW1wb3J0IHsgYXRvbUNvbmZpZyB9IGZyb20gJy4uLy4uL3V0aWwnXHJcbmltcG9ydCB7IHNob3VsZFNjcm9sbFN5bmMgfSBmcm9tICcuL3Nob3VsZC1zY3JvbGwtc3luYydcclxuaW1wb3J0IHsgSVBDRXZlbnRzIH0gZnJvbSAnLi9ldmVudC1oYW5kbGVyJ1xyXG5cclxuLyogTk9URTogV2VpcmQgcmVmZXJlbmNlIGNvdW50aW5nIGFuZCBXZWFrTWFwIGFyZSBoZXJlIGJlY2F1c2VcclxuICogdGhlcmUgY2FuIGJlIGluIHRoZW9yeSBtdWx0aXBsZSB3aW5kb3dzIHdpdGhcclxuICogTWFya2Rvd25QcmV2aWV3Vmlld0VkaXRvclJlbW90ZSByZWZlcmVuY2luZyB0aGUgc2FtZVxyXG4gKiBlZGl0b3IgYnkgd2luZG93SWQvZWRpdG9ySWQsIHdoaWNoIHdvdWxkIGxlYWQgdG9cclxuICogbXVsdGlwbGUgdHJpZ2dlcnMgaWYgbmV3IFwic2VydmVyXCIgd291bGQgYmUgY3JlYXRlZCBmb3IgZXZlcnkgbmV3XHJcbiAqIHByZXZpZXcgaW5zdGFuY2U7XHJcbiAqIFdlaXJkIGRlZmVycmVkIGRpc3Bvc2FsIGlzIGhlcmUgYmVjYXVzZSBuZXctd2luZG93IGV4ZWN1dGVkIG9uXHJcbiAqIE1hcmtkb3duUHJldmlld1ZpZXdFZGl0b3JSZW1vdGUgd2lsbCBmaXJzdCBkZXN0cm95IHRoZSBjdXJyZW50XHJcbiAqIGluc3RhbmNlLCBhbmQgb25seSB0aGVuLCBhZnRlciBhIG5ldyBBdG9tIHdpbmRvdyBpbml0aWFsaXplcyxcclxuICogd2lsbCBjcmVhdGUgYSBuZXcgb25lLiBXaGljaCBtaWdodCBlYXNpbHkgdGFrZSB0ZW5zIG9mIHNlY29uZHMuXHJcbiAqIFdoYXQgbWFrZXMgdGhpcyBldmVuIG1vcmUgY29tcGxpY2F0ZWQsIHRoZXJlIGlzIG5vIHNhbmUgd2F5IHRvXHJcbiAqIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBSZW1vdGVFZGl0b3JTZXJ2ZXIgcmVtb3RlbHk7IGhlbmNlLFxyXG4gKiBpdCB3YWl0cyBqdXN0IGluIGNhc2UgbmV3IGNsaWVudHMgYXBwZWFyIGJlZm9yZSBkaXNwb3Npbmcgb2YgaXRzZWxmLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVFZGl0b3JTZXJ2ZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIGVkaXRvck1hcCA9IG5ldyBXZWFrTWFwPFRleHRFZGl0b3IsIFJlbW90ZUVkaXRvclNlcnZlcj4oKVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXHJcbiAgcHJpdmF0ZSByZWFkb25seSB3aW5kb3dJZCA9IHJlbW90ZS5nZXRDdXJyZW50V2luZG93KCkuaWRcclxuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3lUaW1lb3V0TGVuZ3RoID0gNjAwMDBcclxuICBwcml2YXRlIHVzYWdlQ291bnRlciA9IDBcclxuICBwcml2YXRlIGRlc3Ryb3lUaW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWRcclxuICBwcml2YXRlIGV2ZW50SGFuZGxlcnMgPSB7XHJcbiAgICBzY3JvbGxUb0J1ZmZlclJhbmdlOiAoW21pbiwgbWF4XTogW251bWJlciwgbnVtYmVyXSkgPT4ge1xyXG4gICAgICBpZiAobWluID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2Nyb2xsVG9CdWZmZXJQb3NpdGlvbihbbWluLCAwXSlcclxuICAgICAgfSBlbHNlIGlmIChtYXggPj0gdGhpcy5lZGl0b3IuZ2V0TGFzdEJ1ZmZlclJvdygpIC0gMSkge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yLnNjcm9sbFRvQnVmZmVyUG9zaXRpb24oW21heCwgMF0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBSYW5nZS5mcm9tT2JqZWN0KFtbbWluLCAwXSwgW21heCwgMF1dKVxyXG4gICAgICAgIHRoaXMuZWRpdG9yLnNjcm9sbFRvU2NyZWVuUmFuZ2UoXHJcbiAgICAgICAgICB0aGlzLmVkaXRvci5zY3JlZW5SYW5nZUZvckJ1ZmZlclJhbmdlKHJhbmdlKSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2VudGVyOiBmYWxzZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGVzdHJveTogKCkgPT4ge1xyXG4gICAgICB0aGlzLnVzYWdlQ291bnRlciAtPSAxXHJcbiAgICAgIGlmICh0aGlzLnVzYWdlQ291bnRlciA8PSAwKSB7XHJcbiAgICAgICAgdGhpcy5yZXNldFRpbWVvdXQoKVxyXG4gICAgICAgIHRoaXMuZGVzdHJveVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmRpc3Bvc2UoKVxyXG4gICAgICAgIH0sIHRoaXMuZGVzdHJveVRpbWVvdXRMZW5ndGgpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpbml0OiAoKSA9PiB7XHJcbiAgICAgIHRoaXMudXNhZ2VDb3VudGVyICs9IDFcclxuICAgICAgdGhpcy5yZXNldFRpbWVvdXQoKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHBhdGg6IHRoaXMuZWRpdG9yLmdldFBhdGgoKSxcclxuICAgICAgICB0aXRsZTogdGhpcy5lZGl0b3IuZ2V0VGl0bGUoKSxcclxuICAgICAgICBncmFtbWFyOiB0aGlzLmVkaXRvci5nZXRHcmFtbWFyKCkuc2NvcGVOYW1lLFxyXG4gICAgICAgIHRleHQ6IHRoaXMuZWRpdG9yLmdldFRleHQoKSxcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9wZW5Tb3VyY2U6IChyb3c/OiBudW1iZXIpID0+IHtcclxuICAgICAgaWYgKHJvdyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oW3JvdywgMF0pXHJcbiAgICAgIH1cclxuICAgICAgcmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKS5mb2N1cygpXHJcbiAgICAgIGNvbnN0IHBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLmVkaXRvcilcclxuICAgICAgaWYgKCFwYW5lKSByZXR1cm5cclxuICAgICAgcGFuZS5hY3RpdmF0ZUl0ZW0odGhpcy5lZGl0b3IpXHJcbiAgICAgIHBhbmUuYWN0aXZhdGUoKVxyXG4gICAgfSxcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBlZGl0b3I6IFRleHRFZGl0b3IpIHtcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxyXG4gICAgICBuZXcgUmVxdWVzdEhhbmRsZXIodGhpcy53aW5kb3dJZCwgZWRpdG9yLmlkLCB0aGlzLmV2ZW50SGFuZGxlcnMpLFxyXG4gICAgKVxyXG4gICAgdGhpcy5oYW5kbGVFZGl0b3JFdmVudHMoKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoZWRpdG9yOiBUZXh0RWRpdG9yKSB7XHJcbiAgICBjb25zdCByZXMgPSBSZW1vdGVFZGl0b3JTZXJ2ZXIuZWRpdG9yTWFwLmdldChlZGl0b3IpXHJcbiAgICBpZiAocmVzKSByZXR1cm4gcmVzXHJcbiAgICBjb25zdCBuZXdSZXMgPSBuZXcgUmVtb3RlRWRpdG9yU2VydmVyKGVkaXRvcilcclxuICAgIFJlbW90ZUVkaXRvclNlcnZlci5lZGl0b3JNYXAuc2V0KGVkaXRvciwgbmV3UmVzKVxyXG4gICAgcmV0dXJuIG5ld1Jlc1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICBSZW1vdGVFZGl0b3JTZXJ2ZXIuZWRpdG9yTWFwLmRlbGV0ZSh0aGlzLmVkaXRvcilcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc2V0VGltZW91dCgpIHtcclxuICAgIGlmICh0aGlzLmRlc3Ryb3lUaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmRlc3Ryb3lUaW1lb3V0KVxyXG4gICAgICB0aGlzLmRlc3Ryb3lUaW1lb3V0ID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZUVkaXRvckV2ZW50cygpIHtcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxyXG4gICAgICB0aGlzLmVkaXRvci5nZXRCdWZmZXIoKS5vbkRpZFN0b3BDaGFuZ2luZygoKSA9PiB7XHJcbiAgICAgICAgaWYgKGF0b21Db25maWcoKS5wcmV2aWV3Q29uZmlnLmxpdmVVcGRhdGUpIHtcclxuICAgICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlVGV4dCcsIHRoaXMuZWRpdG9yLmdldFRleHQoKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0b21Db25maWcoKS5zeW5jQ29uZmlnLnN5bmNQcmV2aWV3T25DaGFuZ2UpIHtcclxuICAgICAgICAgIHRoaXMuZW1pdCgnc3luY1ByZXZpZXcnLCB0aGlzLmVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpLnJvdylcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICB0aGlzLmVkaXRvci5vbkRpZENoYW5nZVBhdGgoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlUGF0aCcsIHtcclxuICAgICAgICAgIHBhdGg6IHRoaXMuZWRpdG9yLmdldFBhdGgoKSxcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmVkaXRvci5nZXRUaXRsZSgpLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pLFxyXG4gICAgICB0aGlzLmVkaXRvci5vbkRpZENoYW5nZUdyYW1tYXIoKGdyYW1tYXIpID0+IHtcclxuICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZUdyYW1tYXInLCBncmFtbWFyLnNjb3BlTmFtZSlcclxuICAgICAgfSksXHJcbiAgICAgIHRoaXMuZWRpdG9yLm9uRGlkRGVzdHJveSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlKClcclxuICAgICAgICBpZiAoYXRvbUNvbmZpZygpLnByZXZpZXdDb25maWcuY2xvc2VQcmV2aWV3V2l0aEVkaXRvcikge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KCdkZXN0cm95JywgdW5kZWZpbmVkKVxyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIHRoaXMuZWRpdG9yLmdldEJ1ZmZlcigpLm9uRGlkU2F2ZSgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFhdG9tQ29uZmlnKCkucHJldmlld0NvbmZpZy5saXZlVXBkYXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZVRleHQnLCB0aGlzLmVkaXRvci5nZXRUZXh0KCkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICAgdGhpcy5lZGl0b3IuZ2V0QnVmZmVyKCkub25EaWRSZWxvYWQoKCkgPT4ge1xyXG4gICAgICAgIGlmICghYXRvbUNvbmZpZygpLnByZXZpZXdDb25maWcubGl2ZVVwZGF0ZSkge1xyXG4gICAgICAgICAgdGhpcy5lbWl0KCdjaGFuZ2VUZXh0JywgdGhpcy5lZGl0b3IuZ2V0VGV4dCgpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIGF0b20udmlld3MuZ2V0Vmlldyh0aGlzLmVkaXRvcikub25EaWRDaGFuZ2VTY3JvbGxUb3AoKCkgPT4ge1xyXG4gICAgICAgIGlmICghc2hvdWxkU2Nyb2xsU3luYygnZWRpdG9yJykpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IFtmaXJzdCwgbGFzdF0gPSB0aGlzLmVkaXRvci5nZXRWaXNpYmxlUm93UmFuZ2UoKVxyXG4gICAgICAgIGNvbnN0IGZpcnN0TGluZSA9IHRoaXMuZWRpdG9yLmJ1ZmZlclJvd0ZvclNjcmVlblJvdyhmaXJzdClcclxuICAgICAgICBjb25zdCBsYXN0TGluZSA9IHRoaXMuZWRpdG9yLmJ1ZmZlclJvd0ZvclNjcmVlblJvdyhsYXN0KVxyXG4gICAgICAgIHRoaXMuZW1pdCgnc2Nyb2xsU3luYycsIFtmaXJzdExpbmUsIGxhc3RMaW5lXSlcclxuICAgICAgfSksXHJcbiAgICAgIGF0b20uY29tbWFuZHMuYWRkKGF0b20udmlld3MuZ2V0Vmlldyh0aGlzLmVkaXRvciksIHtcclxuICAgICAgICAnbWFya2Rvd24tcHJldmlldy1wbHVzOnN5bmMtcHJldmlldyc6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuZW1pdCgnc3luY1ByZXZpZXcnLCB0aGlzLmVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpLnJvdylcclxuICAgICAgICB9LFxyXG4gICAgICB9KSxcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW1pdDxUIGV4dGVuZHMga2V5b2YgSVBDRXZlbnRzPihldmVudDogVCwgYXJnOiBJUENFdmVudHNbVF0pIHtcclxuICAgIHJlbW90ZS5pcGNNYWluLmVtaXQoJ21hcmtkb3duLXByZXZpZXctcGx1czplZGl0b3ItZXZlbnQnLCB7XHJcbiAgICAgIGVkaXRvcklkOiB0aGlzLmVkaXRvci5pZCxcclxuICAgICAgd2luZG93SWQ6IHRoaXMud2luZG93SWQsXHJcbiAgICAgIGV2ZW50LFxyXG4gICAgICBhcmcsXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ipc_caller_1 = require(\"./ipc-caller\");\r\nexports.IPCCaller = ipc_caller_1.IPCCaller;\r\nvar event_handler_1 = require(\"./event-handler\");\r\nexports.EventHandler = event_handler_1.EventHandler;\r\nvar request_handler_1 = require(\"./request-handler\");\r\nexports.RequestHandler = request_handler_1.RequestHandler;\r\nvar setup_editor_1 = require(\"./setup-editor\");\r\nexports.RemoteEditorServer = setup_editor_1.RemoteEditorServer;\r\nvar should_scroll_sync_1 = require(\"./should-scroll-sync\");\r\nexports.shouldScrollSync = should_scroll_sync_1.shouldScrollSync;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24tcHJldmlldy12aWV3L2lwYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJDQUF3QztBQUEvQixpQ0FBQSxTQUFTLENBQUE7QUFDbEIsaURBQThDO0FBQXJDLHVDQUFBLFlBQVksQ0FBQTtBQUNyQixxREFBa0Q7QUFBekMsMkNBQUEsY0FBYyxDQUFBO0FBQ3ZCLCtDQUFtRDtBQUExQyw0Q0FBQSxrQkFBa0IsQ0FBQTtBQUMzQiwyREFBdUQ7QUFBOUMsZ0RBQUEsZ0JBQWdCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBJUENDYWxsZXIgfSBmcm9tICcuL2lwYy1jYWxsZXInXHJcbmV4cG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gJy4vZXZlbnQtaGFuZGxlcidcclxuZXhwb3J0IHsgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuL3JlcXVlc3QtaGFuZGxlcidcclxuZXhwb3J0IHsgUmVtb3RlRWRpdG9yU2VydmVyIH0gZnJvbSAnLi9zZXR1cC1lZGl0b3InXHJcbmV4cG9ydCB7IHNob3VsZFNjcm9sbFN5bmMgfSBmcm9tICcuL3Nob3VsZC1zY3JvbGwtc3luYydcclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util = tslib_1.__importStar(require(\"./util\"));\r\nconst markdown_preview_view_1 = require(\"./markdown-preview-view\");\r\nconst util_1 = require(\"../util\");\r\nconst ipc_1 = require(\"./ipc\");\r\nconst electron_1 = require(\"electron\");\r\nclass MarkdownPreviewViewEditorRemote extends markdown_preview_view_1.MarkdownPreviewView {\r\n    constructor(windowId, editorId) {\r\n        super();\r\n        this.windowId = windowId;\r\n        this.editorId = editorId;\r\n        this.text = '';\r\n        this.title = '<Pending>';\r\n        this.ipc = new ipc_1.IPCCaller(windowId, editorId);\r\n        this.disposables.add(this.ipc);\r\n        this.handleEditorEvents();\r\n        this.ipc\r\n            .init()\r\n            .then((v) => {\r\n            this.text = v.text;\r\n            this.path = v.path;\r\n            this.grammar = atom.grammars.grammarForScopeName(v.grammar);\r\n            this.title = v.title;\r\n            this.emitter.emit('did-change-title');\r\n            this.changeHandler();\r\n        })\r\n            .catch((e) => {\r\n            atom.notifications.addError('Failed to open preview', {\r\n                dismissable: true,\r\n                detail: e.toString(),\r\n                stack: e.stack,\r\n            });\r\n        });\r\n    }\r\n    static open(editor) {\r\n        const windowId = electron_1.remote.getCurrentWindow().id;\r\n        const editorId = editor.id;\r\n        atom.open({\r\n            pathsToOpen: [\r\n                `markdown-preview-plus://remote-editor/${windowId}/${editorId}`,\r\n            ],\r\n            newWindow: true,\r\n        });\r\n        ipc_1.RemoteEditorServer.create(editor);\r\n    }\r\n    destroy() {\r\n        this.ipc.destroy().catch(ignore);\r\n        super.destroy();\r\n    }\r\n    getTitle() {\r\n        return `${this.title} Preview`;\r\n    }\r\n    getURI() {\r\n        return `markdown-preview-plus://remote-editor/${this.windowId}/${this.editorId}`;\r\n    }\r\n    getPath() {\r\n        return this.path;\r\n    }\r\n    serialize() {\r\n        return undefined;\r\n    }\r\n    openNewWindow() {\r\n        atom.open({\r\n            pathsToOpen: [this.getURI()],\r\n            newWindow: true,\r\n        });\r\n        util.destroy(this);\r\n    }\r\n    async getMarkdownSource() {\r\n        return this.text;\r\n    }\r\n    getGrammar() {\r\n        return this.grammar;\r\n    }\r\n    didScrollPreview(min, max) {\r\n        if (!ipc_1.shouldScrollSync('preview'))\r\n            return;\r\n        this.ipc.scrollToBufferRange([min, max]).catch(ignore);\r\n    }\r\n    openSource(initialLine) {\r\n        this.ipc.openSource(initialLine).catch((e) => {\r\n            console.log(e);\r\n            const path = this.getPath();\r\n            if (path) {\r\n                util_1.handlePromise(atom.workspace.open(path, {\r\n                    initialLine,\r\n                }));\r\n            }\r\n            else {\r\n                atom.notifications.addWarning('Failed to sync source: no editor and no path');\r\n            }\r\n        });\r\n    }\r\n    handleEditorEvents() {\r\n        this.disposables.add(new ipc_1.EventHandler(this.windowId, this.editorId, {\r\n            changeText: (text) => {\r\n                this.text = text;\r\n                this.changeHandler();\r\n            },\r\n            syncPreview: (pos) => {\r\n                this.syncPreview(pos);\r\n            },\r\n            changePath: ({ title, path }) => {\r\n                this.title = title;\r\n                this.path = path;\r\n                this.emitter.emit('did-change-title');\r\n            },\r\n            changeGrammar: (grammarName) => {\r\n                this.grammar = atom.grammars.grammarForScopeName(grammarName);\r\n                this.emitter.emit('did-change-title');\r\n            },\r\n            destroy: () => {\r\n                util.destroy(this);\r\n            },\r\n            scrollSync: ([firstLine, lastLine]) => {\r\n                this.handler.scrollSync(firstLine, lastLine);\r\n            },\r\n        }));\r\n    }\r\n}\r\nexports.MarkdownPreviewViewEditorRemote = MarkdownPreviewViewEditorRemote;\r\nfunction ignore() {\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Rvd24tcHJldmlldy12aWV3LWVkaXRvci1yZW1vdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24tcHJldmlldy12aWV3L21hcmtkb3duLXByZXZpZXctdmlldy1lZGl0b3ItcmVtb3RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHFEQUE4QjtBQUM5QixtRUFBNEU7QUFDNUUsa0NBQXVDO0FBQ3ZDLCtCQUtjO0FBQ2QsdUNBQWlDO0FBRWpDLHFDQUE2QyxTQUFRLDJDQUFtQjtJQU90RSxZQUFvQixRQUFnQixFQUFVLFFBQWdCO1FBQzVELEtBQUssRUFBRSxDQUFBO1FBRFcsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUFVLGFBQVEsR0FBUixRQUFRLENBQVE7UUFOdEQsU0FBSSxHQUFHLEVBQUUsQ0FBQTtRQUNULFVBQUssR0FBVyxXQUFXLENBQUE7UUFPakMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLGVBQVMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDNUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzlCLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQ3pCLElBQUksQ0FBQyxHQUFHO2FBQ0wsSUFBSSxFQUFFO2FBQ04sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDVixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUE7WUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFBO1lBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDM0QsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFBO1lBQ3BCLElBQUksQ0FBQyxPQUFPLENB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LENBQUM7U0FDRixDQUFDLENBQ0gsQ0FBQTtJQUNILENBQUM7Q0FDRjtBQXJJRCwwRUFxSUM7QUFFRDtBQUVBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXh0RWRpdG9yLCBHcmFtbWFyIH0gZnJvbSAnYXRvbSdcclxuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnXHJcbmltcG9ydCB7IE1hcmtkb3duUHJldmlld1ZpZXcsIFNlcmlhbGl6ZWRNUFYgfSBmcm9tICcuL21hcmtkb3duLXByZXZpZXctdmlldydcclxuaW1wb3J0IHsgaGFuZGxlUHJvbWlzZSB9IGZyb20gJy4uL3V0aWwnXHJcbmltcG9ydCB7XHJcbiAgRXZlbnRIYW5kbGVyLFxyXG4gIElQQ0NhbGxlcixcclxuICBzaG91bGRTY3JvbGxTeW5jLFxyXG4gIFJlbW90ZUVkaXRvclNlcnZlcixcclxufSBmcm9tICcuL2lwYydcclxuaW1wb3J0IHsgcmVtb3RlIH0gZnJvbSAnZWxlY3Ryb24nXHJcblxyXG5leHBvcnQgY2xhc3MgTWFya2Rvd25QcmV2aWV3Vmlld0VkaXRvclJlbW90ZSBleHRlbmRzIE1hcmtkb3duUHJldmlld1ZpZXcge1xyXG4gIHByaXZhdGUgdGV4dCA9ICcnXHJcbiAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nID0gJzxQZW5kaW5nPidcclxuICBwcml2YXRlIHBhdGg/OiBzdHJpbmdcclxuICBwcml2YXRlIGdyYW1tYXI/OiBHcmFtbWFyXHJcbiAgcHJpdmF0ZSBpcGM6IElQQ0NhbGxlclxyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHdpbmRvd0lkOiBudW1iZXIsIHByaXZhdGUgZWRpdG9ySWQ6IG51bWJlcikge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgdGhpcy5pcGMgPSBuZXcgSVBDQ2FsbGVyKHdpbmRvd0lkLCBlZGl0b3JJZClcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKHRoaXMuaXBjKVxyXG4gICAgdGhpcy5oYW5kbGVFZGl0b3JFdmVudHMoKVxyXG4gICAgdGhpcy5pcGNcclxuICAgICAgLmluaXQoKVxyXG4gICAgICAudGhlbigodikgPT4ge1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHYudGV4dFxyXG4gICAgICAgIHRoaXMucGF0aCA9IHYucGF0aFxyXG4gICAgICAgIHRoaXMuZ3JhbW1hciA9IGF0b20uZ3JhbW1hcnMuZ3JhbW1hckZvclNjb3BlTmFtZSh2LmdyYW1tYXIpXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHYudGl0bGVcclxuICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZGlkLWNoYW5nZS10aXRsZScpXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VIYW5kbGVyKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlOiBFcnJvcikgPT4ge1xyXG4gICAgICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRFcnJvcignRmFpbGVkIHRvIG9wZW4gcHJldmlldycsIHtcclxuICAgICAgICAgIGRpc21pc3NhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgZGV0YWlsOiBlLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICBzdGFjazogZS5zdGFjayxcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBvcGVuKGVkaXRvcjogVGV4dEVkaXRvcikge1xyXG4gICAgY29uc3Qgd2luZG93SWQgPSByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpLmlkXHJcbiAgICBjb25zdCBlZGl0b3JJZCA9IGVkaXRvci5pZFxyXG4gICAgYXRvbS5vcGVuKHtcclxuICAgICAgcGF0aHNUb09wZW46IFtcclxuICAgICAgICBgbWFya2Rvd24tcHJldmlldy1wbHVzOi8vcmVtb3RlLWVkaXRvci8ke3dpbmRvd0lkfS8ke2VkaXRvcklkfWAsXHJcbiAgICAgIF0sXHJcbiAgICAgIG5ld1dpbmRvdzogdHJ1ZSxcclxuICAgIH0pXHJcbiAgICBSZW1vdGVFZGl0b3JTZXJ2ZXIuY3JlYXRlKGVkaXRvcilcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgdGhpcy5pcGMuZGVzdHJveSgpLmNhdGNoKGlnbm9yZSlcclxuICAgIHN1cGVyLmRlc3Ryb3koKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFRpdGxlKCkge1xyXG4gICAgcmV0dXJuIGAke3RoaXMudGl0bGV9IFByZXZpZXdgXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VVJJKCkge1xyXG4gICAgcmV0dXJuIGBtYXJrZG93bi1wcmV2aWV3LXBsdXM6Ly9yZW1vdGUtZWRpdG9yLyR7dGhpcy53aW5kb3dJZH0vJHtcclxuICAgICAgdGhpcy5lZGl0b3JJZFxyXG4gICAgfWBcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRQYXRoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGF0aFxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemVkTVBWIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQgYXMgYW55XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb3Blbk5ld1dpbmRvdygpIHtcclxuICAgIGF0b20ub3Blbih7XHJcbiAgICAgIHBhdGhzVG9PcGVuOiBbdGhpcy5nZXRVUkkoKV0sXHJcbiAgICAgIG5ld1dpbmRvdzogdHJ1ZSxcclxuICAgIH0pXHJcbiAgICB1dGlsLmRlc3Ryb3kodGhpcylcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhc3luYyBnZXRNYXJrZG93blNvdXJjZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnRleHRcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRHcmFtbWFyKCk6IEdyYW1tYXIgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMuZ3JhbW1hclxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGRpZFNjcm9sbFByZXZpZXcobWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XHJcbiAgICBpZiAoIXNob3VsZFNjcm9sbFN5bmMoJ3ByZXZpZXcnKSkgcmV0dXJuXHJcbiAgICB0aGlzLmlwYy5zY3JvbGxUb0J1ZmZlclJhbmdlKFttaW4sIG1heF0pLmNhdGNoKGlnbm9yZSlcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvcGVuU291cmNlKGluaXRpYWxMaW5lPzogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmlwYy5vcGVuU291cmNlKGluaXRpYWxMaW5lKS5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKVxyXG4gICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKClcclxuICAgICAgaWYgKHBhdGgpIHtcclxuICAgICAgICBoYW5kbGVQcm9taXNlKFxyXG4gICAgICAgICAgYXRvbS53b3Jrc3BhY2Uub3BlbihwYXRoLCB7XHJcbiAgICAgICAgICAgIGluaXRpYWxMaW5lLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKFxyXG4gICAgICAgICAgJ0ZhaWxlZCB0byBzeW5jIHNvdXJjZTogbm8gZWRpdG9yIGFuZCBubyBwYXRoJyxcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZUVkaXRvckV2ZW50cygpIHtcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxyXG4gICAgICBuZXcgRXZlbnRIYW5kbGVyKHRoaXMud2luZG93SWQsIHRoaXMuZWRpdG9ySWQsIHtcclxuICAgICAgICBjaGFuZ2VUZXh0OiAodGV4dCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dFxyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VIYW5kbGVyKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN5bmNQcmV2aWV3OiAocG9zKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnN5bmNQcmV2aWV3KHBvcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZVBhdGg6ICh7IHRpdGxlLCBwYXRoIH0pID0+IHtcclxuICAgICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZVxyXG4gICAgICAgICAgdGhpcy5wYXRoID0gcGF0aFxyXG4gICAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtdGl0bGUnKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hhbmdlR3JhbW1hcjogKGdyYW1tYXJOYW1lKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmdyYW1tYXIgPSBhdG9tLmdyYW1tYXJzLmdyYW1tYXJGb3JTY29wZU5hbWUoZ3JhbW1hck5hbWUpIVxyXG4gICAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2RpZC1jaGFuZ2UtdGl0bGUnKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogKCkgPT4ge1xyXG4gICAgICAgICAgdXRpbC5kZXN0cm95KHRoaXMpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY3JvbGxTeW5jOiAoW2ZpcnN0TGluZSwgbGFzdExpbmVdKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZXIuc2Nyb2xsU3luYyhmaXJzdExpbmUsIGxhc3RMaW5lKVxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaWdub3JlKCkge1xyXG4gIC8qIGRvIG5vdGlobmcgKi9cclxufVxyXG4iXX0=","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst atom_1 = require(\"atom\");\r\nconst util = tslib_1.__importStar(require(\"./util\"));\r\nconst markdown_preview_view_1 = require(\"./markdown-preview-view\");\r\nconst util_1 = require(\"../util\");\r\nconst markdown_preview_view_editor_remote_1 = require(\"./markdown-preview-view-editor-remote\");\r\nclass MarkdownPreviewViewEditor extends markdown_preview_view_1.MarkdownPreviewView {\r\n    constructor(editor) {\r\n        super();\r\n        this.editor = editor;\r\n        this.syncPreviewHelper = async () => {\r\n            const pos = this.editor.getCursorBufferPosition().row;\r\n            this.syncPreview(pos);\r\n        };\r\n        this.handleEditorEvents();\r\n    }\r\n    static create(editor) {\r\n        let mppv = MarkdownPreviewViewEditor.editorMap.get(editor);\r\n        if (!mppv) {\r\n            mppv = new MarkdownPreviewViewEditor(editor);\r\n            MarkdownPreviewViewEditor.editorMap.set(editor, mppv);\r\n        }\r\n        return mppv;\r\n    }\r\n    static viewForEditor(editor) {\r\n        return MarkdownPreviewViewEditor.editorMap.get(editor);\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n        MarkdownPreviewViewEditor.editorMap.delete(this.editor);\r\n    }\r\n    serialize() {\r\n        return {\r\n            deserializer: 'markdown-preview-plus/MarkdownPreviewView',\r\n            editorId: this.editor && this.editor.id,\r\n        };\r\n    }\r\n    getTitle() {\r\n        return `${this.editor.getTitle()} Preview`;\r\n    }\r\n    getURI() {\r\n        return `markdown-preview-plus://editor/${this.editor.id}`;\r\n    }\r\n    getPath() {\r\n        return this.editor.getPath();\r\n    }\r\n    async getMarkdownSource() {\r\n        return this.editor.getText();\r\n    }\r\n    getGrammar() {\r\n        return this.editor.getGrammar();\r\n    }\r\n    didScrollPreview(min, max) {\r\n        if (!this.shouldScrollSync('preview'))\r\n            return;\r\n        if (min === 0) {\r\n            this.editor.scrollToBufferPosition([min, 0]);\r\n        }\r\n        else if (max >= this.editor.getLastBufferRow() - 1) {\r\n            this.editor.scrollToBufferPosition([max, 0]);\r\n        }\r\n        else {\r\n            const range = atom_1.Range.fromObject([[min, 0], [max, 0]]);\r\n            this.editor.scrollToScreenRange(this.editor.screenRangeForBufferRange(range), { center: false });\r\n        }\r\n    }\r\n    openNewWindow() {\r\n        markdown_preview_view_editor_remote_1.MarkdownPreviewViewEditorRemote.open(this.editor);\r\n        util.destroy(this);\r\n    }\r\n    openSource(initialLine) {\r\n        if (initialLine !== undefined) {\r\n            this.editor.setCursorBufferPosition([initialLine, 0]);\r\n        }\r\n        const pane = atom.workspace.paneForItem(this.editor);\r\n        if (!pane)\r\n            return;\r\n        pane.activateItem(this.editor);\r\n        pane.activate();\r\n    }\r\n    handleEditorEvents() {\r\n        this.disposables.add(atom.workspace.onDidChangeActiveTextEditor((ed) => {\r\n            if (util_1.atomConfig().previewConfig.activatePreviewWithEditor) {\r\n                if (ed === this.editor) {\r\n                    const pane = atom.workspace.paneForItem(this);\r\n                    if (!pane)\r\n                        return;\r\n                    const edPane = atom.workspace.paneForItem(ed);\r\n                    if (pane === edPane)\r\n                        return;\r\n                    pane.activateItem(this);\r\n                }\r\n            }\r\n        }), this.editor.getBuffer().onDidStopChanging(() => {\r\n            if (util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.changeHandler();\r\n            }\r\n            if (util_1.atomConfig().syncConfig.syncPreviewOnChange) {\r\n                util_1.handlePromise(this.syncPreviewHelper());\r\n            }\r\n        }), this.editor.onDidChangePath(() => {\r\n            this.emitter.emit('did-change-title');\r\n        }), this.editor.onDidDestroy(() => {\r\n            if (util_1.atomConfig().previewConfig.closePreviewWithEditor) {\r\n                util.destroy(this);\r\n            }\r\n        }), this.editor.getBuffer().onDidSave(() => {\r\n            if (!util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.changeHandler();\r\n            }\r\n        }), this.editor.getBuffer().onDidReload(() => {\r\n            if (!util_1.atomConfig().previewConfig.liveUpdate) {\r\n                this.changeHandler();\r\n            }\r\n        }), atom.views.getView(this.editor).onDidChangeScrollTop(() => {\r\n            if (!this.shouldScrollSync('editor'))\r\n                return;\r\n            const [first, last] = this.editor.getVisibleRowRange();\r\n            this.handler.scrollSync(this.editor.bufferRowForScreenRow(first), this.editor.bufferRowForScreenRow(last));\r\n        }), atom.commands.add(atom.views.getView(this.editor), {\r\n            'markdown-preview-plus:sync-preview': this.syncPreviewHelper,\r\n        }));\r\n    }\r\n    shouldScrollSync(whatScrolled) {\r\n        const config = util_1.atomConfig().syncConfig;\r\n        if (config.syncEditorOnPreviewScroll && config.syncPreviewOnEditorScroll) {\r\n            const item = whatScrolled === 'editor' ? this.editor : this;\r\n            const pane = atom.workspace.paneForItem(item);\r\n            return pane && pane.isActive();\r\n        }\r\n        else {\r\n            return ((config.syncEditorOnPreviewScroll && whatScrolled === 'preview') ||\r\n                (config.syncPreviewOnEditorScroll && whatScrolled === 'editor'));\r\n        }\r\n    }\r\n}\r\nMarkdownPreviewViewEditor.editorMap = new WeakMap();\r\nexports.MarkdownPreviewViewEditor = MarkdownPreviewViewEditor;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Rvd24tcHJldmlldy12aWV3LWVkaXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYXJrZG93bi1wcmV2aWV3LXZpZXcvbWFya2Rvd24tcHJldmlldy12aWV3LWVkaXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwrQkFBaUQ7QUFDakQscURBQThCO0FBQzlCLG1FQUE0RTtBQUM1RSxrQ0FBbUQ7QUFDbkQsK0ZBQXVGO0FBRXZGLCtCQUF1QyxTQUFRLDJDQUFtQjtJQU1oRSxZQUE0QixNQUFrQjtRQUM1QyxLQUFLLEVBQUUsQ0FBQTtRQURtQixXQUFNLEdBQU4sTUFBTSxDQUFZO1FBdUl0QyxzQkFBaUIsR0FBRyxLQUFLLElBQUksRUFBRTtZQUNyQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFLENBQUMsR0FBRyxDQUFBO1lBQ3JELElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDdkIsQ0FBQyxDQUFBO1FBeElDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO0lBQzNCLENBQUM7SUFFTSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQWtCO1FBQ3JDLElBQUksSUFBSSxHQUFHLHlCQUF5QixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDMUQsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULElBQUksR0FBRyxJQUFJLHlCQUF5QixDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQzVDLHlCQUF5QixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFBO1NBQ3REO1FBQ0QsT0FBTyxJQUFJLENBQUE7SUFDYixDQUFDO0lBRU0sTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFrQjtRQUM1QyxPQUFPLHlCQUF5QixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDeEQsQ0FB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eUJBQXlCLElBQUksTUFBTSxDQUFDLHlCQUF5QixFQUFFO1lBQ3hFLE1BQU0sSUFBSSxHQUFHLFlBQVksS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtZQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUM3QyxPQUFPLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUE7U0FDL0I7YUFBTTtZQUNMLE9BQU8sQ0FDTCxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsSUFBSSxZQUFZLEtBQUssU0FBUyxDQUFDO2dCQUNoRSxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsSUFBSSxZQUFZLEtBQUssUUFBUSxDQUFDLENBQ2hFLENBQUE7U0FDRjtJQUNILENBQUM7O0FBN0pjLG1DQUFTLEdBQUcsSUFBSSxPQUFPLEVBR25DLENBQUE7QUFKTCw4REErSkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXh0RWRpdG9yLCBHcmFtbWFyLCBSYW5nZSB9IGZyb20gJ2F0b20nXHJcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJ1xyXG5pbXBvcnQgeyBNYXJrZG93blByZXZpZXdWaWV3LCBTZXJpYWxpemVkTVBWIH0gZnJvbSAnLi9tYXJrZG93bi1wcmV2aWV3LXZpZXcnXHJcbmltcG9ydCB7IGhhbmRsZVByb21pc2UsIGF0b21Db25maWcgfSBmcm9tICcuLi91dGlsJ1xyXG5pbXBvcnQgeyBNYXJrZG93blByZXZpZXdWaWV3RWRpdG9yUmVtb3RlIH0gZnJvbSAnLi9tYXJrZG93bi1wcmV2aWV3LXZpZXctZWRpdG9yLXJlbW90ZSdcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXJrZG93blByZXZpZXdWaWV3RWRpdG9yIGV4dGVuZHMgTWFya2Rvd25QcmV2aWV3VmlldyB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgZWRpdG9yTWFwID0gbmV3IFdlYWtNYXA8XHJcbiAgICBUZXh0RWRpdG9yLFxyXG4gICAgTWFya2Rvd25QcmV2aWV3Vmlld0VkaXRvclxyXG4gID4oKVxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKHByaXZhdGUgZWRpdG9yOiBUZXh0RWRpdG9yKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICB0aGlzLmhhbmRsZUVkaXRvckV2ZW50cygpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZShlZGl0b3I6IFRleHRFZGl0b3IpIHtcclxuICAgIGxldCBtcHB2ID0gTWFya2Rvd25QcmV2aWV3Vmlld0VkaXRvci5lZGl0b3JNYXAuZ2V0KGVkaXRvcilcclxuICAgIGlmICghbXBwdikge1xyXG4gICAgICBtcHB2ID0gbmV3IE1hcmtkb3duUHJldmlld1ZpZXdFZGl0b3IoZWRpdG9yKVxyXG4gICAgICBNYXJrZG93blByZXZpZXdWaWV3RWRpdG9yLmVkaXRvck1hcC5zZXQoZWRpdG9yLCBtcHB2KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1wcHZcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgdmlld0ZvckVkaXRvcihlZGl0b3I6IFRleHRFZGl0b3IpIHtcclxuICAgIHJldHVybiBNYXJrZG93blByZXZpZXdWaWV3RWRpdG9yLmVkaXRvck1hcC5nZXQoZWRpdG9yKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICBzdXBlci5kZXN0cm95KClcclxuICAgIE1hcmtkb3duUHJldmlld1ZpZXdFZGl0b3IuZWRpdG9yTWFwLmRlbGV0ZSh0aGlzLmVkaXRvcilcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXplZE1QViB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkZXNlcmlhbGl6ZXI6ICdtYXJrZG93bi1wcmV2aWV3LXBsdXMvTWFya2Rvd25QcmV2aWV3VmlldycsXHJcbiAgICAgIGVkaXRvcklkOiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5pZCxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRUaXRsZSgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmVkaXRvci5nZXRUaXRsZSgpfSBQcmV2aWV3YFxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFVSSSgpIHtcclxuICAgIHJldHVybiBgbWFya2Rvd24tcHJldmlldy1wbHVzOi8vZWRpdG9yLyR7dGhpcy5lZGl0b3IuaWR9YFxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFBhdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0UGF0aCgpXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgYXN5bmMgZ2V0TWFya2Rvd25Tb3VyY2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0VGV4dCgpXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0R3JhbW1hcigpOiBHcmFtbWFyIHtcclxuICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRHcmFtbWFyKClcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBkaWRTY3JvbGxQcmV2aWV3KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xyXG4gICAgaWYgKCF0aGlzLnNob3VsZFNjcm9sbFN5bmMoJ3ByZXZpZXcnKSkgcmV0dXJuXHJcbiAgICBpZiAobWluID09PSAwKSB7XHJcbiAgICAgIHRoaXMuZWRpdG9yLnNjcm9sbFRvQnVmZmVyUG9zaXRpb24oW21pbiwgMF0pXHJcbiAgICB9IGVsc2UgaWYgKG1heCA+PSB0aGlzLmVkaXRvci5nZXRMYXN0QnVmZmVyUm93KCkgLSAxKSB7XHJcbiAgICAgIHRoaXMuZWRpdG9yLnNjcm9sbFRvQnVmZmVyUG9zaXRpb24oW21heCwgMF0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBjb25zdCBtaWQgPSBNYXRoLmZsb29yKDAuNSAqIChtaW4gKyBtYXgpKVxyXG4gICAgICAvLyB0aGlzLmVkaXRvci5zY3JvbGxUb0J1ZmZlclBvc2l0aW9uKFttaWQsIDBdLCB7IGNlbnRlcjogdHJ1ZSB9KVxyXG4gICAgICBjb25zdCByYW5nZSA9IFJhbmdlLmZyb21PYmplY3QoW1ttaW4sIDBdLCBbbWF4LCAwXV0pXHJcbiAgICAgIHRoaXMuZWRpdG9yLnNjcm9sbFRvU2NyZWVuUmFuZ2UoXHJcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2NyZWVuUmFuZ2VGb3JCdWZmZXJSYW5nZShyYW5nZSksXHJcbiAgICAgICAgeyBjZW50ZXI6IGZhbHNlIH0sXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvcGVuTmV3V2luZG93KCkge1xyXG4gICAgTWFya2Rvd25QcmV2aWV3Vmlld0VkaXRvclJlbW90ZS5vcGVuKHRoaXMuZWRpdG9yKVxyXG4gICAgdXRpbC5kZXN0cm95KHRoaXMpXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb3BlblNvdXJjZShpbml0aWFsTGluZT86IG51bWJlcikge1xyXG4gICAgaWYgKGluaXRpYWxMaW5lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5lZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oW2luaXRpYWxMaW5lLCAwXSlcclxuICAgIH1cclxuICAgIGNvbnN0IHBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLmVkaXRvcilcclxuICAgIGlmICghcGFuZSkgcmV0dXJuXHJcbiAgICBwYW5lLmFjdGl2YXRlSXRlbSh0aGlzLmVkaXRvcilcclxuICAgIHBhbmUuYWN0aXZhdGUoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVFZGl0b3JFdmVudHMoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcclxuICAgICAgYXRvbS53b3Jrc3BhY2Uub25EaWRDaGFuZ2VBY3RpdmVUZXh0RWRpdG9yKChlZCkgPT4ge1xyXG4gICAgICAgIGlmIChhdG9tQ29uZmlnKCkucHJldmlld0NvbmZpZy5hY3RpdmF0ZVByZXZpZXdXaXRoRWRpdG9yKSB7XHJcbiAgICAgICAgICBpZiAoZWQgPT09IHRoaXMuZWRpdG9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzKVxyXG4gICAgICAgICAgICBpZiAoIXBhbmUpIHJldHVyblxyXG4gICAgICAgICAgICBjb25zdCBlZFBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbShlZClcclxuICAgICAgICAgICAgaWYgKHBhbmUgPT09IGVkUGFuZSkgcmV0dXJuXHJcbiAgICAgICAgICAgIHBhbmUuYWN0aXZhdGVJdGVtKHRoaXMpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICAgdGhpcy5lZGl0b3IuZ2V0QnVmZmVyKCkub25EaWRTdG9wQ2hhbmdpbmcoKCkgPT4ge1xyXG4gICAgICAgIGlmIChhdG9tQ29uZmlnKCkucHJldmlld0NvbmZpZy5saXZlVXBkYXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZUhhbmRsZXIoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXRvbUNvbmZpZygpLnN5bmNDb25maWcuc3luY1ByZXZpZXdPbkNoYW5nZSkge1xyXG4gICAgICAgICAgaGFuZGxlUHJvbWlzZSh0aGlzLnN5bmNQcmV2aWV3SGVscGVyKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KSxcclxuICAgICAgdGhpcy5lZGl0b3Iub25EaWRDaGFuZ2VQYXRoKCgpID0+IHtcclxuICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZGlkLWNoYW5nZS10aXRsZScpXHJcbiAgICAgIH0pLFxyXG4gICAgICB0aGlzLmVkaXRvci5vbkRpZERlc3Ryb3koKCkgPT4ge1xyXG4gICAgICAgIGlmIChhdG9tQ29uZmlnKCkucHJldmlld0NvbmZpZy5jbG9zZVByZXZpZXdXaXRoRWRpdG9yKSB7XHJcbiAgICAgICAgICB1dGlsLmRlc3Ryb3kodGhpcylcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICB0aGlzLmVkaXRvci5nZXRCdWZmZXIoKS5vbkRpZFNhdmUoKCkgPT4ge1xyXG4gICAgICAgIGlmICghYXRvbUNvbmZpZygpLnByZXZpZXdDb25maWcubGl2ZVVwZGF0ZSkge1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VIYW5kbGVyKClcclxuICAgICAgICB9XHJcbiAgICAgIH0pLFxyXG4gICAgICB0aGlzLmVkaXRvci5nZXRCdWZmZXIoKS5vbkRpZFJlbG9hZCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFhdG9tQ29uZmlnKCkucHJldmlld0NvbmZpZy5saXZlVXBkYXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZUhhbmRsZXIoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcbiAgICAgIGF0b20udmlld3MuZ2V0Vmlldyh0aGlzLmVkaXRvcikub25EaWRDaGFuZ2VTY3JvbGxUb3AoKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRTY3JvbGxTeW5jKCdlZGl0b3InKSkgcmV0dXJuXHJcbiAgICAgICAgY29uc3QgW2ZpcnN0LCBsYXN0XSA9IHRoaXMuZWRpdG9yLmdldFZpc2libGVSb3dSYW5nZSgpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVyLnNjcm9sbFN5bmMoXHJcbiAgICAgICAgICB0aGlzLmVkaXRvci5idWZmZXJSb3dGb3JTY3JlZW5Sb3coZmlyc3QpLFxyXG4gICAgICAgICAgdGhpcy5lZGl0b3IuYnVmZmVyUm93Rm9yU2NyZWVuUm93KGxhc3QpLFxyXG4gICAgICAgIClcclxuICAgICAgfSksXHJcbiAgICAgIGF0b20uY29tbWFuZHMuYWRkKGF0b20udmlld3MuZ2V0Vmlldyh0aGlzLmVkaXRvciksIHtcclxuICAgICAgICAnbWFya2Rvd24tcHJldmlldy1wbHVzOnN5bmMtcHJldmlldyc6IHRoaXMuc3luY1ByZXZpZXdIZWxwZXIsXHJcbiAgICAgIH0pLFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzeW5jUHJldmlld0hlbHBlciA9IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBvcyA9IHRoaXMuZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCkucm93XHJcbiAgICB0aGlzLnN5bmNQcmV2aWV3KHBvcylcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2hvdWxkU2Nyb2xsU3luYyh3aGF0U2Nyb2xsZWQ6ICdlZGl0b3InIHwgJ3ByZXZpZXcnKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBhdG9tQ29uZmlnKCkuc3luY0NvbmZpZ1xyXG4gICAgaWYgKGNvbmZpZy5zeW5jRWRpdG9yT25QcmV2aWV3U2Nyb2xsICYmIGNvbmZpZy5zeW5jUHJldmlld09uRWRpdG9yU2Nyb2xsKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSB3aGF0U2Nyb2xsZWQgPT09ICdlZGl0b3InID8gdGhpcy5lZGl0b3IgOiB0aGlzXHJcbiAgICAgIGNvbnN0IHBhbmUgPSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbShpdGVtKVxyXG4gICAgICByZXR1cm4gcGFuZSAmJiBwYW5lLmlzQWN0aXZlKClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgKGNvbmZpZy5zeW5jRWRpdG9yT25QcmV2aWV3U2Nyb2xsICYmIHdoYXRTY3JvbGxlZCA9PT0gJ3ByZXZpZXcnKSB8fFxyXG4gICAgICAgIChjb25maWcuc3luY1ByZXZpZXdPbkVkaXRvclNjcm9sbCAmJiB3aGF0U2Nyb2xsZWQgPT09ICdlZGl0b3InKVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst atom_1 = require(\"atom\");\r\nconst markdown_preview_view_1 = require(\"./markdown-preview-view\");\r\nclass MarkdownPreviewViewFile extends markdown_preview_view_1.MarkdownPreviewView {\r\n    constructor(filePath) {\r\n        super();\r\n        this.file = new atom_1.File(filePath);\r\n        this.disposables.add(this.file.onDidChange(this.changeHandler));\r\n    }\r\n    serialize() {\r\n        return {\r\n            deserializer: 'markdown-preview-plus/MarkdownPreviewView',\r\n            filePath: this.file.getPath(),\r\n        };\r\n    }\r\n    getTitle() {\r\n        const p = this.getPath();\r\n        return `${p ? path.basename(p) : 'Markdown File'} Preview`;\r\n    }\r\n    getURI() {\r\n        return `markdown-preview-plus://file/${this.getPath()}`;\r\n    }\r\n    getPath() {\r\n        return this.file.getPath();\r\n    }\r\n    getGrammar() {\r\n        return;\r\n    }\r\n    async getMarkdownSource() {\r\n        const res = await this.file.read();\r\n        if (res !== null)\r\n            return res;\r\n        else\r\n            return '';\r\n    }\r\n}\r\nexports.MarkdownPreviewViewFile = MarkdownPreviewViewFile;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Rvd24tcHJldmlldy12aWV3LWZpbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24tcHJldmlldy12aWV3L21hcmtkb3duLXByZXZpZXctdmlldy1maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTZCO0FBQzdCLCtCQUEyQjtBQUMzQixtRUFBNEU7QUFFNUUsNkJBQXFDLFNBQVEsMkNBQW1CO0lBRzlELFlBQVksUUFBZ0I7UUFDMUIsS0FBSyxFQUFFLENBQUE7UUFDUCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksV0FBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQzlCLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFBO0lBQ2pFLENBQUM7SUFFTSxTQUFTO1FBQ2QsT0FBTztZQUNMLFlBQVksRUFBRSwyQ0FBMkM7WUFDekQsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1NBQzlCLENBQUE7SUFDSCxDQUFDO0lBRU0sUUFBUTtRQUNiLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUN4QixPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLFVBQVUsQ0FBQTtJQUM1RCxDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU8sZ0NBQWdDLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFBO0lBQ3pELENBQUM7SUFFTSxPQUFPO1FBQ1osT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQzVCLENBQUM7SUFFUyxVQUFVO1FBQ2xCLE9BQU07SUFDUixDQUFDO0lBRVMsS0FBSyxDQUFDLGlCQUFpQjtRQUMvQixNQUFNLEdBQUcsR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDbEMsSUFBSSxHQUFHLEtBQUssSUFBSTtZQUFFLE9BQU8sR0FBRyxDQUFBOztZQUN2QixPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0NBQ0Y7QUF0Q0QsMERBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gJ2F0b20nXHJcbmltcG9ydCB7IE1hcmtkb3duUHJldmlld1ZpZXcsIFNlcmlhbGl6ZWRNUFYgfSBmcm9tICcuL21hcmtkb3duLXByZXZpZXctdmlldydcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXJrZG93blByZXZpZXdWaWV3RmlsZSBleHRlbmRzIE1hcmtkb3duUHJldmlld1ZpZXcge1xyXG4gIHByaXZhdGUgZmlsZSE6IEZpbGVcclxuXHJcbiAgY29uc3RydWN0b3IoZmlsZVBhdGg6IHN0cmluZykge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgdGhpcy5maWxlID0gbmV3IEZpbGUoZmlsZVBhdGgpXHJcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZCh0aGlzLmZpbGUub25EaWRDaGFuZ2UodGhpcy5jaGFuZ2VIYW5kbGVyKSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXplZE1QViB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkZXNlcmlhbGl6ZXI6ICdtYXJrZG93bi1wcmV2aWV3LXBsdXMvTWFya2Rvd25QcmV2aWV3VmlldycsXHJcbiAgICAgIGZpbGVQYXRoOiB0aGlzLmZpbGUuZ2V0UGF0aCgpLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFRpdGxlKCkge1xyXG4gICAgY29uc3QgcCA9IHRoaXMuZ2V0UGF0aCgpXHJcbiAgICByZXR1cm4gYCR7cCA/IHBhdGguYmFzZW5hbWUocCkgOiAnTWFya2Rvd24gRmlsZSd9IFByZXZpZXdgXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VVJJKCkge1xyXG4gICAgcmV0dXJuIGBtYXJrZG93bi1wcmV2aWV3LXBsdXM6Ly9maWxlLyR7dGhpcy5nZXRQYXRoKCl9YFxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFBhdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maWxlLmdldFBhdGgoKVxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldEdyYW1tYXIoKTogdW5kZWZpbmVkIHtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGFzeW5jIGdldE1hcmtkb3duU291cmNlKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5maWxlLnJlYWQoKVxyXG4gICAgaWYgKHJlcyAhPT0gbnVsbCkgcmV0dXJuIHJlc1xyXG4gICAgZWxzZSByZXR1cm4gJydcclxuICB9XHJcbn1cclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar markdown_preview_view_editor_1 = require(\"./markdown-preview-view-editor\");\r\nexports.MarkdownPreviewViewEditor = markdown_preview_view_editor_1.MarkdownPreviewViewEditor;\r\nvar markdown_preview_view_file_1 = require(\"./markdown-preview-view-file\");\r\nexports.MarkdownPreviewViewFile = markdown_preview_view_file_1.MarkdownPreviewViewFile;\r\nvar markdown_preview_view_1 = require(\"./markdown-preview-view\");\r\nexports.MarkdownPreviewView = markdown_preview_view_1.MarkdownPreviewView;\r\nexports.SerializedMPV = markdown_preview_view_1.SerializedMPV;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWFya2Rvd24tcHJldmlldy12aWV3L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0VBQTBFO0FBQWpFLG1FQUFBLHlCQUF5QixDQUFBO0FBQ2xDLDJFQUFzRTtBQUE3RCwrREFBQSx1QkFBdUIsQ0FBQTtBQUNoQyxpRUFBNEU7QUFBbkUsc0RBQUEsbUJBQW1CLENBQUE7QUFBRSxnREFBQSxhQUFhLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBNYXJrZG93blByZXZpZXdWaWV3RWRpdG9yIH0gZnJvbSAnLi9tYXJrZG93bi1wcmV2aWV3LXZpZXctZWRpdG9yJ1xyXG5leHBvcnQgeyBNYXJrZG93blByZXZpZXdWaWV3RmlsZSB9IGZyb20gJy4vbWFya2Rvd24tcHJldmlldy12aWV3LWZpbGUnXHJcbmV4cG9ydCB7IE1hcmtkb3duUHJldmlld1ZpZXcsIFNlcmlhbGl6ZWRNUFYgfSBmcm9tICcuL21hcmtkb3duLXByZXZpZXctdmlldydcclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _ = require(\"lodash\");\r\nconst markdown_preview_view_1 = require(\"./markdown-preview-view\");\r\nconst atom_1 = require(\"atom\");\r\nconst util_1 = require(\"./util\");\r\nlet imageRegister = {};\r\nconst refreshImages = _.debounce(async function (src) {\r\n    for (const item of atom.workspace.getPaneItems()) {\r\n        if (item instanceof markdown_preview_view_1.MarkdownPreviewView) {\r\n            await item.refreshImages(src);\r\n        }\r\n    }\r\n}, 250);\r\nfunction srcClosure(src, event) {\r\n    return function () {\r\n        const i = imageRegister[src];\r\n        if (!i)\r\n            return;\r\n        if (event === 'change' && util_1.isFileSync(src)) {\r\n            i.version = Date.now();\r\n        }\r\n        else {\r\n            i.watcher.dispose();\r\n            delete imageRegister[src];\r\n        }\r\n        util_1.handlePromise(refreshImages(src));\r\n    };\r\n}\r\nfunction removeFile(file) {\r\n    imageRegister = _.mapValues(imageRegister, function (image) {\r\n        if (!image)\r\n            return image;\r\n        image.files = _.without(image.files, file);\r\n        image.files = _.filter(image.files, util_1.isFileSync);\r\n        if (_.isEmpty(image.files)) {\r\n            image.watched = false;\r\n            image.watcher.dispose();\r\n        }\r\n        return image;\r\n    });\r\n}\r\nexports.removeFile = removeFile;\r\nasync function getVersion(image, file) {\r\n    let version;\r\n    const i = imageRegister[image];\r\n    if (!i) {\r\n        if (util_1.isFileSync(image)) {\r\n            version = Date.now();\r\n            const watcher = new atom_1.CompositeDisposable();\r\n            const af = new atom_1.File(image);\r\n            watcher.add(af.onDidChange(srcClosure(image, 'change')), af.onDidDelete(srcClosure(image, 'delete')), af.onDidRename(srcClosure(image, 'rename')));\r\n            imageRegister[image] = {\r\n                path: image,\r\n                watched: true,\r\n                files: file ? [file] : [],\r\n                version,\r\n                watcher,\r\n            };\r\n            return version;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    const files = i.files;\r\n    if (file && !_.includes(files, file)) {\r\n        i.files.push(file);\r\n    }\r\n    version = i.version;\r\n    if (!version && util_1.isFileSync(image)) {\r\n        version = Date.now();\r\n        i.version = version;\r\n    }\r\n    return version;\r\n}\r\nexports.getVersion = getVersion;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2Utd2F0Y2gtaGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2ltYWdlLXdhdGNoLWhlbHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRCQUE0QjtBQUM1QixtRUFBNkQ7QUFDN0QsK0JBQWdEO0FBQ2hELGlDQUFrRDtBQVVsRCxJQUFJLGFBQWEsR0FFYixFQUFFLENBQUE7QUFFTixNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssV0FBVSxHQUFXO0lBQ3pELEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRTtRQUNoRCxJQUFJLElBQUksWUFBWSwyQ0FBbUIsRUFBRTtZQUV2QyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDOUI7S0FDRjtBQUNILENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUVQLG9CQUFvQixHQUFXLEVBQUUsS0FBcUM7SUFDcEUsT0FBTztRQUNMLE1BQU0sQ0FBQyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsQ0FBQztZQUFFLE9BQU07UUFDZCxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksaUJBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUN6QyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtTQUN2QjthQUFNO1lBQ0wsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtZQUNuQixPQUFPLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUMxQjtRQUNELG9CQUFhLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7SUFDbkMsQ0FBQyxDQUFBO0FBQ0gsQ0FBQztBQUVELG9CQUEyQixJQUFZO0lBQ3JDLGFBQWEsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxVQUFTLEtBQUs7UUFDdkQsSUFBSSxDQUFDLEtBQUs7WUFBRSxPQUFPLEtBQUssQ0FBQTtRQUN4QixLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUMxQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxpQkFBVSxDQUFDLENBQUE7UUFDL0MsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUMxQixLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNyQixLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO1NBQ3hCO1FBQ0QsT0FBTyxLQUFLLENBQUE7SUFDZCxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFYRCxnQ0FXQztBQUVNLEtBQUsscUJBQXFCLEtBQWEsRUFBRSxJQUFhO0lBQzNELElBQUksT0FBTyxDQUFBO0lBQ1gsTUFBTSxDQUFDLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzlCLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDTixJQUFJLGlCQUFVLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDckIsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtZQUNwQixNQUFNLE9BQU8sR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7WUFDekMsTUFBTSxFQUFFLEdBQUcsSUFBSSxXQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FDVCxFQUFFLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFDM0MsRUFBRSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQzNDLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUM1QyxDQUFBO1lBQ0QsYUFBYSxDQUFDLEtBQUssQ0FBQyxHQUFHO2dCQUNyQixJQUFJLEVBQUUsS0FBSztnQkFDWCxPQUFPLEVBQUUsSUFBSTtnQkFDYixLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN6QixPQUFPO2dCQUNQLE9BQU87YUFDUixDQUFBO1lBQ0QsT0FBTyxPQUFPLENBQUE7U0FDZjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUE7U0FDYjtLQUNGO0lBRUQsTUFBTSxLQUFLLEdBQWEsQ0FBQyxDQUFDLEtBQUssQ0FBQTtJQUMvQixJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFO1FBQ3BDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0tBQ25CO0lBRUQsT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUE7SUFDbkIsSUFBSSxDQUFDLE9BQU8sSUFBSSxpQkFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ2pDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDcEIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7S0FDcEI7SUFDRCxPQUFPLE9BQU8sQ0FBQTtBQUNoQixDQUFDO0FBckNELGdDQXFDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfID0gcmVxdWlyZSgnbG9kYXNoJylcclxuaW1wb3J0IHsgTWFya2Rvd25QcmV2aWV3VmlldyB9IGZyb20gJy4vbWFya2Rvd24tcHJldmlldy12aWV3J1xyXG5pbXBvcnQgeyBDb21wb3NpdGVEaXNwb3NhYmxlLCBGaWxlIH0gZnJvbSAnYXRvbSdcclxuaW1wb3J0IHsgaGFuZGxlUHJvbWlzZSwgaXNGaWxlU3luYyB9IGZyb20gJy4vdXRpbCdcclxuXHJcbmludGVyZmFjZSBJbWFnZVJlZ2lzdGVyUmVjIHtcclxuICB2ZXJzaW9uOiBudW1iZXJcclxuICB3YXRjaGVyOiBDb21wb3NpdGVEaXNwb3NhYmxlXHJcbiAgZmlsZXM6IHN0cmluZ1tdXHJcbiAgd2F0Y2hlZDogYm9vbGVhblxyXG4gIHBhdGg6IHN0cmluZ1xyXG59XHJcblxyXG5sZXQgaW1hZ2VSZWdpc3Rlcjoge1xyXG4gIFtrZXk6IHN0cmluZ106IEltYWdlUmVnaXN0ZXJSZWMgfCB1bmRlZmluZWRcclxufSA9IHt9XHJcblxyXG5jb25zdCByZWZyZXNoSW1hZ2VzID0gXy5kZWJvdW5jZShhc3luYyBmdW5jdGlvbihzcmM6IHN0cmluZykge1xyXG4gIGZvciAoY29uc3QgaXRlbSBvZiBhdG9tLndvcmtzcGFjZS5nZXRQYW5lSXRlbXMoKSkge1xyXG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBNYXJrZG93blByZXZpZXdWaWV3KSB7XHJcbiAgICAgIC8vIFRPRE86IGNoZWNrIGFnYWluc3QgaW1hZ2VSZWdpc3RlcltzcmNdLnZlcnNpb24uZmlsZXNcclxuICAgICAgYXdhaXQgaXRlbS5yZWZyZXNoSW1hZ2VzKHNyYylcclxuICAgIH1cclxuICB9XHJcbn0sIDI1MClcclxuXHJcbmZ1bmN0aW9uIHNyY0Nsb3N1cmUoc3JjOiBzdHJpbmcsIGV2ZW50OiAnY2hhbmdlJyB8ICdkZWxldGUnIHwgJ3JlbmFtZScpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBpID0gaW1hZ2VSZWdpc3RlcltzcmNdXHJcbiAgICBpZiAoIWkpIHJldHVyblxyXG4gICAgaWYgKGV2ZW50ID09PSAnY2hhbmdlJyAmJiBpc0ZpbGVTeW5jKHNyYykpIHtcclxuICAgICAgaS52ZXJzaW9uID0gRGF0ZS5ub3coKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaS53YXRjaGVyLmRpc3Bvc2UoKVxyXG4gICAgICBkZWxldGUgaW1hZ2VSZWdpc3RlcltzcmNdXHJcbiAgICB9XHJcbiAgICBoYW5kbGVQcm9taXNlKHJlZnJlc2hJbWFnZXMoc3JjKSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlKGZpbGU6IHN0cmluZykge1xyXG4gIGltYWdlUmVnaXN0ZXIgPSBfLm1hcFZhbHVlcyhpbWFnZVJlZ2lzdGVyLCBmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgaWYgKCFpbWFnZSkgcmV0dXJuIGltYWdlXHJcbiAgICBpbWFnZS5maWxlcyA9IF8ud2l0aG91dChpbWFnZS5maWxlcywgZmlsZSlcclxuICAgIGltYWdlLmZpbGVzID0gXy5maWx0ZXIoaW1hZ2UuZmlsZXMsIGlzRmlsZVN5bmMpXHJcbiAgICBpZiAoXy5pc0VtcHR5KGltYWdlLmZpbGVzKSkge1xyXG4gICAgICBpbWFnZS53YXRjaGVkID0gZmFsc2VcclxuICAgICAgaW1hZ2Uud2F0Y2hlci5kaXNwb3NlKClcclxuICAgIH1cclxuICAgIHJldHVybiBpbWFnZVxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWZXJzaW9uKGltYWdlOiBzdHJpbmcsIGZpbGU/OiBzdHJpbmcpIHtcclxuICBsZXQgdmVyc2lvblxyXG4gIGNvbnN0IGkgPSBpbWFnZVJlZ2lzdGVyW2ltYWdlXVxyXG4gIGlmICghaSkge1xyXG4gICAgaWYgKGlzRmlsZVN5bmMoaW1hZ2UpKSB7XHJcbiAgICAgIHZlcnNpb24gPSBEYXRlLm5vdygpXHJcbiAgICAgIGNvbnN0IHdhdGNoZXIgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXHJcbiAgICAgIGNvbnN0IGFmID0gbmV3IEZpbGUoaW1hZ2UpXHJcbiAgICAgIHdhdGNoZXIuYWRkKFxyXG4gICAgICAgIGFmLm9uRGlkQ2hhbmdlKHNyY0Nsb3N1cmUoaW1hZ2UsICdjaGFuZ2UnKSksXHJcbiAgICAgICAgYWYub25EaWREZWxldGUoc3JjQ2xvc3VyZShpbWFnZSwgJ2RlbGV0ZScpKSxcclxuICAgICAgICBhZi5vbkRpZFJlbmFtZShzcmNDbG9zdXJlKGltYWdlLCAncmVuYW1lJykpLFxyXG4gICAgICApXHJcbiAgICAgIGltYWdlUmVnaXN0ZXJbaW1hZ2VdID0ge1xyXG4gICAgICAgIHBhdGg6IGltYWdlLFxyXG4gICAgICAgIHdhdGNoZWQ6IHRydWUsXHJcbiAgICAgICAgZmlsZXM6IGZpbGUgPyBbZmlsZV0gOiBbXSxcclxuICAgICAgICB2ZXJzaW9uLFxyXG4gICAgICAgIHdhdGNoZXIsXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZlcnNpb25cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZmlsZXM6IHN0cmluZ1tdID0gaS5maWxlc1xyXG4gIGlmIChmaWxlICYmICFfLmluY2x1ZGVzKGZpbGVzLCBmaWxlKSkge1xyXG4gICAgaS5maWxlcy5wdXNoKGZpbGUpXHJcbiAgfVxyXG5cclxuICB2ZXJzaW9uID0gaS52ZXJzaW9uXHJcbiAgaWYgKCF2ZXJzaW9uICYmIGlzRmlsZVN5bmMoaW1hZ2UpKSB7XHJcbiAgICB2ZXJzaW9uID0gRGF0ZS5ub3coKVxyXG4gICAgaS52ZXJzaW9uID0gdmVyc2lvblxyXG4gIH1cclxuICByZXR1cm4gdmVyc2lvblxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction getMedia(document) {\r\n    return document.querySelectorAll('img[src],audio[src],video[src]');\r\n}\r\nexports.getMedia = getMedia;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC1jb21tb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbC1jb21tb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrQkFBeUIsUUFBc0I7SUFDN0MsT0FBTyxRQUFRLENBQUMsZ0JBQWdCLENBQzlCLGdDQUFnQyxDQUNxQyxDQUFBO0FBQ3pFLENBQUM7QUFKRCw0QkFJQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZXRNZWRpYShkb2N1bWVudDogSFRNTERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAnaW1nW3NyY10sYXVkaW9bc3JjXSx2aWRlb1tzcmNdJyxcclxuICApIGFzIE5vZGVMaXN0T2Y8SFRNTEltYWdlRWxlbWVudCB8IEhUTUxBdWRpb0VsZW1lbnQgfCBIVE1MVmlkZW9FbGVtZW50PlxyXG59XHJcbiJdfQ==","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst highlight = require(\"atom-highlight\");\r\nconst pandocHelper = require(\"./pandoc-helper\");\r\nconst markdownIt = require(\"./markdown-it-helper\");\r\nconst extension_helper_1 = require(\"./extension-helper\");\r\nconst imageWatcher = require(\"./image-watch-helper\");\r\nconst util_1 = require(\"./util\");\r\nconst util_common_1 = require(\"./util-common\");\r\nconst { resourcePath } = atom.getLoadSettings();\r\nconst packagePath = path.dirname(__dirname);\r\nasync function render(text, filePath, grammar, renderLaTeX, mode, savePath) {\r\n    text = text.replace(/^\\s*<!doctype(\\s+.*)?>\\s*/i, '');\r\n    let html;\r\n    let error;\r\n    if (util_1.atomConfig().renderer === 'pandoc') {\r\n        try {\r\n            html = await pandocHelper.renderPandoc(text, filePath, renderLaTeX);\r\n        }\r\n        catch (err) {\r\n            const e = err;\r\n            if (e.html === undefined)\r\n                throw e;\r\n            error = e.message;\r\n            html = e.html;\r\n        }\r\n    }\r\n    else {\r\n        html = markdownIt.render(text, renderLaTeX);\r\n    }\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(html, 'text/html');\r\n    sanitize(doc);\r\n    if (mode === 'normal') {\r\n        await resolveImagePaths(doc, filePath, {\r\n            version: true,\r\n            relativize: false,\r\n        });\r\n    }\r\n    else {\r\n        let behaviour;\r\n        switch (mode) {\r\n            case 'save':\r\n                behaviour = util_1.atomConfig().saveConfig.mediaOnSaveAsHTMLBehaviour;\r\n                break;\r\n            case 'copy':\r\n                behaviour = util_1.atomConfig().saveConfig.mediaOnCopyAsHTMLBehaviour;\r\n                break;\r\n            default:\r\n                throw invalidMode(mode);\r\n        }\r\n        await handleImages({ doc, filePath, savePath, behaviour });\r\n    }\r\n    let defaultCodeLanguage = 'text';\r\n    if ((grammar && grammar.scopeName) === 'source.litcoffee') {\r\n        defaultCodeLanguage = 'coffee';\r\n    }\r\n    if (!(util_1.atomConfig().renderer === 'pandoc' &&\r\n        util_1.atomConfig().pandocConfig.useNativePandocCodeStyles)) {\r\n        highlightCodeBlocks(doc, defaultCodeLanguage, mode !== 'normal');\r\n    }\r\n    if (error) {\r\n        const errd = doc.createElement('div');\r\n        const msgel = doc.createElement('code');\r\n        msgel.innerText = error;\r\n        errd.innerHTML = `<h1>Pandoc Error:</h1>${msgel.outerHTML}<hr>`;\r\n        doc.body.insertBefore(errd, doc.body.firstElementChild);\r\n    }\r\n    return doc;\r\n}\r\nexports.render = render;\r\nfunction invalidMode(mode) {\r\n    return new Error(`Invalid render mode ${mode}`);\r\n}\r\nfunction sanitize(doc) {\r\n    doc.querySelectorAll(\"script:not([type^='math/tex'])\").forEach((elem) => {\r\n        elem.remove();\r\n    });\r\n    const attributesToRemove = [\r\n        'onabort',\r\n        'onblur',\r\n        'onchange',\r\n        'onclick',\r\n        'ondbclick',\r\n        'onerror',\r\n        'onfocus',\r\n        'onkeydown',\r\n        'onkeypress',\r\n        'onkeyup',\r\n        'onload',\r\n        'onmousedown',\r\n        'onmousemove',\r\n        'onmouseover',\r\n        'onmouseout',\r\n        'onmouseup',\r\n        'onreset',\r\n        'onresize',\r\n        'onscroll',\r\n        'onselect',\r\n        'onsubmit',\r\n        'onunload',\r\n    ];\r\n    doc.querySelectorAll('*').forEach((elem) => attributesToRemove.map((attribute) => {\r\n        elem.removeAttribute(attribute);\r\n    }));\r\n}\r\nasync function handleImages(opts) {\r\n    const relativize = opts.behaviour === 'relativized';\r\n    switch (opts.behaviour) {\r\n        case 'relativized':\r\n        case 'absolutized':\r\n            await resolveImagePaths(opts.doc, opts.filePath, {\r\n                version: false,\r\n                relativize,\r\n            }, opts.savePath);\r\n            break;\r\n        case 'untouched':\r\n    }\r\n}\r\nasync function resolveImagePaths(doc, filePath, options, savePath) {\r\n    const [rootDirectory] = atom.project.relativizePath(filePath || '');\r\n    const media = util_common_1.getMedia(doc);\r\n    await Promise.all(Array.from(media).map(async function (img) {\r\n        let src = img.getAttribute('src');\r\n        if (src) {\r\n            if (util_1.atomConfig().renderer !== 'pandoc') {\r\n                src = decodeURI(src);\r\n            }\r\n            if (src.match(/^(https?|atom|data):/)) {\r\n                return;\r\n            }\r\n            if (process.resourcesPath && src.startsWith(process.resourcesPath)) {\r\n                return;\r\n            }\r\n            if (src.startsWith(resourcePath)) {\r\n                return;\r\n            }\r\n            if (src.startsWith(packagePath)) {\r\n                return;\r\n            }\r\n            if (src[0] === '/') {\r\n                if (!util_1.isFileSync(src)) {\r\n                    try {\r\n                        if (rootDirectory !== null) {\r\n                            src = path.join(rootDirectory, src.substring(1));\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n            else if (filePath) {\r\n                src = path.resolve(path.dirname(filePath), src);\r\n            }\r\n            if (options.relativize &&\r\n                (filePath !== undefined || savePath !== undefined)) {\r\n                const fp = savePath !== undefined ? savePath : filePath;\r\n                src = path.relative(path.dirname(fp), src);\r\n            }\r\n            if (options.version) {\r\n                const v = await imageWatcher.getVersion(src, filePath);\r\n                if (v) {\r\n                    src = `${src}?v=${v}`;\r\n                }\r\n            }\r\n            img.src = src;\r\n        }\r\n        return;\r\n    }));\r\n}\r\nfunction highlightCodeBlocks(domFragment, defaultLanguage, copyHTML) {\r\n    const fontFamily = atom.config.get('editor.fontFamily');\r\n    if (fontFamily) {\r\n        for (const codeElement of Array.from(domFragment.querySelectorAll('code'))) {\r\n            codeElement.style.fontFamily = fontFamily;\r\n        }\r\n    }\r\n    for (const preElement of Array.from(domFragment.querySelectorAll('pre'))) {\r\n        const codeBlock = preElement.firstElementChild !== null\r\n            ? preElement.firstElementChild\r\n            : preElement;\r\n        const cbClass = codeBlock.className;\r\n        const fenceName = cbClass\r\n            ? cbClass.replace(/^(lang-|sourceCode )/, '')\r\n            : defaultLanguage;\r\n        const addClass = copyHTML ? 'editor-colors ' : '';\r\n        preElement.outerHTML = highlight({\r\n            fileContents: codeBlock.textContent.replace(/\\n$/, ''),\r\n            scopeName: extension_helper_1.scopeForFenceName(fenceName),\r\n            nbsp: false,\r\n            lineDivs: copyHTML ? false : true,\r\n            editorDiv: true,\r\n            editorDivTag: copyHTML ? 'pre' : 'atom-text-editor',\r\n            editorDivClass: fenceName ? `${addClass}lang-${fenceName}` : addClass,\r\n        });\r\n    }\r\n    return domFragment;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVuZGVyZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNkI7QUFDN0IsNENBQTRDO0FBQzVDLGdEQUFnRDtBQUNoRCxtREFBbUQ7QUFDbkQseURBQXNEO0FBQ3RELHFEQUFxRDtBQUVyRCxpQ0FBK0M7QUFDL0MsK0NBQXdDO0FBRXhDLE1BQU0sRUFBRSxZQUFZLEVBQUUsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUE7QUFDL0MsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQTtBQUlwQyxLQUFLLGlCQUNWLElBQVksRUFDWixRQUE0QixFQUM1QixPQUE0QixFQUM1QixXQUFvQixFQUNwQixJQUFnQixFQUNoQixRQUFpQjtJQUlqQixJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUVyRCxJQUFJLElBQUksQ0FBQTtJQUNSLElBQUksS0FBSyxDQUFBO0lBQ1QsSUFBSSxpQkFBVSxFQUFFLENBQUMsUUFBUSxLQUFLLFFBQVEsRUFBRTtRQUN0QyxJQUFJO1lBQ0YsSUFBSSxHQUFHLE1BQU0sWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFBO1NBQ3BFO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDWixNQUFNLENBQUMsR0FBRyxHQUFnQyxDQUFBO1lBQzFDLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxTQUFTO2dCQUFFLE1BQU0sQ0FBQyxDQUFBO1lBQ2pDLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBaUIsQ0FBQTtZQUMzQixJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQWMsQ0FBQTtTQUN4QjtLQUNGO1NBQU07UUFDTCxJQUFJLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFD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Q0FBQztZQUM3QyxDQUFDLENBQUMsZUFBZSxDQUFBO1FBRW5CLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUNqRCxVQUFVLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztZQUMvQixZQUFZLEVBQUUsU0FBUyxDQUFDLFdBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQztZQUN2RCxTQUFTLEVBQUUsb0NBQWlCLENBQUMsU0FBUyxDQUFDO1lBQ3ZDLElBQUksRUFBRSxLQUFLO1lBQ1gsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJO1lBQ2pDLFNBQVMsRUFBRSxJQUFJO1lBQ2YsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxrQkFBa0I7WUFFbkQsY0FBYyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLFFBQVEsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVE7U0FDdEUsQ0FBQyxDQUFBO0tBQ0g7SUFFRCxPQUFPLFdBQVcsQ0FBQTtBQUNwQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcclxuaW1wb3J0IGhpZ2hsaWdodCA9IHJlcXVpcmUoJ2F0b20taGlnaGxpZ2h0JylcclxuaW1wb3J0IHBhbmRvY0hlbHBlciA9IHJlcXVpcmUoJy4vcGFuZG9jLWhlbHBlcicpXHJcbmltcG9ydCBtYXJrZG93bkl0ID0gcmVxdWlyZSgnLi9tYXJrZG93bi1pdC1oZWxwZXInKSAvLyBEZWZlciB1bnRpbCB1c2VkXHJcbmltcG9ydCB7IHNjb3BlRm9yRmVuY2VOYW1lIH0gZnJvbSAnLi9leHRlbnNpb24taGVscGVyJ1xyXG5pbXBvcnQgaW1hZ2VXYXRjaGVyID0gcmVxdWlyZSgnLi9pbWFnZS13YXRjaC1oZWxwZXInKVxyXG5pbXBvcnQgeyBHcmFtbWFyLCBDb25maWdWYWx1ZXMgfSBmcm9tICdhdG9tJ1xyXG5pbXBvcnQgeyBpc0ZpbGVTeW5jLCBhdG9tQ29uZmlnIH0gZnJvbSAnLi91dGlsJ1xyXG5pbXBvcnQgeyBnZXRNZWRpYSB9IGZyb20gJy4vdXRpbC1jb21tb24nXHJcblxyXG5jb25zdCB7IHJlc291cmNlUGF0aCB9ID0gYXRvbS5nZXRMb2FkU2V0dGluZ3MoKVxyXG5jb25zdCBwYWNrYWdlUGF0aCA9IHBhdGguZGlybmFtZShfX2Rpcm5hbWUpXHJcblxyXG5leHBvcnQgdHlwZSBSZW5kZXJNb2RlID0gJ25vcm1hbCcgfCAnY29weScgfCAnc2F2ZSdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXIoXHJcbiAgdGV4dDogc3RyaW5nLFxyXG4gIGZpbGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQsXHJcbiAgZ3JhbW1hcjogR3JhbW1hciB8IHVuZGVmaW5lZCxcclxuICByZW5kZXJMYVRlWDogYm9vbGVhbixcclxuICBtb2RlOiBSZW5kZXJNb2RlLFxyXG4gIHNhdmVQYXRoPzogc3RyaW5nLFxyXG4pOiBQcm9taXNlPEhUTUxEb2N1bWVudD4ge1xyXG4gIC8vIFJlbW92ZSB0aGUgPCFkb2N0eXBlPiBzaW5jZSBvdGhlcndpc2UgbWFya2VkIHdpbGwgZXNjYXBlIGl0XHJcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoamovbWFya2VkL2lzc3Vlcy8zNTRcclxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eXFxzKjwhZG9jdHlwZShcXHMrLiopPz5cXHMqL2ksICcnKVxyXG5cclxuICBsZXQgaHRtbFxyXG4gIGxldCBlcnJvclxyXG4gIGlmIChhdG9tQ29uZmlnKCkucmVuZGVyZXIgPT09ICdwYW5kb2MnKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBodG1sID0gYXdhaXQgcGFuZG9jSGVscGVyLnJlbmRlclBhbmRvYyh0ZXh0LCBmaWxlUGF0aCwgcmVuZGVyTGFUZVgpXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZSA9IGVyciBhcyBFcnJvciAmIHsgaHRtbD86IHN0cmluZyB9XHJcbiAgICAgIGlmIChlLmh0bWwgPT09IHVuZGVmaW5lZCkgdGhyb3cgZVxyXG4gICAgICBlcnJvciA9IGUubWVzc2FnZSBhcyBzdHJpbmdcclxuICAgICAgaHRtbCA9IGUuaHRtbCBhcyBzdHJpbmdcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaHRtbCA9IG1hcmtkb3duSXQucmVuZGVyKHRleHQsIHJlbmRlckxhVGVYKVxyXG4gIH1cclxuICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKClcclxuICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKVxyXG4gIHNhbml0aXplKGRvYylcclxuICBpZiAobW9kZSA9PT0gJ25vcm1hbCcpIHtcclxuICAgIGF3YWl0IHJlc29sdmVJbWFnZVBhdGhzKGRvYywgZmlsZVBhdGgsIHtcclxuICAgICAgdmVyc2lvbjogdHJ1ZSxcclxuICAgICAgcmVsYXRpdml6ZTogZmFsc2UsXHJcbiAgICB9KVxyXG4gIH0gZWxzZSB7XHJcbiAgICBsZXQgYmVoYXZpb3VyOiBDb25maWdWYWx1ZXNbJ21hcmtkb3duLXByZXZpZXctcGx1cy5zYXZlQ29uZmlnLm1lZGlhT25TYXZlQXNIVE1MQmVoYXZpb3VyJ11cclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICBjYXNlICdzYXZlJzpcclxuICAgICAgICBiZWhhdmlvdXIgPSBhdG9tQ29uZmlnKCkuc2F2ZUNvbmZpZy5tZWRpYU9uU2F2ZUFzSFRNTEJlaGF2aW91clxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2NvcHknOlxyXG4gICAgICAgIGJlaGF2aW91ciA9IGF0b21Db25maWcoKS5zYXZlQ29uZmlnLm1lZGlhT25Db3B5QXNIVE1MQmVoYXZpb3VyXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBpbnZhbGlkTW9kZShtb2RlKVxyXG4gICAgfVxyXG4gICAgYXdhaXQgaGFuZGxlSW1hZ2VzKHsgZG9jLCBmaWxlUGF0aCwgc2F2ZVBhdGgsIGJlaGF2aW91ciB9KVxyXG4gIH1cclxuICBsZXQgZGVmYXVsdENvZGVMYW5ndWFnZTogc3RyaW5nID0gJ3RleHQnXHJcbiAgLy8gRGVmYXVsdCBjb2RlIGJsb2NrcyB0byBiZSBjb2ZmZWUgaW4gTGl0ZXJhdGUgQ29mZmVlU2NyaXB0IGZpbGVzXHJcbiAgaWYgKChncmFtbWFyICYmIGdyYW1tYXIuc2NvcGVOYW1lKSA9PT0gJ3NvdXJjZS5saXRjb2ZmZWUnKSB7XHJcbiAgICBkZWZhdWx0Q29kZUxhbmd1YWdlID0gJ2NvZmZlZSdcclxuICB9XHJcbiAgaWYgKFxyXG4gICAgIShcclxuICAgICAgYXRvbUNvbmZpZygpLnJlbmRlcmVyID09PSAncGFuZG9jJyAmJlxyXG4gICAgICBhdG9tQ29uZmlnKCkucGFuZG9jQ29uZmlnLnVzZU5hdGl2ZVBhbmRvY0NvZGVTdHlsZXNcclxuICAgIClcclxuICApIHtcclxuICAgIGhpZ2hsaWdodENvZGVCbG9ja3MoZG9jLCBkZWZhdWx0Q29kZUxhbmd1YWdlLCBtb2RlICE9PSAnbm9ybWFsJylcclxuICB9XHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zdCBlcnJkID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICBjb25zdCBtc2dlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdjb2RlJylcclxuICAgIG1zZ2VsLmlubmVyVGV4dCA9IGVycm9yXHJcbiAgICBlcnJkLmlubmVySFRNTCA9IGA8aDE+UGFuZG9jIEVycm9yOjwvaDE+JHttc2dlbC5vdXRlckhUTUx9PGhyPmBcclxuICAgIGRvYy5ib2R5Lmluc2VydEJlZm9yZShlcnJkLCBkb2MuYm9keS5maXJzdEVsZW1lbnRDaGlsZClcclxuICB9XHJcbiAgcmV0dXJuIGRvY1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnZhbGlkTW9kZShtb2RlOiBuZXZlcikge1xyXG4gIHJldHVybiBuZXcgRXJyb3IoYEludmFsaWQgcmVuZGVyIG1vZGUgJHttb2RlfWApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhbml0aXplKGRvYzogSFRNTERvY3VtZW50KSB7XHJcbiAgLy8gRG8gbm90IHJlbW92ZSBNYXRoSmF4IHNjcmlwdCBkZWxpbWl0ZWQgYmxvY2tzXHJcbiAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHQ6bm90KFt0eXBlXj0nbWF0aC90ZXgnXSlcIikuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgZWxlbS5yZW1vdmUoKVxyXG4gIH0pXHJcbiAgY29uc3QgYXR0cmlidXRlc1RvUmVtb3ZlID0gW1xyXG4gICAgJ29uYWJvcnQnLFxyXG4gICAgJ29uYmx1cicsXHJcbiAgICAnb25jaGFuZ2UnLFxyXG4gICAgJ29uY2xpY2snLFxyXG4gICAgJ29uZGJjbGljaycsXHJcbiAgICAnb25lcnJvcicsXHJcbiAgICAnb25mb2N1cycsXHJcbiAgICAnb25rZXlkb3duJyxcclxuICAgICdvbmtleXByZXNzJyxcclxuICAgICdvbmtleXVwJyxcclxuICAgICdvbmxvYWQnLFxyXG4gICAgJ29ubW91c2Vkb3duJyxcclxuICAgICdvbm1vdXNlbW92ZScsXHJcbiAgICAnb25tb3VzZW92ZXInLFxyXG4gICAgJ29ubW91c2VvdXQnLFxyXG4gICAgJ29ubW91c2V1cCcsXHJcbiAgICAnb25yZXNldCcsXHJcbiAgICAnb25yZXNpemUnLFxyXG4gICAgJ29uc2Nyb2xsJyxcclxuICAgICdvbnNlbGVjdCcsXHJcbiAgICAnb25zdWJtaXQnLFxyXG4gICAgJ29udW5sb2FkJyxcclxuICBdXHJcbiAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKChlbGVtKSA9PlxyXG4gICAgYXR0cmlidXRlc1RvUmVtb3ZlLm1hcCgoYXR0cmlidXRlKSA9PiB7XHJcbiAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSlcclxuICAgIH0pLFxyXG4gIClcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlSW1hZ2VzKG9wdHM6IHtcclxuICBiZWhhdmlvdXI6ICdyZWxhdGl2aXplZCcgfCAnYWJzb2x1dGl6ZWQnIHwgJ3VudG91Y2hlZCdcclxuICBkb2M6IEhUTUxEb2N1bWVudFxyXG4gIGZpbGVQYXRoPzogc3RyaW5nXHJcbiAgc2F2ZVBhdGg/OiBzdHJpbmdcclxufSkge1xyXG4gIGNvbnN0IHJlbGF0aXZpemUgPSBvcHRzLmJlaGF2aW91ciA9PT0gJ3JlbGF0aXZpemVkJ1xyXG4gIHN3aXRjaCAob3B0cy5iZWhhdmlvdXIpIHtcclxuICAgIGNhc2UgJ3JlbGF0aXZpemVkJzpcclxuICAgIGNhc2UgJ2Fic29sdXRpemVkJzpcclxuICAgICAgYXdhaXQgcmVzb2x2ZUltYWdlUGF0aHMoXHJcbiAgICAgICAgb3B0cy5kb2MsXHJcbiAgICAgICAgb3B0cy5maWxlUGF0aCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2ZXJzaW9uOiBmYWxzZSxcclxuICAgICAgICAgIHJlbGF0aXZpemUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcHRzLnNhdmVQYXRoLFxyXG4gICAgICApXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICd1bnRvdWNoZWQnOlxyXG4gICAgLyogbm9vcCAqL1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUltYWdlUGF0aHMoXHJcbiAgZG9jOiBIVE1MRG9jdW1lbnQsXHJcbiAgZmlsZVBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuICBvcHRpb25zOiBSZWNvcmQ8J3ZlcnNpb24nIHwgJ3JlbGF0aXZpemUnLCBib29sZWFuPixcclxuICBzYXZlUGF0aD86IHN0cmluZyxcclxuKSB7XHJcbiAgY29uc3QgW3Jvb3REaXJlY3RvcnldID0gYXRvbS5wcm9qZWN0LnJlbGF0aXZpemVQYXRoKGZpbGVQYXRoIHx8ICcnKVxyXG4gIGNvbnN0IG1lZGlhID0gZ2V0TWVkaWEoZG9jKVxyXG4gIGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgQXJyYXkuZnJvbShtZWRpYSkubWFwKGFzeW5jIGZ1bmN0aW9uKGltZykge1xyXG4gICAgICBsZXQgc3JjID0gaW1nLmdldEF0dHJpYnV0ZSgnc3JjJylcclxuICAgICAgaWYgKHNyYykge1xyXG4gICAgICAgIGlmIChhdG9tQ29uZmlnKCkucmVuZGVyZXIgIT09ICdwYW5kb2MnKSB7XHJcbiAgICAgICAgICBzcmMgPSBkZWNvZGVVUkkoc3JjKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNyYy5tYXRjaCgvXihodHRwcz98YXRvbXxkYXRhKTovKSkge1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9jZXNzLnJlc291cmNlc1BhdGggJiYgc3JjLnN0YXJ0c1dpdGgocHJvY2Vzcy5yZXNvdXJjZXNQYXRoKSkge1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzcmMuc3RhcnRzV2l0aChyZXNvdXJjZVBhdGgpKSB7XHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNyYy5zdGFydHNXaXRoKHBhY2thZ2VQYXRoKSkge1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3JjWzBdID09PSAnLycpIHtcclxuICAgICAgICAgIGlmICghaXNGaWxlU3luYyhzcmMpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgaWYgKHJvb3REaXJlY3RvcnkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHNyYyA9IHBhdGguam9pbihyb290RGlyZWN0b3J5LCBzcmMuc3Vic3RyaW5nKDEpKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgIC8vIG5vb3BcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVBhdGgpIHtcclxuICAgICAgICAgIHNyYyA9IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoZmlsZVBhdGgpLCBzcmMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBvcHRpb25zLnJlbGF0aXZpemUgJiZcclxuICAgICAgICAgIChmaWxlUGF0aCAhPT0gdW5kZWZpbmVkIHx8IHNhdmVQYXRoICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBmcCA9IHNhdmVQYXRoICE9PSB1bmRlZmluZWQgPyBzYXZlUGF0aCA6IGZpbGVQYXRoIVxyXG4gICAgICAgICAgc3JjID0gcGF0aC5yZWxhdGl2ZShwYXRoLmRpcm5hbWUoZnApLCBzcmMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVc2UgbW9zdCByZWNlbnQgdmVyc2lvbiBvZiBpbWFnZVxyXG4gICAgICAgIGlmIChvcHRpb25zLnZlcnNpb24pIHtcclxuICAgICAgICAgIGNvbnN0IHYgPSBhd2FpdCBpbWFnZVdhdGNoZXIuZ2V0VmVyc2lvbihzcmMsIGZpbGVQYXRoKVxyXG4gICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgc3JjID0gYCR7c3JjfT92PSR7dn1gXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbWcuc3JjID0gc3JjXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuXHJcbiAgICB9KSxcclxuICApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZ2hsaWdodENvZGVCbG9ja3MoXHJcbiAgZG9tRnJhZ21lbnQ6IERvY3VtZW50LFxyXG4gIGRlZmF1bHRMYW5ndWFnZTogc3RyaW5nLFxyXG4gIGNvcHlIVE1MOiBib29sZWFuLFxyXG4pIHtcclxuICBjb25zdCBmb250RmFtaWx5ID0gYXRvbS5jb25maWcuZ2V0KCdlZGl0b3IuZm9udEZhbWlseScpXHJcbiAgaWYgKGZvbnRGYW1pbHkpIHtcclxuICAgIGZvciAoY29uc3QgY29kZUVsZW1lbnQgb2YgQXJyYXkuZnJvbShcclxuICAgICAgZG9tRnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbCgnY29kZScpLFxyXG4gICAgKSkge1xyXG4gICAgICBjb2RlRWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gZm9udEZhbWlseVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9yIChjb25zdCBwcmVFbGVtZW50IG9mIEFycmF5LmZyb20oZG9tRnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlJykpKSB7XHJcbiAgICBjb25zdCBjb2RlQmxvY2sgPVxyXG4gICAgICBwcmVFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkICE9PSBudWxsXHJcbiAgICAgICAgPyBwcmVFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgOiBwcmVFbGVtZW50XHJcbiAgICBjb25zdCBjYkNsYXNzID0gY29kZUJsb2NrLmNsYXNzTmFtZVxyXG4gICAgY29uc3QgZmVuY2VOYW1lID0gY2JDbGFzc1xyXG4gICAgICA/IGNiQ2xhc3MucmVwbGFjZSgvXihsYW5nLXxzb3VyY2VDb2RlICkvLCAnJylcclxuICAgICAgOiBkZWZhdWx0TGFuZ3VhZ2VcclxuXHJcbiAgICBjb25zdCBhZGRDbGFzcyA9IGNvcHlIVE1MID8gJ2VkaXRvci1jb2xvcnMgJyA6ICcnXHJcbiAgICBwcmVFbGVtZW50Lm91dGVySFRNTCA9IGhpZ2hsaWdodCh7XHJcbiAgICAgIGZpbGVDb250ZW50czogY29kZUJsb2NrLnRleHRDb250ZW50IS5yZXBsYWNlKC9cXG4kLywgJycpLFxyXG4gICAgICBzY29wZU5hbWU6IHNjb3BlRm9yRmVuY2VOYW1lKGZlbmNlTmFtZSksXHJcbiAgICAgIG5ic3A6IGZhbHNlLFxyXG4gICAgICBsaW5lRGl2czogY29weUhUTUwgPyBmYWxzZSA6IHRydWUsXHJcbiAgICAgIGVkaXRvckRpdjogdHJ1ZSxcclxuICAgICAgZWRpdG9yRGl2VGFnOiBjb3B5SFRNTCA/ICdwcmUnIDogJ2F0b20tdGV4dC1lZGl0b3InLFxyXG4gICAgICAvLyBUaGUgYGVkaXRvcmAgY2xhc3MgbWVzc2VzIHRoaW5ncyB1cCBhcyBgLmVkaXRvcmAgaGFzIGFic29sdXRlbHkgcG9zaXRpb25lZCBsaW5lc1xyXG4gICAgICBlZGl0b3JEaXZDbGFzczogZmVuY2VOYW1lID8gYCR7YWRkQ2xhc3N9bGFuZy0ke2ZlbmNlTmFtZX1gIDogYWRkQ2xhc3MsXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRvbUZyYWdtZW50XHJcbn1cclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nfunction handlePromise(promise) {\r\n    if (!promise)\r\n        return;\r\n    promise.catch((error) => {\r\n        console.error(error);\r\n        atom.notifications.addFatalError(error.toString(), {\r\n            detail: error.message,\r\n            stack: error.stack,\r\n            dismissable: true,\r\n        });\r\n    });\r\n}\r\nexports.handlePromise = handlePromise;\r\nconst fs_1 = require(\"fs\");\r\nfunction isFileSync(filePath) {\r\n    if (!fs_1.existsSync(filePath))\r\n        return false;\r\n    return fs_1.lstatSync(filePath).isFile();\r\n}\r\nexports.isFileSync = isFileSync;\r\nfunction pairUp(arr, option) {\r\n    if (arr.length % 2 !== 0) {\r\n        atom.notifications.addWarning(`Invalid math delimiter configuration${option ? `in ${option}` : ''}`, {\r\n            detail: `Expected even number of elements, but got \"${arr.join(', ')}\"`,\r\n            dismissable: true,\r\n        });\r\n    }\r\n    return arr.reduce(function (result, _value, index, array) {\r\n        if (index % 2 === 0)\r\n            result.push([array[index], array[index + 1]]);\r\n        return result;\r\n    }, []);\r\n}\r\nexports.pairUp = pairUp;\r\nfunction isElement(node) {\r\n    return node.nodeType === Node.ELEMENT_NODE;\r\n}\r\nexports.isElement = isElement;\r\nconst webview_handler_1 = require(\"./markdown-preview-view/webview-handler\");\r\nconst renderer = tslib_1.__importStar(require(\"./renderer\"));\r\nasync function copyHtml(text, filePath, renderLaTeX) {\r\n    const view = new webview_handler_1.WebviewHandler(async () => {\r\n        view.init(atom.getConfigDirPath(), atomConfig().mathConfig.numberEquations);\r\n        view.setUseGitHubStyle(atom.config.get('markdown-preview-plus.useGitHubStyle'));\r\n        view.setBasePath(filePath);\r\n        const domDocument = await renderer.render(text, filePath, undefined, renderLaTeX, 'copy');\r\n        const res = await view.update(domDocument.documentElement.outerHTML, renderLaTeX, 'SVG');\r\n        if (res)\r\n            atom.clipboard.write(res);\r\n        view.destroy();\r\n    });\r\n    view.element.style.pointerEvents = 'none';\r\n    view.element.style.position = 'absolute';\r\n    view.element.style.width = '0px';\r\n    view.element.style.height = '0px';\r\n    const ws = atom.views.getView(atom.workspace);\r\n    ws.appendChild(view.element);\r\n}\r\nexports.copyHtml = copyHtml;\r\nfunction atomConfig() {\r\n    return atom.config.get('markdown-preview-plus');\r\n}\r\nexports.atomConfig = atomConfig;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHVCQUE4QixPQUFxQjtJQUNqRCxJQUFJLENBQUMsT0FBTztRQUFFLE9BQU07SUFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQVksRUFBRSxFQUFFO1FBQzdCLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDcEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQ2pELE1BQU0sRUFBRSxLQUFLLENBQUMsT0FBTztZQUNyQixLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7WUFDbEIsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBVkQsc0NBVUM7QUFDRCwyQkFBMEM7QUFDMUMsb0JBQTJCLFFBQWdCO0lBQ3pDLElBQUksQ0FBQyxlQUFVLENBQUMsUUFBUSxDQUFDO1FBQUUsT0FBTyxLQUFLLENBQUE7SUFDdkMsT0FBTyxjQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDckMsQ0FBQztBQUhELGdDQUdDO0FBRUQsZ0JBQTBCLEdBQVEsRUFBRSxNQUFlO0lBQ2pELElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUMzQix1Q0FBdUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFDckU7WUFDRSxNQUFNLEVBQUUsOENBQThDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7WUFDdkUsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FDRixDQUFBO0tBQ0Y7SUFDRCxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQWdCLFVBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSztRQUNwRSxJQUFJLEtBQUssR0FBRyxDQUFDLEtBQUssQ0FBQztZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbEUsT0FBTyxNQUFNLENBQUE7SUFDZixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7QUFDUixDQUFDO0FBZEQsd0JBY0M7QUFFRCxtQkFBMEIsSUFBVTtJQUNsQyxPQUFPLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLFlBQVksQ0FBQTtBQUM1QyxDQUFDO0FBRkQsOEJBRUM7QUFFRCw2RUFBd0U7QUFDeEUsNkRBQXNDO0FBQy9CLEtBQUssbUJBQ1YsSUFBWSxFQUNaLFFBQTRCLEVBQzVCLFdBQW9CO0lBRXBCLE1BQU0sSUFBSSxHQUFHLElBQUksZ0NBQWMsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUMzRSxJQUFJLENBQUMsaUJBQWlCLENBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxDQUFDLENBQ3hELENBQUE7UUFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBRTFCLE1BQU0sV0FBVyxHQUFHLE1BQU0sUUFBUSxDQUFDLE1BQU0sQ0FDdkMsSUFBSSxFQUNKLFFBQVEsRUFDUixTQUFTLEVBQ1QsV0FBVyxFQUNYLE1BQU0sQ0FDUCxDQUFBO1FBQ0QsTUFBTSxHQUFHLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUMzQixXQUFXLENBQUMsZUFBZSxDQUFDLFNBQVMsRUFDckMsV0FBVyxFQUNYLEtBQUssQ0FDTixDQUFBO1FBQ0QsSUFBSSxHQUFHO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ2hCLENBQUMsQ0FBQyxDQUFBO0lBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQTtJQUN6QyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFBO0lBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQTtJQUNqQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDN0MsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDOUIsQ0FBQztBQWpDRCw0QkFpQ0M7QUFFRDtJQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtBQUNqRCxDQUFDO0FBRkQsZ0NBRUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvbWlzZShwcm9taXNlOiBQcm9taXNlPGFueT4pOiB2b2lkIHtcclxuICBpZiAoIXByb21pc2UpIHJldHVyblxyXG4gIHByb21pc2UuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRGYXRhbEVycm9yKGVycm9yLnRvU3RyaW5nKCksIHtcclxuICAgICAgZGV0YWlsOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXHJcbiAgICAgIGRpc21pc3NhYmxlOiB0cnVlLFxyXG4gICAgfSlcclxuICB9KVxyXG59XHJcbmltcG9ydCB7IGxzdGF0U3luYywgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJ1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGaWxlU3luYyhmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgaWYgKCFleGlzdHNTeW5jKGZpbGVQYXRoKSkgcmV0dXJuIGZhbHNlXHJcbiAgcmV0dXJuIGxzdGF0U3luYyhmaWxlUGF0aCkuaXNGaWxlKClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhaXJVcDxUPihhcnI6IFRbXSwgb3B0aW9uPzogc3RyaW5nKTogQXJyYXk8W1QsIFRdPiB7XHJcbiAgaWYgKGFyci5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyhcclxuICAgICAgYEludmFsaWQgbWF0aCBkZWxpbWl0ZXIgY29uZmlndXJhdGlvbiR7b3B0aW9uID8gYGluICR7b3B0aW9ufWAgOiAnJ31gLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGV0YWlsOiBgRXhwZWN0ZWQgZXZlbiBudW1iZXIgb2YgZWxlbWVudHMsIGJ1dCBnb3QgXCIke2Fyci5qb2luKCcsICcpfVwiYCxcclxuICAgICAgICBkaXNtaXNzYWJsZTogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgIClcclxuICB9XHJcbiAgcmV0dXJuIGFyci5yZWR1Y2U8QXJyYXk8W1QsIFRdPj4oZnVuY3Rpb24ocmVzdWx0LCBfdmFsdWUsIGluZGV4LCBhcnJheSkge1xyXG4gICAgaWYgKGluZGV4ICUgMiA9PT0gMCkgcmVzdWx0LnB1c2goW2FycmF5W2luZGV4XSwgYXJyYXlbaW5kZXggKyAxXV0pXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfSwgW10pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnQobm9kZTogTm9kZSk6IG5vZGUgaXMgRWxlbWVudCB7XHJcbiAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFXHJcbn1cclxuXHJcbmltcG9ydCB7IFdlYnZpZXdIYW5kbGVyIH0gZnJvbSAnLi9tYXJrZG93bi1wcmV2aWV3LXZpZXcvd2Vidmlldy1oYW5kbGVyJ1xyXG5pbXBvcnQgKiBhcyByZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyJ1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29weUh0bWwoXHJcbiAgdGV4dDogc3RyaW5nLFxyXG4gIGZpbGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQsXHJcbiAgcmVuZGVyTGFUZVg6IGJvb2xlYW4sXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHZpZXcgPSBuZXcgV2Vidmlld0hhbmRsZXIoYXN5bmMgKCkgPT4ge1xyXG4gICAgdmlldy5pbml0KGF0b20uZ2V0Q29uZmlnRGlyUGF0aCgpLCBhdG9tQ29uZmlnKCkubWF0aENvbmZpZy5udW1iZXJFcXVhdGlvbnMpXHJcbiAgICB2aWV3LnNldFVzZUdpdEh1YlN0eWxlKFxyXG4gICAgICBhdG9tLmNvbmZpZy5nZXQoJ21hcmtkb3duLXByZXZpZXctcGx1cy51c2VHaXRIdWJTdHlsZScpLFxyXG4gICAgKVxyXG4gICAgdmlldy5zZXRCYXNlUGF0aChmaWxlUGF0aClcclxuXHJcbiAgICBjb25zdCBkb21Eb2N1bWVudCA9IGF3YWl0IHJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgdGV4dCxcclxuICAgICAgZmlsZVBhdGgsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgcmVuZGVyTGFUZVgsXHJcbiAgICAgICdjb3B5JyxcclxuICAgIClcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHZpZXcudXBkYXRlKFxyXG4gICAgICBkb21Eb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MLFxyXG4gICAgICByZW5kZXJMYVRlWCxcclxuICAgICAgJ1NWRycsXHJcbiAgICApXHJcbiAgICBpZiAocmVzKSBhdG9tLmNsaXBib2FyZC53cml0ZShyZXMpXHJcbiAgICB2aWV3LmRlc3Ryb3koKVxyXG4gIH0pXHJcbiAgdmlldy5lbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSdcclxuICB2aWV3LmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbiAgdmlldy5lbGVtZW50LnN0eWxlLndpZHRoID0gJzBweCdcclxuICB2aWV3LmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzBweCdcclxuICBjb25zdCB3cyA9IGF0b20udmlld3MuZ2V0VmlldyhhdG9tLndvcmtzcGFjZSlcclxuICB3cy5hcHBlbmRDaGlsZCh2aWV3LmVsZW1lbnQpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhdG9tQ29uZmlnKCkge1xyXG4gIHJldHVybiBhdG9tLmNvbmZpZy5nZXQoJ21hcmtkb3duLXByZXZpZXctcGx1cycpXHJcbn1cclxuIl19","//\r\n// mathjax-helper\r\n//\r\n// This module will handle loading the MathJax environment and provide a wrapper\r\n// for calls to MathJax to process LaTeX equations.\r\n//\r\n\r\nimport path = require('path')\r\nimport CSON = require('season')\r\nimport fs = require('fs')\r\nimport { isFileSync } from './util'\r\nimport { atomConfig } from '../src/util'\r\n\r\nconst mjSrc = `${global.require.resolve(\r\n  'mathjax',\r\n)}?delayStartupUntil=configured`\r\nconst defaultRenderer: MathJaxRenderer = 'HTML-CSS'\r\n\r\n//\r\n// Process DOM elements for LaTeX equations with MathJax\r\n//\r\n// @param domElements An array of DOM elements to be processed by MathJax. See\r\n//   [element](https://developer.mozilla.org/en-US/docs/Web/API/element) for\r\n//   details on DOM elements.\r\n//\r\nexport async function mathProcessor(\r\n  domElement: Node,\r\n  renderer: MathJaxRenderer,\r\n) {\r\n  await loadMathJax()\r\n  await queueTypeset(domElement, renderer)\r\n}\r\n\r\n//\r\n// Process maths in HTML fragment with MathJax\r\n//\r\n// @param html A HTML fragment string\r\n// @param callback A callback method that accepts a single parameter, a HTML\r\n//   fragment string that is the result of html processed by MathJax\r\n//\r\nexport async function processHTMLString(element: Element) {\r\n  const msvgh = document.getElementById('MathJax_SVG_Hidden')\r\n  const svgGlyphs = msvgh && msvgh.parentElement\r\n  if (svgGlyphs !== null) {\r\n    return svgGlyphs.innerHTML + element.innerHTML\r\n  } else {\r\n    return element.innerHTML\r\n  }\r\n}\r\n\r\n//\r\n// Load MathJax environment\r\n//\r\n// @param listener method to call when the MathJax script was been\r\n//   loaded to the window. The method is passed no arguments.\r\n//\r\nlet mjPromise: Promise<void> | undefined\r\nasync function loadMathJax(): Promise<void> {\r\n  if (mjPromise) return mjPromise\r\n  mjPromise = attachMathJax()\r\n  return mjPromise\r\n}\r\n\r\n// for testing\r\nexport function unloadMathJax(): void {\r\n  mjPromise = undefined\r\n  const script = document.head.querySelector(`script[src='${mjSrc}']`)\r\n  if (script) script.remove()\r\n}\r\n\r\nexport async function jaxTeXConfig() {\r\n  let userMacros = await loadUserMacros()\r\n  if (userMacros) {\r\n    userMacros = checkMacros(userMacros)\r\n  } else {\r\n    userMacros = {}\r\n  }\r\n  const numberEqns = await window.atomVars.numberEqns\r\n\r\n  return {\r\n    extensions: await atomConfig().mathConfig.mjxExtensions,\r\n    Macros: userMacros,\r\n    equationNumbers: numberEqns\r\n      ? {\r\n          autoNumber: 'AMS',\r\n          useLabelIds: false,\r\n        }\r\n      : {},\r\n  }\r\n}\r\n\r\n// private\r\n\r\nasync function getUserMacrosPath(): Promise<string> {\r\n  const home = await window.atomVars.home\r\n  const userMacrosPath: string | undefined | null = CSON.resolve(\r\n    path.join(home, 'markdown-preview-plus'),\r\n  )\r\n  return userMacrosPath != null\r\n    ? userMacrosPath\r\n    : path.join(home, 'markdown-preview-plus.cson')\r\n}\r\n\r\nfunction loadMacrosFile(filePath: string): object {\r\n  if (!CSON.isObjectPath(filePath)) {\r\n    return {}\r\n  }\r\n  return CSON.readFileSync(filePath, function(error?: Error, object?: object) {\r\n    if (object === undefined) {\r\n      object = {}\r\n    }\r\n    if (error !== undefined) {\r\n      console.warn(\r\n        `Error reading Latex Macros file '${filePath}': ${\r\n          error.stack !== undefined ? error.stack : error\r\n        }`,\r\n      )\r\n      console.error(`Failed to load Latex Macros from '${filePath}'`, {\r\n        detail: error.message,\r\n        dismissable: true,\r\n      })\r\n    }\r\n    return object\r\n  })\r\n}\r\n\r\nasync function loadUserMacros() {\r\n  const userMacrosPath = await getUserMacrosPath()\r\n  if (isFileSync(userMacrosPath)) {\r\n    return loadMacrosFile(userMacrosPath)\r\n  } else {\r\n    console.debug(\r\n      'Creating markdown-preview-plus.cson, this is a one-time operation.',\r\n    )\r\n    createMacrosTemplate(userMacrosPath)\r\n    return loadMacrosFile(userMacrosPath)\r\n  }\r\n}\r\n\r\nfunction createMacrosTemplate(filePath: string) {\r\n  const templatePath = path.join(__dirname, '../assets/macros-template.cson')\r\n  const templateFile = fs.readFileSync(templatePath, 'utf8')\r\n  fs.writeFileSync(filePath, templateFile)\r\n}\r\n\r\nfunction checkMacros(macrosObject: object) {\r\n  const namePattern = /^[^a-zA-Z\\d\\s]$|^[a-zA-Z]*$/ // letters, but no numerals.\r\n  for (const name in macrosObject) {\r\n    const value = macrosObject[name]\r\n    if (!name.match(namePattern) || !valueMatchesPattern(value)) {\r\n      delete macrosObject[name]\r\n      console.error(\r\n        `Failed to load LaTeX macro named '${name}'. Please see the [LaTeX guide](https://github.com/atom-community/markdown-preview-plus/blob/master/docs/math.md#macro-names)`,\r\n      )\r\n    }\r\n  }\r\n  return macrosObject\r\n}\r\n\r\nfunction valueMatchesPattern(value: any) {\r\n  // Different check based on whether value is string or array\r\n  if (Array.isArray(value)) {\r\n    const macroDefinition = value[0]\r\n    const numberOfArgs = value[1]\r\n    if (typeof numberOfArgs === 'number') {\r\n      return numberOfArgs % 1 === 0 && typeof macroDefinition === 'string'\r\n    } else {\r\n      return false\r\n    }\r\n  } else if (typeof value === 'string') {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\n// Configure MathJax environment. Similar to the TeX-AMS_HTML configuration with\r\n// a few unnecessary features stripped away\r\n//\r\nasync function configureMathJax() {\r\n  MathJax.Hub.Config({\r\n    jax: ['input/TeX', `output/${defaultRenderer}`],\r\n    extensions: [],\r\n    TeX: await jaxTeXConfig(),\r\n    'HTML-CSS': {\r\n      availableFonts: [],\r\n      webFont: 'TeX',\r\n      imageFont: null as any, // TODO: complain on DT\r\n      mtextFontInherit: true,\r\n      undefinedFamily: await atomConfig().mathConfig.mjxUndefinedFamily\r\n    },\r\n    messageStyle: 'none',\r\n    showMathMenu: false,\r\n    skipStartupTypeset: true,\r\n  })\r\n  MathJax.Hub.Configured()\r\n\r\n  // Notify user MathJax has loaded\r\n  console.log('Loaded maths rendering engine MathJax')\r\n}\r\n\r\n//\r\n// Attach main MathJax script to the document\r\n//\r\nasync function attachMathJax(): Promise<void> {\r\n  console.log('Loading maths rendering engine MathJax')\r\n\r\n  // Attach MathJax script\r\n  await Promise.all([injectScript(mjSrc)])\r\n  await configureMathJax()\r\n}\r\n\r\nasync function injectScript(scriptSrc: string) {\r\n  const script = document.createElement('script')\r\n  script.src = scriptSrc\r\n  script.type = 'text/javascript'\r\n  document.head.appendChild(script)\r\n  return new Promise<void>((resolve) => {\r\n    script.addEventListener('load', () => resolve())\r\n  })\r\n}\r\n\r\nasync function queueTypeset(domElement: Node, renderer: MathJaxRenderer) {\r\n  const hasUnprocessedMath = Array.from(\r\n    document.querySelectorAll('script[type^=\"math/tex\"]'),\r\n  ).some((x) => !x.id)\r\n  if (!hasUnprocessedMath) return\r\n  const numberEqns = await window.atomVars.numberEqns\r\n  return new Promise<void>((resolve) => {\r\n    if (MathJax.InputJax.TeX) {\r\n      MathJax.Hub.Queue(['resetEquationNumbers', MathJax.InputJax.TeX])\r\n      if (numberEqns) {\r\n        MathJax.Hub.Queue(['PreProcess', MathJax.Hub])\r\n        MathJax.Hub.Queue(['Reprocess', MathJax.Hub])\r\n      }\r\n    }\r\n\r\n    MathJax.Hub.Queue(['setRenderer', MathJax.Hub, renderer])\r\n    MathJax.Hub.Queue(['Typeset', MathJax.Hub, domElement])\r\n    MathJax.Hub.Queue(['setRenderer', MathJax.Hub, defaultRenderer])\r\n    MathJax.Hub.Queue([resolve])\r\n  })\r\n}\r\n","// This file incorporates code from [markmon](https://github.com/yyjhao/markmon)\r\n// covered by the following terms:\r\n//\r\n// Copyright (c) 2014, Yao Yujian, http://yjyao.com\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\nimport morph = require('morphdom')\r\nimport MathJaxHelper = require('./mathjax-helper')\r\n\r\nexport class UpdatePreview {\r\n  private cachedMJRenderer?: MathJaxRenderer\r\n  constructor(private dom: HTMLElement) {\r\n    /* no-op */\r\n  }\r\n\r\n  public async update(\r\n    newDom: Element,\r\n    renderLaTeX: boolean,\r\n    mjrenderer: MathJaxRenderer,\r\n  ): Promise<void> {\r\n    const lastMJRenderer =\r\n      this.cachedMJRenderer === undefined ? mjrenderer : this.cachedMJRenderer\r\n    this.cachedMJRenderer = mjrenderer\r\n\r\n    for (const m of Array.from(newDom.querySelectorAll('span.math'))) {\r\n      const mscr = m.firstElementChild as HTMLScriptElement | null\r\n      if (!mscr || mscr.nodeName !== 'SCRIPT') continue\r\n      m.isSameNode = function(target: Node) {\r\n        if (lastMJRenderer !== mjrenderer) return false\r\n        if (target.nodeName !== 'SPAN') return false\r\n        const el = target as HTMLSpanElement\r\n        if (!el.classList.contains('math')) return false\r\n        const scr = el.querySelector('script')\r\n        if (!scr) return false\r\n        return mscr.innerHTML === scr.innerHTML\r\n      }\r\n    }\r\n\r\n    morph(this.dom, newDom, {\r\n      childrenOnly: true,\r\n      onElUpdated: function(el) {\r\n        if (el.tagName === 'LI') el.innerHTML = el.innerHTML // force re-render\r\n      },\r\n    })\r\n\r\n    if (renderLaTeX) {\r\n      return MathJaxHelper.mathProcessor(this.dom, mjrenderer)\r\n    }\r\n  }\r\n}\r\n","import { ipcRenderer } from 'electron'\r\nimport { UpdatePreview } from './update-preview'\r\nimport { processHTMLString, jaxTeXConfig } from './mathjax-helper'\r\nimport * as util from './util'\r\nimport { getMedia } from '../src/util-common'\r\n\r\nfunction mkResPromise<T>(): ResolvablePromise<T> {\r\n  let resFn: (value?: T | PromiseLike<T> | undefined) => void\r\n  const p = new Promise<T>((resolve) => (resFn = resolve)) as ResolvablePromise<\r\n    T\r\n  >\r\n  p.resolve = resFn!\r\n  return p\r\n}\r\n\r\nwindow.atomVars = {\r\n  home: mkResPromise(),\r\n  numberEqns: mkResPromise(),\r\n  sourceLineMap: new Map(),\r\n  revSourceMap: new WeakMap(),\r\n}\r\n\r\nipcRenderer.on<'init'>('init', (_evt, { atomHome, numberEqns }) => {\r\n  window.atomVars.home.resolve(atomHome)\r\n  window.atomVars.numberEqns.resolve(numberEqns)\r\n})\r\n\r\nipcRenderer.on<'set-source-map'>('set-source-map', (_evt, { map }) => {\r\n  const root = document.querySelector('div.update-preview')\r\n  if (!root) throw new Error('No root element!')\r\n  const slsm = new Map<number, Element>()\r\n  const rsm = new WeakMap<Element, number[]>()\r\n  for (const lineS of Object.keys(map)) {\r\n    const line = parseInt(lineS, 10)\r\n    const path = map[line]\r\n    const elem = util.resolveElement(root, path)\r\n    if (elem) {\r\n      slsm.set(line, elem)\r\n      const rsmel = rsm.get(elem)\r\n      if (rsmel) rsmel.push(line)\r\n      else rsm.set(elem, [line])\r\n    }\r\n  }\r\n  window.atomVars.sourceLineMap = slsm\r\n  window.atomVars.revSourceMap = rsm\r\n})\r\n\r\nipcRenderer.on<'scroll-sync'>(\r\n  'scroll-sync',\r\n  (_evt, { firstLine, lastLine }) => {\r\n    const mean = Math.floor(0.5 * (firstLine + lastLine))\r\n    const slm = window.atomVars.sourceLineMap\r\n    let topLine\r\n    let topBound\r\n    for (topLine = mean; topLine >= 0; topLine -= 1) {\r\n      topBound = slm.get(topLine)\r\n      if (topBound) break\r\n    }\r\n    if (!topBound) return\r\n\r\n    const max = Math.max(...Array.from(slm.keys()))\r\n    let bottomLine\r\n    let bottomBound\r\n    for (bottomLine = mean + 1; bottomLine < max; bottomLine += 1) {\r\n      bottomBound = slm.get(bottomLine)\r\n      if (bottomBound) break\r\n    }\r\n    if (!bottomBound) return\r\n    const topScroll = topBound.getBoundingClientRect().top\r\n    const bottomScroll = bottomBound.getBoundingClientRect().top\r\n    const frac = (mean - firstLine) / (lastLine - firstLine)\r\n    const offset = document.documentElement.scrollTop\r\n    const clientHeight = document.documentElement.clientHeight\r\n    const top =\r\n      offset - clientHeight / 2 + topScroll + frac * (bottomScroll - topScroll)\r\n    window.scroll({ top })\r\n  },\r\n)\r\n\r\nipcRenderer.on<'style'>('style', (_event, { styles }) => {\r\n  let styleElem = document.head.querySelector('style#atom-styles')\r\n  if (!styleElem) {\r\n    styleElem = document.createElement('style')\r\n    styleElem.id = 'atom-styles'\r\n    document.head.appendChild(styleElem)\r\n  }\r\n  styleElem.innerHTML = styles.join('\\n')\r\n})\r\n\r\nipcRenderer.on<'update-images'>('update-images', (_event, { oldsrc, v }) => {\r\n  const imgs = getMedia(document)\r\n  for (const img of Array.from(imgs)) {\r\n    let ovs: string | undefined\r\n    let ov: number | undefined\r\n    let src = img.getAttribute('src')!\r\n    const match = src.match(/^(.*)\\?v=(\\d+)$/)\r\n    if (match) [, src, ovs] = match\r\n    if (src === oldsrc) {\r\n      if (ovs !== undefined) ov = parseInt(ovs, 10)\r\n      if (v !== ov) img.src = v ? `${src}?v=${v}` : `${src}`\r\n    }\r\n  }\r\n})\r\n\r\nipcRenderer.on<'sync'>('sync', (_event, { line }) => {\r\n  const root = document.querySelector('div.update-preview')\r\n  if (!root) return\r\n\r\n  let element = window.atomVars.sourceLineMap.get(line)\r\n\r\n  if (!element) {\r\n    for (let i = line - 1; i >= 0; i -= 1) {\r\n      element = window.atomVars.sourceLineMap.get(line)\r\n      if (element) break\r\n    }\r\n  }\r\n\r\n  if (!element) return\r\n\r\n  element.scrollIntoViewIfNeeded(true)\r\n\r\n  element.classList.add('flash')\r\n  setTimeout(() => element!.classList.remove('flash'), 1000)\r\n})\r\n\r\nipcRenderer.on<'use-github-style'>('use-github-style', (_event, { value }) => {\r\n  const elem = document.querySelector('markdown-preview-plus-view')\r\n  if (!elem) throw new Error(`Can't find MPP-view`)\r\n  if (value) {\r\n    elem.setAttribute('data-use-github-style', '')\r\n  } else {\r\n    elem.removeAttribute('data-use-github-style')\r\n  }\r\n})\r\n\r\nlet updatePreview: UpdatePreview | undefined\r\n\r\nipcRenderer.on<'update-preview'>(\r\n  'update-preview',\r\n  (_event, { id, html, renderLaTeX, mjrenderer }) => {\r\n    // div.update-preview created after constructor st UpdatePreview cannot\r\n    // be instanced in the constructor\r\n    const preview = document.querySelector('div.update-preview')\r\n    if (!preview) return\r\n    if (!updatePreview) {\r\n      updatePreview = new UpdatePreview(preview as HTMLElement)\r\n    }\r\n    const parser = new DOMParser()\r\n    const domDocument = parser.parseFromString(html, 'text/html')\r\n    util.handlePromise(\r\n      updatePreview\r\n        .update(domDocument.body, renderLaTeX, mjrenderer)\r\n        .then(async () => {\r\n          ipcRenderer.sendToHost<'request-reply'>('request-reply', {\r\n            id,\r\n            request: 'update-preview',\r\n            result: await processHTMLString(preview),\r\n          })\r\n        }),\r\n    )\r\n    const doc = document\r\n    if (doc && domDocument.head.hasChildNodes) {\r\n      let container = doc.head.querySelector('original-elements')\r\n      if (!container) {\r\n        container = doc.createElement('original-elements')\r\n        doc.head.appendChild(container)\r\n      }\r\n      container.innerHTML = ''\r\n      for (const headElement of Array.from(domDocument.head.childNodes)) {\r\n        container.appendChild(headElement)\r\n      }\r\n    }\r\n  },\r\n)\r\n\r\nconst baseElement = document.createElement('base')\r\ndocument.head.appendChild(baseElement)\r\n\r\nipcRenderer.on<'set-base-path'>('set-base-path', (_evt, { path }) => {\r\n  if (path) baseElement.href = path\r\n  else baseElement.href = ''\r\n})\r\n\r\nipcRenderer.on<'error'>('error', (_evt, { msg }) => {\r\n  const preview = document.querySelector('div.update-preview')\r\n  if (!preview) return\r\n  const errorDiv = document.createElement('div')\r\n  errorDiv.innerHTML = `<h2>Previewing Markdown Failed</h2><h3>${msg}</h3>`\r\n  preview.appendChild(errorDiv)\r\n})\r\n\r\ndocument.addEventListener('mousewheel', (event) => {\r\n  if (event.ctrlKey) {\r\n    if (event.wheelDeltaY > 0) {\r\n      ipcRenderer.sendToHost<'zoom-in'>('zoom-in', undefined)\r\n    } else if (event.wheelDeltaY < 0) {\r\n      ipcRenderer.sendToHost<'zoom-out'>('zoom-out', undefined)\r\n    }\r\n    event.preventDefault()\r\n    event.stopPropagation()\r\n  }\r\n})\r\n\r\ndocument.addEventListener('scroll', (_event) => {\r\n  const el = document.documentElement\r\n  const height = el.clientHeight\r\n  const visible = Array.from(window.atomVars.sourceLineMap.entries())\r\n    .filter(([_line, elem]) => {\r\n      const { top, bottom } = elem.getBoundingClientRect()\r\n      return top > 0 && bottom < height\r\n    })\r\n    .map(([line, _elem]) => line)\r\n  ipcRenderer.sendToHost<'did-scroll-preview'>('did-scroll-preview', {\r\n    max: Math.max(...visible),\r\n    min: Math.min(...visible),\r\n  })\r\n})\r\n\r\nlet lastContextMenuTarget: HTMLElement\r\ndocument.addEventListener('contextmenu', (e) => {\r\n  lastContextMenuTarget = e.target as HTMLElement\r\n})\r\n\r\nipcRenderer.on<'sync-source'>('sync-source', (_, { id }) => {\r\n  let element = lastContextMenuTarget\r\n  const rsm = window.atomVars.revSourceMap\r\n  let lines = rsm.get(element)\r\n\r\n  while (!lines && element.parentElement) {\r\n    element = element.parentElement\r\n    lines = rsm.get(element)\r\n  }\r\n  if (!lines) return\r\n\r\n  ipcRenderer.sendToHost<'request-reply'>('request-reply', {\r\n    id,\r\n    request: 'sync-source',\r\n    result: Math.min(...lines),\r\n  })\r\n})\r\n\r\nipcRenderer.on<'reload'>('reload', (_, { id }) => {\r\n  window.onbeforeunload = null\r\n  ipcRenderer.sendToHost<'request-reply'>('request-reply', {\r\n    id,\r\n    request: 'reload',\r\n    result: undefined,\r\n  })\r\n})\r\n\r\nwindow.onbeforeunload = function() {\r\n  return false\r\n}\r\n\r\nipcRenderer.on<'get-tex-config'>('get-tex-config', async (_, { id }) => {\r\n  ipcRenderer.sendToHost<'request-reply'>('request-reply', {\r\n    id,\r\n    request: 'get-tex-config',\r\n    result: await jaxTeXConfig(),\r\n  })\r\n})\r\n"]}